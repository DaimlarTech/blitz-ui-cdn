var cl=Object.defineProperty;var dl=(ke,Me,je)=>Me in ke?cl(ke,Me,{enumerable:!0,configurable:!0,writable:!0,value:je}):ke[Me]=je;var ye=(ke,Me,je)=>(dl(ke,typeof Me!="symbol"?Me+"":Me,je),je),Ii=(ke,Me,je)=>{if(!Me.has(ke))throw TypeError("Cannot "+je)};var e=(ke,Me,je)=>(Ii(ke,Me,"read from private field"),je?je.call(ke):Me.get(ke)),x=(ke,Me,je)=>{if(Me.has(ke))throw TypeError("Cannot add the same private member more than once");Me instanceof WeakSet?Me.add(ke):Me.set(ke,je)},B=(ke,Me,je,Rs)=>(Ii(ke,Me,"write to private field"),Rs?Rs.call(ke,je):Me.set(ke,je),je);var As=(ke,Me,je,Rs)=>({set _(bi){B(ke,Me,bi,je)},get _(){return e(ke,Me,Rs)}}),O=(ke,Me,je)=>(Ii(ke,Me,"access private method"),je);(async()=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function l(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=l(s);fetch(s.href,i)}})();const ke=document.querySelectorAll(".navigation-drawer"),Me=document.querySelectorAll(".navigation-drawer__dialog"),je=document.querySelectorAll('[data-role="drawer"]');je.forEach(n=>n.addEventListener("click",Rs)),ke.forEach(n=>n.addEventListener("click",Rs)),Me.forEach(n=>n.addEventListener("click",l=>{l.stopPropagation()}));function Rs(){ke.forEach(n=>n.classList.toggle("drawer_show")),je.forEach(n=>n.classList.toggle("toggler_show"))}const bi=document.querySelectorAll(".drawer"),co=document.querySelectorAll('[data-role="drawer-toggler"]');bi.forEach(n=>{n.addEventListener("click",()=>{n.classList.remove("drawer_is_open")});const l=n.querySelector(".drawer__content");l&&l.addEventListener("click",t=>{t.stopPropagation()})}),co.forEach(n=>{n.addEventListener("click",()=>{const l=document.querySelector(n.dataset.target);l&&l.classList.toggle("drawer_is_open")})}),document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("agreement-box"),l=document.getElementById("agreement-check"),t=document.getElementById("agree_chk_id");if(t&&n){let s=function(r,a){let m;return function(...c){const o=()=>{clearTimeout(m),r(...c)};clearTimeout(m),m=setTimeout(o,a)}},i=function(){Math.abs(n.scrollHeight-n.clientHeight-n.scrollTop)<=1&&t.disabled&&(t.disabled=!1,l.classList.remove("check-disabled"),l.classList.add("check-enabled"),t.classList.add("check-enabled"))};t.disabled=!0,n.addEventListener("scroll",s(i,100)),window.addEventListener("load",i)}}),document.addEventListener("DOMContentLoaded",function(){const n="noantisocial",l="edelivery",t=document.getElementById("confirmButton");if(t){let s=function(){const r=document.getElementById(n).checked,a=document.getElementById(l).checked;t.disabled=!(r&&a)},i=function(r,a,m,c,o,h,_){const d=document.getElementById(r),f=document.getElementById(a),v=document.getElementById(m),b=document.getElementById(c),T=document.getElementById(o),K=document.getElementById(h),q=document.getElementById(_);b.disabled=!0,T.disabled=!0;function L(){let F=!(f.clientHeight<v.scrollHeight)||f.scrollHeight-f.scrollTop<=f.clientHeight+1;b.disabled=!F}d.addEventListener("shown.bs.modal",function(){L(),f.addEventListener("scroll",L)}),b.addEventListener("click",function(){this.disabled||(K.style.display="none",T.disabled=!1,q.classList.remove("check-disabled"),q.classList.add("check-enabled"),T.classList.remove("check-disabled"),T.classList.add("check-enabled"))}),T.addEventListener("change",s)};t.disabled=!0,i("noantisocialModal","noantisocialBox","noantisocialItem","noantisocialButton",n,"noantisocialText","noantisocialLabel"),i("edeliveryModal","edeliveryBox","edeliveryItem","edeliveryButton",l,"edeliveryText","edeliveryLabel"),s()}}),document.querySelectorAll('[data-role="zengin-input"]').forEach(n=>{n.addEventListener("blur",uo)});function uo(n){let l=n.target.value;if(l){const t=po(l);n.target.value=t}}function po(n){const l=/[^0-9A-Zｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝﾞﾟ\(\)｢｣\/\-\.\\ ]/g,t=["\uFF70","\uFF67","\uFF68","\uFF69","\uFF6A","\uFF6B","\uFF6F","\uFF6C","\uFF6D","\uFF6E","\uFF08","\uFF09"],s=["-","\uFF71","\uFF72","\uFF73","\uFF74","\uFF75","\uFF82","\uFF94","\uFF95","\uFF96","(",")"];let i;return i=n.toUpperCase(),i=fo(i,"khsa"),t.forEach((r,a)=>{i=i.replaceAll(r,s[a])}),i=i.replace(l,""),i}function fo(n,l){var t,s,i,r,a,m;if(t=["\uFF76\uFF9E","\uFF77\uFF9E","\uFF78\uFF9E","\uFF79\uFF9E","\uFF7A\uFF9E","\uFF7B\uFF9E","\uFF7C\uFF9E","\uFF7D\uFF9E","\uFF7E\uFF9E","\uFF7F\uFF9E","\uFF80\uFF9E","\uFF81\uFF9E","\uFF82\uFF9E","\uFF83\uFF9E","\uFF84\uFF9E","\uFF8A\uFF9E","\uFF8A\uFF9F","\uFF8B\uFF9E","\uFF8B\uFF9F","\uFF8C\uFF9E","\uFF8C\uFF9F","\uFF8D\uFF9E","\uFF8D\uFF9F","\uFF8E\uFF9E","\uFF8E\uFF9F","\uFF73\uFF9E","\uFF70","\uFF67","\uFF71","\uFF68","\uFF72","\uFF69","\uFF73","\uFF6A","\uFF74","\uFF6B","\uFF75","\uFF76","\uFF77","\uFF78","\uFF79","\uFF7A","\uFF7B","\uFF7C","\uFF7D","\uFF7E","\uFF7F","\uFF80","\uFF81","\uFF6F","\uFF82","\uFF83","\uFF84","\uFF85","\uFF86","\uFF87","\uFF88","\uFF89","\uFF8A","\uFF8B","\uFF8C","\uFF8D","\uFF8E","\uFF8F","\uFF90","\uFF91","\uFF92","\uFF93","\uFF6C","\uFF94","\uFF6D","\uFF95","\uFF6E","\uFF96","\uFF97","\uFF98","\uFF99","\uFF9A","\uFF9B","\uFF9C","\uFF66","\uFF9D","\uFF76","\uFF79","\uFF9C","\uFF72","\uFF74","\uFF9E","\uFF9F"],s=["\u30AC","\u30AE","\u30B0","\u30B2","\u30B4","\u30B6","\u30B8","\u30BA","\u30BC","\u30BE","\u30C0","\u30C2","\u30C5","\u30C7","\u30C9","\u30D0","\u30D1","\u30D3","\u30D4","\u30D6","\u30D7","\u30D9","\u30DA","\u30DC","\u30DD","\u30F4","\u30FC","\u30A1","\u30A2","\u30A3","\u30A4","\u30A5","\u30A6","\u30A7","\u30A8","\u30A9","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C3","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E3","\u30E4","\u30E5","\u30E6","\u30E7","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F2","\u30F3","\u30F5","\u30F6","\u30EE","\u30F0","\u30F1","\u309B","\u309C"],i=["\u304C","\u304E","\u3050","\u3052","\u3054","\u3056","\u3058","\u305A","\u305C","\u305E","\u3060","\u3062","\u3065","\u3067","\u3069","\u3070","\u3071","\u3073","\u3074","\u3076","\u3077","\u3079","\u307A","\u307C","\u307D","\u30F4","\u30FC","\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3063","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3092","\u3093","\u304B","\u3051","\u308E","\u3090","\u3091","\u309B","\u309C"],r=t.length,l.match(/[ra]/)&&(n=n.replace(/[Ａ-ｚ]/g,function(c){return String.fromCharCode(parseInt(c.charCodeAt(0))-65248)})),l.match(/[RA]/)&&(n=n.replace(/[A-z]/g,function(c){return String.fromCharCode(parseInt(c.charCodeAt(0))+65248)})),l.match(/[na]/)&&(n=n.replace(/[０-９]/g,function(c){return String.fromCharCode(parseInt(c.charCodeAt(0))-65248)})),l.match(/[NA]/)&&(n=n.replace(/[0-9]/g,function(c){return String.fromCharCode(parseInt(c.charCodeAt(0))+65248)})),l.match(/s/)&&(n=n.replace(/　/g," ")),l.match(/S/)&&(n=n.replace(/ /g,"\u3000")),l.match(/k/))for(a=0;a<r;a++)m=new RegExp(s[a],"g"),n=n.replace(m,t[a]);if(l.match(/K/))for(l.match(/V/)||(n=n.replace(/ﾞ/g,"\u309B"),n=n.replace(/ﾟ/g,"\u309C")),a=0;a<r;a++)m=new RegExp(t[a],"g"),n=n.replace(m,s[a]);if(l.match(/h/))for(a=0;a<r;a++)m=new RegExp(i[a],"g"),n=n.replace(m,t[a]);if(l.match(/H/))for(l.match(/V/)||(n=n.replace(/ﾞ/g,"\u309B"),n=n.replace(/ﾟ/g,"\u309C")),a=0;a<r;a++)m=new RegExp(t[a],"g"),n=n.replace(m,i[a]);if(l.match(/c/))for(a=0;a<r;a++)m=new RegExp(s[a],"g"),n=n.replace(m,i[a]);if(l.match(/C/))for(a=0;a<r;a++)m=new RegExp(i[a],"g"),n=n.replace(m,s[a]);return n}document.querySelectorAll('[data-role="toggle-input--btn"]').forEach(n=>{n.addEventListener("click",l=>{const t=l.target.dataset.group;document.querySelectorAll(`[data-group="${t}"][data-role="toggle-input--value"], [data-group="${t}"][data-role="toggle-input--input"]`).forEach(s=>{s.classList.toggle("toggle-input_show")})})});const go=document.querySelectorAll('[data-role="resize"]');window.addEventListener("load",()=>{go.forEach(n=>{const l=n.dataset.field,t=document.querySelector(`[name="uploadFilesBlock${l}"]`),s=document.querySelector(`input[name='selectFiles${l}']`),i=document.createElement("div"),r=document.createElement("div"),a=document.querySelector(`[data-role="display-upload-image"][data-target="display-${l}"]`),m=document.querySelector(`[name="fileInfoBlock${l}"]`),c=document.createElement("div"),o=document.createElement("input"),h=document.createElement("p"),_=document.createElement("button");if(o.setAttribute("type","file"),o.style.display="none",o.addEventListener("change",d=>{const f=d.target.files[0];Tr(f,s,a)}),r.appendChild(i),r.classList.add("coverDiv"),r.addEventListener("dragstart",d=>{d.dataTransfer.clearData(),wi(d)}),r.addEventListener("dragover",d=>{wi(d)}),r.addEventListener("dragleave",d=>{}),r.addEventListener("drop",d=>{wi(d);const f=d.target.files||d.dataTransfer.files;f.length>0&&Tr(f[0],s,a)}),i.appendChild(c),i.classList.add("sp-flex-align-center","sp-flex-content-center","sp-flex","sp-from-file-default-drag-drop-area"),i.addEventListener("dragover",d=>{i.classList.remove("sp-from-file-ondragleave-drag-drop-area"),i.classList.remove("sp-from-file-ondrop-drag-drop-area"),i.classList.add("sp-from-file-ondraghover-drag-drop-area")}),i.addEventListener("dragleave",d=>{i.classList.add("sp-from-file-ondragleave-drag-drop-area"),i.classList.remove("sp-from-file-ondrop-drag-drop-area"),i.classList.remove("sp-from-file-ondraghover-drag-drop-area")}),i.addEventListener("drop",d=>{i.classList.remove("sp-from-file-ondragleave-drag-drop-area"),i.classList.add("sp-from-file-ondrop-drag-drop-area"),i.classList.remove("sp-from-file-ondraghover-drag-drop-area")}),c.appendChild(h),c.appendChild(_),c.appendChild(o),h.textContent="\u3053\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",h.classList.add("small"),_.type="button",_.textContent="\u30D5\u30A1\u30A4\u30EB\u53C2\u7167",_.classList.add("sp-form-file-button"),_.addEventListener("click",()=>o.click()),o.accept=".jpg,.png,.jpeg,.webp",t.style.position="relative",t.appendChild(r),m){const d=m.querySelector('i[name="removeFileInfo"]');d&&d.addEventListener("click",()=>a.innerHTML=null);const f=(v=[],b=void 0)=>{let T;for(const K of v){if(T)break;for(const q of K.addedNodes)q.nodeType===Node.ELEMENT_NODE&&(T=q.querySelector('i[name="removeFileInfo"]'))}T&&T.addEventListener("click",()=>a.innerHTML=null),console.log(T)};new MutationObserver(f).observe(m,{childList:!0,subtree:!0})}})});const mo=/^(image\/jpg|image\/jpeg|image\/png|image\/webp)$/,vo=256;async function Tr(n,l,t){if(!l)throw new Error("spiral input not found");const s=yo(n),i=await Ao(n),r=s?i.file:n,a=new DataTransfer;if(a.items.add(r),l.files=a.files,l.dispatchEvent(new Event("change")),t&&s){t.innerHTML=null;const m=document.createElement("img");m.addEventListener("load",()=>{t.appendChild(m)}),m.src=i.url}}function yo(n){return!(!n.type.match(mo)||n.name>vo)}function Ao(n){const l=n.name.split(".").slice(0,-1).join(".");let t=new FileReader;return new Promise((s,i)=>{t.onload=async()=>{const r=t.result,a=await bo(r),m=await(await fetch(a)).blob();s({file:new File([m],`${l}.jpeg`,{type:"image/jpeg"}),url:a})},t.readAsDataURL(n)})}async function bo(n){const l=await new Promise((r,a)=>{const m=new Image;m.onload=()=>{r(m)},m.onerror=()=>{a()},m.src=n}),t=document.createElement("canvas");let s=l.naturalWidth,i=l.naturalHeight;for(;s*i>5e5;)s/=10,i/=10;return t.width=s,t.height=i,t.getContext("2d").drawImage(l,0,0,s,i),t.toDataURL("image/jpeg")}function wi(n){n.stopPropagation(),n.preventDefault()}const Lr=document.querySelector('[data-role="zip-search_input"]'),Nn=document.querySelector('[data-role="zip-search_btn"'),Rr=document.querySelector("#prefecture"),wo=document.querySelector("#city"),_o=document.querySelector("#street"),Eo=document.querySelector("#js-zip_error"),xo="https://api.zipaddress.net/";var _i="",On="";Lr&&Nn&&(Lr.addEventListener("input",Co),Nn.addEventListener("click",To));async function So(){const n=`${xo}?zipcode=${_i}`;return fetch(n).then(l=>l.json()).then(l=>l.code!==200?{data:l.message,error:!0}:{data:l.data,error:!1})}function Co(n){const l=n.target.value;Nn.disabled=!0,On="",l.length===7?(_i=l,Nn.disabled=!1):l.length!=0&&(On="7\u6841\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),kr()}async function To(n){var l;if(_i.length===7){const t=await So();if(t.error){On=t.data,kr();return}n.target.dataset.type==="text"?Rr.value=t.data.pref:Rr.value=Ei[l=t.data.pref]??(Ei[l]=""),wo.value=t.data.city,_o.value=t.data.town}}function kr(){Eo.textContent=On}const Ei={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47};document.querySelectorAll(".searh-dropdown").forEach(n=>{const l=n.querySelector("button"),t=n.querySelector(".search-dropdown__list"),s=n.querySelector(".search-dropdown__input"),i=n.querySelector(".search-dropdown__items"),r=n.querySelectorAll(".search-dropdown__items>li"),a=n.querySelector(".search-dropdown__back"),m=Array.from(r).map(h=>h);l.addEventListener("click",()=>{const{bottom:h,left:_}=n.getBoundingClientRect();t.style.left=`${_}px`,t.style.top=`${h+4}px`,c()}),a.addEventListener("click",()=>{c()}),t.addEventListener("click",h=>{h.stopPropagation()}),s.addEventListener("input",h=>{let _=m;if(i.replaceChildren(),h.target.value.length>0&&(_=_.filter(d=>new RegExp(h.target.value).test(d.textContent)).map(d=>d)),_.length===0){const d=document.createElement("li");d.textContent="items not found",i.appendChild(d)}_.forEach(d=>{const f=document.createElement("li");f.innerHTML=d.innerHTML,f.addEventListener("click",o),i.appendChild(f)})}),r.forEach(h=>h.addEventListener("click",o));function c(){t.classList.toggle("search-dropdown__list_show"),l.classList.toggle("searh-dropdown__btn_active")}function o(h){l.textContent=h.target.textContent,c()}});const Lo=document.querySelectorAll('[data-role="open-menus"]'),Mr=document.querySelectorAll('[data-role="menus"]');Lo.forEach(n=>{n.addEventListener("mouseenter",()=>{Mr.forEach(l=>{l.classList.add("is-visible")})}),n.addEventListener("mouseleave",()=>{Mr.forEach(l=>{l.classList.remove("is-visible")})})});const Ro=document.getElementById("js-dialog-area"),ko=document.querySelectorAll('[data-role="dialog-dismiss"]'),Mo=document.querySelectorAll('[data-role="dialog-toggler"]'),Ir=document.querySelectorAll(".dialog"),Io=document.querySelectorAll(".dialog__container"),an="dialog_is_open",Pr="dialog_close_hard";Fo(),Ir.forEach(n=>{document.getElementById("js-dialog-area").appendChild(n),n.classList.contains(Pr)||n.addEventListener("click",Dr)}),Mo.forEach(n=>{n.addEventListener("click",Po)}),ko.forEach(n=>{n.addEventListener("click",Dr)}),Io.forEach(n=>n.addEventListener("click",Do)),window.addEventListener("keydown",n=>{n.key==="Escape"&&document.querySelectorAll(`.${an}:not(.${Pr})`).forEach(l=>l.classList.remove(an))});function Po(){document.querySelector(this.dataset.target).classList.toggle(an)}function Dr(){document.querySelectorAll(`.${an}`).forEach(n=>n.classList.remove(an))}function Do(n){n.stopPropagation()}function Fo(){if(!Ro&&Ir.length>0){const n=document.createElement("div");n.setAttribute("id","js-dialog-area"),n.style.zIndex="100",n.style.position="relative",document.body.appendChild(n)}}const No=document.querySelectorAll(".format_num"),Oo=document.querySelectorAll(".format_date"),Ho=document.querySelectorAll(".format_datetime"),jo=document.querySelectorAll(".format_datetime_second"),Uo=document.querySelectorAll(".format_month_date"),Bo=document.querySelectorAll(".format_post_code"),zo="format_area",qo="format_rate",$e="--",$o={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};No.forEach(n=>{if(n.textContent&&n.textContent!==$e){let l;(n.classList.contains(zo)||n.classList.contains(qo))&&(l={minimumFractionDigits:2});const t=Number(n.textContent).toLocaleString(void 0,l);n.innerHTML=isNaN(parseFloat(n.textContent))?n.textContent:t}}),Oo.forEach(n=>{if(n.textContent&&n.textContent!==$e){let l=n.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");n.innerHTML=`<span class="format format_unit" data-format="\u5E74">${l[0]??(l[0]=$e)}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u6708">${l[1]??(l[1]=$e)}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${l[2]??(l[2]=$e)}</span>`}}),Ho.forEach(n=>{if(n.textContent&&n.textContent!==$e){let l=new Date(n.textContent);l!="Invalid Date"?(n.innerHTML=`<span class="format format_unit" data-format="\u5E74">${l.getFullYear()}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u6708">${l.getMonth()+1}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${l.getDate()}</span> `,n.innerHTML+=` ${l.getHours()}:${l.getMinutes()<10?"0":""}${l.getMinutes()}`):(n.innerHTML=`<span class="format format_unit" data-format="\u5E74">${$e}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u6708">${$e}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${$e}</span>`,n.innerHTML+=`${$e}`)}}),jo.forEach(n=>{if(n.textContent&&n.textContent!==$e){const l=new Date(n.textContent).toLocaleDateString("ja-JP",$o);let[t,s]=l.replaceAll(`
`,"").split(" ");t=t.split("/"),n.innerHTML=`<span class="format format_unit" data-format="\u5E74">${t[0]??(t[0]=$e)}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u6708">${t[1]??(t[1]=$e)}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${t[2]??(t[2]=$e)}</span>`,s=s.split(":"),n.innerHTML+=` <span class="format format_unit" data-format="\u6642">${s[0]??(s[0]=$e)}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u5206">${s[1]??(s[1]=$e)}</span>`}}),Uo.forEach(n=>{if(n.textContent&&n.textContent!==$e){let l=n.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");n.innerHTML=`<span class="format format_unit" data-format="\u6708">${l[0]??(l[0]=$e)}</span> `,n.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${l[1]??(l[1]=$e)}</span>`}}),Bo.forEach(n=>{if(n.textContent&&n.textContent.length===7){let l=n.textContent.replaceAll(`
`,"").replaceAll(" ","");n.textContent=`\u3012 ${l.substring(0,4)}-${l.substring(4)}`}}),document.querySelectorAll(".password__toggler").forEach(n=>n.addEventListener("click",Vo));function Vo(){const n=document.querySelector(this.dataset.target);n.type=n.type==="password"?"text":"password"}document.querySelectorAll('[data-role="dropdown"]').forEach(n=>{const l=n.querySelector("button"),t=n.querySelector(".dropdown__content"),s=n.querySelector(".dropdown__list-wrapper"),i=n.querySelector(".dropdown__list"),r=n.querySelector(".dropdown__input"),a=n.querySelectorAll(".dropdown__list-item"),m=Array.from(a).map(f=>f),c=n.classList.contains("dropdown_type_right");t.addEventListener("click",h);const o=()=>{const{bottom:f,left:v,right:b}=l.getBoundingClientRect();c?s.style.left=`${b-s.offsetWidth}px`:s.style.left=`${v}px`,s.style.top=`${f+4}px`};l.addEventListener("click",()=>{o(),_()}),s.addEventListener("click",f=>{f.stopPropagation()}),r&&n.classList.contains("dropdown_search")&&(l.dataset.value,r.addEventListener("input",f=>{let v=m;if(i.replaceChildren(),f.target.value.length>0&&(v=v.filter(b=>new RegExp(f.target.value).test(b.textContent)).map(b=>b)),v.length===0){const b=document.createElement("li");b.classList.add("dropdown__list-item","dropdown__list-item_no-item"),b.textContent="items not found",i.appendChild(b)}v.forEach(b=>{const T=document.createElement("li");T.innerHTML=b.innerHTML,T.classList.add("dropdown__list-item"),T.addEventListener("click",d),i.appendChild(T)})}),a.forEach(f=>f.addEventListener("click",d)));function h(){n.classList.remove("dropdown_is_open"),l.classList.remove("dropdown__btn_is_active"),o&&window.removeEventListener("scroll",o)}function _(){n.classList.toggle("dropdown_is_open"),l.classList.toggle("dropdown__btn_is_active"),l.classList.contains("dropdown__btn_is_active")?window.addEventListener("scroll",o):window.removeEventListener("scroll",o)}function d(f){l.textContent=f.target.textContent,l.dataset.value=f.target.textContent,_()}});const xi="toggle-section__button_is_active",Si="toggle-section__item_is_show";document.querySelectorAll('[data-role="toggle-section"]').forEach(n=>{n.querySelectorAll("button").forEach(l=>l.addEventListener("click",()=>{document.querySelector(`button.${xi}`).classList.remove(xi),l.classList.add(xi);const t=document.querySelector(l.dataset.target),s=document.querySelector(`.${Si}`);t&&s&&(s.classList.remove(Si),t.classList.add(Si))}))});var Us=function(){return Us=Object.assign||function(n){for(var l,t=1,s=arguments.length;t<s;t++)for(var i in l=arguments[t])Object.prototype.hasOwnProperty.call(l,i)&&(n[i]=l[i]);return n},Us.apply(this,arguments)};function Fr(n,l,t){if(t||arguments.length===2)for(var s,i=0,r=l.length;i<r;i++)!s&&i in l||(s||(s=Array.prototype.slice.call(l,0,i)),s[i]=l[i]);return n.concat(s||Array.prototype.slice.call(l))}function Nr(n){return Array.prototype.slice.call(n)}function Or(n,l){var t=Math.floor(n);return t===l||t+1===l?n:l}function Hr(){return Date.now()}function Ci(n,l,t){if(l="data-keen-slider-"+l,t===null)return n.removeAttribute(l);n.setAttribute(l,t||"")}function Hn(n,l){return l=l||document,typeof n=="function"&&(n=n(l)),Array.isArray(n)?n:typeof n=="string"?Nr(l.querySelectorAll(n)):n instanceof HTMLElement?[n]:n instanceof NodeList?Nr(n):[]}function on(n){n.raw&&(n=n.raw),n.cancelable&&!n.defaultPrevented&&n.preventDefault()}function ln(n){n.raw&&(n=n.raw),n.stopPropagation&&n.stopPropagation()}function jr(){var n=[];return{add:function(l,t,s,i){l.addListener?l.addListener(s):l.addEventListener(t,s,i),n.push([l,t,s,i])},input:function(l,t,s,i){this.add(l,t,function(r){return function(a){a.nativeEvent&&(a=a.nativeEvent);var m=a.changedTouches||[],c=a.targetTouches||[],o=a.detail&&a.detail.x?a.detail:null;return r({id:o?o.identifier?o.identifier:"i":c[0]?c[0]?c[0].identifier:"e":"d",idChanged:o?o.identifier?o.identifier:"i":m[0]?m[0]?m[0].identifier:"e":"d",raw:a,x:o&&o.x?o.x:c[0]?c[0].screenX:o?o.x:a.pageX,y:o&&o.y?o.y:c[0]?c[0].screenY:o?o.y:a.pageY})}}(s),i)},purge:function(){n.forEach(function(l){l[0].removeListener?l[0].removeListener(l[2]):l[0].removeEventListener(l[1],l[2],l[3])}),n=[]}}}function Ti(n,l,t){return Math.min(Math.max(n,l),t)}function rs(n){return(n>0?1:0)-(n<0?1:0)||+n}function Ur(n){var l=n.getBoundingClientRect();return{height:Or(l.height,n.offsetHeight),width:Or(l.width,n.offsetWidth)}}function Je(n,l,t,s){var i=n&&n[l];return i==null?t:s&&typeof i=="function"?i():i}function is(n){return Math.round(1e6*n)/1e6}function Go(n){var l,t,s,i,r,a;function m(d){a||(a=d),c(!0);var f=d-a;f>s&&(f=s);var v=i[t];if(v[3]<f)return t++,m(d);var b=v[2],T=v[4],K=v[0],q=v[1]*(0,v[5])(T===0?1:(f-b)/T);if(q&&n.track.to(K+q),f<s)return h();a=null,c(!1),o(null),n.emit("animationEnded")}function c(d){l.active=d}function o(d){l.targetIdx=d}function h(){var d;d=m,r=window.requestAnimationFrame(d)}function _(){var d;d=r,window.cancelAnimationFrame(d),c(!1),o(null),a&&n.emit("animationStopped"),a=null}return l={active:!1,start:function(d){if(_(),n.track.details){var f=0,v=n.track.details.position;t=0,s=0,i=d.map(function(b){var T,K=Number(v),q=(T=b.earlyExit)!==null&&T!==void 0?T:b.duration,L=b.easing,F=b.distance*L(q/b.duration)||0;v+=F;var M=s;return s+=q,f+=F,[K,b.distance,M,s,b.duration,L]}),o(n.track.distToIdx(f)),h(),n.emit("animationStarted")}},stop:_,targetIdx:null}}function Wo(n){var l,t,s,i,r,a,m,c,o,h,_,d,f,v,b=1/0,T=[],K=null,q=0;function L(ot){Nt(q+ot)}function F(ot){var ft=M(q+ot).abs;return J(ft)?ft:null}function M(ot){var ft=Math.floor(Math.abs(is(ot/t))),gt=is((ot%t+t)%t);gt===t&&(gt=0);var Q=rs(ot),at=m.indexOf(Fr([],m,!0).reduce(function(Dt,Gt){return Math.abs(Gt-gt)<Math.abs(Dt-gt)?Gt:Dt})),Rt=at;return Q<0&&ft++,at===a&&(Rt=0,ft+=Q>0?1:-1),{abs:Rt+ft*a*Q,origin:at,rel:Rt}}function G(ot,ft,gt){var Q;if(ft||!Lt())return $(ot,gt);if(!J(ot))return null;var at=M(gt??q),Rt=at.abs,Dt=ot-at.rel,Gt=Rt+Dt;Q=$(Gt);var Qt=$(Gt-a*rs(Dt));return(Qt!==null&&Math.abs(Qt)<Math.abs(Q)||Q===null)&&(Q=Qt),is(Q)}function $(ot,ft){if(ft==null&&(ft=is(q)),!J(ot)||ot===null)return null;ot=Math.round(ot);var gt=M(ft),Q=gt.abs,at=gt.rel,Rt=gt.origin,Dt=At(ot),Gt=(ft%t+t)%t,Qt=m[Rt],ae=Math.floor((ot-(Q-at))/a)*t;return is(Qt-Gt-Qt+m[Dt]+ae+(Rt===a?t:0))}function J(ot){return tt(ot)===ot}function tt(ot){return Ti(ot,o,h)}function Lt(){return i.loop}function At(ot){return(ot%a+a)%a}function Nt(ot){var ft;ft=ot-q,T.push({distance:ft,timestamp:Hr()}),T.length>6&&(T=T.slice(-6)),q=is(ot);var gt=pt().abs;if(gt!==K){var Q=K!==null;K=gt,Q&&n.emit("slideChanged")}}function pt(ot){var ft=ot?null:function(){if(a){var gt=Lt(),Q=gt?(q%t+t)%t:q,at=(gt?q%t:q)-r[0][2],Rt=0-(at<0&&gt?t-Math.abs(at):at),Dt=0,Gt=M(q),Qt=Gt.abs,ae=Gt.rel,be=r[ae][2],me=r.map(function(Ut,It){var St=Rt+Dt;(St<0-Ut[0]||St>1)&&(St+=(Math.abs(St)>t-1&&gt?t:0)*rs(-St));var $t=It-ae,he=rs($t),jt=$t+Qt;gt&&(he===-1&&St>be&&(jt+=a),he===1&&St<be&&(jt-=a),_!==null&&jt<_&&(St+=t),d!==null&&jt>d&&(St-=t));var le=St+Ut[0]+Ut[1],Xt=Math.max(St>=0&&le<=1?1:le<0||St>1?0:St<0?Math.min(1,(Ut[0]+St)/Ut[0]):(1-St)/Ut[0],0);return Dt+=Ut[0]+Ut[1],{abs:jt,distance:i.rtl?-1*St+1-Ut[0]:St,portion:Xt,size:Ut[0]}});return Qt=tt(Qt),ae=At(Qt),{abs:tt(Qt),length:s,max:v,maxIdx:h,min:f,minIdx:o,position:q,progress:gt?Q/t:q/s,rel:ae,slides:me,slidesLength:t}}}();return l.details=ft,n.emit("detailsChanged"),ft}return l={absToRel:At,add:L,details:null,distToIdx:F,idxToDist:G,init:function(ot){if(function(){if(i=n.options,r=(i.trackConfig||[]).map(function(at){return[Je(at,"size",1),Je(at,"spacing",0),Je(at,"origin",0)]}),a=r.length){t=is(r.reduce(function(at,Rt){return at+Rt[0]+Rt[1]},0));var gt,Q=a-1;s=is(t+r[0][2]-r[Q][0]-r[Q][2]-r[Q][1]),m=r.reduce(function(at,Rt){if(!at)return[0];var Dt=r[at.length-1],Gt=at[at.length-1]+(Dt[0]+Dt[2])+Dt[1];return Gt-=Rt[2],at[at.length-1]>Gt&&(Gt=at[at.length-1]),Gt=is(Gt),at.push(Gt),(!gt||gt<Gt)&&(c=at.length-1),gt=Gt,at},null),s===0&&(c=0),m.push(is(t))}}(),!a)return pt(!0);var ft;(function(){var gt=n.options.range,Q=n.options.loop;_=o=Q?Je(Q,"min",-1/0):0,d=h=Q?Je(Q,"max",b):c;var at=Je(gt,"min",null),Rt=Je(gt,"max",null);at!==null&&(o=at),Rt!==null&&(h=Rt),f=o===-1/0?o:n.track.idxToDist(o||0,!0,0),v=h===b?h:G(h,!0,0),Rt===null&&(d=h),Je(gt,"align",!1)&&h!==b&&r[At(h)][2]===0&&(v-=1-r[At(h)][0],h=F(v-q)),f=is(f),v=is(v)})(),ft=ot,Number(ft)===ft?L($(tt(ot))):pt()},to:Nt,velocity:function(){var ot=Hr(),ft=T.reduce(function(gt,Q){var at=Q.distance,Rt=Q.timestamp;return ot-Rt>200||(rs(at)!==rs(gt.distance)&&gt.distance&&(gt={distance:0,lastTimestamp:0,time:0}),gt.time&&(gt.distance+=at),gt.lastTimestamp&&(gt.time+=Rt-gt.lastTimestamp),gt.lastTimestamp=Rt),gt},{distance:0,lastTimestamp:0,time:0});return ft.distance/ft.time||0}}}function Xo(n){var l,t,s,i,r,a,m,c;function o(K){return 2*K}function h(K){return Ti(K,m,c)}function _(K){return 1-Math.pow(1-K,3)}function d(){return s?n.track.velocity():0}function f(){T();var K=n.options.mode==="free-snap",q=n.track,L=d();i=rs(L);var F=n.track.details,M=[];if(L||!K){var G=v(L),$=G.dist,J=G.dur;if(J=o(J),$*=i,K){var tt=q.idxToDist(q.distToIdx($),!0);tt&&($=tt)}M.push({distance:$,duration:J,easing:_});var Lt=F.position,At=Lt+$;if(At<r||At>a){var Nt=At<r?r-Lt:a-Lt,pt=0,ot=L;if(rs(Nt)===i){var ft=Math.min(Math.abs(Nt)/Math.abs($),1),gt=function(Rt){return 1-Math.pow(1-Rt,1/3)}(ft)*J;M[0].earlyExit=gt,ot=L*(1-ft)}else M[0].earlyExit=0,pt+=Nt;var Q=v(ot,100),at=Q.dist*i;n.options.rubberband&&(M.push({distance:at,duration:o(Q.dur),easing:_}),M.push({distance:-at+pt,duration:500,easing:_}))}n.animator.start(M)}else n.moveToIdx(h(F.abs),!0,{duration:500,easing:function(Rt){return 1+--Rt*Rt*Rt*Rt*Rt}})}function v(K,q){q===void 0&&(q=1e3);var L=147e-9+(K=Math.abs(K))/q;return{dist:Math.pow(K,2)/L,dur:K/L}}function b(){var K=n.track.details;K&&(r=K.min,a=K.max,m=K.minIdx,c=K.maxIdx)}function T(){n.animator.stop()}n.on("updated",b),n.on("optionsChanged",b),n.on("created",b),n.on("dragStarted",function(){s=!1,T(),l=t=n.track.details.abs}),n.on("dragChecked",function(){s=!0}),n.on("dragEnded",function(){var K=n.options.mode;K==="snap"&&function(){var q=n.track,L=n.track.details,F=L.position,M=rs(d());(F>a||F<r)&&(M=0);var G=l+M;L.slides[q.absToRel(G)].portion===0&&(G-=M),l!==t&&(G=t),rs(q.idxToDist(G,!0))!==M&&(G+=M),G=h(G);var $=q.idxToDist(G,!0);n.animator.start([{distance:$,duration:500,easing:function(J){return 1+--J*J*J*J*J}}])}(),K!=="free"&&K!=="free-snap"||f()}),n.on("dragged",function(){t=n.track.details.abs})}function Yo(n){var l,t,s,i,r,a,m,c,o,h,_,d,f,v,b,T,K,q,L=jr();function F(pt){if(a&&c===pt.id){var ot=J(pt);if(o){if(!$(pt))return G(pt);h=ot,o=!1,n.emit("dragChecked")}if(T)return h=ot;on(pt);var ft=function(Q){if(K===-1/0&&q===1/0)return Q;var at=n.track.details,Rt=at.length,Dt=at.position,Gt=Ti(Q,K-Dt,q-Dt);if(Rt===0)return 0;if(!n.options.rubberband)return Gt;if(Dt<=q&&Dt>=K||Dt<K&&t>0||Dt>q&&t<0)return Q;var Qt=(Dt<K?Dt-K:Dt-q)/Rt,ae=i*Rt,be=Math.abs(Qt*ae),me=Math.max(0,1-be/r*2);return me*me*Q}(m(h-ot)/i*s);t=rs(ft);var gt=n.track.details.position;(gt>K&&gt<q||gt===K&&t>0||gt===q&&t<0)&&ln(pt),_+=ft,!d&&Math.abs(_*i)>5&&(d=!0),n.track.add(ft),h=ot,n.emit("dragged")}}function M(pt){!a&&n.track.details&&n.track.details.length&&(_=0,a=!0,d=!1,o=!0,c=pt.id,$(pt),h=J(pt),n.emit("dragStarted"))}function G(pt){a&&c===pt.idChanged&&(a=!1,n.emit("dragEnded"))}function $(pt){var ot=tt(),ft=ot?pt.y:pt.x,gt=ot?pt.x:pt.y,Q=f!==void 0&&v!==void 0&&Math.abs(v-gt)<=Math.abs(f-ft);return f=ft,v=gt,Q}function J(pt){return tt()?pt.y:pt.x}function tt(){return n.options.vertical}function Lt(){i=n.size,r=tt()?window.innerHeight:window.innerWidth;var pt=n.track.details;pt&&(K=pt.min,q=pt.max)}function At(pt){d&&(ln(pt),on(pt))}function Nt(){if(L.purge(),n.options.drag&&!n.options.disabled){var pt;pt=n.options.dragSpeed||1,m=typeof pt=="function"?pt:function(ft){return ft*pt},s=n.options.rtl?-1:1,Lt(),l=n.container,function(){var ft="data-keen-slider-clickable";Hn("[".concat(ft,"]:not([").concat(ft,"=false])"),l).map(function(gt){L.add(gt,"dragstart",ln),L.add(gt,"mousedown",ln),L.add(gt,"touchstart",ln)})}(),L.add(l,"dragstart",function(ft){on(ft)}),L.add(l,"click",At,{capture:!0}),L.input(l,"ksDragStart",M),L.input(l,"ksDrag",F),L.input(l,"ksDragEnd",G),L.input(l,"mousedown",M),L.input(l,"mousemove",F),L.input(l,"mouseleave",G),L.input(l,"mouseup",G),L.input(l,"touchstart",M,{passive:!0}),L.input(l,"touchmove",F,{passive:!1}),L.input(l,"touchend",G),L.input(l,"touchcancel",G),L.add(window,"wheel",function(ft){a&&on(ft)});var ot="data-keen-slider-scrollable";Hn("[".concat(ot,"]:not([").concat(ot,"=false])"),n.container).map(function(ft){return function(gt){var Q;L.input(gt,"touchstart",function(at){Q=J(at),T=!0,b=!0},{passive:!0}),L.input(gt,"touchmove",function(at){var Rt=tt(),Dt=Rt?gt.scrollHeight-gt.clientHeight:gt.scrollWidth-gt.clientWidth,Gt=Q-J(at),Qt=Rt?gt.scrollTop:gt.scrollLeft,ae=Rt&&gt.style.overflowY==="scroll"||!Rt&&gt.style.overflowX==="scroll";if(Q=J(at),(Gt<0&&Qt>0||Gt>0&&Qt<Dt)&&b&&ae)return T=!0;b=!1,on(at),T=!1}),L.input(gt,"touchend",function(){T=!1})}(ft)})}}n.on("updated",Lt),n.on("optionsChanged",Nt),n.on("created",Nt),n.on("destroyed",L.purge)}function Ko(n){var l,t,s=null;function i(f,v,b){n.animator.active?a(f,v,b):requestAnimationFrame(function(){return a(f,v,b)})}function r(){i(!1,!1,t)}function a(f,v,b){var T=0,K=n.size,q=n.track.details;if(q&&l){var L=q.slides;l.forEach(function(F,M){if(f)!s&&v&&c(F,null,b),o(F,null,b);else{if(!L[M])return;var G=L[M].size*K;!s&&v&&c(F,G,b),o(F,L[M].distance*K-T,b),T+=G}})}}function m(f){return n.options.renderMode==="performance"?Math.round(f):f}function c(f,v,b){var T=b?"height":"width";v!==null&&(v=m(v)+"px"),f.style["min-"+T]=v,f.style["max-"+T]=v}function o(f,v,b){if(v!==null){v=m(v);var T=b?v:0;v="translate3d(".concat(b?0:v,"px, ").concat(T,"px, 0)")}f.style.transform=v,f.style["-webkit-transform"]=v}function h(){l&&(a(!0,!0,t),l=null),n.on("detailsChanged",r,!0)}function _(){i(!1,!0,t)}function d(){h(),t=n.options.vertical,n.options.disabled||n.options.renderMode==="custom"||(s=Je(n.options.slides,"perView",null)==="auto",n.on("detailsChanged",r),(l=n.slides).length&&_())}n.on("created",d),n.on("optionsChanged",d),n.on("beforeOptionsChanged",function(){h()}),n.on("updated",_),n.on("destroyed",h)}function Jo(n,l){return function(t){var s,i,r,a,m,c=jr();function o($){var J;Ci(t.container,"reverse",(J=t.container,window.getComputedStyle(J,null).getPropertyValue("direction")!=="rtl"||$?null:"")),Ci(t.container,"v",t.options.vertical&&!$?"":null),Ci(t.container,"disabled",t.options.disabled&&!$?"":null)}function h(){_()&&T()}function _(){var $=null;if(a.forEach(function(tt){tt.matches&&($=tt.__media)}),$===s)return!1;s||t.emit("beforeOptionsChanged"),s=$;var J=$?r.breakpoints[$]:r;return t.options=Us(Us({},r),J),o(),M(),G(),q(),!0}function d($){var J=Ur($);return(t.options.vertical?J.height:J.width)/t.size||1}function f(){return t.options.trackConfig.length}function v($){for(var J in s=!1,r=Us(Us({},l),$),c.purge(),i=t.size,a=[],r.breakpoints||[]){var tt=window.matchMedia(J);tt.__media=J,a.push(tt),c.add(tt,"change",h)}c.add(window,"orientationchange",F),c.add(window,"resize",L),_()}function b($){t.animator.stop();var J=t.track.details;t.track.init($??(J?J.abs:0))}function T($){b($),t.emit("optionsChanged")}function K($,J){if($)return v($),void T(J);M(),G();var tt=f();q(),f()!==tt?T(J):b(J),t.emit("updated")}function q(){var $=t.options.slides;if(typeof $=="function")return t.options.trackConfig=$(t.size,t.slides);for(var J=t.slides,tt=J.length,Lt=typeof $=="number"?$:Je($,"number",tt,!0),At=[],Nt=Je($,"perView",1,!0),pt=Je($,"spacing",0,!0)/t.size||0,ot=Nt==="auto"?pt:pt/Nt,ft=Je($,"origin","auto"),gt=0,Q=0;Q<Lt;Q++){var at=Nt==="auto"?d(J[Q]):1/Nt-pt+ot,Rt=ft==="center"?.5-at/2:ft==="auto"?0:ft;At.push({origin:Rt,size:at,spacing:pt}),gt+=at}if(gt+=pt*(Lt-1),ft==="auto"&&!t.options.loop&&Nt!==1){var Dt=0;At.map(function(Gt){var Qt=gt-Dt;return Dt+=Gt.size+pt,Qt>=1||(Gt.origin=1-Qt-(gt>1?0:1-gt)),Gt})}t.options.trackConfig=At}function L(){M();var $=t.size;t.options.disabled||$===i||(i=$,K())}function F(){L(),setTimeout(L,500),setTimeout(L,2e3)}function M(){var $=Ur(t.container);t.size=(t.options.vertical?$.height:$.width)||1}function G(){t.slides=Hn(t.options.selector,t.container)}t.container=(m=Hn(n,document)).length?m[0]:null,t.destroy=function(){c.purge(),t.emit("destroyed"),o(!0)},t.prev=function(){t.moveToIdx(t.track.details.abs-1,!0)},t.next=function(){t.moveToIdx(t.track.details.abs+1,!0)},t.update=K,v(t.options)}}var Br=function(n,l,t){try{return function(s,i){var r,a={};return r={emit:function(m){a[m]&&a[m].forEach(function(o){o(r)});var c=r.options&&r.options[m];c&&c(r)},moveToIdx:function(m,c,o){var h=r.track.idxToDist(m,c);if(h){var _=r.options.defaultAnimation;r.animator.start([{distance:h,duration:Je(o||_,"duration",500),easing:Je(o||_,"easing",function(d){return 1+--d*d*d*d*d})}])}},on:function(m,c,o){o===void 0&&(o=!1),a[m]||(a[m]=[]);var h=a[m].indexOf(c);h>-1?o&&delete a[m][h]:o||a[m].push(c)},options:s},function(){if(r.track=Wo(r),r.animator=Go(r),i)for(var m=0,c=i;m<c.length;m++)(0,c[m])(r);r.track.init(r.options.initial||0),r.emit("created")}(),r}(l,Fr([Jo(n,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),Ko,Yo,Xo],t||[],!0))}catch(s){console.error(s)}};function Qo(n){return l=>{function t(){n.forEach(s=>{s.addEventListener("click",()=>{l.moveToIdx(Number(s.dataset.target)),n.forEach(i=>{i.dataset.target!=s.dataset.target?i.classList.remove("slider-thumbnail__img_active"):i.classList.add("slider-thumbnail__img_active")})})})}l.on("created",()=>{t()}),l.on("animationEnded",()=>{const s=l.track.details.rel;n.forEach(i=>{i.dataset.target==s?i.classList.add("slider-thumbnail__img_active"):i.classList.remove("slider-thumbnail__img_active")})})}}function Zo(n){let l,t,s,i,r,a,m;function c(b){f(b),d(b),_(b)}function o(b){b.parentNode.removeChild(b)}function h(b){var T=document.createElement("div"),K=b.split(" ");return K.forEach(q=>T.classList.add(q)),T}function _(b){try{if(b){o(i),o(r),o(s);return}s=h("arrow-wrapper"),i=h("arrow arrow__left"),i.addEventListener("click",()=>n.prev()),r=h("arrow arrow__right"),r.addEventListener("click",()=>n.next()),a.appendChild(s),s.appendChild(i),s.appendChild(r)}catch{m++,m<5&&_(b)}}function d(b){try{if(b){o(t);return}t=h("dots"),n.track.details.slides.forEach((T,K)=>{var q=h("dot");q.addEventListener("click",()=>n.moveToIdx(K)),t.appendChild(q)}),a.appendChild(t)}catch{m++,m<5&&d(b)}}function f(b){if(b){for(var T=l.parentNode,K=a.parentNode;l.firstChild;)T.insertBefore(l.firstChild,l);for(o(l);a.firstChild;)K.insertBefore(a.firstChild,a);o(a);return}l=h("navigation-wrapper"),a=n.container.parentNode.parentNode.querySelector(".card-list__bottom"),n.container.parentNode.appendChild(l),l.appendChild(n.container)}function v(){var b=n.track.details.rel;b===0?i.classList.add("arrow_disabled"):i.classList.remove("arrow_disabled"),b===n.track.details.slides.length-1?r.classList.add("arrow_disabled"):r.classList.remove("arrow_disabled"),Array.from(t.children).forEach(function(T,K){K===b?T.classList.add("dot_active"):T.classList.remove("dot_active")})}n.on("created",()=>{c(),v()}),n.on("optionsChanged",()=>{c(!0),c(),v()}),n.on("slideChanged",()=>{v()}),n.on("destroyed",()=>{c(!0)})}document.querySelectorAll('[data-role="slider"]').forEach(n=>{const l=n.querySelector(".slider"),t=n.querySelectorAll('[data-role="slider-thumbnail"]');new Br(l,{slides:{perView:1},defaultAnimation:{duration:0}},[Qo(t)])});const jn=document.querySelector(".card-list__content .slider"),Bs={bs:16,sm:16},zr=341;jn&&new Br(jn,{slides:{origin:"auto",perView:()=>(jn.offsetWidth+Bs.bs)/(zr+Bs.bs),spacing:Bs.bs},breakpoints:{"(max-width: 576px)":{slides:{origin:"center",perView:()=>(jn.offsetWidth+Bs.sm)/(zr+Bs.sm),spacing:Bs.sm}}}},[Zo]),document.querySelectorAll(".schedule__status").forEach(n=>{if(n.dataset){const l=new Date,t=new Date(n.dataset.start),s=new Date(n.dataset.end);t!=="Invalid Date"&&s!=="Invalid Date"?l>s?(n.classList.remove("schedule__status_yet"),n.classList.add("schedule__status_complete")):t<=l&&l<=s&&(n.classList.remove("schedule__status_yet"),n.classList.add("schedule__status_current")):console.log("invalid date!",`
 start: ${t}`,`
end: ${s}`)}else console.log(n.dataset)}),document.querySelectorAll('[data-role="#####"]').forEach(n=>{const l=["\u62BD\u9078\u4E88\u5B9A\u65E5","\u30AD\u30E3\u30F3\u30BB\u30EB\u5F85\u3061\u62BD\u9078\u4E88\u5B9A\u65E5","\u632F\u8FBC\u671F\u9650\u65E5\u6642","\u904B\u7528\u958B\u59CB\u4E88\u5B9A\u65E5","\u904B\u7528\u7D42\u4E86\u4E88\u5B9A\u65E5","\u511F\u9084\u4E88\u5B9A\u65E5"],t=["\u632F\u8FBC\u671F\u9650\u65E5\u6642"],s=n.dataset.value.split(",");s.length===4&&l.splice(0,2);let i={},r="--",a;s.forEach((c,o)=>{const h=new Date(c),_=isNaN(h);_||(r=String(h.getFullYear()),a=Math.round((new Date().getTime()-h.getTime())/(24*36e5))),Object.keys(i).indexOf(r)===-1&&(i[r]=[]);const d={year:_?"--":h.getFullYear(),month:_?"--":h.getMonth()+1,date:_?"--":h.getDate(),hour:_?"--":("00"+h.getHours()).slice(-2),minute:_?"--":("00"+h.getMinutes()).slice(-2),status:a>1?"complete":a!==1?"yet":"current",lastRaw:o===l.length-1,hasTime:t.includes(l[o]),label:l[o]};i[r].push(d)});let m="";for(let[c,o]of Object.entries(i))m+=`            <div class="fund-shcedule-short__row">                 <div class="fund-schedule-short__year">                     ${c}                 </div>             <div class="fund-schedule-short__items">         `,o.forEach(h=>{m+=h.lastRaw?'<div class="fund-schedule-short__content fund-schedule-short__content_last">':'<div class="fund-schedule-short__content">',m+=`<span class="fund-schedule-short__values">                         <span class="fund-schedule-short__value format format_unit" data-format="\u6708">${h.month}</span>                        <span class="fund-schedule-short__value format format_unit" data-format="\u65E5">${h.date}</span>                    `,h.hasTime&&(m+=`<div class="fund-schedule-short__time">${h.hour}:${h.minute}</div>`),m+=`   </span>                     <div class="schedule__status schedule__status_${h.status}"></div>                     <span class="fund-schedule-short__label">${h.label}</span>                     </div>                     `}),m+="</div></div>";n.innerHTML=m}),document.querySelectorAll('[data-role="short-schedule"]').forEach(n=>{const l=["\u62BD\u9078\u4E88\u5B9A\u65E5","\u30AD\u30E3\u30F3\u30BB\u30EB\u5F85\u3061\u62BD\u9078\u4E88\u5B9A\u65E5","\u632F\u8FBC\u671F\u9650\u65E5\u6642","\u904B\u7528\u958B\u59CB\u4E88\u5B9A\u65E5","\u904B\u7528\u7D42\u4E86\u4E88\u5B9A\u65E5","\u511F\u9084\u4E88\u5B9A\u65E5"],t=["\u632F\u8FBC\u671F\u9650\u65E5\u6642"],s=n.dataset.value.split(",");s.length===4&&l.splice(0,2);let i=[],r="";const a=new Date,m=new Date;m.setHours(0,0,0,0),s.forEach((h,_)=>{const d=new Date(h),f=isNaN(d),v=t.includes(l[_]);if(f?r="null":String(d.getFullYear()),!f&&r!=="yet"){const T=a.getTime()-d.getTime(),K=m.getTime()-d.getTime(),q=v?T:K;r=q<0?"yet":q>24*36e5?"complete":"current"}const b={year:f?"--":d.getFullYear(),month:f?"--":d.getMonth()+1,date:f?"--":d.getDate(),hour:f?"--":("00"+d.getHours()).slice(-2),minute:f?"--":("00"+d.getMinutes()).slice(-2),status:r,lastRaw:_===l.length-1,hasTime:t.includes(l[_]),label:l[_]};i.push(b)});let c="",o="";i.forEach((h,_,d)=>{const f=o!==h.year;_!==0&&f&&(c+="</div></div>"),f&&(o=h.year,c+=`                <div class="fund-shcedule-short__row">                     <div class="fund-schedule-short__year">                         ${o}                     </div>                 <div class="fund-schedule-short__items">             `),c+=h.lastRaw?'<div class="fund-schedule-short__content fund-schedule-short__content_last">':'<div class="fund-schedule-short__content">',c+=`<span class="fund-schedule-short__values">                     <span class="fund-schedule-short__value format format_unit" data-format="\u6708">${h.month}</span>                    <span class="fund-schedule-short__value format format_unit" data-format="\u65E5">${h.date}</span>                `,h.hasTime&&(c+=`<div class="fund-schedule-short__time">${h.hour}:${h.minute}</div>`),c+=`   </span>                 <div class="schedule__status schedule__status_${h.status}"></div>                 <span class="fund-schedule-short__label">${h.label}</span>                 </div>                 `,_===d.length-1&&(c+="</div></div>")}),n.innerHTML=c});const tl="modulepreload",el=function(n){return"/"+n},qr={},bs=function(n,l,t){let s=Promise.resolve();if(l&&l.length>0){const i=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.all(l.map(m=>{if(m=el(m),m in qr)return;qr[m]=!0;const c=m.endsWith(".css"),o=c?'[rel="stylesheet"]':"";if(t)for(let _=i.length-1;_>=0;_--){const d=i[_];if(d.href===m&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${o}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":tl,c||(h.as="script",h.crossOrigin=""),h.href=m,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((_,d)=>{h.addEventListener("load",_),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${m}`)))})}))}return s.then(()=>n()).catch(i=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i})};var sl={9306:(n,l,t)=>{var s=t(4901),i=t(6823),r=TypeError;n.exports=function(a){if(s(a))return a;throw new r(i(a)+" is not a function")}},3506:(n,l,t)=>{var s=t(3925),i=String,r=TypeError;n.exports=function(a){if(s(a))return a;throw new r("Can't set "+i(a)+" as a prototype")}},7080:(n,l,t)=>{var s=t(4402).has;n.exports=function(i){return s(i),i}},679:(n,l,t)=>{var s=t(1625),i=TypeError;n.exports=function(r,a){if(s(a,r))return r;throw new i("Incorrect invocation")}},8551:(n,l,t)=>{var s=t(34),i=String,r=TypeError;n.exports=function(a){if(s(a))return a;throw new r(i(a)+" is not an object")}},7811:n=>{n.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7394:(n,l,t)=>{var s=t(6706),i=t(4576),r=TypeError;n.exports=s(ArrayBuffer.prototype,"byteLength","get")||function(a){if(i(a)!=="ArrayBuffer")throw new r("ArrayBuffer expected");return a.byteLength}},3238:(n,l,t)=>{var s=t(9504),i=t(7394),r=s(ArrayBuffer.prototype.slice);n.exports=function(a){if(i(a)!==0)return!1;try{return r(a,0,0),!1}catch{return!0}}},5636:(n,l,t)=>{var s=t(4475),i=t(9504),r=t(6706),a=t(7696),m=t(3238),c=t(7394),o=t(4483),h=t(1548),_=s.structuredClone,d=s.ArrayBuffer,f=s.DataView,v=s.TypeError,b=Math.min,T=d.prototype,K=f.prototype,q=i(T.slice),L=r(T,"resizable","get"),F=r(T,"maxByteLength","get"),M=i(K.getInt8),G=i(K.setInt8);n.exports=(h||o)&&function($,J,tt){var Lt=c($),At=J===void 0?Lt:a(J),Nt=!L||!L($),pt;if(m($))throw new v("ArrayBuffer is detached");if(h&&($=_($,{transfer:[$]}),Lt===At&&(tt||Nt)))return $;if(Lt>=At&&(!tt||Nt))pt=q($,0,At);else{var ot=tt&&!Nt&&F?{maxByteLength:F($)}:void 0;pt=new d(At,ot);for(var ft=new f($),gt=new f(pt),Q=b(At,Lt),at=0;at<Q;at++)G(gt,at,M(ft,at))}return h||o($),pt}},4644:(n,l,t)=>{var s=t(7811),i=t(3724),r=t(4475),a=t(4901),m=t(34),c=t(9297),o=t(6955),h=t(6823),_=t(6699),d=t(6840),f=t(2106),v=t(1625),b=t(2787),T=t(2967),K=t(8227),q=t(3392),L=t(1181),F=L.enforce,M=L.get,G=r.Int8Array,$=G&&G.prototype,J=r.Uint8ClampedArray,tt=J&&J.prototype,Lt=G&&b(G),At=$&&b($),Nt=Object.prototype,pt=r.TypeError,ot=K("toStringTag"),ft=q("TYPED_ARRAY_TAG"),gt="TypedArrayConstructor",Q=s&&!!T&&o(r.opera)!=="Opera",at=!1,Rt,Dt,Gt,Qt={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ae={BigInt64Array:8,BigUint64Array:8},be=function(jt){if(!m(jt))return!1;var le=o(jt);return le==="DataView"||c(Qt,le)||c(ae,le)},me=function(jt){var le=b(jt);if(m(le)){var Xt=M(le);return Xt&&c(Xt,gt)?Xt[gt]:me(le)}},Ut=function(jt){if(!m(jt))return!1;var le=o(jt);return c(Qt,le)||c(ae,le)},It=function(jt){if(Ut(jt))return jt;throw new pt("Target is not a typed array")},St=function(jt){if(a(jt)&&(!T||v(Lt,jt)))return jt;throw new pt(h(jt)+" is not a typed array constructor")},$t=function(jt,le,Xt,nt){if(i){if(Xt)for(var u in Qt){var g=r[u];if(g&&c(g.prototype,jt))try{delete g.prototype[jt]}catch{try{g.prototype[jt]=le}catch{}}}(!At[jt]||Xt)&&d(At,jt,Xt?le:Q&&$[jt]||le,nt)}},he=function(jt,le,Xt){var nt,u;if(i){if(T){if(Xt){for(nt in Qt)if(u=r[nt],u&&c(u,jt))try{delete u[jt]}catch{}}if(!Lt[jt]||Xt)try{return d(Lt,jt,Xt?le:Q&&Lt[jt]||le)}catch{}else return}for(nt in Qt)u=r[nt],u&&(!u[jt]||Xt)&&d(u,jt,le)}};for(Rt in Qt)Dt=r[Rt],Gt=Dt&&Dt.prototype,Gt?F(Gt)[gt]=Dt:Q=!1;for(Rt in ae)Dt=r[Rt],Gt=Dt&&Dt.prototype,Gt&&(F(Gt)[gt]=Dt);if((!Q||!a(Lt)||Lt===Function.prototype)&&(Lt=function(){throw new pt("Incorrect invocation")},Q))for(Rt in Qt)r[Rt]&&T(r[Rt],Lt);if((!Q||!At||At===Nt)&&(At=Lt.prototype,Q))for(Rt in Qt)r[Rt]&&T(r[Rt].prototype,At);if(Q&&b(tt)!==At&&T(tt,At),i&&!c(At,ot)){at=!0,f(At,ot,{configurable:!0,get:function(){return m(this)?this[ft]:void 0}});for(Rt in Qt)r[Rt]&&_(r[Rt],ft,Rt)}n.exports={NATIVE_ARRAY_BUFFER_VIEWS:Q,TYPED_ARRAY_TAG:at&&ft,aTypedArray:It,aTypedArrayConstructor:St,exportTypedArrayMethod:$t,exportTypedArrayStaticMethod:he,getTypedArrayConstructor:me,isView:be,isTypedArray:Ut,TypedArray:Lt,TypedArrayPrototype:At}},5370:(n,l,t)=>{var s=t(6198);n.exports=function(i,r,a){for(var m=0,c=arguments.length>2?a:s(r),o=new i(c);c>m;)o[m]=r[m++];return o}},9617:(n,l,t)=>{var s=t(5397),i=t(5610),r=t(6198),a=function(m){return function(c,o,h){var _=s(c),d=r(_);if(d===0)return!m&&-1;var f=i(h,d),v;if(m&&o!==o){for(;d>f;)if(v=_[f++],v!==v)return!0}else for(;d>f;f++)if((m||f in _)&&_[f]===o)return m||f||0;return!m&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},4527:(n,l,t)=>{var s=t(3724),i=t(4376),r=TypeError,a=Object.getOwnPropertyDescriptor,m=s&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(c){return c instanceof TypeError}}();n.exports=m?function(c,o){if(i(c)&&!a(c,"length").writable)throw new r("Cannot set read only .length");return c.length=o}:function(c,o){return c.length=o}},7628:(n,l,t)=>{var s=t(6198);n.exports=function(i,r){for(var a=s(i),m=new r(a),c=0;c<a;c++)m[c]=i[a-c-1];return m}},9928:(n,l,t)=>{var s=t(6198),i=t(1291),r=RangeError;n.exports=function(a,m,c,o){var h=s(a),_=i(c),d=_<0?h+_:_;if(d>=h||d<0)throw new r("Incorrect index");for(var f=new m(h),v=0;v<h;v++)f[v]=v===d?o:a[v];return f}},6319:(n,l,t)=>{var s=t(8551),i=t(9539);n.exports=function(r,a,m,c){try{return c?a(s(m)[0],m[1]):a(m)}catch(o){i(r,"throw",o)}}},4576:(n,l,t)=>{var s=t(9504),i=s({}.toString),r=s("".slice);n.exports=function(a){return r(i(a),8,-1)}},6955:(n,l,t)=>{var s=t(2140),i=t(4901),r=t(4576),a=t(8227),m=a("toStringTag"),c=Object,o=r(function(){return arguments}())==="Arguments",h=function(_,d){try{return _[d]}catch{}};n.exports=s?r:function(_){var d,f,v;return _===void 0?"Undefined":_===null?"Null":typeof(f=h(d=c(_),m))=="string"?f:o?r(d):(v=r(d))==="Object"&&i(d.callee)?"Arguments":v}},7740:(n,l,t)=>{var s=t(9297),i=t(5031),r=t(7347),a=t(4913);n.exports=function(m,c,o){for(var h=i(c),_=a.f,d=r.f,f=0;f<h.length;f++){var v=h[f];!s(m,v)&&!(o&&s(o,v))&&_(m,v,d(c,v))}}},2211:(n,l,t)=>{var s=t(9039);n.exports=!s(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},2529:n=>{n.exports=function(l,t){return{value:l,done:t}}},6699:(n,l,t)=>{var s=t(3724),i=t(4913),r=t(6980);n.exports=s?function(a,m,c){return i.f(a,m,r(1,c))}:function(a,m,c){return a[m]=c,a}},6980:n=>{n.exports=function(l,t){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:t}}},4659:(n,l,t)=>{var s=t(3724),i=t(4913),r=t(6980);n.exports=function(a,m,c){s?i.f(a,m,r(0,c)):a[m]=c}},2106:(n,l,t)=>{var s=t(283),i=t(4913);n.exports=function(r,a,m){return m.get&&s(m.get,a,{getter:!0}),m.set&&s(m.set,a,{setter:!0}),i.f(r,a,m)}},6840:(n,l,t)=>{var s=t(4901),i=t(4913),r=t(283),a=t(9433);n.exports=function(m,c,o,h){h||(h={});var _=h.enumerable,d=h.name!==void 0?h.name:c;if(s(o)&&r(o,d,h),h.global)_?m[c]=o:a(c,o);else{try{h.unsafe?m[c]&&(_=!0):delete m[c]}catch{}_?m[c]=o:i.f(m,c,{value:o,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return m}},6279:(n,l,t)=>{var s=t(6840);n.exports=function(i,r,a){for(var m in r)s(i,m,r[m],a);return i}},9433:(n,l,t)=>{var s=t(4475),i=Object.defineProperty;n.exports=function(r,a){try{i(s,r,{value:a,configurable:!0,writable:!0})}catch{s[r]=a}return a}},3724:(n,l,t)=>{var s=t(9039);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},4483:(n,l,t)=>{var s=t(4475),i=t(9714),r=t(1548),a=s.structuredClone,m=s.ArrayBuffer,c=s.MessageChannel,o=!1,h,_,d,f;if(r)o=function(v){a(v,{transfer:[v]})};else if(m)try{c||(h=i("worker_threads"),h&&(c=h.MessageChannel)),c&&(_=new c,d=new m(2),f=function(v){_.port1.postMessage(null,[v])},d.byteLength===2&&(f(d),d.byteLength===0&&(o=f)))}catch{}n.exports=o},4055:(n,l,t)=>{var s=t(4475),i=t(34),r=s.document,a=i(r)&&i(r.createElement);n.exports=function(m){return a?r.createElement(m):{}}},6837:n=>{var l=TypeError,t=9007199254740991;n.exports=function(s){if(s>t)throw l("Maximum allowed index exceeded");return s}},5002:n=>{n.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},7290:(n,l,t)=>{var s=t(516),i=t(9088);n.exports=!s&&!i&&typeof window=="object"&&typeof document=="object"},516:n=>{n.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},9088:(n,l,t)=>{var s=t(4475),i=t(4576);n.exports=i(s.process)==="process"},9392:n=>{n.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},7388:(n,l,t)=>{var s=t(4475),i=t(9392),r=s.process,a=s.Deno,m=r&&r.versions||a&&a.version,c=m&&m.v8,o,h;c&&(o=c.split("."),h=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!h&&i&&(o=i.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=i.match(/Chrome\/(\d+)/),o&&(h=+o[1]))),n.exports=h},8727:n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6193:(n,l,t)=>{var s=t(9504),i=Error,r=s("".replace),a=function(o){return String(new i(o).stack)}("zxcasd"),m=/\n\s*at [^:]*:[^\n]*/,c=m.test(a);n.exports=function(o,h){if(c&&typeof o=="string"&&!i.prepareStackTrace)for(;h--;)o=r(o,m,"");return o}},6518:(n,l,t)=>{var s=t(4475),i=t(7347).f,r=t(6699),a=t(6840),m=t(9433),c=t(7740),o=t(2796);n.exports=function(h,_){var d=h.target,f=h.global,v=h.stat,b,T,K,q,L,F;if(f?T=s:v?T=s[d]||m(d,{}):T=s[d]&&s[d].prototype,T)for(K in _){if(L=_[K],h.dontCallGetSet?(F=i(T,K),q=F&&F.value):q=T[K],b=o(f?K:d+(v?".":"#")+K,h.forced),!b&&q!==void 0){if(typeof L==typeof q)continue;c(L,q)}(h.sham||q&&q.sham)&&r(L,"sham",!0),a(T,K,L,h)}}},9039:n=>{n.exports=function(l){try{return!!l()}catch{return!0}}},6080:(n,l,t)=>{var s=t(7476),i=t(9306),r=t(616),a=s(s.bind);n.exports=function(m,c){return i(m),c===void 0?m:r?a(m,c):function(){return m.apply(c,arguments)}}},616:(n,l,t)=>{var s=t(9039);n.exports=!s(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")})},9565:(n,l,t)=>{var s=t(616),i=Function.prototype.call;n.exports=s?i.bind(i):function(){return i.apply(i,arguments)}},350:(n,l,t)=>{var s=t(3724),i=t(9297),r=Function.prototype,a=s&&Object.getOwnPropertyDescriptor,m=i(r,"name"),c=m&&(function(){}).name==="something",o=m&&(!s||s&&a(r,"name").configurable);n.exports={EXISTS:m,PROPER:c,CONFIGURABLE:o}},6706:(n,l,t)=>{var s=t(9504),i=t(9306);n.exports=function(r,a,m){try{return s(i(Object.getOwnPropertyDescriptor(r,a)[m]))}catch{}}},7476:(n,l,t)=>{var s=t(4576),i=t(9504);n.exports=function(r){if(s(r)==="Function")return i(r)}},9504:(n,l,t)=>{var s=t(616),i=Function.prototype,r=i.call,a=s&&i.bind.bind(r,r);n.exports=s?a:function(m){return function(){return r.apply(m,arguments)}}},7751:(n,l,t)=>{var s=t(4475),i=t(4901),r=function(a){return i(a)?a:void 0};n.exports=function(a,m){return arguments.length<2?r(s[a]):s[a]&&s[a][m]}},1767:n=>{n.exports=function(l){return{iterator:l,next:l.next,done:!1}}},8646:(n,l,t)=>{var s=t(9565),i=t(8551),r=t(1767),a=t(851);n.exports=function(m,c){(!c||typeof m!="string")&&i(m);var o=a(m);return r(i(o!==void 0?s(o,m):m))}},851:(n,l,t)=>{var s=t(6955),i=t(5966),r=t(4117),a=t(6269),m=t(8227),c=m("iterator");n.exports=function(o){if(!r(o))return i(o,c)||i(o,"@@iterator")||a[s(o)]}},81:(n,l,t)=>{var s=t(9565),i=t(9306),r=t(8551),a=t(6823),m=t(851),c=TypeError;n.exports=function(o,h){var _=arguments.length<2?m(o):h;if(i(_))return r(s(_,o));throw new c(a(o)+" is not iterable")}},5966:(n,l,t)=>{var s=t(9306),i=t(4117);n.exports=function(r,a){var m=r[a];return i(m)?void 0:s(m)}},3789:(n,l,t)=>{var s=t(9306),i=t(8551),r=t(9565),a=t(1291),m=t(1767),c="Invalid size",o=RangeError,h=TypeError,_=Math.max,d=function(f,v){this.set=f,this.size=_(v,0),this.has=s(f.has),this.keys=s(f.keys)};d.prototype={getIterator:function(){return m(i(r(this.keys,this.set)))},includes:function(f){return r(this.has,this.set,f)}},n.exports=function(f){i(f);var v=+f.size;if(v!==v)throw new h(c);var b=a(v);if(b<0)throw new o(c);return new d(f,b)}},4475:function(n){var l=function(t){return t&&t.Math===Math&&t};n.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof global=="object"&&global)||l(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},9297:(n,l,t)=>{var s=t(9504),i=t(8981),r=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,m){return r(i(a),m)}},421:n=>{n.exports={}},397:(n,l,t)=>{var s=t(7751);n.exports=s("document","documentElement")},5917:(n,l,t)=>{var s=t(3724),i=t(9039),r=t(4055);n.exports=!s&&!i(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7})},7055:(n,l,t)=>{var s=t(9504),i=t(9039),r=t(4576),a=Object,m=s("".split);n.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(c){return r(c)==="String"?m(c,""):a(c)}:a},3167:(n,l,t)=>{var s=t(4901),i=t(34),r=t(2967);n.exports=function(a,m,c){var o,h;return r&&s(o=m.constructor)&&o!==c&&i(h=o.prototype)&&h!==c.prototype&&r(a,h),a}},3706:(n,l,t)=>{var s=t(9504),i=t(4901),r=t(7629),a=s(Function.toString);i(r.inspectSource)||(r.inspectSource=function(m){return a(m)}),n.exports=r.inspectSource},1181:(n,l,t)=>{var s=t(8622),i=t(4475),r=t(34),a=t(6699),m=t(9297),c=t(7629),o=t(6119),h=t(421),_="Object already initialized",d=i.TypeError,f=i.WeakMap,v,b,T,K=function(M){return T(M)?b(M):v(M,{})},q=function(M){return function(G){var $;if(!r(G)||($=b(G)).type!==M)throw new d("Incompatible receiver, "+M+" required");return $}};if(s||c.state){var L=c.state||(c.state=new f);L.get=L.get,L.has=L.has,L.set=L.set,v=function(M,G){if(L.has(M))throw new d(_);return G.facade=M,L.set(M,G),G},b=function(M){return L.get(M)||{}},T=function(M){return L.has(M)}}else{var F=o("state");h[F]=!0,v=function(M,G){if(m(M,F))throw new d(_);return G.facade=M,a(M,F,G),G},b=function(M){return m(M,F)?M[F]:{}},T=function(M){return m(M,F)}}n.exports={set:v,get:b,has:T,enforce:K,getterFor:q}},4209:(n,l,t)=>{var s=t(8227),i=t(6269),r=s("iterator"),a=Array.prototype;n.exports=function(m){return m!==void 0&&(i.Array===m||a[r]===m)}},4376:(n,l,t)=>{var s=t(4576);n.exports=Array.isArray||function(i){return s(i)==="Array"}},1108:(n,l,t)=>{var s=t(6955);n.exports=function(i){var r=s(i);return r==="BigInt64Array"||r==="BigUint64Array"}},4901:n=>{var l=typeof document=="object"&&document.all;n.exports=typeof l>"u"&&l!==void 0?function(t){return typeof t=="function"||t===l}:function(t){return typeof t=="function"}},2796:(n,l,t)=>{var s=t(9039),i=t(4901),r=/#|\.prototype\./,a=function(_,d){var f=c[m(_)];return f===h?!0:f===o?!1:i(d)?s(d):!!d},m=a.normalize=function(_){return String(_).replace(r,".").toLowerCase()},c=a.data={},o=a.NATIVE="N",h=a.POLYFILL="P";n.exports=a},4117:n=>{n.exports=function(l){return l==null}},34:(n,l,t)=>{var s=t(4901);n.exports=function(i){return typeof i=="object"?i!==null:s(i)}},3925:(n,l,t)=>{var s=t(34);n.exports=function(i){return s(i)||i===null}},6395:n=>{n.exports=!1},757:(n,l,t)=>{var s=t(7751),i=t(4901),r=t(1625),a=t(7040),m=Object;n.exports=a?function(c){return typeof c=="symbol"}:function(c){var o=s("Symbol");return i(o)&&r(o.prototype,m(c))}},507:(n,l,t)=>{var s=t(9565);n.exports=function(i,r,a){for(var m=a?i:i.iterator,c=i.next,o,h;!(o=s(c,m)).done;)if(h=r(o.value),h!==void 0)return h}},2652:(n,l,t)=>{var s=t(6080),i=t(9565),r=t(8551),a=t(6823),m=t(4209),c=t(6198),o=t(1625),h=t(81),_=t(851),d=t(9539),f=TypeError,v=function(T,K){this.stopped=T,this.result=K},b=v.prototype;n.exports=function(T,K,q){var L=q&&q.that,F=!!(q&&q.AS_ENTRIES),M=!!(q&&q.IS_RECORD),G=!!(q&&q.IS_ITERATOR),$=!!(q&&q.INTERRUPTED),J=s(K,L),tt,Lt,At,Nt,pt,ot,ft,gt=function(at){return tt&&d(tt,"normal",at),new v(!0,at)},Q=function(at){return F?(r(at),$?J(at[0],at[1],gt):J(at[0],at[1])):$?J(at,gt):J(at)};if(M)tt=T.iterator;else if(G)tt=T;else{if(Lt=_(T),!Lt)throw new f(a(T)+" is not iterable");if(m(Lt)){for(At=0,Nt=c(T);Nt>At;At++)if(pt=Q(T[At]),pt&&o(b,pt))return pt;return new v(!1)}tt=h(T,Lt)}for(ot=M?T.next:tt.next;!(ft=i(ot,tt)).done;){try{pt=Q(ft.value)}catch(at){d(tt,"throw",at)}if(typeof pt=="object"&&pt&&o(b,pt))return pt}return new v(!1)}},9539:(n,l,t)=>{var s=t(9565),i=t(8551),r=t(5966);n.exports=function(a,m,c){var o,h;i(a);try{if(o=r(a,"return"),!o){if(m==="throw")throw c;return c}o=s(o,a)}catch(_){h=!0,o=_}if(m==="throw")throw c;if(h)throw o;return i(o),c}},9462:(n,l,t)=>{var s=t(9565),i=t(2360),r=t(6699),a=t(6279),m=t(8227),c=t(1181),o=t(5966),h=t(7657).IteratorPrototype,_=t(2529),d=t(9539),f=m("toStringTag"),v="IteratorHelper",b="WrapForValidIterator",T=c.set,K=function(F){var M=c.getterFor(F?b:v);return a(i(h),{next:function(){var G=M(this);if(F)return G.nextHandler();try{var $=G.done?void 0:G.nextHandler();return _($,G.done)}catch(J){throw G.done=!0,J}},return:function(){var G=M(this),$=G.iterator;if(G.done=!0,F){var J=o($,"return");return J?s(J,$):_(void 0,!0)}if(G.inner)try{d(G.inner.iterator,"normal")}catch(tt){return d($,"throw",tt)}return d($,"normal"),_(void 0,!0)}})},q=K(!0),L=K(!1);r(L,f,"Iterator Helper"),n.exports=function(F,M){var G=function($,J){J?(J.iterator=$.iterator,J.next=$.next):J=$,J.type=M?b:v,J.nextHandler=F,J.counter=0,J.done=!1,T(this,J)};return G.prototype=M?q:L,G}},713:(n,l,t)=>{var s=t(9565),i=t(9306),r=t(8551),a=t(1767),m=t(9462),c=t(6319),o=m(function(){var h=this.iterator,_=r(s(this.next,h)),d=this.done=!!_.done;if(!d)return c(h,this.mapper,[_.value,this.counter++],!0)});n.exports=function(h){return r(this),i(h),new o(a(this),{mapper:h})}},7657:(n,l,t)=>{var s=t(9039),i=t(4901),r=t(34),a=t(2360),m=t(2787),c=t(6840),o=t(8227),h=t(6395),_=o("iterator"),d=!1,f,v,b;[].keys&&(b=[].keys(),"next"in b?(v=m(m(b)),v!==Object.prototype&&(f=v)):d=!0);var T=!r(f)||s(function(){var K={};return f[_].call(K)!==K});T?f={}:h&&(f=a(f)),i(f[_])||c(f,_,function(){return this}),n.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:d}},6269:n=>{n.exports={}},6198:(n,l,t)=>{var s=t(8014);n.exports=function(i){return s(i.length)}},283:(n,l,t)=>{var s=t(9504),i=t(9039),r=t(4901),a=t(9297),m=t(3724),c=t(350).CONFIGURABLE,o=t(3706),h=t(1181),_=h.enforce,d=h.get,f=String,v=Object.defineProperty,b=s("".slice),T=s("".replace),K=s([].join),q=m&&!i(function(){return v(function(){},"length",{value:8}).length!==8}),L=String(String).split("String"),F=n.exports=function(M,G,$){b(f(G),0,7)==="Symbol("&&(G="["+T(f(G),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),$&&$.getter&&(G="get "+G),$&&$.setter&&(G="set "+G),(!a(M,"name")||c&&M.name!==G)&&(m?v(M,"name",{value:G,configurable:!0}):M.name=G),q&&$&&a($,"arity")&&M.length!==$.arity&&v(M,"length",{value:$.arity});try{$&&a($,"constructor")&&$.constructor?m&&v(M,"prototype",{writable:!1}):M.prototype&&(M.prototype=void 0)}catch{}var J=_(M);return a(J,"source")||(J.source=K(L,typeof G=="string"?G:"")),M};Function.prototype.toString=F(function(){return r(this)&&d(this).source||o(this)},"toString")},741:n=>{var l=Math.ceil,t=Math.floor;n.exports=Math.trunc||function(s){var i=+s;return(i>0?t:l)(i)}},6043:(n,l,t)=>{var s=t(9306),i=TypeError,r=function(a){var m,c;this.promise=new a(function(o,h){if(m!==void 0||c!==void 0)throw new i("Bad Promise constructor");m=o,c=h}),this.resolve=s(m),this.reject=s(c)};n.exports.f=function(a){return new r(a)}},2603:(n,l,t)=>{var s=t(655);n.exports=function(i,r){return i===void 0?arguments.length<2?"":r:s(i)}},2360:(n,l,t)=>{var s=t(8551),i=t(6801),r=t(8727),a=t(421),m=t(397),c=t(4055),o=t(6119),h=">",_="<",d="prototype",f="script",v=o("IE_PROTO"),b=function(){},T=function(M){return _+f+h+M+_+"/"+f+h},K=function(M){M.write(T("")),M.close();var G=M.parentWindow.Object;return M=null,G},q=function(){var M=c("iframe"),G="java"+f+":",$;return M.style.display="none",m.appendChild(M),M.src=String(G),$=M.contentWindow.document,$.open(),$.write(T("document.F=Object")),$.close(),$.F},L,F=function(){try{L=new ActiveXObject("htmlfile")}catch{}F=typeof document<"u"?document.domain&&L?K(L):q():K(L);for(var M=r.length;M--;)delete F[d][r[M]];return F()};a[v]=!0,n.exports=Object.create||function(M,G){var $;return M!==null?(b[d]=s(M),$=new b,b[d]=null,$[v]=M):$=F(),G===void 0?$:i.f($,G)}},6801:(n,l,t)=>{var s=t(3724),i=t(8686),r=t(4913),a=t(8551),m=t(5397),c=t(1072);l.f=s&&!i?Object.defineProperties:function(o,h){a(o);for(var _=m(h),d=c(h),f=d.length,v=0,b;f>v;)r.f(o,b=d[v++],_[b]);return o}},4913:(n,l,t)=>{var s=t(3724),i=t(5917),r=t(8686),a=t(8551),m=t(6969),c=TypeError,o=Object.defineProperty,h=Object.getOwnPropertyDescriptor,_="enumerable",d="configurable",f="writable";l.f=s?r?function(v,b,T){if(a(v),b=m(b),a(T),typeof v=="function"&&b==="prototype"&&"value"in T&&f in T&&!T[f]){var K=h(v,b);K&&K[f]&&(v[b]=T.value,T={configurable:d in T?T[d]:K[d],enumerable:_ in T?T[_]:K[_],writable:!1})}return o(v,b,T)}:o:function(v,b,T){if(a(v),b=m(b),a(T),i)try{return o(v,b,T)}catch{}if("get"in T||"set"in T)throw new c("Accessors not supported");return"value"in T&&(v[b]=T.value),v}},7347:(n,l,t)=>{var s=t(3724),i=t(9565),r=t(8773),a=t(6980),m=t(5397),c=t(6969),o=t(9297),h=t(5917),_=Object.getOwnPropertyDescriptor;l.f=s?_:function(d,f){if(d=m(d),f=c(f),h)try{return _(d,f)}catch{}if(o(d,f))return a(!i(r.f,d,f),d[f])}},8480:(n,l,t)=>{var s=t(1828),i=t(8727),r=i.concat("length","prototype");l.f=Object.getOwnPropertyNames||function(a){return s(a,r)}},3717:(n,l)=>{l.f=Object.getOwnPropertySymbols},2787:(n,l,t)=>{var s=t(9297),i=t(4901),r=t(8981),a=t(6119),m=t(2211),c=a("IE_PROTO"),o=Object,h=o.prototype;n.exports=m?o.getPrototypeOf:function(_){var d=r(_);if(s(d,c))return d[c];var f=d.constructor;return i(f)&&d instanceof f?f.prototype:d instanceof o?h:null}},1625:(n,l,t)=>{var s=t(9504);n.exports=s({}.isPrototypeOf)},1828:(n,l,t)=>{var s=t(9504),i=t(9297),r=t(5397),a=t(9617).indexOf,m=t(421),c=s([].push);n.exports=function(o,h){var _=r(o),d=0,f=[],v;for(v in _)!i(m,v)&&i(_,v)&&c(f,v);for(;h.length>d;)i(_,v=h[d++])&&(~a(f,v)||c(f,v));return f}},1072:(n,l,t)=>{var s=t(1828),i=t(8727);n.exports=Object.keys||function(r){return s(r,i)}},8773:(n,l)=>{var t={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!t.call({1:2},1);l.f=i?function(r){var a=s(this,r);return!!a&&a.enumerable}:t},2967:(n,l,t)=>{var s=t(6706),i=t(34),r=t(7750),a=t(3506);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m=!1,c={},o;try{o=s(Object.prototype,"__proto__","set"),o(c,[]),m=c instanceof Array}catch{}return function(h,_){return r(h),a(_),i(h)&&(m?o(h,_):h.__proto__=_),h}}():void 0)},4270:(n,l,t)=>{var s=t(9565),i=t(4901),r=t(34),a=TypeError;n.exports=function(m,c){var o,h;if(c==="string"&&i(o=m.toString)&&!r(h=s(o,m))||i(o=m.valueOf)&&!r(h=s(o,m))||c!=="string"&&i(o=m.toString)&&!r(h=s(o,m)))return h;throw new a("Can't convert object to primitive value")}},5031:(n,l,t)=>{var s=t(7751),i=t(9504),r=t(8480),a=t(3717),m=t(8551),c=i([].concat);n.exports=s("Reflect","ownKeys")||function(o){var h=r.f(m(o)),_=a.f;return _?c(h,_(o)):h}},8235:(n,l,t)=>{var s=t(9504),i=t(9297),r=SyntaxError,a=parseInt,m=String.fromCharCode,c=s("".charAt),o=s("".slice),h=s(/./.exec),_={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},d=/^[\da-f]{4}$/i,f=/^[\u0000-\u001F]$/;n.exports=function(v,b){for(var T=!0,K="";b<v.length;){var q=c(v,b);if(q==="\\"){var L=o(v,b,b+2);if(i(_,L))K+=_[L],b+=2;else if(L==="\\u"){b+=2;var F=o(v,b,b+4);if(!h(d,F))throw new r("Bad Unicode escape at: "+b);K+=m(a(F,16)),b+=4}else throw new r('Unknown escape sequence: "'+L+'"')}else if(q==='"'){T=!1,b++;break}else{if(h(f,q))throw new r("Bad control character in string literal at: "+b);K+=q,b++}}if(T)throw new r("Unterminated string at: "+b);return{value:K,end:b}}},7750:(n,l,t)=>{var s=t(4117),i=TypeError;n.exports=function(r){if(s(r))throw new i("Can't call method on "+r);return r}},9286:(n,l,t)=>{var s=t(4402),i=t(8469),r=s.Set,a=s.add;n.exports=function(m){var c=new r;return i(m,function(o){a(c,o)}),c}},3440:(n,l,t)=>{var s=t(7080),i=t(4402),r=t(9286),a=t(5170),m=t(3789),c=t(8469),o=t(507),h=i.has,_=i.remove;n.exports=function(d){var f=s(this),v=m(d),b=r(f);return a(f)<=v.size?c(f,function(T){v.includes(T)&&_(b,T)}):o(v.getIterator(),function(T){h(f,T)&&_(b,T)}),b}},4402:(n,l,t)=>{var s=t(9504),i=Set.prototype;n.exports={Set,add:s(i.add),has:s(i.has),remove:s(i.delete),proto:i}},8750:(n,l,t)=>{var s=t(7080),i=t(4402),r=t(5170),a=t(3789),m=t(8469),c=t(507),o=i.Set,h=i.add,_=i.has;n.exports=function(d){var f=s(this),v=a(d),b=new o;return r(f)>v.size?c(v.getIterator(),function(T){_(f,T)&&h(b,T)}):m(f,function(T){v.includes(T)&&h(b,T)}),b}},4449:(n,l,t)=>{var s=t(7080),i=t(4402).has,r=t(5170),a=t(3789),m=t(8469),c=t(507),o=t(9539);n.exports=function(h){var _=s(this),d=a(h);if(r(_)<=d.size)return m(_,function(v){if(d.includes(v))return!1},!0)!==!1;var f=d.getIterator();return c(f,function(v){if(i(_,v))return o(f,"normal",!1)})!==!1}},3838:(n,l,t)=>{var s=t(7080),i=t(5170),r=t(8469),a=t(3789);n.exports=function(m){var c=s(this),o=a(m);return i(c)>o.size?!1:r(c,function(h){if(!o.includes(h))return!1},!0)!==!1}},8527:(n,l,t)=>{var s=t(7080),i=t(4402).has,r=t(5170),a=t(3789),m=t(507),c=t(9539);n.exports=function(o){var h=s(this),_=a(o);if(r(h)<_.size)return!1;var d=_.getIterator();return m(d,function(f){if(!i(h,f))return c(d,"normal",!1)})!==!1}},8469:(n,l,t)=>{var s=t(9504),i=t(507),r=t(4402),a=r.Set,m=r.proto,c=s(m.forEach),o=s(m.keys),h=o(new a).next;n.exports=function(_,d,f){return f?i({iterator:o(_),next:h},d):c(_,d)}},4916:(n,l,t)=>{var s=t(7751),i=function(r){return{size:r,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};n.exports=function(r){var a=s("Set");try{new a()[r](i(0));try{return new a()[r](i(-1)),!1}catch{return!0}}catch{return!1}}},5170:(n,l,t)=>{var s=t(6706),i=t(4402);n.exports=s(i.proto,"size","get")||function(r){return r.size}},3650:(n,l,t)=>{var s=t(7080),i=t(4402),r=t(9286),a=t(3789),m=t(507),c=i.add,o=i.has,h=i.remove;n.exports=function(_){var d=s(this),f=a(_).getIterator(),v=r(d);return m(f,function(b){o(d,b)?h(v,b):c(v,b)}),v}},4204:(n,l,t)=>{var s=t(7080),i=t(4402).add,r=t(9286),a=t(3789),m=t(507);n.exports=function(c){var o=s(this),h=a(c).getIterator(),_=r(o);return m(h,function(d){i(_,d)}),_}},6119:(n,l,t)=>{var s=t(5745),i=t(3392),r=s("keys");n.exports=function(a){return r[a]||(r[a]=i(a))}},7629:(n,l,t)=>{var s=t(6395),i=t(4475),r=t(9433),a="__core-js_shared__",m=n.exports=i[a]||r(a,{});(m.versions||(m.versions=[])).push({version:"3.36.1",mode:s?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(n,l,t)=>{var s=t(7629);n.exports=function(i,r){return s[i]||(s[i]=r||{})}},1548:(n,l,t)=>{var s=t(4475),i=t(9039),r=t(7388),a=t(7290),m=t(516),c=t(9088),o=s.structuredClone;n.exports=!!o&&!i(function(){if(m&&r>92||c&&r>94||a&&r>97)return!1;var h=new ArrayBuffer(8),_=o(h,{transfer:[h]});return h.byteLength!==0||_.byteLength!==8})},4495:(n,l,t)=>{var s=t(7388),i=t(9039),r=t(4475),a=r.String;n.exports=!!Object.getOwnPropertySymbols&&!i(function(){var m=Symbol("symbol detection");return!a(m)||!(Object(m)instanceof Symbol)||!Symbol.sham&&s&&s<41})},5610:(n,l,t)=>{var s=t(1291),i=Math.max,r=Math.min;n.exports=function(a,m){var c=s(a);return c<0?i(c+m,0):r(c,m)}},5854:(n,l,t)=>{var s=t(2777),i=TypeError;n.exports=function(r){var a=s(r,"number");if(typeof a=="number")throw new i("Can't convert number to bigint");return BigInt(a)}},7696:(n,l,t)=>{var s=t(1291),i=t(8014),r=RangeError;n.exports=function(a){if(a===void 0)return 0;var m=s(a),c=i(m);if(m!==c)throw new r("Wrong length or index");return c}},5397:(n,l,t)=>{var s=t(7055),i=t(7750);n.exports=function(r){return s(i(r))}},1291:(n,l,t)=>{var s=t(741);n.exports=function(i){var r=+i;return r!==r||r===0?0:s(r)}},8014:(n,l,t)=>{var s=t(1291),i=Math.min;n.exports=function(r){var a=s(r);return a>0?i(a,9007199254740991):0}},8981:(n,l,t)=>{var s=t(7750),i=Object;n.exports=function(r){return i(s(r))}},2777:(n,l,t)=>{var s=t(9565),i=t(34),r=t(757),a=t(5966),m=t(4270),c=t(8227),o=TypeError,h=c("toPrimitive");n.exports=function(_,d){if(!i(_)||r(_))return _;var f=a(_,h),v;if(f){if(d===void 0&&(d="default"),v=s(f,_,d),!i(v)||r(v))return v;throw new o("Can't convert object to primitive value")}return d===void 0&&(d="number"),m(_,d)}},6969:(n,l,t)=>{var s=t(2777),i=t(757);n.exports=function(r){var a=s(r,"string");return i(a)?a:a+""}},2140:(n,l,t)=>{var s=t(8227),i=s("toStringTag"),r={};r[i]="z",n.exports=String(r)==="[object z]"},655:(n,l,t)=>{var s=t(6955),i=String;n.exports=function(r){if(s(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i(r)}},9714:(n,l,t)=>{var s=t(9088);n.exports=function(i){try{if(s)return Function('return require("'+i+'")')()}catch{}}},6823:n=>{var l=String;n.exports=function(t){try{return l(t)}catch{return"Object"}}},3392:(n,l,t)=>{var s=t(9504),i=0,r=Math.random(),a=s(1 .toString);n.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+a(++i+r,36)}},7040:(n,l,t)=>{var s=t(4495);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},8686:(n,l,t)=>{var s=t(3724),i=t(9039);n.exports=s&&i(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},2812:n=>{var l=TypeError;n.exports=function(t,s){if(t<s)throw new l("Not enough arguments");return t}},8622:(n,l,t)=>{var s=t(4475),i=t(4901),r=s.WeakMap;n.exports=i(r)&&/native code/.test(String(r))},8227:(n,l,t)=>{var s=t(4475),i=t(5745),r=t(9297),a=t(3392),m=t(4495),c=t(7040),o=s.Symbol,h=i("wks"),_=c?o.for||o:o&&o.withoutSetter||a;n.exports=function(d){return r(h,d)||(h[d]=m&&r(o,d)?o[d]:_("Symbol."+d)),h[d]}},6573:(n,l,t)=>{var s=t(3724),i=t(2106),r=t(3238),a=ArrayBuffer.prototype;s&&!("detached"in a)&&i(a,"detached",{configurable:!0,get:function(){return r(this)}})},7936:(n,l,t)=>{var s=t(6518),i=t(5636);i&&s({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(n,l,t)=>{var s=t(6518),i=t(5636);i&&s({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},4114:(n,l,t)=>{var s=t(6518),i=t(8981),r=t(6198),a=t(4527),m=t(6837),c=t(9039),o=c(function(){return[].push.call({length:4294967296},1)!==4294967297}),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(d){return d instanceof TypeError}},_=o||!h();s({target:"Array",proto:!0,arity:1,forced:_},{push:function(d){var f=i(this),v=r(f),b=arguments.length;m(v+b);for(var T=0;T<b;T++)f[v]=arguments[T],v++;return a(f,v),v}})},4628:(n,l,t)=>{var s=t(6518),i=t(6043);s({target:"Promise",stat:!0},{withResolvers:function(){var r=i.f(this);return{promise:r.promise,resolve:r.resolve,reject:r.reject}}})},7467:(n,l,t)=>{var s=t(7628),i=t(4644),r=i.aTypedArray,a=i.exportTypedArrayMethod,m=i.getTypedArrayConstructor;a("toReversed",function(){return s(r(this),m(this))})},4732:(n,l,t)=>{var s=t(4644),i=t(9504),r=t(9306),a=t(5370),m=s.aTypedArray,c=s.getTypedArrayConstructor,o=s.exportTypedArrayMethod,h=i(s.TypedArrayPrototype.sort);o("toSorted",function(_){_!==void 0&&r(_);var d=m(this),f=a(c(d),d);return h(f,_)})},9577:(n,l,t)=>{var s=t(9928),i=t(4644),r=t(1108),a=t(1291),m=t(5854),c=i.aTypedArray,o=i.getTypedArrayConstructor,h=i.exportTypedArrayMethod,_=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(d){return d===8}}();h("with",function(d,f){var v=c(this),b=a(d),T=r(v)?m(f):+f;return s(v,o(v),b,T)},!_)},8992:(n,l,t)=>{var s=t(6518),i=t(4475),r=t(679),a=t(8551),m=t(4901),c=t(2787),o=t(2106),h=t(4659),_=t(9039),d=t(9297),f=t(8227),v=t(7657).IteratorPrototype,b=t(3724),T=t(6395),K="constructor",q="Iterator",L=f("toStringTag"),F=TypeError,M=i[q],G=T||!m(M)||M.prototype!==v||!_(function(){M({})}),$=function(){if(r(this,v),c(this)===v)throw new F("Abstract class Iterator not directly constructable")},J=function(tt,Lt){b?o(v,tt,{configurable:!0,get:function(){return Lt},set:function(At){if(a(this),this===v)throw new F("You can't redefine this property");d(this,tt)?this[tt]=At:h(this,tt,At)}}):v[tt]=Lt};d(v,L)||J(L,q),(G||!d(v,K)||v[K]===Object)&&J(K,$),$.prototype=v,s({global:!0,constructor:!0,forced:G},{Iterator:$})},3215:(n,l,t)=>{var s=t(6518),i=t(2652),r=t(9306),a=t(8551),m=t(1767);s({target:"Iterator",proto:!0,real:!0},{every:function(c){a(this),r(c);var o=m(this),h=0;return!i(o,function(_,d){if(!c(_,h++))return d()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},4520:(n,l,t)=>{var s=t(6518),i=t(9565),r=t(9306),a=t(8551),m=t(1767),c=t(9462),o=t(6319),h=t(6395),_=c(function(){for(var d=this.iterator,f=this.predicate,v=this.next,b,T,K;;){if(b=a(i(v,d)),T=this.done=!!b.done,T)return;if(K=b.value,o(d,f,[K,this.counter++],!0))return K}});s({target:"Iterator",proto:!0,real:!0,forced:h},{filter:function(d){return a(this),r(d),new _(m(this),{predicate:d})}})},670:(n,l,t)=>{var s=t(6518),i=t(9565),r=t(9306),a=t(8551),m=t(1767),c=t(8646),o=t(9462),h=t(9539),_=t(6395),d=o(function(){for(var f=this.iterator,v=this.mapper,b,T;;){if(T=this.inner)try{if(b=a(i(T.next,T.iterator)),!b.done)return b.value;this.inner=null}catch(K){h(f,"throw",K)}if(b=a(i(this.next,f)),this.done=!!b.done)return;try{this.inner=c(v(b.value,this.counter++),!1)}catch(K){h(f,"throw",K)}}});s({target:"Iterator",proto:!0,real:!0,forced:_},{flatMap:function(f){return a(this),r(f),new d(m(this),{mapper:f,inner:null})}})},1454:(n,l,t)=>{var s=t(6518),i=t(713),r=t(6395);s({target:"Iterator",proto:!0,real:!0,forced:r},{map:i})},7550:(n,l,t)=>{var s=t(6518),i=t(2652),r=t(9306),a=t(8551),m=t(1767);s({target:"Iterator",proto:!0,real:!0},{some:function(c){a(this),r(c);var o=m(this),h=0;return i(o,function(_,d){if(c(_,h++))return d()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},8335:(n,l,t)=>{var s=t(6518),i=t(3724),r=t(4475),a=t(7751),m=t(9504),c=t(9565),o=t(4901),h=t(34),_=t(4376),d=t(9297),f=t(655),v=t(6198),b=t(4659),T=t(9039),K=t(8235),q=t(4495),L=r.JSON,F=r.Number,M=r.SyntaxError,G=L&&L.parse,$=a("Object","keys"),J=Object.getOwnPropertyDescriptor,tt=m("".charAt),Lt=m("".slice),At=m(/./.exec),Nt=m([].push),pt=/^\d$/,ot=/^[1-9]$/,ft=/^(?:-|\d)$/,gt=/^[\t\n\r ]$/,Q=0,at=1,Rt=function(Ut,It){Ut=f(Ut);var St=new ae(Ut,0),$t=St.parse(),he=$t.value,jt=St.skip(gt,$t.end);if(jt<Ut.length)throw new M('Unexpected extra character: "'+tt(Ut,jt)+'" after the parsed data at: '+jt);return o(It)?Dt({"":he},"",It,$t):he},Dt=function(Ut,It,St,$t){var he=Ut[It],jt=$t&&he===$t.value,le=jt&&typeof $t.source=="string"?{source:$t.source}:{},Xt,nt,u,g,E;if(h(he)){var R=_(he),y=jt?$t.nodes:R?[]:{};if(R)for(Xt=y.length,u=v(he),g=0;g<u;g++)Gt(he,g,Dt(he,""+g,St,g<Xt?y[g]:void 0));else for(nt=$(he),u=v(nt),g=0;g<u;g++)E=nt[g],Gt(he,E,Dt(he,E,St,d(y,E)?y[E]:void 0))}return c(St,Ut,It,he,le)},Gt=function(Ut,It,St){if(i){var $t=J(Ut,It);if($t&&!$t.configurable)return}St===void 0?delete Ut[It]:b(Ut,It,St)},Qt=function(Ut,It,St,$t){this.value=Ut,this.end=It,this.source=St,this.nodes=$t},ae=function(Ut,It){this.source=Ut,this.index=It};ae.prototype={fork:function(Ut){return new ae(this.source,Ut)},parse:function(){var Ut=this.source,It=this.skip(gt,this.index),St=this.fork(It),$t=tt(Ut,It);if(At(ft,$t))return St.number();switch($t){case"{":return St.object();case"[":return St.array();case'"':return St.string();case"t":return St.keyword(!0);case"f":return St.keyword(!1);case"n":return St.keyword(null)}throw new M('Unexpected character: "'+$t+'" at: '+It)},node:function(Ut,It,St,$t,he){return new Qt(It,$t,Ut?null:Lt(this.source,St,$t),he)},object:function(){for(var Ut=this.source,It=this.index+1,St=!1,$t={},he={};It<Ut.length;){if(It=this.until(['"',"}"],It),tt(Ut,It)==="}"&&!St){It++;break}var jt=this.fork(It).string(),le=jt.value;It=jt.end,It=this.until([":"],It)+1,It=this.skip(gt,It),jt=this.fork(It).parse(),b(he,le,jt),b($t,le,jt.value),It=this.until([",","}"],jt.end);var Xt=tt(Ut,It);if(Xt===",")St=!0,It++;else if(Xt==="}"){It++;break}}return this.node(at,$t,this.index,It,he)},array:function(){for(var Ut=this.source,It=this.index+1,St=!1,$t=[],he=[];It<Ut.length;){if(It=this.skip(gt,It),tt(Ut,It)==="]"&&!St){It++;break}var jt=this.fork(It).parse();if(Nt(he,jt),Nt($t,jt.value),It=this.until([",","]"],jt.end),tt(Ut,It)===",")St=!0,It++;else if(tt(Ut,It)==="]"){It++;break}}return this.node(at,$t,this.index,It,he)},string:function(){var Ut=this.index,It=K(this.source,this.index+1);return this.node(Q,It.value,Ut,It.end)},number:function(){var Ut=this.source,It=this.index,St=It;if(tt(Ut,St)==="-"&&St++,tt(Ut,St)==="0")St++;else if(At(ot,tt(Ut,St)))St=this.skip(pt,++St);else throw new M("Failed to parse number at: "+St);if(tt(Ut,St)==="."&&(St=this.skip(pt,++St)),tt(Ut,St)==="e"||tt(Ut,St)==="E"){St++,(tt(Ut,St)==="+"||tt(Ut,St)==="-")&&St++;var $t=St;if(St=this.skip(pt,St),$t===St)throw new M("Failed to parse number's exponent value at: "+St)}return this.node(Q,F(Lt(Ut,It,St)),It,St)},keyword:function(Ut){var It=""+Ut,St=this.index,$t=St+It.length;if(Lt(this.source,St,$t)!==It)throw new M("Failed to parse value at: "+St);return this.node(Q,Ut,St,$t)},skip:function(Ut,It){for(var St=this.source;It<St.length&&At(Ut,tt(St,It));It++);return It},until:function(Ut,It){It=this.skip(gt,It);for(var St=tt(this.source,It),$t=0;$t<Ut.length;$t++)if(Ut[$t]===St)return It;throw new M('Unexpected character: "'+St+'" at: '+It)}};var be=T(function(){var Ut="9007199254740993",It;return G(Ut,function(St,$t,he){It=he.source}),It!==Ut}),me=q&&!T(function(){return 1/G("-0 	")!==-1/0});s({target:"JSON",stat:!0,forced:be},{parse:function(Ut,It){return me&&!o(It)?G(Ut):Rt(Ut,It)}})},3375:(n,l,t)=>{var s=t(6518),i=t(3440),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:i})},9225:(n,l,t)=>{var s=t(6518),i=t(9039),r=t(8750),a=t(4916),m=!a("intersection")||i(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});s({target:"Set",proto:!0,real:!0,forced:m},{intersection:r})},3972:(n,l,t)=>{var s=t(6518),i=t(4449),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:i})},9209:(n,l,t)=>{var s=t(6518),i=t(3838),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:i})},5714:(n,l,t)=>{var s=t(6518),i=t(8527),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:i})},7561:(n,l,t)=>{var s=t(6518),i=t(3650),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:i})},6197:(n,l,t)=>{var s=t(6518),i=t(4204),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:i})},4979:(n,l,t)=>{var s=t(6518),i=t(4475),r=t(7751),a=t(6980),m=t(4913).f,c=t(9297),o=t(679),h=t(3167),_=t(2603),d=t(5002),f=t(6193),v=t(3724),b=t(6395),T="DOMException",K=r("Error"),q=r(T),L=function(){o(this,F);var ft=arguments.length,gt=_(ft<1?void 0:arguments[0]),Q=_(ft<2?void 0:arguments[1],"Error"),at=new q(gt,Q),Rt=new K(gt);return Rt.name=T,m(at,"stack",a(1,f(Rt.stack,1))),h(at,this,L),at},F=L.prototype=q.prototype,M="stack"in new K(T),G="stack"in new q(1,2),$=q&&v&&Object.getOwnPropertyDescriptor(i,T),J=!!$&&!($.writable&&$.configurable),tt=M&&!J&&!G;s({global:!0,constructor:!0,forced:b||tt},{DOMException:tt?L:q});var Lt=r(T),At=Lt.prototype;if(At.constructor!==Lt){b||m(At,"constructor",a(1,Lt));for(var Nt in d)if(c(d,Nt)){var pt=d[Nt],ot=pt.s;c(Lt,ot)||m(Lt,ot,a(6,pt.c))}}},4603:(n,l,t)=>{var s=t(6840),i=t(9504),r=t(655),a=t(2812),m=URLSearchParams,c=m.prototype,o=i(c.append),h=i(c.delete),_=i(c.forEach),d=i([].push),f=new m("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&s(c,"delete",function(v){var b=arguments.length,T=b<2?void 0:arguments[1];if(b&&T===void 0)return h(this,v);var K=[];_(this,function(tt,Lt){d(K,{key:Lt,value:tt})}),a(b,1);for(var q=r(v),L=r(T),F=0,M=0,G=!1,$=K.length,J;F<$;)J=K[F++],G||J.key===q?(G=!0,h(this,J.key)):M++;for(;M<$;)J=K[M++],J.key===q&&J.value===L||o(this,J.key,J.value)},{enumerable:!0,unsafe:!0})},7566:(n,l,t)=>{var s=t(6840),i=t(9504),r=t(655),a=t(2812),m=URLSearchParams,c=m.prototype,o=i(c.getAll),h=i(c.has),_=new m("a=1");(_.has("a",2)||!_.has("a",void 0))&&s(c,"has",function(d){var f=arguments.length,v=f<2?void 0:arguments[1];if(f&&v===void 0)return h(this,d);var b=o(this,d);a(f,1);for(var T=r(v),K=0;K<b.length;)if(b[K++]===T)return!0;return!1},{enumerable:!0,unsafe:!0})},8721:(n,l,t)=>{var s=t(3724),i=t(9504),r=t(2106),a=URLSearchParams.prototype,m=i(a.forEach);s&&!("size"in a)&&r(a,"size",{get:function(){var c=0;return m(this,function(){c++}),c},configurable:!0,enumerable:!0})},6976:(n,l,t)=>{var Ut,St,Os,he,Qr,le,Zr,nt,u,g,E,R,y,k,I,D,S,A,w,j,Z,X,rt,ct,bt,ta,vt,Qn,z,Pi,lt,Di,Tt,qt,zt,Yt,te,ne,ce,Fi,Ae,Ce,Oe,Fe,ea,Le,Ni;t.d(l,{AnnotationLayer:()=>me,FreeTextAnnotationElement:()=>At,InkAnnotationElement:()=>at,StampAnnotationElement:()=>ae}),t(4114),t(8992),t(670),t(1454),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292),i=t(5419),r=t(9792);function a(ue){return Math.floor(Math.max(0,Math.min(1,ue))*255).toString(16).padStart(2,"0")}function m(ue){return Math.max(0,Math.min(255,255*ue))}class c{static CMYK_G(Y){let[P,st,U,C]=Y;return["G",1-Math.min(1,.3*P+.59*U+.11*st+C)]}static G_CMYK(Y){let[P]=Y;return["CMYK",0,0,0,1-P]}static G_RGB(Y){let[P]=Y;return["RGB",P,P,P]}static G_rgb(Y){let[P]=Y;return P=m(P),[P,P,P]}static G_HTML(Y){let[P]=Y;const st=a(P);return`#${st}${st}${st}`}static RGB_G(Y){let[P,st,U]=Y;return["G",.3*P+.59*st+.11*U]}static RGB_rgb(Y){return Y.map(m)}static RGB_HTML(Y){return`#${Y.map(a).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(Y){let[P,st,U,C]=Y;return["RGB",1-Math.min(1,P+C),1-Math.min(1,U+C),1-Math.min(1,st+C)]}static CMYK_rgb(Y){let[P,st,U,C]=Y;return[m(1-Math.min(1,P+C)),m(1-Math.min(1,U+C)),m(1-Math.min(1,st+C))]}static CMYK_HTML(Y){const P=this.CMYK_RGB(Y).slice(1);return this.RGB_HTML(P)}static RGB_CMYK(Y){let[P,st,U]=Y;const C=1-P,N=1-st,V=1-U,ht=Math.min(C,N,V);return["CMYK",C,N,V,ht]}}var o=t(8284);const h=1e3,_=9,d=new WeakSet;function f(ue){return{width:ue[2]-ue[0],height:ue[3]-ue[1]}}class v{static create(Y){switch(Y.data.annotationType){case s.AnnotationType.LINK:return new T(Y);case s.AnnotationType.TEXT:return new K(Y);case s.AnnotationType.WIDGET:switch(Y.data.fieldType){case"Tx":return new L(Y);case"Btn":return Y.data.radioButton?new G(Y):Y.data.checkBox?new M(Y):new $(Y);case"Ch":return new J(Y);case"Sig":return new F(Y)}return new q(Y);case s.AnnotationType.POPUP:return new tt(Y);case s.AnnotationType.FREETEXT:return new At(Y);case s.AnnotationType.LINE:return new Nt(Y);case s.AnnotationType.SQUARE:return new pt(Y);case s.AnnotationType.CIRCLE:return new ot(Y);case s.AnnotationType.POLYLINE:return new ft(Y);case s.AnnotationType.CARET:return new Q(Y);case s.AnnotationType.INK:return new at(Y);case s.AnnotationType.POLYGON:return new gt(Y);case s.AnnotationType.HIGHLIGHT:return new Rt(Y);case s.AnnotationType.UNDERLINE:return new Dt(Y);case s.AnnotationType.SQUIGGLY:return new Gt(Y);case s.AnnotationType.STRIKEOUT:return new Qt(Y);case s.AnnotationType.STAMP:return new ae(Y);case s.AnnotationType.FILEATTACHMENT:return new be(Y);default:return new b(Y)}}}const It=class It{constructor(Y){x(this,Ut,!1);let{isRenderable:P=!1,ignoreBorder:st=!1,createQuadrilaterals:U=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=P,this.data=Y.data,this.layer=Y.layer,this.linkService=Y.linkService,this.downloadManager=Y.downloadManager,this.imageResourcesPath=Y.imageResourcesPath,this.renderForms=Y.renderForms,this.svgFactory=Y.svgFactory,this.annotationStorage=Y.annotationStorage,this.enableScripting=Y.enableScripting,this.hasJSActions=Y.hasJSActions,this._fieldObjects=Y.fieldObjects,this.parent=Y.parent,P&&(this.container=this._createContainer(st)),U&&this._createQuadrilaterals()}static _hasPopupData(Y){let{titleObj:P,contentsObj:st,richText:U}=Y;return!!(P!=null&&P.str||st!=null&&st.str||U!=null&&U.str)}get hasPopupData(){return It._hasPopupData(this.data)}_createContainer(Y){const{data:P,parent:{page:st,viewport:U}}=this,C=document.createElement("section");C.setAttribute("data-annotation-id",P.id),this instanceof q||(C.tabIndex=h),C.style.zIndex=this.parent.zIndex++,P.popupRef&&C.setAttribute("aria-haspopup","dialog"),P.alternativeText&&(C.title=P.alternativeText),P.noRotate&&C.classList.add("norotate");const{pageWidth:N,pageHeight:V,pageX:ht,pageY:yt}=U.rawDims;if(!P.rect||this instanceof tt){const{rotation:Ft}=P;return!P.hasOwnCanvas&&Ft!==0&&this.setRotation(Ft,C),C}const{width:wt,height:Ht}=f(P.rect),Mt=s.Util.normalizeRect([P.rect[0],st.view[3]-P.rect[1]+st.view[1],P.rect[2],st.view[3]-P.rect[3]+st.view[1]]);if(!Y&&P.borderStyle.width>0){C.style.borderWidth=`${P.borderStyle.width}px`;const Ft=P.borderStyle.horizontalCornerRadius,Kt=P.borderStyle.verticalCornerRadius;if(Ft>0||Kt>0){const ie=`calc(${Ft}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;C.style.borderRadius=ie}else if(this instanceof G){const ie=`calc(${wt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;C.style.borderRadius=ie}switch(P.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:C.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:C.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:C.style.borderBottomStyle="solid";break}const re=P.borderColor||null;re?(B(this,Ut,!0),C.style.borderColor=s.Util.makeHexColor(re[0]|0,re[1]|0,re[2]|0)):C.style.borderWidth=0}C.style.left=`${100*(Mt[0]-ht)/N}%`,C.style.top=`${100*(Mt[1]-yt)/V}%`;const{rotation:Ct}=P;return P.hasOwnCanvas||Ct===0?(C.style.width=`${100*wt/N}%`,C.style.height=`${100*Ht/V}%`):this.setRotation(Ct,C),C}setRotation(Y){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:st,pageHeight:U}=this.parent.viewport.rawDims,{width:C,height:N}=f(this.data.rect);let V,ht;Y%180===0?(V=100*C/st,ht=100*N/U):(V=100*N/st,ht=100*C/U),P.style.width=`${V}%`,P.style.height=`${ht}%`,P.setAttribute("data-main-rotation",(360-Y)%360)}get _commonActions(){const Y=(P,st,U)=>{const C=U.detail[P],N=C[0],V=C.slice(1);U.target.style[st]=c[`${N}_HTML`](V),this.annotationStorage.setValue(this.data.id,{[st]:c[`${N}_rgb`](V)})};return(0,s.shadow)(this,"_commonActions",{display:P=>{const{display:st}=P.detail,U=st%2===1;this.container.style.visibility=U?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:U,noPrint:st===1||st===2})},print:P=>{this.annotationStorage.setValue(this.data.id,{noPrint:!P.detail.print})},hidden:P=>{const{hidden:st}=P.detail;this.container.style.visibility=st?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:st,noView:st})},focus:P=>{setTimeout(()=>P.target.focus({preventScroll:!1}),0)},userName:P=>{P.target.title=P.detail.userName},readonly:P=>{P.target.disabled=P.detail.readonly},required:P=>{this._setRequired(P.target,P.detail.required)},bgColor:P=>{Y("bgColor","backgroundColor",P)},fillColor:P=>{Y("fillColor","backgroundColor",P)},fgColor:P=>{Y("fgColor","color",P)},textColor:P=>{Y("textColor","color",P)},borderColor:P=>{Y("borderColor","borderColor",P)},strokeColor:P=>{Y("strokeColor","borderColor",P)},rotation:P=>{const st=P.detail.rotation;this.setRotation(st),this.annotationStorage.setValue(this.data.id,{rotation:st})}})}_dispatchEventFromSandbox(Y,P){var U;const st=this._commonActions;for(const C of Object.keys(P.detail))(U=Y[C]||st[C])==null||U(P)}_setDefaultPropertiesFromJS(Y){if(!this.enableScripting)return;const P=this.annotationStorage.getRawValue(this.data.id);if(!P)return;const st=this._commonActions;for(const[U,C]of Object.entries(P)){const N=st[U];if(N){const V={detail:{[U]:C},target:Y};N(V),delete P[U]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Y}=this.data;if(!Y)return;const[P,st,U,C]=this.data.rect;if(Y.length===1){const[,{x:Kt,y:re},{x:ie,y:we}]=Y[0];if(U===Kt&&C===re&&P===ie&&st===we)return}const{style:N}=this.container;let V;if(e(this,Ut)){const{borderColor:Kt,borderWidth:re}=N;N.borderWidth=0,V=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${re}">`],this.container.classList.add("hasBorder")}const ht=U-P,yt=C-st,{svgFactory:wt}=this,Ht=wt.createElement("svg");Ht.classList.add("quadrilateralsContainer"),Ht.setAttribute("width",0),Ht.setAttribute("height",0);const Mt=wt.createElement("defs");Ht.append(Mt);const Ct=wt.createElement("clipPath"),Ft=`clippath_${this.data.id}`;Ct.setAttribute("id",Ft),Ct.setAttribute("clipPathUnits","objectBoundingBox"),Mt.append(Ct);for(const[,{x:Kt,y:re},{x:ie,y:we}]of Y){const de=wt.createElement("rect"),ze=(ie-P)/ht,Ve=(C-re)/yt,He=(Kt-ie)/ht,ss=(re-we)/yt;de.setAttribute("x",ze),de.setAttribute("y",Ve),de.setAttribute("width",He),de.setAttribute("height",ss),Ct.append(de),V==null||V.push(`<rect vector-effect="non-scaling-stroke" x="${ze}" y="${Ve}" width="${He}" height="${ss}"/>`)}e(this,Ut)&&(V.push("</g></svg>')"),N.backgroundImage=V.join("")),this.container.append(Ht),this.container.style.clipPath=`url(#${Ft})`}_createPopup(){const{container:Y,data:P}=this;Y.setAttribute("aria-haspopup","dialog");const st=new tt({data:{color:P.color,titleObj:P.titleObj,modificationDate:P.modificationDate,contentsObj:P.contentsObj,richText:P.richText,parentRect:P.rect,borderStyle:0,id:`popup_${P.id}`,rotation:P.rotation},parent:this.parent,elements:[this]});this.parent.div.append(st.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Y){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const st=[];if(this._fieldObjects){const U=this._fieldObjects[Y];if(U)for(const{page:C,id:N,exportValues:V}of U){if(C===-1||N===P)continue;const ht=typeof V=="string"?V:null,yt=document.querySelector(`[data-element-id="${N}"]`);if(yt&&!d.has(yt)){(0,s.warn)(`_getElementsByName - element not allowed: ${N}`);continue}st.push({id:N,exportValue:ht,domElement:yt})}return st}for(const U of document.getElementsByName(Y)){const{exportValue:C}=U,N=U.getAttribute("data-element-id");N!==P&&d.has(U)&&st.push({id:N,exportValue:C,domElement:U})}return st}show(){var Y;this.container&&(this.container.hidden=!1),(Y=this.popup)==null||Y.maybeShow()}hide(){var Y;this.container&&(this.container.hidden=!0),(Y=this.popup)==null||Y.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Y=this.getElementsToTriggerPopup();if(Array.isArray(Y))for(const P of Y)P.classList.add("highlightArea");else Y.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:Y,data:{id:P}}=this;this.container.addEventListener("dblclick",()=>{var st;(st=this.linkService.eventBus)==null||st.dispatch("switchannotationeditormode",{source:this,mode:Y,editId:P})})}};Ut=new WeakMap;let b=It;class T extends b{constructor(P){let st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(P,{isRenderable:!0,ignoreBorder:!!(st!=null&&st.ignoreBorder),createQuadrilaterals:!0});x(this,St);x(this,he);x(this,le);this.isTooltipOnly=P.data.isTooltipOnly}render(){const{data:P,linkService:st}=this,U=document.createElement("a");U.setAttribute("data-element-id",P.id);let C=!1;return P.url?(st.addLinkAttributes(U,P.url,P.newWindow),C=!0):P.action?(this._bindNamedAction(U,P.action),C=!0):P.attachment?(O(this,he,Qr).call(this,U,P.attachment,P.attachmentDest),C=!0):P.setOCGState?(O(this,le,Zr).call(this,U,P.setOCGState),C=!0):P.dest?(this._bindLink(U,P.dest),C=!0):(P.actions&&(P.actions.Action||P.actions["Mouse Up"]||P.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(U,P),C=!0),P.resetForm?(this._bindResetFormAction(U,P.resetForm),C=!0):this.isTooltipOnly&&!C&&(this._bindLink(U,""),C=!0)),this.container.classList.add("linkAnnotation"),C&&this.container.append(U),this.container}_bindLink(P,st){P.href=this.linkService.getDestinationHash(st),P.onclick=()=>(st&&this.linkService.goToDestination(st),!1),(st||st==="")&&O(this,St,Os).call(this)}_bindNamedAction(P,st){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeNamedAction(st),!1),O(this,St,Os).call(this)}_bindJSAction(P,st){P.href=this.linkService.getAnchorUrl("");const U=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const C of Object.keys(st.actions)){const N=U.get(C);N&&(P[N]=()=>{var V;return(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st.id,name:C}}),!1})}P.onclick||(P.onclick=()=>!1),O(this,St,Os).call(this)}_bindResetFormAction(P,st){const U=P.onclick;if(U||(P.href=this.linkService.getAnchorUrl("")),O(this,St,Os).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),U||(P.onclick=()=>!1);return}P.onclick=()=>{var Ht;U==null||U();const{fields:C,refs:N,include:V}=st,ht=[];if(C.length!==0||N.length!==0){const Mt=new Set(N);for(const Ct of C){const Ft=this._fieldObjects[Ct]||[];for(const{id:Kt}of Ft)Mt.add(Kt)}for(const Ct of Object.values(this._fieldObjects))for(const Ft of Ct)Mt.has(Ft.id)===V&&ht.push(Ft)}else for(const Mt of Object.values(this._fieldObjects))ht.push(...Mt);const yt=this.annotationStorage,wt=[];for(const Mt of ht){const{id:Ct}=Mt;switch(wt.push(Ct),Mt.type){case"text":{const Kt=Mt.defaultValue||"";yt.setValue(Ct,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Mt.defaultValue===Mt.exportValues;yt.setValue(Ct,{value:Kt});break}case"combobox":case"listbox":{const Kt=Mt.defaultValue||"";yt.setValue(Ct,{value:Kt});break}default:continue}const Ft=document.querySelector(`[data-element-id="${Ct}"]`);if(Ft){if(!d.has(Ft)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Ct}`);continue}}else continue;Ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:wt,name:"ResetForm"}})),!1}}}St=new WeakSet,Os=function(){this.container.setAttribute("data-internal-link","")},he=new WeakSet,Qr=function(P,st){let U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>{var C;return(C=this.downloadManager)==null||C.openOrDownloadData(st.content,st.filename,U),!1},O(this,St,Os).call(this)},le=new WeakSet,Zr=function(P,st){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeSetOCGState(st),!1),O(this,St,Os).call(this)};class K extends b{constructor(Y){super(Y,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Y=document.createElement("img");return Y.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Y.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),Y.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Y),this.container}}class q extends b{render(){return this.container}showElementAndHideCanvas(Y){var P;this.data.hasOwnCanvas&&(((P=Y.previousSibling)==null?void 0:P.nodeName)==="CANVAS"&&(Y.previousSibling.hidden=!0),Y.hidden=!1)}_getKeyModifier(Y){return s.FeatureTest.platform.isMac?Y.metaKey:Y.ctrlKey}_setEventListener(Y,P,st,U,C){st.includes("mouse")?Y.addEventListener(st,N=>{var V;(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:U,value:C(N),shift:N.shiftKey,modifier:this._getKeyModifier(N)}})}):Y.addEventListener(st,N=>{var V;if(st==="blur"){if(!P.focused||!N.relatedTarget)return;P.focused=!1}else if(st==="focus"){if(P.focused)return;P.focused=!0}C&&((V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:U,value:C(N)}}))})}_setEventListeners(Y,P,st,U){var C,N,V;for(const[ht,yt]of st)(yt==="Action"||(C=this.data.actions)!=null&&C[yt])&&((yt==="Focus"||yt==="Blur")&&(P||(P={focused:!1})),this._setEventListener(Y,P,ht,yt,U),yt==="Focus"&&!((N=this.data.actions)!=null&&N.Blur)?this._setEventListener(Y,P,"blur","Blur",null):yt==="Blur"&&!((V=this.data.actions)!=null&&V.Focus)&&this._setEventListener(Y,P,"focus","Focus",null))}_setBackgroundColor(Y){const P=this.data.backgroundColor||null;Y.style.backgroundColor=P===null?"transparent":s.Util.makeHexColor(P[0],P[1],P[2])}_setTextStyle(Y){const P=["left","center","right"],{fontColor:st}=this.data.defaultAppearanceData,U=this.data.defaultAppearanceData.fontSize||_,C=Y.style;let N;const V=2,ht=yt=>Math.round(10*yt)/10;if(this.data.multiLine){const yt=Math.abs(this.data.rect[3]-this.data.rect[1]-V),wt=Math.round(yt/(s.LINE_FACTOR*U))||1,Ht=yt/wt;N=Math.min(U,ht(Ht/s.LINE_FACTOR))}else{const yt=Math.abs(this.data.rect[3]-this.data.rect[1]-V);N=Math.min(U,ht(yt/s.LINE_FACTOR))}C.fontSize=`calc(${N}px * var(--scale-factor))`,C.color=s.Util.makeHexColor(st[0],st[1],st[2]),this.data.textAlignment!==null&&(C.textAlign=P[this.data.textAlignment])}_setRequired(Y,P){P?Y.setAttribute("required",!0):Y.removeAttribute("required"),Y.setAttribute("aria-required",P)}}class L extends q{constructor(Y){const P=Y.renderForms||Y.data.hasOwnCanvas||!Y.data.hasAppearance&&!!Y.data.fieldValue;super(Y,{isRenderable:P})}setPropertyOnSiblings(Y,P,st,U){const C=this.annotationStorage;for(const N of this._getElementsByName(Y.name,Y.id))N.domElement&&(N.domElement[P]=st),C.setValue(N.id,{[U]:st})}render(){var U,C;const Y=this.annotationStorage,P=this.data.id;this.container.classList.add("textWidgetAnnotation");let st=null;if(this.renderForms){const N=Y.getValue(P,{value:this.data.fieldValue});let V=N.value||"";const ht=Y.getValue(P,{charLimit:this.data.maxLen}).charLimit;ht&&V.length>ht&&(V=V.slice(0,ht));let yt=N.formattedValue||((U=this.data.textContent)==null?void 0:U.join(`
`))||null;yt&&this.data.comb&&(yt=yt.replaceAll(/\s+/g,""));const wt={userValue:V,formattedValue:yt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(st=document.createElement("textarea"),st.textContent=yt??V,this.data.doNotScroll&&(st.style.overflowY="hidden")):(st=document.createElement("input"),st.type="text",st.setAttribute("value",yt??V),this.data.doNotScroll&&(st.style.overflowX="hidden")),this.data.hasOwnCanvas&&(st.hidden=!0),d.add(st),st.setAttribute("data-element-id",P),st.disabled=this.data.readOnly,st.name=this.data.fieldName,st.tabIndex=h,this._setRequired(st,this.data.required),ht&&(st.maxLength=ht),st.addEventListener("input",Mt=>{Y.setValue(P,{value:Mt.target.value}),this.setPropertyOnSiblings(st,"value",Mt.target.value,"value"),wt.formattedValue=null}),st.addEventListener("resetform",Mt=>{const Ct=this.data.defaultFieldValue??"";st.value=wt.userValue=Ct,wt.formattedValue=null});let Ht=Mt=>{const{formattedValue:Ct}=wt;Ct!=null&&(Mt.target.value=Ct),Mt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){st.addEventListener("focus",Ct=>{var Kt;if(wt.focused)return;const{target:Ft}=Ct;wt.userValue&&(Ft.value=wt.userValue),wt.lastCommittedValue=Ft.value,wt.commitKey=1,(Kt=this.data.actions)!=null&&Kt.Focus||(wt.focused=!0)}),st.addEventListener("updatefromsandbox",Ct=>{this.showElementAndHideCanvas(Ct.target);const Ft={value(Kt){wt.userValue=Kt.detail.value??"",Y.setValue(P,{value:wt.userValue.toString()}),Kt.target.value=wt.userValue},formattedValue(Kt){const{formattedValue:re}=Kt.detail;wt.formattedValue=re,re!=null&&Kt.target!==document.activeElement&&(Kt.target.value=re),Y.setValue(P,{formattedValue:re})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var de;const{charLimit:re}=Kt.detail,{target:ie}=Kt;if(re===0){ie.removeAttribute("maxLength");return}ie.setAttribute("maxLength",re);let we=wt.userValue;!we||we.length<=re||(we=we.slice(0,re),ie.value=wt.userValue=we,Y.setValue(P,{value:we}),(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:we,willCommit:!0,commitKey:1,selStart:ie.selectionStart,selEnd:ie.selectionEnd}}))}};this._dispatchEventFromSandbox(Ft,Ct)}),st.addEventListener("keydown",Ct=>{var re;wt.commitKey=1;let Ft=-1;if(Ct.key==="Escape"?Ft=0:Ct.key==="Enter"&&!this.data.multiLine?Ft=2:Ct.key==="Tab"&&(wt.commitKey=3),Ft===-1)return;const{value:Kt}=Ct.target;wt.lastCommittedValue!==Kt&&(wt.lastCommittedValue=Kt,wt.userValue=Kt,(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Kt,willCommit:!0,commitKey:Ft,selStart:Ct.target.selectionStart,selEnd:Ct.target.selectionEnd}}))});const Mt=Ht;Ht=null,st.addEventListener("blur",Ct=>{var Kt,re;if(!wt.focused||!Ct.relatedTarget)return;(Kt=this.data.actions)!=null&&Kt.Blur||(wt.focused=!1);const{value:Ft}=Ct.target;wt.userValue=Ft,wt.lastCommittedValue!==Ft&&((re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Ft,willCommit:!0,commitKey:wt.commitKey,selStart:Ct.target.selectionStart,selEnd:Ct.target.selectionEnd}})),Mt(Ct)}),(C=this.data.actions)!=null&&C.Keystroke&&st.addEventListener("beforeinput",Ct=>{var Ve;wt.lastCommittedValue=null;const{data:Ft,target:Kt}=Ct,{value:re,selectionStart:ie,selectionEnd:we}=Kt;let de=ie,ze=we;switch(Ct.inputType){case"deleteWordBackward":{const He=re.substring(0,ie).match(/\w*[^\w]*$/);He&&(de-=He[0].length);break}case"deleteWordForward":{const He=re.substring(ie).match(/^[^\w]*\w*/);He&&(ze+=He[0].length);break}case"deleteContentBackward":ie===we&&(de-=1);break;case"deleteContentForward":ie===we&&(ze+=1);break}Ct.preventDefault(),(Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:re,change:Ft||"",willCommit:!1,selStart:de,selEnd:ze}})}),this._setEventListeners(st,wt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ct=>Ct.target.value)}if(Ht&&st.addEventListener("blur",Ht),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/ht;st.classList.add("comb"),st.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else st=document.createElement("div"),st.textContent=this.data.fieldValue,st.style.verticalAlign="middle",st.style.display="table-cell",this.data.hasOwnCanvas&&(st.hidden=!0);return this._setTextStyle(st),this._setBackgroundColor(st),this._setDefaultPropertiesFromJS(st),this.container.append(st),this.container}}class F extends q{constructor(Y){super(Y,{isRenderable:!!Y.data.hasOwnCanvas})}}class M extends q{constructor(Y){super(Y,{isRenderable:Y.renderForms})}render(){const Y=this.annotationStorage,P=this.data,st=P.id;let U=Y.getValue(st,{value:P.exportValue===P.fieldValue}).value;typeof U=="string"&&(U=U!=="Off",Y.setValue(st,{value:U})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const C=document.createElement("input");return d.add(C),C.setAttribute("data-element-id",st),C.disabled=P.readOnly,this._setRequired(C,this.data.required),C.type="checkbox",C.name=P.fieldName,U&&C.setAttribute("checked",!0),C.setAttribute("exportValue",P.exportValue),C.tabIndex=h,C.addEventListener("change",N=>{const{name:V,checked:ht}=N.target;for(const yt of this._getElementsByName(V,st)){const wt=ht&&yt.exportValue===P.exportValue;yt.domElement&&(yt.domElement.checked=wt),Y.setValue(yt.id,{value:wt})}Y.setValue(st,{value:ht})}),C.addEventListener("resetform",N=>{const V=P.defaultFieldValue||"Off";N.target.checked=V===P.exportValue}),this.enableScripting&&this.hasJSActions&&(C.addEventListener("updatefromsandbox",N=>{const V={value(ht){ht.target.checked=ht.detail.value!=="Off",Y.setValue(st,{value:ht.target.checked})}};this._dispatchEventFromSandbox(V,N)}),this._setEventListeners(C,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.checked)),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class G extends q{constructor(Y){super(Y,{isRenderable:Y.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Y=this.annotationStorage,P=this.data,st=P.id;let U=Y.getValue(st,{value:P.fieldValue===P.buttonValue}).value;if(typeof U=="string"&&(U=U!==P.buttonValue,Y.setValue(st,{value:U})),U)for(const N of this._getElementsByName(P.fieldName,st))Y.setValue(N.id,{value:!1});const C=document.createElement("input");if(d.add(C),C.setAttribute("data-element-id",st),C.disabled=P.readOnly,this._setRequired(C,this.data.required),C.type="radio",C.name=P.fieldName,U&&C.setAttribute("checked",!0),C.tabIndex=h,C.addEventListener("change",N=>{const{name:V,checked:ht}=N.target;for(const yt of this._getElementsByName(V,st))Y.setValue(yt.id,{value:!1});Y.setValue(st,{value:ht})}),C.addEventListener("resetform",N=>{const V=P.defaultFieldValue;N.target.checked=V!=null&&V===P.buttonValue}),this.enableScripting&&this.hasJSActions){const N=P.buttonValue;C.addEventListener("updatefromsandbox",V=>{const ht={value:yt=>{const wt=N===yt.detail.value;for(const Ht of this._getElementsByName(yt.target.name)){const Mt=wt&&Ht.id===st;Ht.domElement&&(Ht.domElement.checked=Mt),Y.setValue(Ht.id,{value:Mt})}}};this._dispatchEventFromSandbox(ht,V)}),this._setEventListeners(C,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)}return this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class $ extends T{constructor(Y){super(Y,{ignoreBorder:Y.data.hasAppearance})}render(){const Y=super.render();Y.classList.add("buttonWidgetAnnotation","pushButton");const P=Y.lastChild;return this.enableScripting&&this.hasJSActions&&P&&(this._setDefaultPropertiesFromJS(P),P.addEventListener("updatefromsandbox",st=>{this._dispatchEventFromSandbox({},st)})),Y}}class J extends q{constructor(Y){super(Y,{isRenderable:Y.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Y=this.annotationStorage,P=this.data.id,st=Y.getValue(P,{value:this.data.fieldValue}),U=document.createElement("select");d.add(U),U.setAttribute("data-element-id",P),U.disabled=this.data.readOnly,this._setRequired(U,this.data.required),U.name=this.data.fieldName,U.tabIndex=h;let C=this.data.combo&&this.data.options.length>0;this.data.combo||(U.size=this.data.options.length,this.data.multiSelect&&(U.multiple=!0)),U.addEventListener("resetform",wt=>{const Ht=this.data.defaultFieldValue;for(const Mt of U.options)Mt.selected=Mt.value===Ht});for(const wt of this.data.options){const Ht=document.createElement("option");Ht.textContent=wt.displayValue,Ht.value=wt.exportValue,st.value.includes(wt.exportValue)&&(Ht.setAttribute("selected",!0),C=!1),U.append(Ht)}let N=null;if(C){const wt=document.createElement("option");wt.value=" ",wt.setAttribute("hidden",!0),wt.setAttribute("selected",!0),U.prepend(wt),N=()=>{wt.remove(),U.removeEventListener("input",N),N=null},U.addEventListener("input",N)}const V=wt=>{const Ht=wt?"value":"textContent",{options:Mt,multiple:Ct}=U;return Ct?Array.prototype.filter.call(Mt,Ft=>Ft.selected).map(Ft=>Ft[Ht]):Mt.selectedIndex===-1?null:Mt[Mt.selectedIndex][Ht]};let ht=V(!1);const yt=wt=>{const Ht=wt.target.options;return Array.prototype.map.call(Ht,Mt=>({displayValue:Mt.textContent,exportValue:Mt.value}))};return this.enableScripting&&this.hasJSActions?(U.addEventListener("updatefromsandbox",wt=>{const Ht={value(Mt){N==null||N();const Ct=Mt.detail.value,Ft=new Set(Array.isArray(Ct)?Ct:[Ct]);for(const Kt of U.options)Kt.selected=Ft.has(Kt.value);Y.setValue(P,{value:V(!0)}),ht=V(!1)},multipleSelection(Mt){U.multiple=!0},remove(Mt){const Ct=U.options,Ft=Mt.detail.remove;Ct[Ft].selected=!1,U.remove(Ft),Ct.length>0&&Array.prototype.findIndex.call(Ct,Kt=>Kt.selected)===-1&&(Ct[0].selected=!0),Y.setValue(P,{value:V(!0),items:yt(Mt)}),ht=V(!1)},clear(Mt){for(;U.length!==0;)U.remove(0);Y.setValue(P,{value:null,items:[]}),ht=V(!1)},insert(Mt){const{index:Ct,displayValue:Ft,exportValue:Kt}=Mt.detail.insert,re=U.children[Ct],ie=document.createElement("option");ie.textContent=Ft,ie.value=Kt,re?re.before(ie):U.append(ie),Y.setValue(P,{value:V(!0),items:yt(Mt)}),ht=V(!1)},items(Mt){const{items:Ct}=Mt.detail;for(;U.length!==0;)U.remove(0);for(const Ft of Ct){const{displayValue:Kt,exportValue:re}=Ft,ie=document.createElement("option");ie.textContent=Kt,ie.value=re,U.append(ie)}U.options.length>0&&(U.options[0].selected=!0),Y.setValue(P,{value:V(!0),items:yt(Mt)}),ht=V(!1)},indices(Mt){const Ct=new Set(Mt.detail.indices);for(const Ft of Mt.target.options)Ft.selected=Ct.has(Ft.index);Y.setValue(P,{value:V(!0)}),ht=V(!1)},editable(Mt){Mt.target.disabled=!Mt.detail.editable}};this._dispatchEventFromSandbox(Ht,wt)}),U.addEventListener("input",wt=>{var Mt;const Ht=V(!0);Y.setValue(P,{value:Ht}),wt.preventDefault(),(Mt=this.linkService.eventBus)==null||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ht,changeEx:Ht,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(U,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],wt=>wt.target.value)):U.addEventListener("input",function(wt){Y.setValue(P,{value:V(!0)})}),this.data.combo&&this._setTextStyle(U),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class tt extends b{constructor(Y){const{data:P,elements:st}=Y;super(Y,{isRenderable:b._hasPopupData(P)}),this.elements=st}render(){this.container.classList.add("popupAnnotation");const Y=new Lt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),P=[];for(const st of this.elements)st.popup=Y,P.push(st.data.id),st.addHighlightArea();return this.container.setAttribute("aria-controls",P.map(st=>`${s.AnnotationPrefix}${st}`).join(",")),this.container}}class Lt{constructor(Y){x(this,bt);x(this,vt);x(this,z);x(this,lt);x(this,nt,O(this,bt,ta).bind(this));x(this,u,O(this,lt,Di).bind(this));x(this,g,O(this,z,Pi).bind(this));x(this,E,O(this,vt,Qn).bind(this));x(this,R,null);x(this,y,null);x(this,k,null);x(this,I,null);x(this,D,null);x(this,S,null);x(this,A,null);x(this,w,!1);x(this,j,null);x(this,Z,null);x(this,X,null);x(this,rt,null);x(this,ct,!1);var Ct;let{container:P,color:st,elements:U,titleObj:C,modificationDate:N,contentsObj:V,richText:ht,parent:yt,rect:wt,parentRect:Ht,open:Mt}=Y;B(this,y,P),B(this,rt,C),B(this,k,V),B(this,X,ht),B(this,S,yt),B(this,R,st),B(this,Z,wt),B(this,A,Ht),B(this,D,U),B(this,I,i.PDFDateString.toDateObject(N)),this.trigger=U.flatMap(Ft=>Ft.getElementsToTriggerPopup());for(const Ft of this.trigger)Ft.addEventListener("click",e(this,E)),Ft.addEventListener("mouseenter",e(this,g)),Ft.addEventListener("mouseleave",e(this,u)),Ft.classList.add("popupTriggerArea");for(const Ft of U)(Ct=Ft.container)==null||Ct.addEventListener("keydown",e(this,nt));e(this,y).hidden=!0,Mt&&O(this,vt,Qn).call(this)}render(){if(e(this,j))return;const{page:{view:Y},viewport:{rawDims:{pageWidth:P,pageHeight:st,pageX:U,pageY:C}}}=e(this,S),N=B(this,j,document.createElement("div"));if(N.className="popup",e(this,R)){const we=N.style.outlineColor=s.Util.makeHexColor(...e(this,R));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?N.style.backgroundColor=`color-mix(in srgb, ${we} 30%, white)`:N.style.backgroundColor=s.Util.makeHexColor(...e(this,R).map(de=>Math.floor(.7*(255-de)+de)))}const V=document.createElement("span");V.className="header";const ht=document.createElement("h1");if(V.append(ht),{dir:ht.dir,str:ht.textContent}=e(this,rt),N.append(V),e(this,I)){const we=document.createElement("span");we.classList.add("popupDate"),we.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),we.setAttribute("data-l10n-args",JSON.stringify({date:e(this,I).toLocaleDateString(),time:e(this,I).toLocaleTimeString()})),V.append(we)}const yt=e(this,k),wt=e(this,X);if(wt!=null&&wt.str&&(!(yt!=null&&yt.str)||yt.str===wt.str))o.XfaLayer.render({xfaHtml:wt.html,intent:"richText",div:N}),N.lastChild.classList.add("richText","popupContent");else{const we=this._formatContents(yt);N.append(we)}let Ht=!!e(this,A),Mt=Ht?e(this,A):e(this,Z);for(const we of e(this,D))if(!Mt||s.Util.intersect(we.data.rect,Mt)!==null){Mt=we.data.rect,Ht=!0;break}const Ct=s.Util.normalizeRect([Mt[0],Y[3]-Mt[1]+Y[1],Mt[2],Y[3]-Mt[3]+Y[1]]),Ft=Ht?Mt[2]-Mt[0]+5:0,Kt=Ct[0]+Ft,re=Ct[1],{style:ie}=e(this,y);ie.left=`${100*(Kt-U)/P}%`,ie.top=`${100*(re-C)/st}%`,e(this,y).append(N)}_formatContents(Y){let{str:P,dir:st}=Y;const U=document.createElement("p");U.classList.add("popupContent"),U.dir=st;const C=P.split(/(?:\r\n?|\n)/);for(let N=0,V=C.length;N<V;++N){const ht=C[N];U.append(document.createTextNode(ht)),N<V-1&&U.append(document.createElement("br"))}return U}forceHide(){B(this,ct,this.isVisible),e(this,ct)&&(e(this,y).hidden=!0)}maybeShow(){e(this,ct)&&(B(this,ct,!1),e(this,y).hidden=!1)}get isVisible(){return e(this,y).hidden===!1}}nt=new WeakMap,u=new WeakMap,g=new WeakMap,E=new WeakMap,R=new WeakMap,y=new WeakMap,k=new WeakMap,I=new WeakMap,D=new WeakMap,S=new WeakMap,A=new WeakMap,w=new WeakMap,j=new WeakMap,Z=new WeakMap,X=new WeakMap,rt=new WeakMap,ct=new WeakMap,bt=new WeakSet,ta=function(Y){Y.altKey||Y.shiftKey||Y.ctrlKey||Y.metaKey||(Y.key==="Enter"||Y.key==="Escape"&&e(this,w))&&O(this,vt,Qn).call(this)},vt=new WeakSet,Qn=function(){B(this,w,!e(this,w)),e(this,w)?(O(this,z,Pi).call(this),e(this,y).addEventListener("click",e(this,E)),e(this,y).addEventListener("keydown",e(this,nt))):(O(this,lt,Di).call(this),e(this,y).removeEventListener("click",e(this,E)),e(this,y).removeEventListener("keydown",e(this,nt)))},z=new WeakSet,Pi=function(){e(this,j)||this.render(),this.isVisible?e(this,w)&&e(this,y).classList.add("focused"):(e(this,y).hidden=!1,e(this,y).style.zIndex=parseInt(e(this,y).style.zIndex)+1e3)},lt=new WeakSet,Di=function(){e(this,y).classList.remove("focused"),!(e(this,w)||!this.isVisible)&&(e(this,y).hidden=!0,e(this,y).style.zIndex=parseInt(e(this,y).style.zIndex)-1e3)};class At extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Y.data.textContent,this.textPosition=Y.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Y=document.createElement("div");Y.classList.add("annotationTextContent"),Y.setAttribute("role","comment");for(const P of this.textContent){const st=document.createElement("span");st.textContent=P,Y.append(st)}this.container.append(Y)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Nt extends b{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,Tt,null)}render(){this.container.classList.add("lineAnnotation");const P=this.data,{width:st,height:U}=f(P.rect),C=this.svgFactory.create(st,U,!0),N=B(this,Tt,this.svgFactory.createElement("svg:line"));return N.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),N.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),N.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),N.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),N.setAttribute("stroke-width",P.borderStyle.width||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),C.append(N),this.container.append(C),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap;class pt extends b{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,qt,null)}render(){this.container.classList.add("squareAnnotation");const P=this.data,{width:st,height:U}=f(P.rect),C=this.svgFactory.create(st,U,!0),N=P.borderStyle.width,V=B(this,qt,this.svgFactory.createElement("svg:rect"));return V.setAttribute("x",N/2),V.setAttribute("y",N/2),V.setAttribute("width",st-N),V.setAttribute("height",U-N),V.setAttribute("stroke-width",N||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),C.append(V),this.container.append(C),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,qt)}addHighlightArea(){this.container.classList.add("highlightArea")}}qt=new WeakMap;class ot extends b{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,zt,null)}render(){this.container.classList.add("circleAnnotation");const P=this.data,{width:st,height:U}=f(P.rect),C=this.svgFactory.create(st,U,!0),N=P.borderStyle.width,V=B(this,zt,this.svgFactory.createElement("svg:ellipse"));return V.setAttribute("cx",st/2),V.setAttribute("cy",U/2),V.setAttribute("rx",st/2-N/2),V.setAttribute("ry",U/2-N/2),V.setAttribute("stroke-width",N||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),C.append(V),this.container.append(C),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class ft extends b{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,Yt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:st,height:U}=f(P.rect),C=this.svgFactory.create(st,U,!0);let N=[];for(const ht of P.vertices){const yt=ht.x-P.rect[0],wt=P.rect[3]-ht.y;N.push(yt+","+wt)}N=N.join(" ");const V=B(this,Yt,this.svgFactory.createElement(this.svgElementName));return V.setAttribute("points",N),V.setAttribute("stroke-width",P.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),C.append(V),this.container.append(C),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yt=new WeakMap;class gt extends ft{constructor(Y){super(Y),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends b{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:st,height:U}=f(P.rect),C=this.svgFactory.create(st,U,!0);for(const N of P.inkLists){let V=[];for(const yt of N){const wt=yt.x-P.rect[0],Ht=P.rect[3]-yt.y;V.push(`${wt},${Ht}`)}V=V.join(" ");const ht=this.svgFactory.createElement(this.svgElementName);e(this,te).push(ht),ht.setAttribute("points",V),ht.setAttribute("stroke-width",P.borderStyle.width||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),!P.popupRef&&this.hasPopupData&&this._createPopup(),C.append(ht)}return this.container.append(C),this.container}getElementsToTriggerPopup(){return e(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap;class Rt extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Dt extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Gt extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Qt extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ae extends b{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class be extends b{constructor(P){var C;super(P,{isRenderable:!0});x(this,ce);x(this,ne,null);const{filename:st,content:U}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(st,!0),this.content=U,(C=this.linkService.eventBus)==null||C.dispatch("fileattachmentannotation",{source:this,filename:st,content:U})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:P,data:st}=this;let U;st.hasAppearance||st.fillAlpha===0?U=document.createElement("div"):(U=document.createElement("img"),U.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(st.name)?"paperclip":"pushpin"}.svg`,st.fillAlpha&&st.fillAlpha<1&&(U.style=`filter: opacity(${Math.round(st.fillAlpha*100)}%);`)),U.addEventListener("dblclick",O(this,ce,Fi).bind(this)),B(this,ne,U);const{isMac:C}=s.FeatureTest.platform;return P.addEventListener("keydown",N=>{N.key==="Enter"&&(C?N.metaKey:N.ctrlKey)&&O(this,ce,Fi).call(this)}),!st.popupRef&&this.hasPopupData?this._createPopup():U.classList.add("popupTriggerArea"),P.append(U),P}getElementsToTriggerPopup(){return e(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,ce=new WeakSet,Fi=function(){var P;(P=this.downloadManager)==null||P.openOrDownloadData(this.content,this.filename)};class me{constructor(Y){x(this,Fe);x(this,Le);x(this,Ae,null);x(this,Ce,null);x(this,Oe,new Map);let{div:P,accessibilityManager:st,annotationCanvasMap:U,page:C,viewport:N}=Y;this.div=P,B(this,Ae,st),B(this,Ce,U),this.page=C,this.viewport=N,this.zIndex=0}async render(Y){const{annotations:P}=Y,st=this.div;(0,i.setLayerDimensions)(st,this.viewport);const U=new Map,C={data:null,layer:st,linkService:Y.linkService,downloadManager:Y.downloadManager,imageResourcesPath:Y.imageResourcesPath||"",renderForms:Y.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:Y.annotationStorage||new r.AnnotationStorage,enableScripting:Y.enableScripting===!0,hasJSActions:Y.hasJSActions,fieldObjects:Y.fieldObjects,parent:this,elements:null};for(const N of P){if(N.noHTML)continue;const V=N.annotationType===s.AnnotationType.POPUP;if(V){const wt=U.get(N.id);if(!wt)continue;C.elements=wt}else{const{width:wt,height:Ht}=f(N.rect);if(wt<=0||Ht<=0)continue}C.data=N;const ht=v.create(C);if(!ht.isRenderable)continue;if(!V&&N.popupRef){const wt=U.get(N.popupRef);wt?wt.push(ht):U.set(N.popupRef,[ht])}ht.annotationEditorType>0&&e(this,Oe).set(ht.data.id,ht);const yt=ht.render();N.hidden&&(yt.style.visibility="hidden"),O(this,Fe,ea).call(this,yt,N.id)}O(this,Le,Ni).call(this)}update(Y){let{viewport:P}=Y;const st=this.div;this.viewport=P,(0,i.setLayerDimensions)(st,{rotation:P.rotation}),O(this,Le,Ni).call(this),st.hidden=!1}getEditableAnnotations(){return Array.from(e(this,Oe).values())}getEditableAnnotation(Y){return e(this,Oe).get(Y)}}Ae=new WeakMap,Ce=new WeakMap,Oe=new WeakMap,Fe=new WeakSet,ea=function(Y,P){var U;const st=Y.firstChild||Y;st.id=`${s.AnnotationPrefix}${P}`,this.div.append(Y),(U=e(this,Ae))==null||U.moveElementInDOM(this.div,Y,st,!1)},Le=new WeakSet,Ni=function(){if(!e(this,Ce))return;const Y=this.div;for(const[P,st]of e(this,Ce)){const U=Y.querySelector(`[data-annotation-id="${P}"]`);if(!U)continue;const{firstChild:C}=U;C?C.nodeName==="CANVAS"?C.replaceWith(st):C.before(st):U.append(st)}e(this,Ce).clear()}},9792:(n,l,t)=>{var o,h,_,sa,f;t.d(l,{AnnotationStorage:()=>m,PrintAnnotationStorage:()=>c,SerializableEmpty:()=>a}),t(4114),t(1454),t(4979);var s=t(4292),i=t(310),r=t(7651);const a=Object.freeze({map:null,hash:"",transfer:void 0});class m{constructor(){x(this,_);x(this,o,!1);x(this,h,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(b,T){const K=e(this,h).get(b);return K===void 0?T:Object.assign(T,K)}getRawValue(b){return e(this,h).get(b)}remove(b){if(e(this,h).delete(b),e(this,h).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const T of e(this,h).values())if(T instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(b,T){const K=e(this,h).get(b);let q=!1;if(K!==void 0)for(const[L,F]of Object.entries(T))K[L]!==F&&(q=!0,K[L]=F);else q=!0,e(this,h).set(b,T);q&&O(this,_,sa).call(this),T instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(T.constructor._type)}has(b){return e(this,h).has(b)}getAll(){return e(this,h).size>0?(0,s.objectFromMap)(e(this,h)):null}setAll(b){for(const[T,K]of Object.entries(b))this.setValue(T,K)}get size(){return e(this,h).size}resetModified(){e(this,o)&&(B(this,o,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new c(this)}get serializable(){if(e(this,h).size===0)return a;const b=new Map,T=new r.MurmurHash3_64,K=[],q=Object.create(null);let L=!1;for(const[F,M]of e(this,h)){const G=M instanceof i.AnnotationEditor?M.serialize(!1,q):M;G&&(b.set(F,G),T.update(`${F}:${JSON.stringify(G)}`),L||(L=!!G.bitmap))}if(L)for(const F of b.values())F.bitmap&&K.push(F.bitmap);return b.size>0?{map:b,hash:T.hexdigest(),transfer:K}:a}get editorStats(){let b=null;const T=new Map;for(const K of e(this,h).values()){if(!(K instanceof i.AnnotationEditor))continue;const q=K.telemetryFinalData;if(!q)continue;const{type:L}=q;T.has(L)||T.set(L,Object.getPrototypeOf(K).constructor),b||(b=Object.create(null));const F=b[L]||(b[L]=new Map);for(const[M,G]of Object.entries(q)){if(M==="type")continue;let $=F.get(M);$||($=new Map,F.set(M,$));const J=$.get(G)??0;$.set(G,J+1)}}for(const[K,q]of T)b[K]=q.computeTelemetryFinalData(b[K]);return b}}o=new WeakMap,h=new WeakMap,_=new WeakSet,sa=function(){e(this,o)||(B(this,o,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class c extends m{constructor(T){super();x(this,f,void 0);const{map:K,hash:q,transfer:L}=T.serializable,F=structuredClone(K,L?{transfer:L}:null);B(this,f,{map:F,hash:q,transfer:L})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,f)}}f=new WeakMap},3831:(n,l,t)=>{t.a(n,async(s,i)=>{var Ut,It,St,$t,Zs,jt,Zn,Xt,nt,u,g,E,ti,y,k,I,D,S,xn,w,j,Oi,X,rt;try{let ct=function(U){if(typeof U=="string"||U instanceof URL?U={url:U}:(U instanceof ArrayBuffer||ArrayBuffer.isView(U))&&(U={data:U}),typeof U!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!U.url&&!U.data&&!U.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const C=new zt,{docId:N}=C,V=U.url?bt(U.url):null,ht=U.data?Et(U.data):null,yt=U.httpHeaders||null,wt=U.withCredentials===!0,Ht=U.password??null,Mt=U.range instanceof Yt?U.range:null,Ct=Number.isInteger(U.rangeChunkSize)&&U.rangeChunkSize>0?U.rangeChunkSize:vt;let Ft=U.worker instanceof Ae?U.worker:null;const Kt=U.verbosity,re=typeof U.docBaseUrl=="string"&&!(0,At.isDataScheme)(U.docBaseUrl)?U.docBaseUrl:null,ie=typeof U.cMapUrl=="string"?U.cMapUrl:null,we=U.cMapPacked!==!1,de=U.CMapReaderFactory||lt,ze=typeof U.standardFontDataUrl=="string"?U.standardFontDataUrl:null,Ve=U.StandardFontDataFactory||Tt,He=U.stopAtErrors!==!0,ss=Number.isInteger(U.maxImageSize)&&U.maxImageSize>-1?U.maxImageSize:-1,Ge=U.isEvalSupported!==!1,W=typeof U.isOffscreenCanvasSupported=="boolean"?U.isOffscreenCanvasSupported:!tt.isNodeJS,dt=Number.isInteger(U.canvasMaxAreaInBytes)?U.canvasMaxAreaInBytes:-1,Bt=typeof U.disableFontFace=="boolean"?U.disableFontFace:tt.isNodeJS,Vt=U.fontExtraProperties===!0,ee=U.enableXfa===!0,se=U.ownerDocument||globalThis.document,oe=U.disableRange===!0,_e=U.disableStream===!0,xe=U.disableAutoFetch===!0,Re=U.pdfBug===!0,We=Mt?Mt.length:U.length??NaN,Xe=typeof U.useSystemFonts=="boolean"?U.useSystemFonts:!tt.isNodeJS&&!Bt,hn=typeof U.useWorkerFetch=="boolean"?U.useWorkerFetch:de===At.DOMCMapReaderFactory&&Ve===At.DOMStandardFontDataFactory&&ie&&ze&&(0,At.isValidFetchUrl)(ie,document.baseURI)&&(0,At.isValidFetchUrl)(ze,document.baseURI),ps=U.canvasFactory||new et({ownerDocument:se}),Un=U.filterFactory||new mt({docId:N,ownerDocument:se}),zs=null;(0,tt.setVerbosityLevel)(Kt);const Ri={canvasFactory:ps,filterFactory:Un};if(hn||(Ri.cMapReaderFactory=new de({baseUrl:ie,isCompressed:we}),Ri.standardFontDataFactory=new Ve({baseUrl:ze})),!Ft){const Qe={verbosity:Kt,port:gt.GlobalWorkerOptions.workerPort};Ft=Qe.port?Ae.fromPort(Qe):new Ae(Qe),C._worker=Ft}const qs={docId:N,apiVersion:"4.1.392",data:ht,password:Ht,disableAutoFetch:xe,rangeChunkSize:Ct,length:We,docBaseUrl:re,enableXfa:ee,evaluatorOptions:{maxImageSize:ss,disableFontFace:Bt,ignoreErrors:He,isEvalSupported:Ge,isOffscreenCanvasSupported:W,canvasMaxAreaInBytes:dt,fontExtraProperties:Vt,useSystemFonts:Xe,cMapUrl:hn?ie:null,standardFontDataUrl:hn?ze:null}},ll={ignoreErrors:He,isEvalSupported:Ge,disableFontFace:Bt,fontExtraProperties:Vt,enableXfa:ee,ownerDocument:se,disableAutoFetch:xe,pdfBug:Re,styleElement:zs};return Ft.promise.then(function(){if(C.destroyed)throw new Error("Loading aborted");const Qe=qt(Ft,qs),hl=new Promise(function(fs){let cn;Mt?cn=new Dt.PDFDataTransportStream(Mt,{disableRange:oe,disableStream:_e}):ht||(cn=(Ze=>tt.isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&(0,At.isValidFetchUrl)(Ze.url)?new Gt.PDFFetchStream(Ze):new ae.PDFNodeStream(Ze):(0,At.isValidFetchUrl)(Ze.url)?new Gt.PDFFetchStream(Ze):new Qt.PDFNetworkStream(Ze))({url:V,length:We,httpHeaders:yt,withCredentials:wt,rangeChunkSize:Ct,disableRange:oe,disableStream:_e})),fs(cn)});return Promise.all([Qe,hl]).then(function(fs){let[cn,Ze]=fs;if(C.destroyed)throw new Error("Loading aborted");const Kr=new Q.MessageHandler(N,cn,Ft.port),ws=new Ce(Kr,C,Ze,ll,Ri);C._transport=ws,Kr.send("Ready",null)})}).catch(C._capability.reject),C},bt=function(U){if(U instanceof URL)return U.href;try{return new URL(U,window.location).href}catch{if(tt.isNodeJS&&typeof U=="string")return U}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Et=function(U){if(tt.isNodeJS&&typeof Buffer<"u"&&U instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(U instanceof Uint8Array&&U.byteLength===U.buffer.byteLength)return U;if(typeof U=="string")return(0,tt.stringToBytes)(U);if(U instanceof ArrayBuffer||ArrayBuffer.isView(U)||typeof U=="object"&&!isNaN(U==null?void 0:U.length))return new Uint8Array(U);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};t.d(l,{PDFDataRangeTransport:()=>Yt,PDFWorker:()=>Ae,build:()=>ue,getDocument:()=>ct,version:()=>Ie});var r=t(4114),a=t(6573),m=t(8100),c=t(7936),o=t(4628),h=t(7467),_=t(4732),d=t(9577),f=t(1454),v=t(3375),b=t(9225),T=t(3972),K=t(9209),q=t(5714),L=t(7561),F=t(6197),M=t(4979),G=t(4603),$=t(7566),J=t(8721),tt=t(4292),Lt=t(9792),At=t(5419),Nt=t(10),pt=t(1573),ot=t(4923),ft=t(6814),gt=t(6164),Q=t(5178),at=t(6062),Rt=t(5626),Dt=t(585),Gt=t(4094),Qt=t(7457),ae=t(4786),be=t(2050),me=s([pt,ae]);[pt,ae]=me.then?(await me)():me;const vt=65536,kt=100,z=5e3,et=tt.isNodeJS?pt.NodeCanvasFactory:At.DOMCanvasFactory,lt=tt.isNodeJS?pt.NodeCMapReaderFactory:At.DOMCMapReaderFactory,mt=tt.isNodeJS?pt.NodeFilterFactory:At.DOMFilterFactory,Tt=tt.isNodeJS?pt.NodeStandardFontDataFactory:At.DOMStandardFontDataFactory;async function qt(U,C){if(U.destroyed)throw new Error("Worker was destroyed");const N=await U.messageHandler.sendWithPromise("GetDocRequest",C,C.data?[C.data.buffer]:null);if(U.destroyed)throw new Error("Worker was destroyed");return N}const Y=class Y{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${As(Y,Ut)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var C,N,V;this.destroyed=!0;try{(C=this._worker)!=null&&C.port&&(this._worker._pendingDestroy=!0),await((N=this._transport)==null?void 0:N.destroy())}catch(ht){throw(V=this._worker)!=null&&V.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ut=new WeakMap,x(Y,Ut,0);let zt=Y;class Yt{constructor(C,N){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=C,this.initialData=N,this.progressiveDone=V,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(C){this._rangeListeners.push(C)}addProgressListener(C){this._progressListeners.push(C)}addProgressiveReadListener(C){this._progressiveReadListeners.push(C)}addProgressiveDoneListener(C){this._progressiveDoneListeners.push(C)}onDataRange(C,N){for(const V of this._rangeListeners)V(C,N)}onDataProgress(C,N){this._readyCapability.promise.then(()=>{for(const V of this._progressListeners)V(C,N)})}onDataProgressiveRead(C){this._readyCapability.promise.then(()=>{for(const N of this._progressiveReadListeners)N(C)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const C of this._progressiveDoneListeners)C()})}transportReady(){this._readyCapability.resolve()}requestDataRange(C,N){(0,tt.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class te{constructor(C,N){this._pdfInfo=C,this._transport=N}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,tt.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(C){return this._transport.getPage(C)}getPageIndex(C){return this._transport.getPageIndex(C)}getDestinations(){return this._transport.getDestinations()}getDestination(C){return this._transport.getDestination(C)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:C="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{renderingIntent:N}=this._transport.getRenderingIntent(C);return this._transport.getOptionalContentConfig(N)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(C||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ne{constructor(C,N,V){x(this,$t);x(this,jt);x(this,It,null);x(this,St,!1);let ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this._pageIndex=C,this._pageInfo=N,this._transport=V,this._stats=ht?new At.StatTimer:null,this._pdfBug=ht,this.commonObjs=V.commonObjs,this.objs=new Fe,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:C,rotation:N=this.rotate,offsetX:V=0,offsetY:ht=0,dontFlip:yt=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new At.PageViewport({viewBox:this.view,scale:C,rotation:N,offsetX:V,offsetY:ht,dontFlip:yt})}getAnnotations(){let{intent:C="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{renderingIntent:N}=this._transport.getRenderingIntent(C);return this._transport.getAnnotations(this._pageIndex,N)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,tt.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var C;return((C=this._transport._htmlForXfa)==null?void 0:C.children[this._pageIndex])||null}render(C){var Ge,W;let{canvasContext:N,viewport:V,intent:ht="display",annotationMode:yt=tt.AnnotationMode.ENABLE,transform:wt=null,background:Ht=null,optionalContentConfigPromise:Mt=null,annotationCanvasMap:Ct=null,pageColors:Ft=null,printAnnotationStorage:Kt=null}=C;(Ge=this._stats)==null||Ge.time("Overall");const re=this._transport.getRenderingIntent(ht,yt,Kt),{renderingIntent:ie,cacheKey:we}=re;B(this,St,!1),O(this,jt,Zn).call(this),Mt||(Mt=this._transport.getOptionalContentConfig(ie));let de=this._intentStates.get(we);de||(de=Object.create(null),this._intentStates.set(we,de)),de.streamReaderCancelTimeout&&(clearTimeout(de.streamReaderCancelTimeout),de.streamReaderCancelTimeout=null);const ze=!!(ie&tt.RenderingIntentFlag.PRINT);de.displayReadyCapability||(de.displayReadyCapability=Promise.withResolvers(),de.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(W=this._stats)==null||W.time("Page Request"),this._pumpOperatorList(re));const Ve=dt=>{var Bt,Vt;de.renderTasks.delete(He),(this._maybeCleanupAfterRender||ze)&&B(this,St,!0),O(this,$t,Zs).call(this,!ze),dt?(He.capability.reject(dt),this._abortOperatorList({intentState:de,reason:dt instanceof Error?dt:new Error(dt)})):He.capability.resolve(),(Bt=this._stats)==null||Bt.timeEnd("Rendering"),(Vt=this._stats)==null||Vt.timeEnd("Overall")},He=new Le({callback:Ve,params:{canvasContext:N,viewport:V,transform:wt,background:Ht},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ct,operatorList:de.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ze,pdfBug:this._pdfBug,pageColors:Ft});(de.renderTasks||(de.renderTasks=new Set)).add(He);const ss=He.task;return Promise.all([de.displayReadyCapability.promise,Mt]).then(dt=>{var ee;let[Bt,Vt]=dt;if(this.destroyed){Ve();return}if((ee=this._stats)==null||ee.time("Rendering"),!(Vt.renderingIntent&ie))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");He.initializeGraphics({transparency:Bt,optionalContentConfig:Vt}),He.operatorListChanged()}).catch(Ve),ss}getOperatorList(){var Mt;let{intent:C="display",annotationMode:N=tt.AnnotationMode.ENABLE,printAnnotationStorage:V=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function ht(){wt.operatorList.lastChunk&&(wt.opListReadCapability.resolve(wt.operatorList),wt.renderTasks.delete(Ht))}const yt=this._transport.getRenderingIntent(C,N,V,!0);let wt=this._intentStates.get(yt.cacheKey);wt||(wt=Object.create(null),this._intentStates.set(yt.cacheKey,wt));let Ht;return wt.opListReadCapability||(Ht=Object.create(null),Ht.operatorListChanged=ht,wt.opListReadCapability=Promise.withResolvers(),(wt.renderTasks||(wt.renderTasks=new Set)).add(Ht),wt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Mt=this._stats)==null||Mt.time("Page Request"),this._pumpOperatorList(yt)),wt.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:C=!1,disableNormalization:N=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:C===!0,disableNormalization:N===!0},{highWaterMark:100,size(V){return V.items.length}})}getTextContent(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(V=>be.XfaText.textContent(V));const N=this.streamTextContent(C);return new Promise(function(V,ht){function yt(){wt.read().then(function(Mt){let{value:Ct,done:Ft}=Mt;if(Ft){V(Ht);return}Object.assign(Ht.styles,Ct.styles),Ht.items.push(...Ct.items),yt()},ht)}const wt=N.getReader(),Ht={items:[],styles:Object.create(null)};yt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const C=[];for(const N of this._intentStates.values())if(this._abortOperatorList({intentState:N,reason:new Error("Page was destroyed."),force:!0}),!N.opListReadCapability)for(const V of N.renderTasks)C.push(V.completed),V.cancel();return this.objs.clear(),B(this,St,!1),O(this,jt,Zn).call(this),Promise.all(C)}cleanup(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;B(this,St,!0);const N=O(this,$t,Zs).call(this,!1);return C&&N&&this._stats&&(this._stats=new At.StatTimer),N}_startRenderPage(C,N){var ht,yt;const V=this._intentStates.get(N);V&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(yt=V.displayReadyCapability)==null||yt.resolve(C))}_renderPageChunk(C,N){for(let V=0,ht=C.length;V<ht;V++)N.operatorList.fnArray.push(C.fnArray[V]),N.operatorList.argsArray.push(C.argsArray[V]);N.operatorList.lastChunk=C.lastChunk,N.operatorList.separateAnnots=C.separateAnnots;for(const V of N.renderTasks)V.operatorListChanged();C.lastChunk&&O(this,$t,Zs).call(this,!0)}_pumpOperatorList(C){let{renderingIntent:N,cacheKey:V,annotationStorageSerializable:ht}=C;const{map:yt,transfer:wt}=ht,Ht=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:N,cacheKey:V,annotationStorage:yt},wt).getReader(),Mt=this._intentStates.get(V);Mt.streamReader=Ht;const Ct=()=>{Ht.read().then(Ft=>{let{value:Kt,done:re}=Ft;if(re){Mt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Kt,Mt),Ct())},Ft=>{if(Mt.streamReader=null,!this._transport.destroyed){if(Mt.operatorList){Mt.operatorList.lastChunk=!0;for(const Kt of Mt.renderTasks)Kt.operatorListChanged();O(this,$t,Zs).call(this,!0)}if(Mt.displayReadyCapability)Mt.displayReadyCapability.reject(Ft);else if(Mt.opListReadCapability)Mt.opListReadCapability.reject(Ft);else throw Ft}})};Ct()}_abortOperatorList(C){let{intentState:N,reason:V,force:ht=!1}=C;if(N.streamReader){if(N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null),!ht){if(N.renderTasks.size>0)return;if(V instanceof At.RenderingCancelledException){let yt=kt;V.extraDelay>0&&V.extraDelay<1e3&&(yt+=V.extraDelay),N.streamReaderCancelTimeout=setTimeout(()=>{N.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:N,reason:V,force:!0})},yt);return}}if(N.streamReader.cancel(new tt.AbortException(V.message)).catch(()=>{}),N.streamReader=null,!this._transport.destroyed){for(const[yt,wt]of this._intentStates)if(wt===N){this._intentStates.delete(yt);break}this.cleanup()}}}get stats(){return this._stats}}It=new WeakMap,St=new WeakMap,$t=new WeakSet,Zs=function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(O(this,jt,Zn).call(this),!e(this,St)||this.destroyed)return!1;if(C)return B(this,It,setTimeout(()=>{B(this,It,null),O(this,$t,Zs).call(this,!1)},z)),!1;for(const{renderTasks:N,operatorList:V}of this._intentStates.values())if(N.size>0||!V.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),B(this,St,!1),!0},jt=new WeakSet,Zn=function(){e(this,It)&&(clearTimeout(e(this,It)),B(this,It,null))};class ce{constructor(){x(this,Xt,new Set);x(this,nt,Promise.resolve())}postMessage(C,N){const V={data:structuredClone(C,N?{transfer:N}:null)};e(this,nt).then(()=>{for(const ht of e(this,Xt))ht.call(this,V)})}addEventListener(C,N){e(this,Xt).add(N)}removeEventListener(C,N){e(this,Xt).delete(N)}terminate(){e(this,Xt).clear()}}Xt=new WeakMap,nt=new WeakMap;const ge={isWorkerDisabled:!1,fakeWorkerId:0};tt.isNodeJS&&(ge.isWorkerDisabled=!0,(u=gt.GlobalWorkerOptions).workerSrc||(u.workerSrc="./pdf.worker.mjs")),ge.isSameOrigin=function(U,C){let N;try{if(N=new URL(U),!N.origin||N.origin==="null")return!1}catch{return!1}const V=new URL(C,N);return N.origin===V.origin},ge.createCDNWrapper=function(U){const C=`await import("${U}");`;return URL.createObjectURL(new Blob([C],{type:"text/javascript"}))};const P=class P{constructor(){var ht;let{name:C=null,port:N=null,verbosity:V=(0,tt.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.name=C,this.destroyed=!1,this.verbosity=V,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,N){if((ht=e(P,g))!=null&&ht.has(N))throw new Error("Cannot use more than one PDFWorker per port.");(e(P,g)||B(P,g,new WeakMap)).set(N,this),this._initializeFromPort(N);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(C){this._port=C,this._messageHandler=new Q.MessageHandler("main","worker",C),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!ge.isWorkerDisabled&&!e(P,E,ti)){let{workerSrc:C}=P;try{ge.isSameOrigin(window.location.href,C)||(C=ge.createCDNWrapper(new URL(C,window.location).href));const N=new Worker(C,{type:"module"}),V=new Q.MessageHandler("main","worker",N),ht=()=>{N.removeEventListener("error",yt),V.destroy(),N.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},yt=()=>{this._webWorker||ht()};N.addEventListener("error",yt),V.on("test",Ht=>{if(N.removeEventListener("error",yt),this.destroyed){ht();return}Ht?(this._messageHandler=V,this._port=N,this._webWorker=N,this._readyCapability.resolve(),V.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),V.destroy(),N.terminate())}),V.on("ready",Ht=>{if(N.removeEventListener("error",yt),this.destroyed){ht();return}try{wt()}catch{this._setupFakeWorker()}});const wt=()=>{const Ht=new Uint8Array;V.send("test",Ht,[Ht.buffer])};wt();return}catch{(0,tt.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){ge.isWorkerDisabled||((0,tt.warn)("Setting up fake worker."),ge.isWorkerDisabled=!0),P._setupFakeWorkerGlobal.then(C=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const N=new ce;this._port=N;const V=`fake${ge.fakeWorkerId++}`,ht=new Q.MessageHandler(V+"_worker",V,N);C.setup(ht,N);const yt=new Q.MessageHandler(V,V+"_worker",N);this._messageHandler=yt,this._readyCapability.resolve(),yt.send("configure",{verbosity:this.verbosity})}).catch(C=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${C.message}".`))})}destroy(){var C;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(C=e(P,g))==null||C.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(C){var V;if(!(C!=null&&C.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const N=(V=e(this,g))==null?void 0:V.get(C.port);if(N){if(N._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return N}return new P(C)}static get workerSrc(){if(gt.GlobalWorkerOptions.workerSrc)return gt.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const C=async()=>e(this,E,ti)?e(this,E,ti):(await bs(()=>import(this.workerSrc).then(async N=>(await N.__tla,N)),[])).WorkerMessageHandler;return(0,tt.shadow)(this,"_setupFakeWorkerGlobal",C())}};g=new WeakMap,E=new WeakSet,ti=function(){var C;try{return((C=globalThis.pdfjsWorker)==null?void 0:C.WorkerMessageHandler)||null}catch{return null}},x(P,E),x(P,g,void 0);let Ae=P;class Ce{constructor(C,N,V,ht,yt){x(this,S);x(this,y,new Map);x(this,k,new Map);x(this,I,new Map);x(this,D,null);this.messageHandler=C,this.loadingTask=N,this.commonObjs=new Fe,this.fontLoader=new Nt.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=yt.canvasFactory,this.filterFactory=yt.filterFactory,this.cMapReaderFactory=yt.cMapReaderFactory,this.standardFontDataFactory=yt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=V,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return(0,tt.shadow)(this,"annotationStorage",new Lt.AnnotationStorage)}getRenderingIntent(C){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.AnnotationMode.ENABLE,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,yt=tt.RenderingIntentFlag.DISPLAY,wt=Lt.SerializableEmpty;switch(C){case"any":yt=tt.RenderingIntentFlag.ANY;break;case"display":break;case"print":yt=tt.RenderingIntentFlag.PRINT;break;default:(0,tt.warn)(`getRenderingIntent - invalid intent: ${C}`)}switch(N){case tt.AnnotationMode.DISABLE:yt+=tt.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case tt.AnnotationMode.ENABLE:break;case tt.AnnotationMode.ENABLE_FORMS:yt+=tt.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case tt.AnnotationMode.ENABLE_STORAGE:yt+=tt.RenderingIntentFlag.ANNOTATIONS_STORAGE,wt=(yt&tt.RenderingIntentFlag.PRINT&&V instanceof Lt.PrintAnnotationStorage?V:this.annotationStorage).serializable;break;default:(0,tt.warn)(`getRenderingIntent - invalid annotationMode: ${N}`)}return ht&&(yt+=tt.RenderingIntentFlag.OPLIST),{renderingIntent:yt,cacheKey:`${yt}_${wt.hash}`,annotationStorageSerializable:wt}}destroy(){var V;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(V=e(this,D))==null||V.reject(new Error("Worker was destroyed during onPassword callback"));const C=[];for(const ht of e(this,k).values())C.push(ht._destroy());e(this,k).clear(),e(this,I).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const N=this.messageHandler.sendWithPromise("Terminate",null);return C.push(N),Promise.all(C).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),e(this,y).clear(),this.filterFactory.destroy(),(0,ft.cleanupTextLayer)(),(ht=this._networkStream)==null||ht.cancelAllRequests(new tt.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:C,loadingTask:N}=this;C.on("GetReader",(V,ht)=>{(0,tt.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=yt=>{this._lastProgress={loaded:yt.loaded,total:yt.total}},ht.onPull=()=>{this._fullReader.read().then(function(yt){let{value:wt,done:Ht}=yt;if(Ht){ht.close();return}(0,tt.assert)(wt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(wt),1,[wt])}).catch(yt=>{ht.error(yt)})},ht.onCancel=yt=>{this._fullReader.cancel(yt),ht.ready.catch(wt=>{if(!this.destroyed)throw wt})}}),C.on("ReaderHeadersReady",V=>{const ht=Promise.withResolvers(),yt=this._fullReader;return yt.headersReady.then(()=>{var wt;(!yt.isStreamingSupported||!yt.isRangeSupported)&&(this._lastProgress&&((wt=N.onProgress)==null||wt.call(N,this._lastProgress)),yt.onProgress=Ht=>{var Mt;(Mt=N.onProgress)==null||Mt.call(N,{loaded:Ht.loaded,total:Ht.total})}),ht.resolve({isStreamingSupported:yt.isStreamingSupported,isRangeSupported:yt.isRangeSupported,contentLength:yt.contentLength})},ht.reject),ht.promise}),C.on("GetRangeReader",(V,ht)=>{(0,tt.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const yt=this._networkStream.getRangeReader(V.begin,V.end);if(!yt){ht.close();return}ht.onPull=()=>{yt.read().then(function(wt){let{value:Ht,done:Mt}=wt;if(Mt){ht.close();return}(0,tt.assert)(Ht instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(Ht),1,[Ht])}).catch(wt=>{ht.error(wt)})},ht.onCancel=wt=>{yt.cancel(wt),ht.ready.catch(Ht=>{if(!this.destroyed)throw Ht})}}),C.on("GetDoc",V=>{let{pdfInfo:ht}=V;this._numPages=ht.numPages,this._htmlForXfa=ht.htmlForXfa,delete ht.htmlForXfa,N._capability.resolve(new te(ht,this))}),C.on("DocException",function(V){let ht;switch(V.name){case"PasswordException":ht=new tt.PasswordException(V.message,V.code);break;case"InvalidPDFException":ht=new tt.InvalidPDFException(V.message);break;case"MissingPDFException":ht=new tt.MissingPDFException(V.message);break;case"UnexpectedResponseException":ht=new tt.UnexpectedResponseException(V.message,V.status);break;case"UnknownErrorException":ht=new tt.UnknownErrorException(V.message,V.details);break;default:(0,tt.unreachable)("DocException - expected a valid Error.")}N._capability.reject(ht)}),C.on("PasswordRequest",V=>{if(B(this,D,Promise.withResolvers()),N.onPassword){const ht=yt=>{yt instanceof Error?e(this,D).reject(yt):e(this,D).resolve({password:yt})};try{N.onPassword(ht,V.code)}catch(yt){e(this,D).reject(yt)}}else e(this,D).reject(new tt.PasswordException(V.message,V.code));return e(this,D).promise}),C.on("DataLoaded",V=>{var ht;(ht=N.onProgress)==null||ht.call(N,{loaded:V.length,total:V.length}),this.downloadInfoCapability.resolve(V)}),C.on("StartRenderPage",V=>{this.destroyed||e(this,k).get(V.pageIndex)._startRenderPage(V.transparency,V.cacheKey)}),C.on("commonobj",V=>{var Ht;let[ht,yt,wt]=V;if(this.destroyed||this.commonObjs.has(ht))return null;switch(yt){case"Font":const Mt=this._params;if("error"in wt){const re=wt.error;(0,tt.warn)(`Error during font loading: ${re}`),this.commonObjs.resolve(ht,re);break}const Ct=Mt.pdfBug&&((Ht=globalThis.FontInspector)!=null&&Ht.enabled)?(re,ie)=>globalThis.FontInspector.fontAdded(re,ie):null,Ft=new Nt.FontFaceObject(wt,{isEvalSupported:Mt.isEvalSupported,disableFontFace:Mt.disableFontFace,ignoreErrors:Mt.ignoreErrors,inspectFont:Ct});this.fontLoader.bind(Ft).catch(()=>C.sendWithPromise("FontFallback",{id:ht})).finally(()=>{!Mt.fontExtraProperties&&Ft.data&&(Ft.data=null),this.commonObjs.resolve(ht,Ft)});break;case"CopyLocalImage":const{imageRef:Kt}=wt;(0,tt.assert)(Kt,"The imageRef must be defined.");for(const re of e(this,k).values())for(const[,ie]of re.objs)if(ie.ref===Kt)return ie.dataLen?(this.commonObjs.resolve(ht,structuredClone(ie)),ie.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ht,wt);break;default:throw new Error(`Got unknown common object type ${yt}`)}return null}),C.on("obj",V=>{var Ct;let[ht,yt,wt,Ht]=V;if(this.destroyed)return;const Mt=e(this,k).get(yt);if(!Mt.objs.has(ht)){if(Mt._intentStates.size===0){(Ct=Ht==null?void 0:Ht.bitmap)==null||Ct.close();return}switch(wt){case"Image":Mt.objs.resolve(ht,Ht),(Ht==null?void 0:Ht.dataLen)>tt.MAX_IMAGE_SIZE_TO_CACHE&&(Mt._maybeCleanupAfterRender=!0);break;case"Pattern":Mt.objs.resolve(ht,Ht);break;default:throw new Error(`Got unknown object type ${wt}`)}}}),C.on("DocProgress",V=>{var ht;this.destroyed||((ht=N.onProgress)==null||ht.call(N,{loaded:V.loaded,total:V.total}))}),C.on("FetchBuiltInCMap",V=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(V):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),C.on("FetchStandardFontData",V=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(V):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var V;this.annotationStorage.size<=0&&(0,tt.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:C,transfer:N}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:C,filename:((V=this._fullReader)==null?void 0:V.filename)??null},N).finally(()=>{this.annotationStorage.resetModified()})}getPage(C){if(!Number.isInteger(C)||C<=0||C>this._numPages)return Promise.reject(new Error("Invalid page request."));const N=C-1,V=e(this,I).get(N);if(V)return V;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:N}).then(yt=>{if(this.destroyed)throw new Error("Transport destroyed");const wt=new ne(N,yt,this,this._params.pdfBug);return e(this,k).set(N,wt),wt});return e(this,I).set(N,ht),ht}getPageIndex(C){return typeof C!="object"||C===null||!Number.isInteger(C.num)||C.num<0||!Number.isInteger(C.gen)||C.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:C.num,gen:C.gen})}getAnnotations(C,N){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:C,intent:N})}getFieldObjects(){return O(this,S,xn).call(this,"GetFieldObjects")}hasJSActions(){return O(this,S,xn).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(C){return typeof C!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:C})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return O(this,S,xn).call(this,"GetDocJSActions")}getPageJSActions(C){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:C})}getStructTree(C){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:C})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(C){return O(this,S,xn).call(this,"GetOptionalContentConfig").then(N=>new Rt.OptionalContentConfig(N,C))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const C="GetMetadata",N=e(this,y).get(C);if(N)return N;const V=this.messageHandler.sendWithPromise(C,null).then(ht=>{var yt,wt;return{info:ht[0],metadata:ht[1]?new at.Metadata(ht[1]):null,contentDispositionFilename:((yt=this._fullReader)==null?void 0:yt.filename)??null,contentLength:((wt=this._fullReader)==null?void 0:wt.contentLength)??null}});return e(this,y).set(C,V),V}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const N of e(this,k).values())if(!N.cleanup())throw new Error(`startCleanup: Page ${N.pageNumber} is currently rendering.`);this.commonObjs.clear(),C||this.fontLoader.clear(),e(this,y).clear(),this.filterFactory.destroy(!0),(0,ft.cleanupTextLayer)()}}get loadingParams(){const{disableAutoFetch:C,enableXfa:N}=this._params;return(0,tt.shadow)(this,"loadingParams",{disableAutoFetch:C,enableXfa:N})}}y=new WeakMap,k=new WeakMap,I=new WeakMap,D=new WeakMap,S=new WeakSet,xn=function(C){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const V=e(this,y).get(C);if(V)return V;const ht=this.messageHandler.sendWithPromise(C,N);return e(this,y).set(C,ht),ht};const Oe=Symbol("INITIAL_DATA");class Fe{constructor(){x(this,j);x(this,w,Object.create(null))}get(C){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(N){const ht=O(this,j,Oi).call(this,C);return ht.promise.then(()=>N(ht.data)),null}const V=e(this,w)[C];if(!V||V.data===Oe)throw new Error(`Requesting object that isn't resolved yet ${C}.`);return V.data}has(C){const N=e(this,w)[C];return!!N&&N.data!==Oe}resolve(C){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const V=O(this,j,Oi).call(this,C);V.data=N,V.resolve()}clear(){var C;for(const N in e(this,w)){const{data:V}=e(this,w)[N];(C=V==null?void 0:V.bitmap)==null||C.close()}B(this,w,Object.create(null))}*[Symbol.iterator](){for(const C in e(this,w)){const{data:N}=e(this,w)[C];N!==Oe&&(yield[C,N])}}}w=new WeakMap,j=new WeakSet,Oi=function(C){var N;return(N=e(this,w))[C]||(N[C]={...Promise.withResolvers(),data:Oe})};class Ue{constructor(C){x(this,X,null);B(this,X,C),this.onContinue=null}get promise(){return e(this,X).capability.promise}cancel(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e(this,X).cancel(null,C)}get separateAnnots(){const{separateAnnots:C}=e(this,X).operatorList;if(!C)return!1;const{annotationCanvasMap:N}=e(this,X);return C.form||C.canvas&&(N==null?void 0:N.size)>0}}X=new WeakMap;const st=class st{constructor(C){let{callback:N,params:V,objs:ht,commonObjs:yt,annotationCanvasMap:wt,operatorList:Ht,pageIndex:Mt,canvasFactory:Ct,filterFactory:Ft,useRequestAnimationFrame:Kt=!1,pdfBug:re=!1,pageColors:ie=null}=C;this.callback=N,this.params=V,this.objs=ht,this.commonObjs=yt,this.annotationCanvasMap=wt,this.operatorListIdx=null,this.operatorList=Ht,this._pageIndex=Mt,this.canvasFactory=Ct,this.filterFactory=Ft,this._pdfBug=re,this.pageColors=ie,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Kt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ue(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=V.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(C){var Mt,Ct;let{transparency:N=!1,optionalContentConfig:V}=C;if(this.cancelled)return;if(this._canvas){if(e(st,rt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(st,rt).add(this._canvas)}this._pdfBug&&((Mt=globalThis.StepperManager)!=null&&Mt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:ht,viewport:yt,transform:wt,background:Ht}=this.params;this.gfx=new ot.CanvasGraphics(ht,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:V},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:wt,viewport:yt,transparency:N,background:Ht}),this.operatorListIdx=0,this.graphicsReady=!0,(Ct=this.graphicsReadyCallback)==null||Ct.call(this)}cancel(){var V;let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(V=this.gfx)==null||V.endDrawing(),e(st,rt).delete(this._canvas),this.callback(C||new At.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,N))}operatorListChanged(){var C;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(C=this.stepper)==null||C.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(st,rt).delete(this._canvas),this.callback())))}};rt=new WeakMap,x(st,rt,new WeakSet);let Le=st;const Ie="4.1.392",ue="fcb76a78d";i()}catch(ct){i(ct)}})},2583:(n,l,t)=>{t.d(l,{BaseCMapReaderFactory:()=>a,BaseCanvasFactory:()=>r,BaseFilterFactory:()=>i,BaseSVGFactory:()=>c,BaseStandardFontDataFactory:()=>m});var s=t(4292);class i{constructor(){this.constructor===i&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(h){return"none"}addHCMFilter(h,_){return"none"}addHighlightHCMFilter(h,_,d,f,v){return"none"}destroy(){}}class r{constructor(){this.constructor===r&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(h,_){if(h<=0||_<=0)throw new Error("Invalid canvas size");const d=this._createCanvas(h,_);return{canvas:d,context:d.getContext("2d")}}reset(h,_,d){if(!h.canvas)throw new Error("Canvas is not specified");if(_<=0||d<=0)throw new Error("Invalid canvas size");h.canvas.width=_,h.canvas.height=d}destroy(h){if(!h.canvas)throw new Error("Canvas is not specified");h.canvas.width=0,h.canvas.height=0,h.canvas=null,h.context=null}_createCanvas(h,_){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}class a{constructor(h){let{baseUrl:_=null,isCompressed:d=!0}=h;this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=d}async fetch(h){let{name:_}=h;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const d=this.baseUrl+_+(this.isCompressed?".bcmap":""),f=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(d,f).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${d}`)})}_fetchData(h,_){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class m{constructor(h){let{baseUrl:_=null}=h;this.constructor===m&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch(h){let{filename:_}=h;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const d=`${this.baseUrl}${_}`;return this._fetchData(d).catch(f=>{throw new Error(`Unable to load font data at: ${d}`)})}_fetchData(h){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class c{constructor(){this.constructor===c&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(h,_){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(h<=0||_<=0)throw new Error("Invalid SVG dimensions");const f=this._createSVG("svg:svg");return f.setAttribute("version","1.1"),d||(f.setAttribute("width",`${h}px`),f.setAttribute("height",`${_}px`)),f.setAttribute("preserveAspectRatio","none"),f.setAttribute("viewBox",`0 0 ${h} ${_}`),f}createElement(h){if(typeof h!="string")throw new Error("Invalid SVG element type");return this._createSVG(h)}_createSVG(h){(0,s.unreachable)("Abstract method `_createSVG` called.")}}},4923:(n,l,t)=>{var $t,Hi,jt,ji;t.d(l,{CanvasGraphics:()=>It}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(8992),t(4520),t(1454);var s=t(4292),i=t(5419);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function a(nt,u){if(!u)return;const g=u[2]-u[0],E=u[3]-u[1],R=new Path2D;R.rect(u[0],u[1],g,E),nt.clip(R)}class m{constructor(){this.constructor===m&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class c extends m{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let g;this._type==="axial"?g=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(g=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const E of this._colorStops)g.addColorStop(E[0],E[1]);return g}getPattern(u,g,E,R){let y;if(R===r.STROKE||R===r.FILL){const k=g.current.getClippedPathBoundingBox(R,(0,i.getCurrentTransform)(u))||[0,0,0,0],I=Math.ceil(k[2]-k[0])||1,D=Math.ceil(k[3]-k[1])||1,S=g.cachedCanvases.getCanvas("pattern",I,D,!0),A=S.context;A.clearRect(0,0,A.canvas.width,A.canvas.height),A.beginPath(),A.rect(0,0,A.canvas.width,A.canvas.height),A.translate(-k[0],-k[1]),E=s.Util.transform(E,[1,0,0,1,k[0],k[1]]),A.transform(...g.baseTransform),this.matrix&&A.transform(...this.matrix),a(A,this._bbox),A.fillStyle=this._createGradient(A),A.fill(),y=u.createPattern(S.canvas,"no-repeat");const w=new DOMMatrix(E);y.setTransform(w)}else a(u,this._bbox),y=this._createGradient(u);return y}}function o(nt,u,g,E,R,y,k,I){const D=u.coords,S=u.colors,A=nt.data,w=nt.width*4;let j;D[g+1]>D[E+1]&&(j=g,g=E,E=j,j=y,y=k,k=j),D[E+1]>D[R+1]&&(j=E,E=R,R=j,j=k,k=I,I=j),D[g+1]>D[E+1]&&(j=g,g=E,E=j,j=y,y=k,k=j);const Z=(D[g]+u.offsetX)*u.scaleX,X=(D[g+1]+u.offsetY)*u.scaleY,rt=(D[E]+u.offsetX)*u.scaleX,ct=(D[E+1]+u.offsetY)*u.scaleY,bt=(D[R]+u.offsetX)*u.scaleX,Et=(D[R+1]+u.offsetY)*u.scaleY;if(X>=Et)return;const vt=S[y],kt=S[y+1],z=S[y+2],et=S[k],lt=S[k+1],mt=S[k+2],Tt=S[I],qt=S[I+1],zt=S[I+2],Yt=Math.round(X),te=Math.round(Et);let ne,ce,ge,Ae,Ce,Oe,Fe,Ue;for(let Le=Yt;Le<=te;Le++){if(Le<ct){const st=Le<X?0:(X-Le)/(X-ct);ne=Z-(Z-rt)*st,ce=vt-(vt-et)*st,ge=kt-(kt-lt)*st,Ae=z-(z-mt)*st}else{let st;Le>Et?st=1:ct===Et?st=0:st=(ct-Le)/(ct-Et),ne=rt-(rt-bt)*st,ce=et-(et-Tt)*st,ge=lt-(lt-qt)*st,Ae=mt-(mt-zt)*st}let Ie;Le<X?Ie=0:Le>Et?Ie=1:Ie=(X-Le)/(X-Et),Ce=Z-(Z-bt)*Ie,Oe=vt-(vt-Tt)*Ie,Fe=kt-(kt-qt)*Ie,Ue=z-(z-zt)*Ie;const ue=Math.round(Math.min(ne,Ce)),Y=Math.round(Math.max(ne,Ce));let P=w*Le+ue*4;for(let st=ue;st<=Y;st++)Ie=(ne-st)/(ne-Ce),Ie<0?Ie=0:Ie>1&&(Ie=1),A[P++]=ce-(ce-Oe)*Ie|0,A[P++]=ge-(ge-Fe)*Ie|0,A[P++]=Ae-(Ae-Ue)*Ie|0,A[P++]=255}}function h(nt,u,g){const E=u.coords,R=u.colors;let y,k;switch(u.type){case"lattice":const I=u.verticesPerRow,D=Math.floor(E.length/I)-1,S=I-1;for(y=0;y<D;y++){let A=y*I;for(let w=0;w<S;w++,A++)o(nt,g,E[A],E[A+1],E[A+I],R[A],R[A+1],R[A+I]),o(nt,g,E[A+I+1],E[A+1],E[A+I],R[A+I+1],R[A+1],R[A+I])}break;case"triangles":for(y=0,k=E.length;y<k;y+=3)o(nt,g,E[y],E[y+1],E[y+2],R[y],R[y+1],R[y+2]);break;default:throw new Error("illegal figure")}}class _ extends m{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,g,E){const R=Math.floor(this._bounds[0]),y=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-R,I=Math.ceil(this._bounds[3])-y,D=Math.min(Math.ceil(Math.abs(k*u[0]*1.1)),3e3),S=Math.min(Math.ceil(Math.abs(I*u[1]*1.1)),3e3),A=k/D,w=I/S,j={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-y,scaleX:1/A,scaleY:1/w},Z=D+2*2,X=S+2*2,rt=E.getCanvas("mesh",Z,X,!1),ct=rt.context,bt=ct.createImageData(D,S);if(g){const Et=bt.data;for(let vt=0,kt=Et.length;vt<kt;vt+=4)Et[vt]=g[0],Et[vt+1]=g[1],Et[vt+2]=g[2],Et[vt+3]=255}for(const Et of this._figures)h(bt,Et,j);return ct.putImageData(bt,2,2),{canvas:rt.canvas,offsetX:R-2*A,offsetY:y-2*w,scaleX:A,scaleY:w}}getPattern(u,g,E,R){a(u,this._bbox);let y;if(R===r.SHADING)y=s.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(u));else if(y=s.Util.singularValueDecompose2dScale(g.baseTransform),this.matrix){const I=s.Util.singularValueDecompose2dScale(this.matrix);y=[y[0]*I[0],y[1]*I[1]]}const k=this._createMeshCanvas(y,R===r.SHADING?null:this._background,g.cachedCanvases);return R!==r.SHADING&&(u.setTransform(...g.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(k.offsetX,k.offsetY),u.scale(k.scaleX,k.scaleY),u.createPattern(k.canvas,"no-repeat")}}class d extends m{getPattern(){return"hotpink"}}function f(nt){switch(nt[0]){case"RadialAxial":return new c(nt);case"Mesh":return new _(nt);case"Dummy":return new d}throw new Error(`Unknown IR type: ${nt[0]}`)}const v={COLORED:1,UNCOLORED:2},St=class St{constructor(u,g,E,R,y){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=g,this.ctx=E,this.canvasGraphicsFactory=R,this.baseTransform=y}createPatternCanvas(u){const g=this.operatorList,E=this.bbox,R=this.xstep,y=this.ystep,k=this.paintType,I=this.tilingType,D=this.color,S=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+I);const A=E[0],w=E[1],j=E[2],Z=E[3],X=s.Util.singularValueDecompose2dScale(this.matrix),rt=s.Util.singularValueDecompose2dScale(this.baseTransform),ct=[X[0]*rt[0],X[1]*rt[1]],bt=this.getSizeAndScale(R,this.ctx.canvas.width,ct[0]),Et=this.getSizeAndScale(y,this.ctx.canvas.height,ct[1]),vt=u.cachedCanvases.getCanvas("pattern",bt.size,Et.size,!0),kt=vt.context,z=S.createCanvasGraphics(kt);z.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(z,k,D);let et=A,lt=w,mt=j,Tt=Z;return A<0&&(et=0,mt+=Math.abs(A)),w<0&&(lt=0,Tt+=Math.abs(w)),kt.translate(-(bt.scale*et),-(Et.scale*lt)),z.transform(bt.scale,0,0,Et.scale,0,0),kt.save(),this.clipBbox(z,et,lt,mt,Tt),z.baseTransform=(0,i.getCurrentTransform)(z.ctx),z.executeOperatorList(g),z.endDrawing(),{canvas:vt.canvas,scaleX:bt.scale,scaleY:Et.scale,offsetX:et,offsetY:lt}}getSizeAndScale(u,g,E){u=Math.abs(u);const R=Math.max(St.MAX_PATTERN_SIZE,g);let y=Math.ceil(u*E);return y>=R?y=R:E=y/u,{scale:E,size:y}}clipBbox(u,g,E,R,y){const k=R-g,I=y-E;u.ctx.rect(g,E,k,I),u.current.updateRectMinMax((0,i.getCurrentTransform)(u.ctx),[g,E,R,y]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,g,E){const R=u.ctx,y=u.current;switch(g){case v.COLORED:const k=this.ctx;R.fillStyle=k.fillStyle,R.strokeStyle=k.strokeStyle,y.fillColor=k.fillStyle,y.strokeColor=k.strokeStyle;break;case v.UNCOLORED:const I=s.Util.makeHexColor(E[0],E[1],E[2]);R.fillStyle=I,R.strokeStyle=I,y.fillColor=I,y.strokeColor=I;break;default:throw new s.FormatError(`Unsupported paint type: ${g}`)}}getPattern(u,g,E,R){let y=E;R!==r.SHADING&&(y=s.Util.transform(y,g.baseTransform),this.matrix&&(y=s.Util.transform(y,this.matrix)));const k=this.createPatternCanvas(g);let I=new DOMMatrix(y);I=I.translate(k.offsetX,k.offsetY),I=I.scale(1/k.scaleX,1/k.scaleY);const D=u.createPattern(k.canvas,"repeat");return D.setTransform(I),D}};ye(St,"MAX_PATTERN_SIZE",3e3);let b=St;function T(nt){let{src:u,srcPos:g=0,dest:E,width:R,height:y,nonBlackColor:k=4294967295,inverseDecode:I=!1}=nt;const D=s.FeatureTest.isLittleEndian?4278190080:255,[S,A]=I?[k,D]:[D,k],w=R>>3,j=R&7,Z=u.length;E=new Uint32Array(E.buffer);let X=0;for(let rt=0;rt<y;rt++){for(const bt=g+w;g<bt;g++){const Et=g<Z?u[g]:255;E[X++]=Et&128?A:S,E[X++]=Et&64?A:S,E[X++]=Et&32?A:S,E[X++]=Et&16?A:S,E[X++]=Et&8?A:S,E[X++]=Et&4?A:S,E[X++]=Et&2?A:S,E[X++]=Et&1?A:S}if(j===0)continue;const ct=g<Z?u[g++]:255;for(let bt=0;bt<j;bt++)E[X++]=ct&1<<7-bt?A:S}return{srcPos:g,destPos:X}}const K=16,q=100,L=4096,F=15,M=10,G=1e3,$=16;function J(nt,u){if(nt._removeMirroring)throw new Error("Context is already forwarding operations.");nt.__originalSave=nt.save,nt.__originalRestore=nt.restore,nt.__originalRotate=nt.rotate,nt.__originalScale=nt.scale,nt.__originalTranslate=nt.translate,nt.__originalTransform=nt.transform,nt.__originalSetTransform=nt.setTransform,nt.__originalResetTransform=nt.resetTransform,nt.__originalClip=nt.clip,nt.__originalMoveTo=nt.moveTo,nt.__originalLineTo=nt.lineTo,nt.__originalBezierCurveTo=nt.bezierCurveTo,nt.__originalRect=nt.rect,nt.__originalClosePath=nt.closePath,nt.__originalBeginPath=nt.beginPath,nt._removeMirroring=()=>{nt.save=nt.__originalSave,nt.restore=nt.__originalRestore,nt.rotate=nt.__originalRotate,nt.scale=nt.__originalScale,nt.translate=nt.__originalTranslate,nt.transform=nt.__originalTransform,nt.setTransform=nt.__originalSetTransform,nt.resetTransform=nt.__originalResetTransform,nt.clip=nt.__originalClip,nt.moveTo=nt.__originalMoveTo,nt.lineTo=nt.__originalLineTo,nt.bezierCurveTo=nt.__originalBezierCurveTo,nt.rect=nt.__originalRect,nt.closePath=nt.__originalClosePath,nt.beginPath=nt.__originalBeginPath,delete nt._removeMirroring},nt.save=function(){u.save(),this.__originalSave()},nt.restore=function(){u.restore(),this.__originalRestore()},nt.translate=function(g,E){u.translate(g,E),this.__originalTranslate(g,E)},nt.scale=function(g,E){u.scale(g,E),this.__originalScale(g,E)},nt.transform=function(g,E,R,y,k,I){u.transform(g,E,R,y,k,I),this.__originalTransform(g,E,R,y,k,I)},nt.setTransform=function(g,E,R,y,k,I){u.setTransform(g,E,R,y,k,I),this.__originalSetTransform(g,E,R,y,k,I)},nt.resetTransform=function(){u.resetTransform(),this.__originalResetTransform()},nt.rotate=function(g){u.rotate(g),this.__originalRotate(g)},nt.clip=function(g){u.clip(g),this.__originalClip(g)},nt.moveTo=function(g,E){u.moveTo(g,E),this.__originalMoveTo(g,E)},nt.lineTo=function(g,E){u.lineTo(g,E),this.__originalLineTo(g,E)},nt.bezierCurveTo=function(g,E,R,y,k,I){u.bezierCurveTo(g,E,R,y,k,I),this.__originalBezierCurveTo(g,E,R,y,k,I)},nt.rect=function(g,E,R,y){u.rect(g,E,R,y),this.__originalRect(g,E,R,y)},nt.closePath=function(){u.closePath(),this.__originalClosePath()},nt.beginPath=function(){u.beginPath(),this.__originalBeginPath()}}class tt{constructor(u){this.canvasFactory=u,this.cache=Object.create(null)}getCanvas(u,g,E){let R;return this.cache[u]!==void 0?(R=this.cache[u],this.canvasFactory.reset(R,g,E)):(R=this.canvasFactory.create(g,E),this.cache[u]=R),R}delete(u){delete this.cache[u]}clear(){for(const u in this.cache){const g=this.cache[u];this.canvasFactory.destroy(g),delete this.cache[u]}}}function Lt(nt,u,g,E,R,y,k,I,D,S){const[A,w,j,Z,X,rt]=(0,i.getCurrentTransform)(nt);if(w===0&&j===0){const Et=k*A+X,vt=Math.round(Et),kt=I*Z+rt,z=Math.round(kt),et=(k+D)*A+X,lt=Math.abs(Math.round(et)-vt)||1,mt=(I+S)*Z+rt,Tt=Math.abs(Math.round(mt)-z)||1;return nt.setTransform(Math.sign(A),0,0,Math.sign(Z),vt,z),nt.drawImage(u,g,E,R,y,0,0,lt,Tt),nt.setTransform(A,w,j,Z,X,rt),[lt,Tt]}if(A===0&&Z===0){const Et=I*j+X,vt=Math.round(Et),kt=k*w+rt,z=Math.round(kt),et=(I+S)*j+X,lt=Math.abs(Math.round(et)-vt)||1,mt=(k+D)*w+rt,Tt=Math.abs(Math.round(mt)-z)||1;return nt.setTransform(0,Math.sign(w),Math.sign(j),0,vt,z),nt.drawImage(u,g,E,R,y,0,0,Tt,lt),nt.setTransform(A,w,j,Z,X,rt),[Tt,lt]}nt.drawImage(u,g,E,R,y,k,I,D,S);const ct=Math.hypot(A,w),bt=Math.hypot(j,Z);return[ct*D,bt*S]}function At(nt){const{width:u,height:g}=nt;if(u>G||g>G)return null;const E=1e3,R=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),y=u+1;let k=new Uint8Array(y*(g+1)),I,D,S;const A=u+7&-8;let w=new Uint8Array(A*g),j=0;for(const ct of nt.data){let bt=128;for(;bt>0;)w[j++]=ct&bt?0:255,bt>>=1}let Z=0;for(j=0,w[j]!==0&&(k[0]=1,++Z),D=1;D<u;D++)w[j]!==w[j+1]&&(k[D]=w[j]?2:1,++Z),j++;for(w[j]!==0&&(k[D]=2,++Z),I=1;I<g;I++){j=I*A,S=I*y,w[j-A]!==w[j]&&(k[S]=w[j]?1:8,++Z);let ct=(w[j]?4:0)+(w[j-A]?8:0);for(D=1;D<u;D++)ct=(ct>>2)+(w[j+1]?4:0)+(w[j-A+1]?8:0),R[ct]&&(k[S+D]=R[ct],++Z),j++;if(w[j-A]!==w[j]&&(k[S+D]=w[j]?2:4,++Z),Z>E)return null}for(j=A*(g-1),S=I*y,w[j]!==0&&(k[S]=8,++Z),D=1;D<u;D++)w[j]!==w[j+1]&&(k[S+D]=w[j]?4:8,++Z),j++;if(w[j]!==0&&(k[S+D]=4,++Z),Z>E)return null;const X=new Int32Array([0,y,-1,0,-y,0,0,0,1]),rt=new Path2D;for(I=0;Z&&I<=g;I++){let ct=I*y;const bt=ct+u;for(;ct<bt&&!k[ct];)ct++;if(ct===bt)continue;rt.moveTo(ct%y,I);const Et=ct;let vt=k[ct];do{const kt=X[vt];do ct+=kt;while(!k[ct]);const z=k[ct];z!==5&&z!==10?(vt=z,k[ct]=0):(vt=z&51*vt>>4,k[ct]&=vt>>2|vt<<2),rt.lineTo(ct%y,ct/y|0),k[ct]||--Z}while(Et!==ct);--I}return w=null,k=null,function(ct){ct.save(),ct.scale(1/u,-1/g),ct.translate(0,-g),ct.fill(rt),ct.beginPath(),ct.restore()}}class Nt{constructor(u,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,u,g])}clone(){const u=Object.create(this);return u.clipBox=this.clipBox.slice(),u}setCurrentPoint(u,g){this.x=u,this.y=g}updatePathMinMax(u,g,E){[g,E]=s.Util.applyTransform([g,E],u),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(u,g){const E=s.Util.applyTransform(g,u),R=s.Util.applyTransform(g.slice(2),u),y=s.Util.applyTransform([g[0],g[3]],u),k=s.Util.applyTransform([g[2],g[1]],u);this.minX=Math.min(this.minX,E[0],R[0],y[0],k[0]),this.minY=Math.min(this.minY,E[1],R[1],y[1],k[1]),this.maxX=Math.max(this.maxX,E[0],R[0],y[0],k[0]),this.maxY=Math.max(this.maxY,E[1],R[1],y[1],k[1])}updateScalingPathMinMax(u,g){s.Util.scaleMinMax(u,g),this.minX=Math.min(this.minX,g[0]),this.minY=Math.min(this.minY,g[1]),this.maxX=Math.max(this.maxX,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(u,g,E,R,y,k,I,D,S,A){const w=s.Util.bezierBoundingBox(g,E,R,y,k,I,D,S,A);A||this.updateRectMinMax(u,w)}getPathBoundingBox(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.FILL,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const E=[this.minX,this.minY,this.maxX,this.maxY];if(u===r.STROKE){g||(0,s.unreachable)("Stroke bounding box must include transform.");const R=s.Util.singularValueDecompose2dScale(g),y=R[0]*this.lineWidth/2,k=R[1]*this.lineWidth/2;E[0]-=y,E[1]-=k,E[2]+=y,E[3]+=k}return E}updateClipFromPath(){const u=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(u||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(u){this.clipBox=u,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.FILL,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.Util.intersect(this.clipBox,this.getPathBoundingBox(u,g))}}function pt(nt,u){if(typeof ImageData<"u"&&u instanceof ImageData){nt.putImageData(u,0,0);return}const g=u.height,E=u.width,R=g%$,y=(g-R)/$,k=R===0?y:y+1,I=nt.createImageData(E,$);let D=0,S;const A=u.data,w=I.data;let j,Z,X,rt;if(u.kind===s.ImageKind.GRAYSCALE_1BPP){const ct=A.byteLength,bt=new Uint32Array(w.buffer,0,w.byteLength>>2),Et=bt.length,vt=E+7>>3,kt=4294967295,z=s.FeatureTest.isLittleEndian?4278190080:255;for(j=0;j<k;j++){for(X=j<y?$:R,S=0,Z=0;Z<X;Z++){const et=ct-D;let lt=0;const mt=et>vt?E:et*8-7,Tt=mt&-8;let qt=0,zt=0;for(;lt<Tt;lt+=8)zt=A[D++],bt[S++]=zt&128?kt:z,bt[S++]=zt&64?kt:z,bt[S++]=zt&32?kt:z,bt[S++]=zt&16?kt:z,bt[S++]=zt&8?kt:z,bt[S++]=zt&4?kt:z,bt[S++]=zt&2?kt:z,bt[S++]=zt&1?kt:z;for(;lt<mt;lt++)qt===0&&(zt=A[D++],qt=128),bt[S++]=zt&qt?kt:z,qt>>=1}for(;S<Et;)bt[S++]=0;nt.putImageData(I,0,j*$)}}else if(u.kind===s.ImageKind.RGBA_32BPP){for(Z=0,rt=E*$*4,j=0;j<y;j++)w.set(A.subarray(D,D+rt)),D+=rt,nt.putImageData(I,0,Z),Z+=$;j<k&&(rt=E*R*4,w.set(A.subarray(D,D+rt)),nt.putImageData(I,0,Z))}else if(u.kind===s.ImageKind.RGB_24BPP)for(X=$,rt=E*X,j=0;j<k;j++){for(j>=y&&(X=R,rt=E*X),S=0,Z=rt;Z--;)w[S++]=A[D++],w[S++]=A[D++],w[S++]=A[D++],w[S++]=255;nt.putImageData(I,0,j*$)}else throw new Error(`bad image kind: ${u.kind}`)}function ot(nt,u){if(u.bitmap){nt.drawImage(u.bitmap,0,0);return}const g=u.height,E=u.width,R=g%$,y=(g-R)/$,k=R===0?y:y+1,I=nt.createImageData(E,$);let D=0;const S=u.data,A=I.data;for(let w=0;w<k;w++){const j=w<y?$:R;({srcPos:D}=T({src:S,srcPos:D,dest:A,width:E,height:j,nonBlackColor:0})),nt.putImageData(I,0,w*$)}}function ft(nt,u){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of g)nt[E]!==void 0&&(u[E]=nt[E]);nt.setLineDash!==void 0&&(u.setLineDash(nt.getLineDash()),u.lineDashOffset=nt.lineDashOffset)}function gt(nt){if(nt.strokeStyle=nt.fillStyle="#000000",nt.fillRule="nonzero",nt.globalAlpha=1,nt.lineWidth=1,nt.lineCap="butt",nt.lineJoin="miter",nt.miterLimit=10,nt.globalCompositeOperation="source-over",nt.font="10px sans-serif",nt.setLineDash!==void 0&&(nt.setLineDash([]),nt.lineDashOffset=0),!s.isNodeJS){const{filter:u}=nt;u!=="none"&&u!==""&&(nt.filter="none")}}function Q(nt,u,g,E){const R=nt.length;for(let y=3;y<R;y+=4){const k=nt[y];if(k===0)nt[y-3]=u,nt[y-2]=g,nt[y-1]=E;else if(k<255){const I=255-k;nt[y-3]=nt[y-3]*k+u*I>>8,nt[y-2]=nt[y-2]*k+g*I>>8,nt[y-1]=nt[y-1]*k+E*I>>8}}}function at(nt,u,g){const E=nt.length,R=1/255;for(let y=3;y<E;y+=4){const k=g?g[nt[y]]:nt[y];u[y]=u[y]*k*R|0}}function Rt(nt,u,g){const E=nt.length;for(let R=3;R<E;R+=4){const y=nt[R-3]*77+nt[R-2]*152+nt[R-1]*28;u[R]=g?u[R]*g[y>>8]>>8:u[R]*y>>16}}function Dt(nt,u,g,E,R,y,k,I,D,S,A){const w=!!y,j=w?y[0]:0,Z=w?y[1]:0,X=w?y[2]:0,rt=R==="Luminosity"?Rt:at,ct=Math.min(E,Math.ceil(1048576/g));for(let bt=0;bt<E;bt+=ct){const Et=Math.min(ct,E-bt),vt=nt.getImageData(I-S,bt+(D-A),g,Et),kt=u.getImageData(I,bt+D,g,Et);w&&Q(vt.data,j,Z,X),rt(vt.data,kt.data,k),u.putImageData(kt,I,bt+D)}}function Gt(nt,u,g,E){const R=E[0],y=E[1],k=E[2]-R,I=E[3]-y;k===0||I===0||(Dt(u.context,g,k,I,u.subtype,u.backdrop,u.transferMap,R,y,u.offsetX,u.offsetY),nt.save(),nt.globalAlpha=1,nt.globalCompositeOperation="source-over",nt.setTransform(1,0,0,1,0,0),nt.drawImage(g.canvas,0,0),nt.restore())}function Qt(nt,u){const g=s.Util.singularValueDecompose2dScale(nt);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return u!==void 0?u:g[0]<=E||g[1]<=E}const ae=["butt","round","square"],be=["miter","round","bevel"],me={},Ut={},Xt=class Xt{constructor(u,g,E,R,y,k,I,D){x(this,$t);x(this,jt);let{optionalContentConfig:S,markedContentStack:A=null}=k;this.ctx=u,this.current=new Nt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=E,this.canvasFactory=R,this.filterFactory=y,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=A||[],this.optionalContentConfig=S,this.cachedCanvases=new tt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=I,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=D,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(u){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):g}beginDrawing(u){let{transform:g,viewport:E,transparency:R=!1,background:y=null}=u;const k=this.ctx.canvas.width,I=this.ctx.canvas.height,D=this.ctx.fillStyle;if(this.ctx.fillStyle=y||"#ffffff",this.ctx.fillRect(0,0,k,I),this.ctx.fillStyle=D,R){const S=this.cachedCanvases.getCanvas("transparent",k,I);this.compositeCtx=this.ctx,this.transparentCanvas=S.canvas,this.ctx=S.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),gt(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...E.transform),this.viewportScale=E.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(u,g,E,R){const y=u.argsArray,k=u.fnArray;let I=g||0;const D=y.length;if(D===I)return I;const S=D-I>M&&typeof E=="function",A=S?Date.now()+F:0;let w=0;const j=this.commonObjs,Z=this.objs;let X;for(;;){if(R!==void 0&&I===R.nextBreakPoint)return R.breakIt(I,E),I;if(X=k[I],X!==s.OPS.dependency)this[X].apply(this,y[I]);else for(const rt of y[I]){const ct=rt.startsWith("g_")?j:Z;if(!ct.has(rt))return ct.get(rt,E),I}if(I++,I===D)return I;if(S&&++w>M){if(Date.now()>A)return E(),I;w=0}}}endDrawing(){O(this,$t,Hi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const u of this._cachedBitmapsMap.values()){for(const g of u.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);u.clear()}this._cachedBitmapsMap.clear(),O(this,jt,ji).call(this)}_scaleImage(u,g){const E=u.width,R=u.height;let y=Math.max(Math.hypot(g[0],g[1]),1),k=Math.max(Math.hypot(g[2],g[3]),1),I=E,D=R,S="prescale1",A,w;for(;y>2&&I>1||k>2&&D>1;){let j=I,Z=D;y>2&&I>1&&(j=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),y/=I/j),k>2&&D>1&&(Z=D>=16384?Math.floor(D/2)-1||1:Math.ceil(D)/2,k/=D/Z),A=this.cachedCanvases.getCanvas(S,j,Z),w=A.context,w.clearRect(0,0,j,Z),w.drawImage(u,0,0,I,D,0,0,j,Z),u=A.canvas,I=j,D=Z,S=S==="prescale1"?"prescale2":"prescale1"}return{img:u,paintWidth:I,paintHeight:D}}_createMaskCanvas(u){const g=this.ctx,{width:E,height:R}=u,y=this.current.fillColor,k=this.current.patternFill,I=(0,i.getCurrentTransform)(g);let D,S,A,w;if((u.bitmap||u.data)&&u.count>1){const mt=u.bitmap||u.data.buffer;S=JSON.stringify(k?I:[I.slice(0,4),y]),D=this._cachedBitmapsMap.get(mt),D||(D=new Map,this._cachedBitmapsMap.set(mt,D));const Tt=D.get(S);if(Tt&&!k){const qt=Math.round(Math.min(I[0],I[2])+I[4]),zt=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:Tt,offsetX:qt,offsetY:zt}}A=Tt}A||(w=this.cachedCanvases.getCanvas("maskCanvas",E,R),ot(w.context,u));let j=s.Util.transform(I,[1/E,0,0,-1/R,0,0]);j=s.Util.transform(j,[1,0,0,1,0,-R]);const[Z,X,rt,ct]=s.Util.getAxialAlignedBoundingBox([0,0,E,R],j),bt=Math.round(rt-Z)||1,Et=Math.round(ct-X)||1,vt=this.cachedCanvases.getCanvas("fillCanvas",bt,Et),kt=vt.context,z=Z,et=X;kt.translate(-z,-et),kt.transform(...j),A||(A=this._scaleImage(w.canvas,(0,i.getCurrentTransformInverse)(kt)),A=A.img,D&&k&&D.set(S,A)),kt.imageSmoothingEnabled=Qt((0,i.getCurrentTransform)(kt),u.interpolate),Lt(kt,A,0,0,A.width,A.height,0,0,E,R),kt.globalCompositeOperation="source-in";const lt=s.Util.transform((0,i.getCurrentTransformInverse)(kt),[1,0,0,1,-z,-et]);return kt.fillStyle=k?y.getPattern(g,this,lt,r.FILL):y,kt.fillRect(0,0,E,R),D&&!k&&(this.cachedCanvases.delete("fillCanvas"),D.set(S,vt.canvas)),{canvas:vt.canvas,offsetX:Math.round(z),offsetY:Math.round(et)}}setLineWidth(u){u!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=u,this.ctx.lineWidth=u}setLineCap(u){this.ctx.lineCap=ae[u]}setLineJoin(u){this.ctx.lineJoin=be[u]}setMiterLimit(u){this.ctx.miterLimit=u}setDash(u,g){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(u),E.lineDashOffset=g)}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[g,E]of u)switch(g){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const u=this.inSMaskMode;this.current.activeSMask&&!u?this.beginSMaskMode():!this.current.activeSMask&&u&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const u=this.ctx.canvas.width,g=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,R=this.cachedCanvases.getCanvas(E,u,g);this.suspendedCtx=this.ctx,this.ctx=R.context;const y=this.ctx;y.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),ft(this.suspendedCtx,y),J(y,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(u){if(!this.current.activeSMask)return;u?(u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]),u[2]=Math.ceil(u[2]),u[3]=Math.ceil(u[3])):u=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,E=this.suspendedCtx;Gt(E,g,this.ctx,u),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const u=this.current;this.stateStack.push(u),this.current=u.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(u,g,E,R,y,k){this.ctx.transform(u,g,E,R,y,k),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(u,g,E){const R=this.ctx,y=this.current;let k=y.x,I=y.y,D,S;const A=(0,i.getCurrentTransform)(R),w=A[0]===0&&A[3]===0||A[1]===0&&A[2]===0,j=w?E.slice(0):null;for(let Z=0,X=0,rt=u.length;Z<rt;Z++)switch(u[Z]|0){case s.OPS.rectangle:k=g[X++],I=g[X++];const ct=g[X++],bt=g[X++],Et=k+ct,vt=I+bt;R.moveTo(k,I),ct===0||bt===0?R.lineTo(Et,vt):(R.lineTo(Et,I),R.lineTo(Et,vt),R.lineTo(k,vt)),w||y.updateRectMinMax(A,[k,I,Et,vt]),R.closePath();break;case s.OPS.moveTo:k=g[X++],I=g[X++],R.moveTo(k,I),w||y.updatePathMinMax(A,k,I);break;case s.OPS.lineTo:k=g[X++],I=g[X++],R.lineTo(k,I),w||y.updatePathMinMax(A,k,I);break;case s.OPS.curveTo:D=k,S=I,k=g[X+4],I=g[X+5],R.bezierCurveTo(g[X],g[X+1],g[X+2],g[X+3],k,I),y.updateCurvePathMinMax(A,D,S,g[X],g[X+1],g[X+2],g[X+3],k,I,j),X+=6;break;case s.OPS.curveTo2:D=k,S=I,R.bezierCurveTo(k,I,g[X],g[X+1],g[X+2],g[X+3]),y.updateCurvePathMinMax(A,D,S,k,I,g[X],g[X+1],g[X+2],g[X+3],j),k=g[X+2],I=g[X+3],X+=4;break;case s.OPS.curveTo3:D=k,S=I,k=g[X+2],I=g[X+3],R.bezierCurveTo(g[X],g[X+1],k,I,k,I),y.updateCurvePathMinMax(A,D,S,g[X],g[X+1],k,I,k,I,j),X+=4;break;case s.OPS.closePath:R.closePath();break}w&&y.updateScalingPathMinMax(A,j),y.setCurrentPoint(k,I)}closePath(){this.ctx.closePath()}stroke(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const g=this.ctx,E=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E!=null&&E.getPattern)?(g.save(),g.strokeStyle=E.getPattern(g,this,(0,i.getCurrentTransformInverse)(g),r.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),u&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const g=this.ctx,E=this.current.fillColor,R=this.current.patternFill;let y=!1;R&&(g.save(),g.fillStyle=E.getPattern(g,this,(0,i.getCurrentTransformInverse)(g),r.FILL),y=!0);const k=this.current.getClippedPathBoundingBox();this.contentVisible&&k!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),y&&g.restore(),u&&this.consumePath(k)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=me}eoClip(){this.pendingClip=Ut}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const u=this.pendingTextPaths,g=this.ctx;if(u===void 0){g.beginPath();return}g.save(),g.beginPath();for(const E of u)g.setTransform(...E.transform),g.translate(E.x,E.y),E.addToPath(g,E.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(u){this.current.charSpacing=u}setWordSpacing(u){this.current.wordSpacing=u}setHScale(u){this.current.textHScale=u/100}setLeading(u){this.current.leading=-u}setFont(u,g){var A;const E=this.commonObjs.get(u),R=this.current;if(!E)throw new Error(`Can't find font for ${u}`);if(R.fontMatrix=E.fontMatrix||s.FONT_IDENTITY_MATRIX,(R.fontMatrix[0]===0||R.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+u),g<0?(g=-g,R.fontDirection=-1):R.fontDirection=1,this.current.font=E,this.current.fontSize=g,E.isType3Font)return;const y=E.loadedName||"sans-serif",k=((A=E.systemFontInfo)==null?void 0:A.css)||`"${y}", ${E.fallbackName}`;let I="normal";E.black?I="900":E.bold&&(I="bold");const D=E.italic?"italic":"normal";let S=g;g<K?S=K:g>q&&(S=q),this.current.fontSizeScale=g/S,this.ctx.font=`${D} ${I} ${S}px ${k}`}setTextRenderingMode(u){this.current.textRenderingMode=u}setTextRise(u){this.current.textRise=u}moveText(u,g){this.current.x=this.current.lineX+=u,this.current.y=this.current.lineY+=g}setLeadingMoveText(u,g){this.setLeading(-g),this.moveText(u,g)}setTextMatrix(u,g,E,R,y,k){this.current.textMatrix=[u,g,E,R,y,k],this.current.textMatrixScale=Math.hypot(u,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(u,g,E,R){const y=this.ctx,k=this.current,I=k.font,D=k.textRenderingMode,S=k.fontSize/k.fontSizeScale,A=D&s.TextRenderingMode.FILL_STROKE_MASK,w=!!(D&s.TextRenderingMode.ADD_TO_PATH_FLAG),j=k.patternFill&&!I.missingFile;let Z;(I.disableFontFace||w||j)&&(Z=I.getPathGenerator(this.commonObjs,u)),I.disableFontFace||j?(y.save(),y.translate(g,E),y.beginPath(),Z(y,S),R&&y.setTransform(...R),(A===s.TextRenderingMode.FILL||A===s.TextRenderingMode.FILL_STROKE)&&y.fill(),(A===s.TextRenderingMode.STROKE||A===s.TextRenderingMode.FILL_STROKE)&&y.stroke(),y.restore()):((A===s.TextRenderingMode.FILL||A===s.TextRenderingMode.FILL_STROKE)&&y.fillText(u,g,E),(A===s.TextRenderingMode.STROKE||A===s.TextRenderingMode.FILL_STROKE)&&y.strokeText(u,g,E)),w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(y),x:g,y:E,fontSize:S,addToPath:Z})}get isFontSubpixelAAEnabled(){const{context:u}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);u.scale(1.5,1),u.fillText("I",0,10);const g=u.getImageData(0,0,10,10).data;let E=!1;for(let R=3;R<g.length;R+=4)if(g[R]>0&&g[R]<255){E=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(u){const g=this.current,E=g.font;if(E.isType3Font)return this.showType3Text(u);const R=g.fontSize;if(R===0)return;const y=this.ctx,k=g.fontSizeScale,I=g.charSpacing,D=g.wordSpacing,S=g.fontDirection,A=g.textHScale*S,w=u.length,j=E.vertical,Z=j?1:-1,X=E.defaultVMetrics,rt=R*g.fontMatrix[0],ct=g.textRenderingMode===s.TextRenderingMode.FILL&&!E.disableFontFace&&!g.patternFill;y.save(),y.transform(...g.textMatrix),y.translate(g.x,g.y+g.textRise),S>0?y.scale(A,-1):y.scale(A,1);let bt;if(g.patternFill){y.save();const et=g.fillColor.getPattern(y,this,(0,i.getCurrentTransformInverse)(y),r.FILL);bt=(0,i.getCurrentTransform)(y),y.restore(),y.fillStyle=et}let Et=g.lineWidth;const vt=g.textMatrixScale;if(vt===0||Et===0){const et=g.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(et===s.TextRenderingMode.STROKE||et===s.TextRenderingMode.FILL_STROKE)&&(Et=this.getSinglePixelWidth())}else Et/=vt;if(k!==1&&(y.scale(k,k),Et/=k),y.lineWidth=Et,E.isInvalidPDFjsFont){const et=[];let lt=0;for(const mt of u)et.push(mt.unicode),lt+=mt.width;y.fillText(et.join(""),0,0),g.x+=lt*rt*A,y.restore(),this.compose();return}let kt=0,z;for(z=0;z<w;++z){const et=u[z];if(typeof et=="number"){kt+=Z*et*R/1e3;continue}let lt=!1;const mt=(et.isSpace?D:0)+I,Tt=et.fontChar,qt=et.accent;let zt,Yt,te=et.width;if(j){const ce=et.vmetric||X,ge=-(et.vmetric?ce[1]:te*.5)*rt,Ae=ce[2]*rt;te=ce?-ce[0]:te,zt=ge/k,Yt=(kt+Ae)/k}else zt=kt/k,Yt=0;if(E.remeasure&&te>0){const ce=y.measureText(Tt).width*1e3/R*k;if(te<ce&&this.isFontSubpixelAAEnabled){const ge=te/ce;lt=!0,y.save(),y.scale(ge,1),zt/=ge}else te!==ce&&(zt+=(te-ce)/2e3*R/k)}if(this.contentVisible&&(et.isInFont||E.missingFile)){if(ct&&!qt)y.fillText(Tt,zt,Yt);else if(this.paintChar(Tt,zt,Yt,bt),qt){const ce=zt+R*qt.offset.x/k,ge=Yt-R*qt.offset.y/k;this.paintChar(qt.fontChar,ce,ge,bt)}}const ne=j?te*rt-mt*S:te*rt+mt*S;kt+=ne,lt&&y.restore()}j?g.y-=kt:g.x+=kt*A,y.restore(),this.compose()}showType3Text(u){const g=this.ctx,E=this.current,R=E.font,y=E.fontSize,k=E.fontDirection,I=R.vertical?1:-1,D=E.charSpacing,S=E.wordSpacing,A=E.textHScale*k,w=E.fontMatrix||s.FONT_IDENTITY_MATRIX,j=u.length,Z=E.textRenderingMode===s.TextRenderingMode.INVISIBLE;let X,rt,ct,bt;if(!(Z||y===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...E.textMatrix),g.translate(E.x,E.y),g.scale(A,k),X=0;X<j;++X){if(rt=u[X],typeof rt=="number"){bt=I*rt*y/1e3,this.ctx.translate(bt,0),E.x+=bt*A;continue}const Et=(rt.isSpace?S:0)+D,vt=R.charProcOperatorList[rt.operatorListId];if(!vt){(0,s.warn)(`Type3 character "${rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=rt,this.save(),g.scale(y,y),g.transform(...w),this.executeOperatorList(vt),this.restore()),ct=s.Util.applyTransform([rt.width,0],w)[0]*y+Et,g.translate(ct,0),E.x+=ct*A}g.restore(),this.processingType3=null}}setCharWidth(u,g){}setCharWidthAndBounds(u,g,E,R,y,k){this.ctx.rect(E,R,y-E,k-R),this.ctx.clip(),this.endPath()}getColorN_Pattern(u){let g;if(u[0]==="TilingPattern"){const E=u[1],R=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),y={createCanvasGraphics:k=>new Xt(k,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new b(u,E,this.ctx,y,R)}else g=this._getPattern(u[1],u[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(u,g,E){const R=s.Util.makeHexColor(u,g,E);this.ctx.strokeStyle=R,this.current.strokeColor=R}setFillRGBColor(u,g,E){const R=s.Util.makeHexColor(u,g,E);this.ctx.fillStyle=R,this.current.fillColor=R,this.current.patternFill=!1}_getPattern(u){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,E;return this.cachedPatterns.has(u)?E=this.cachedPatterns.get(u):(E=f(this.getObject(u)),this.cachedPatterns.set(u,E)),g&&(E.matrix=g),E}shadingFill(u){if(!this.contentVisible)return;const g=this.ctx;this.save();const E=this._getPattern(u);g.fillStyle=E.getPattern(g,this,(0,i.getCurrentTransformInverse)(g),r.SHADING);const R=(0,i.getCurrentTransformInverse)(g);if(R){const{width:y,height:k}=g.canvas,[I,D,S,A]=s.Util.getAxialAlignedBoundingBox([0,0,y,k],R);this.ctx.fillRect(I,D,S-I,A-D)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(u,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(u)&&u.length===6&&this.transform(...u),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),g)){const E=g[2]-g[0],R=g[3]-g[1];this.ctx.rect(g[0],g[1],E,R),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(u){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;u.isolated||(0,s.info)("TODO: Support non-isolated groups."),u.knockout&&(0,s.warn)("Knockout groups not supported.");const E=(0,i.getCurrentTransform)(g);if(u.matrix&&g.transform(...u.matrix),!u.bbox)throw new Error("Bounding box is required.");let R=s.Util.getAxialAlignedBoundingBox(u.bbox,(0,i.getCurrentTransform)(g));const y=[0,0,g.canvas.width,g.canvas.height];R=s.Util.intersect(R,y)||[0,0,0,0];const k=Math.floor(R[0]),I=Math.floor(R[1]);let D=Math.max(Math.ceil(R[2])-k,1),S=Math.max(Math.ceil(R[3])-I,1),A=1,w=1;D>L&&(A=D/L,D=L),S>L&&(w=S/L,S=L),this.current.startNewPathAndClipBox([0,0,D,S]);let j="groupAt"+this.groupLevel;u.smask&&(j+="_smask_"+this.smaskCounter++%2);const Z=this.cachedCanvases.getCanvas(j,D,S),X=Z.context;X.scale(1/A,1/w),X.translate(-k,-I),X.transform(...E),u.smask?this.smaskStack.push({canvas:Z.canvas,context:X,offsetX:k,offsetY:I,scaleX:A,scaleY:w,subtype:u.smask.subtype,backdrop:u.smask.backdrop,transferMap:u.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(k,I),g.scale(A,w),g.save()),ft(g,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(u){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,u.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const R=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...R);const y=s.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],R);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(y)}}beginAnnotation(u,g,E,R,y){if(O(this,$t,Hi).call(this),gt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const k=g[2]-g[0],I=g[3]-g[1];if(y&&this.annotationCanvasMap){E=E.slice(),E[4]-=g[0],E[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=k,g[3]=I;const[D,S]=s.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:A}=this,w=Math.ceil(k*this.outputScaleX*A),j=Math.ceil(I*this.outputScaleY*A);this.annotationCanvas=this.canvasFactory.create(w,j);const{canvas:Z,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(u,Z),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.save(),this.ctx.setTransform(D,0,0,-S,0,I*S),gt(this.ctx)}else gt(this.ctx),this.ctx.rect(g[0],g[1],k,I),this.ctx.clip(),this.endPath()}this.current=new Nt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...R)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),O(this,jt,ji).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(u){if(!this.contentVisible)return;const g=u.count;u=this.getObject(u.data,u),u.count=g;const E=this.ctx,R=this.processingType3;if(R&&(R.compiled===void 0&&(R.compiled=At(u)),R.compiled)){R.compiled(E);return}const y=this._createMaskCanvas(u),k=y.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(k,y.offsetX,y.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(u,g){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4?arguments[4]:void 0,k=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;u=this.getObject(u.data,u);const I=this.ctx;I.save();const D=(0,i.getCurrentTransform)(I);I.transform(g,E,R,y,0,0);const S=this._createMaskCanvas(u);I.setTransform(1,0,0,1,S.offsetX-D[4],S.offsetY-D[5]);for(let A=0,w=k.length;A<w;A+=2){const j=s.Util.transform(D,[g,E,R,y,k[A],k[A+1]]),[Z,X]=s.Util.applyTransform([0,0],j);I.drawImage(S.canvas,Z,X)}I.restore(),this.compose()}paintImageMaskXObjectGroup(u){if(!this.contentVisible)return;const g=this.ctx,E=this.current.fillColor,R=this.current.patternFill;for(const y of u){const{data:k,width:I,height:D,transform:S}=y,A=this.cachedCanvases.getCanvas("maskCanvas",I,D),w=A.context;w.save();const j=this.getObject(k,y);ot(w,j),w.globalCompositeOperation="source-in",w.fillStyle=R?E.getPattern(w,this,(0,i.getCurrentTransformInverse)(g),r.FILL):E,w.fillRect(0,0,I,D),w.restore(),g.save(),g.transform(...S),g.scale(1,-1),Lt(g,A.canvas,0,0,I,D,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(u){if(!this.contentVisible)return;const g=this.getObject(u);if(!g){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(u,g,E,R){if(!this.contentVisible)return;const y=this.getObject(u);if(!y){(0,s.warn)("Dependent image isn't ready yet");return}const k=y.width,I=y.height,D=[];for(let S=0,A=R.length;S<A;S+=2)D.push({transform:[g,0,0,E,R[S],R[S+1]],x:0,y:0,w:k,h:I});this.paintInlineImageXObjectGroup(y,D)}applyTransferMapsToCanvas(u){return this.current.transferMaps!=="none"&&(u.filter=this.current.transferMaps,u.drawImage(u.canvas,0,0),u.filter="none"),u.canvas}applyTransferMapsToBitmap(u){if(this.current.transferMaps==="none")return u.bitmap;const{bitmap:g,width:E,height:R}=u,y=this.cachedCanvases.getCanvas("inlineImage",E,R),k=y.context;return k.filter=this.current.transferMaps,k.drawImage(g,0,0),k.filter="none",y.canvas}paintInlineImageXObject(u){if(!this.contentVisible)return;const g=u.width,E=u.height,R=this.ctx;if(this.save(),!s.isNodeJS){const{filter:I}=R;I!=="none"&&I!==""&&(R.filter="none")}R.scale(1/g,-1/E);let y;if(u.bitmap)y=this.applyTransferMapsToBitmap(u);else if(typeof HTMLElement=="function"&&u instanceof HTMLElement||!u.data)y=u;else{const I=this.cachedCanvases.getCanvas("inlineImage",g,E).context;pt(I,u),y=this.applyTransferMapsToCanvas(I)}const k=this._scaleImage(y,(0,i.getCurrentTransformInverse)(R));R.imageSmoothingEnabled=Qt((0,i.getCurrentTransform)(R),u.interpolate),Lt(R,k.img,0,0,k.paintWidth,k.paintHeight,0,-E,g,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(u,g){if(!this.contentVisible)return;const E=this.ctx;let R;if(u.bitmap)R=u.bitmap;else{const y=u.width,k=u.height,I=this.cachedCanvases.getCanvas("inlineImage",y,k).context;pt(I,u),R=this.applyTransferMapsToCanvas(I)}for(const y of g)E.save(),E.transform(...y.transform),E.scale(1,-1),Lt(E,R,y.x,y.y,y.w,y.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(u){}markPointProps(u,g){}beginMarkedContent(u){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(u,g){u==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(u){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(u);const E=this.ctx;this.pendingClip&&(g||(this.pendingClip===Ut?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const u=(0,i.getCurrentTransform)(this.ctx);if(u[1]===0&&u[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(u[0]),Math.abs(u[3]));else{const g=Math.abs(u[0]*u[3]-u[2]*u[1]),E=Math.hypot(u[0],u[2]),R=Math.hypot(u[1],u[3]);this._cachedGetSinglePixelWidth=Math.max(E,R)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:u}=this.current,{a:g,b:E,c:R,d:y}=this.ctx.getTransform();let k,I;if(E===0&&R===0){const D=Math.abs(g),S=Math.abs(y);if(D===S)if(u===0)k=I=1/D;else{const A=D*u;k=I=A<1?1/A:1}else if(u===0)k=1/D,I=1/S;else{const A=D*u,w=S*u;k=A<1?1/A:1,I=w<1?1/w:1}}else{const D=Math.abs(g*y-E*R),S=Math.hypot(g,E),A=Math.hypot(R,y);if(u===0)k=A/D,I=S/D;else{const w=u*D;k=A>w?A/w:1,I=S>w?S/w:1}}this._cachedScaleForStroking[0]=k,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(u){const{ctx:g}=this,{lineWidth:E}=this.current,[R,y]=this.getScaleForStroking();if(g.lineWidth=E||1,R===1&&y===1){g.stroke();return}const k=g.getLineDash();if(u&&g.save(),g.scale(R,y),k.length>0){const I=Math.max(R,y);g.setLineDash(k.map(D=>D/I)),g.lineDashOffset/=I}g.stroke(),u&&g.restore()}isContentVisible(){for(let u=this.markedContentStack.length-1;u>=0;u--)if(!this.markedContentStack[u].visible)return!1;return!0}};$t=new WeakSet,Hi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},jt=new WeakSet,ji=function(){if(this.pageColors){const u=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(u!=="none"){const g=this.ctx.filter;this.ctx.filter=u,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}};let It=Xt;for(const nt in s.OPS)It.prototype[nt]!==void 0&&(It.prototype[s.OPS[nt]]=It.prototype[nt])},5419:(n,l,t)=>{var ft,gt,Q,at,Rt,Dt,Gt,tn,ae,en,me,sn,It,Ui,$t,ei,jt,si,Xt,Sn,u,Cn;t.d(l,{DOMCMapReaderFactory:()=>h,DOMCanvasFactory:()=>c,DOMFilterFactory:()=>m,DOMSVGFactory:()=>d,DOMStandardFontDataFactory:()=>_,PDFDateString:()=>$,PageViewport:()=>f,PixelsPerInch:()=>a,RenderingCancelledException:()=>v,StatTimer:()=>L,fetchData:()=>o,getColorValues:()=>Lt,getCurrentTransform:()=>At,getCurrentTransformInverse:()=>Nt,getFilenameFromUrl:()=>K,getPdfFilenameFromUrl:()=>q,getRGB:()=>tt,getXfaPageViewport:()=>J,isDataScheme:()=>b,isPdfFile:()=>T,isValidFetchUrl:()=>F,noContextMenu:()=>M,setLayerDimensions:()=>pt}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(8992),t(4520),t(1454),t(4603),t(7566),t(8721);var s=t(2583),i=t(4292);const r="http://www.w3.org/2000/svg",ot=class ot{};ye(ot,"CSS",96),ye(ot,"PDF",72),ye(ot,"PDF_TO_CSS_UNITS",ot.CSS/ot.PDF);let a=ot;class m extends s.BaseFilterFactory{constructor(){let{docId:y,ownerDocument:k=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();x(this,Gt);x(this,ae);x(this,me);x(this,It);x(this,$t);x(this,jt);x(this,Xt);x(this,u);x(this,ft,void 0);x(this,gt,void 0);x(this,Q,void 0);x(this,at,void 0);x(this,Rt,void 0);x(this,Dt,0);B(this,Q,y),B(this,at,k)}addFilter(y){if(!y)return"none";let k=e(this,Gt,tn).get(y);if(k)return k;let I,D,S,A;if(y.length===1){const X=y[0],rt=new Array(256);for(let ct=0;ct<256;ct++)rt[ct]=X[ct]/255;A=I=D=S=rt.join(",")}else{const[X,rt,ct]=y,bt=new Array(256),Et=new Array(256),vt=new Array(256);for(let kt=0;kt<256;kt++)bt[kt]=X[kt]/255,Et[kt]=rt[kt]/255,vt[kt]=ct[kt]/255;I=bt.join(","),D=Et.join(","),S=vt.join(","),A=`${I}${D}${S}`}if(k=e(this,Gt,tn).get(A),k)return e(this,Gt,tn).set(y,k),k;const w=`g_${e(this,Q)}_transfer_map_${As(this,Dt)._++}`,j=`url(#${w})`;e(this,Gt,tn).set(y,j),e(this,Gt,tn).set(A,j);const Z=O(this,$t,ei).call(this,w);return O(this,Xt,Sn).call(this,I,D,S,Z),j}addHCMFilter(y,k){var bt;const I=`${y}-${k}`,D="base";let S=e(this,ae,en).get(D);if((S==null?void 0:S.key)===I||(S?((bt=S.filter)==null||bt.remove(),S.key=I,S.url="none",S.filter=null):(S={key:I,url:"none",filter:null},e(this,ae,en).set(D,S)),!y||!k))return S.url;const A=O(this,u,Cn).call(this,y);y=i.Util.makeHexColor(...A);const w=O(this,u,Cn).call(this,k);if(k=i.Util.makeHexColor(...w),e(this,me,sn).style.color="",y==="#000000"&&k==="#ffffff"||y===k)return S.url;const j=new Array(256);for(let Et=0;Et<=255;Et++){const vt=Et/255;j[Et]=vt<=.03928?vt/12.92:((vt+.055)/1.055)**2.4}const Z=j.join(","),X=`g_${e(this,Q)}_hcm_filter`,rt=S.filter=O(this,$t,ei).call(this,X);O(this,Xt,Sn).call(this,Z,Z,Z,rt),O(this,It,Ui).call(this,rt);const ct=(Et,vt)=>{const kt=A[Et]/255,z=w[Et]/255,et=new Array(vt+1);for(let lt=0;lt<=vt;lt++)et[lt]=kt+lt/vt*(z-kt);return et.join(",")};return O(this,Xt,Sn).call(this,ct(0,5),ct(1,5),ct(2,5),rt),S.url=`url(#${X})`,S.url}addHighlightHCMFilter(y,k,I,D,S){var z;const A=`${k}-${I}-${D}-${S}`;let w=e(this,ae,en).get(y);if((w==null?void 0:w.key)===A||(w?((z=w.filter)==null||z.remove(),w.key=A,w.url="none",w.filter=null):(w={key:A,url:"none",filter:null},e(this,ae,en).set(y,w)),!k||!I))return w.url;const[j,Z]=[k,I].map(O(this,u,Cn).bind(this));let X=Math.round(.2126*j[0]+.7152*j[1]+.0722*j[2]),rt=Math.round(.2126*Z[0]+.7152*Z[1]+.0722*Z[2]),[ct,bt]=[D,S].map(O(this,u,Cn).bind(this));rt<X&&([X,rt,ct,bt]=[rt,X,bt,ct]),e(this,me,sn).style.color="";const Et=(et,lt,mt)=>{const Tt=new Array(256),qt=(rt-X)/mt,zt=et/255,Yt=(lt-et)/(255*mt);let te=0;for(let ne=0;ne<=mt;ne++){const ce=Math.round(X+ne*qt),ge=zt+ne*Yt;for(let Ae=te;Ae<=ce;Ae++)Tt[Ae]=ge;te=ce+1}for(let ne=te;ne<256;ne++)Tt[ne]=Tt[te-1];return Tt.join(",")},vt=`g_${e(this,Q)}_hcm_${y}_filter`,kt=w.filter=O(this,$t,ei).call(this,vt);return O(this,It,Ui).call(this,kt),O(this,Xt,Sn).call(this,Et(ct[0],bt[0],5),Et(ct[1],bt[1],5),Et(ct[2],bt[2],5),kt),w.url=`url(#${vt})`,w.url}destroy(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&e(this,ae,en).size!==0||(e(this,gt)&&(e(this,gt).parentNode.parentNode.remove(),B(this,gt,null)),e(this,ft)&&(e(this,ft).clear(),B(this,ft,null)),B(this,Dt,0))}}ft=new WeakMap,gt=new WeakMap,Q=new WeakMap,at=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Gt=new WeakSet,tn=function(){return e(this,ft)||B(this,ft,new Map)},ae=new WeakSet,en=function(){return e(this,Rt)||B(this,Rt,new Map)},me=new WeakSet,sn=function(){if(!e(this,gt)){const y=e(this,at).createElement("div"),{style:k}=y;k.visibility="hidden",k.contain="strict",k.width=k.height=0,k.position="absolute",k.top=k.left=0,k.zIndex=-1;const I=e(this,at).createElementNS(r,"svg");I.setAttribute("width",0),I.setAttribute("height",0),B(this,gt,e(this,at).createElementNS(r,"defs")),y.append(I),I.append(e(this,gt)),e(this,at).body.append(y)}return e(this,gt)},It=new WeakSet,Ui=function(y){const k=e(this,at).createElementNS(r,"feColorMatrix");k.setAttribute("type","matrix"),k.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),y.append(k)},$t=new WeakSet,ei=function(y){const k=e(this,at).createElementNS(r,"filter");return k.setAttribute("color-interpolation-filters","sRGB"),k.setAttribute("id",y),e(this,me,sn).append(k),k},jt=new WeakSet,si=function(y,k,I){const D=e(this,at).createElementNS(r,k);D.setAttribute("type","discrete"),D.setAttribute("tableValues",I),y.append(D)},Xt=new WeakSet,Sn=function(y,k,I,D){const S=e(this,at).createElementNS(r,"feComponentTransfer");D.append(S),O(this,jt,si).call(this,S,"feFuncR",y),O(this,jt,si).call(this,S,"feFuncG",k),O(this,jt,si).call(this,S,"feFuncB",I)},u=new WeakSet,Cn=function(y){return e(this,me,sn).style.color=y,tt(getComputedStyle(e(this,me,sn)).getPropertyValue("color"))};class c extends s.BaseCanvasFactory{constructor(){let{ownerDocument:R=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=R}_createCanvas(R,y){const k=this._document.createElement("canvas");return k.width=R,k.height=y,k}}async function o(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"text";if(F(E,document.baseURI)){const y=await fetch(E);if(!y.ok)throw new Error(y.statusText);switch(R){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"json":return y.json()}return y.text()}return new Promise((y,k)=>{const I=new XMLHttpRequest;I.open("GET",E,!0),I.responseType=R,I.onreadystatechange=()=>{if(I.readyState===XMLHttpRequest.DONE){if(I.status===200||I.status===0){switch(R){case"arraybuffer":case"blob":case"json":y(I.response);return}y(I.responseText);return}k(new Error(I.statusText))}},I.send(null)})}class h extends s.BaseCMapReaderFactory{_fetchData(R,y){return o(R,this.isCompressed?"arraybuffer":"text").then(k=>({cMapData:k instanceof ArrayBuffer?new Uint8Array(k):(0,i.stringToBytes)(k),compressionType:y}))}}class _ extends s.BaseStandardFontDataFactory{_fetchData(R){return o(R,"arraybuffer").then(y=>new Uint8Array(y))}}class d extends s.BaseSVGFactory{_createSVG(R){return document.createElementNS(r,R)}}class f{constructor(R){let{viewBox:y,scale:k,rotation:I,offsetX:D=0,offsetY:S=0,dontFlip:A=!1}=R;this.viewBox=y,this.scale=k,this.rotation=I,this.offsetX=D,this.offsetY=S;const w=(y[2]+y[0])/2,j=(y[3]+y[1])/2;let Z,X,rt,ct;switch(I%=360,I<0&&(I+=360),I){case 180:Z=-1,X=0,rt=0,ct=1;break;case 90:Z=0,X=1,rt=1,ct=0;break;case 270:Z=0,X=-1,rt=-1,ct=0;break;case 0:Z=1,X=0,rt=0,ct=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}A&&(rt=-rt,ct=-ct);let bt,Et,vt,kt;Z===0?(bt=Math.abs(j-y[1])*k+D,Et=Math.abs(w-y[0])*k+S,vt=(y[3]-y[1])*k,kt=(y[2]-y[0])*k):(bt=Math.abs(w-y[0])*k+D,Et=Math.abs(j-y[1])*k+S,vt=(y[2]-y[0])*k,kt=(y[3]-y[1])*k),this.transform=[Z*k,X*k,rt*k,ct*k,bt-Z*k*w-rt*k*j,Et-X*k*w-ct*k*j],this.width=vt,this.height=kt}get rawDims(){const{viewBox:R}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:R[2]-R[0],pageHeight:R[3]-R[1],pageX:R[0],pageY:R[1]})}clone(){let{scale:R=this.scale,rotation:y=this.rotation,offsetX:k=this.offsetX,offsetY:I=this.offsetY,dontFlip:D=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new f({viewBox:this.viewBox.slice(),scale:R,rotation:y,offsetX:k,offsetY:I,dontFlip:D})}convertToViewportPoint(R,y){return i.Util.applyTransform([R,y],this.transform)}convertToViewportRectangle(R){const y=i.Util.applyTransform([R[0],R[1]],this.transform),k=i.Util.applyTransform([R[2],R[3]],this.transform);return[y[0],y[1],k[0],k[1]]}convertToPdfPoint(R,y){return i.Util.applyInverseTransform([R,y],this.transform)}}class v extends i.BaseException{constructor(R){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;super(R,"RenderingCancelledException"),this.extraDelay=y}}function b(E){const R=E.length;let y=0;for(;y<R&&E[y].trim()==="";)y++;return E.substring(y,y+5).toLowerCase()==="data:"}function T(E){return typeof E=="string"&&/\.pdf$/i.test(E)}function K(E){return arguments.length>1&&arguments[1]!==void 0&&arguments[1]||([E]=E.split(/[#?]/,1)),E.substring(E.lastIndexOf("/")+1)}function q(E){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof E!="string")return R;if(b(E))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),R;const y=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,k=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,I=y.exec(E);let D=k.exec(I[1])||k.exec(I[2])||k.exec(I[3]);if(D&&(D=D[0],D.includes("%")))try{D=k.exec(decodeURIComponent(D))[0]}catch{}return D||R}class L{constructor(){ye(this,"started",Object.create(null));ye(this,"times",[])}time(R){R in this.started&&(0,i.warn)(`Timer is already running for ${R}`),this.started[R]=Date.now()}timeEnd(R){R in this.started||(0,i.warn)(`Timer has not been started for ${R}`),this.times.push({name:R,start:this.started[R],end:Date.now()}),delete this.started[R]}toString(){const R=[];let y=0;for(const{name:k}of this.times)y=Math.max(k.length,y);for(const{name:k,start:I,end:D}of this.times)R.push(`${k.padEnd(y)} ${D-I}ms
`);return R.join("")}}function F(E,R){try{const{protocol:y}=R?new URL(E,R):new URL(E);return y==="http:"||y==="https:"}catch{return!1}}function M(E){E.preventDefault()}let G;class ${static toDateObject(R){if(!R||typeof R!="string")return null;G||(G=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const y=G.exec(R);if(!y)return null;const k=parseInt(y[1],10);let I=parseInt(y[2],10);I=I>=1&&I<=12?I-1:0;let D=parseInt(y[3],10);D=D>=1&&D<=31?D:1;let S=parseInt(y[4],10);S=S>=0&&S<=23?S:0;let A=parseInt(y[5],10);A=A>=0&&A<=59?A:0;let w=parseInt(y[6],10);w=w>=0&&w<=59?w:0;const j=y[7]||"Z";let Z=parseInt(y[8],10);Z=Z>=0&&Z<=23?Z:0;let X=parseInt(y[9],10)||0;return X=X>=0&&X<=59?X:0,j==="-"?(S+=Z,A+=X):j==="+"&&(S-=Z,A-=X),new Date(Date.UTC(k,I,D,S,A,w))}}function J(E,R){let{scale:y=1,rotation:k=0}=R;const{width:I,height:D}=E.attributes.style,S=[0,0,parseInt(I),parseInt(D)];return new f({viewBox:S,scale:y,rotation:k})}function tt(E){if(E.startsWith("#")){const R=parseInt(E.slice(1),16);return[(R&16711680)>>16,(R&65280)>>8,R&255]}return E.startsWith("rgb(")?E.slice(4,-1).split(",").map(R=>parseInt(R)):E.startsWith("rgba(")?E.slice(5,-1).split(",").map(R=>parseInt(R)).slice(0,3):((0,i.warn)(`Not a valid color format: "${E}"`),[0,0,0])}function Lt(E){const R=document.createElement("span");R.style.visibility="hidden",document.body.append(R);for(const y of E.keys()){R.style.color=y;const k=window.getComputedStyle(R).color;E.set(y,tt(k))}R.remove()}function At(E){const{a:R,b:y,c:k,d:I,e:D,f:S}=E.getTransform();return[R,y,k,I,D,S]}function Nt(E){const{a:R,b:y,c:k,d:I,e:D,f:S}=E.getTransform().invertSelf();return[R,y,k,I,D,S]}function pt(E,R){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(R instanceof f){const{pageWidth:I,pageHeight:D}=R.rawDims,{style:S}=E,A=i.FeatureTest.isCSSRoundSupported,w=`var(--scale-factor) * ${I}px`,j=`var(--scale-factor) * ${D}px`,Z=A?`round(${w}, 1px)`:`calc(${w})`,X=A?`round(${j}, 1px)`:`calc(${j})`;!y||R.rotation%180===0?(S.width=Z,S.height=X):(S.width=X,S.height=Z)}k&&E.setAttribute("data-main-rotation",R.rotation)}},4047:(n,l,t)=>{var a,m,c,o,h,Bi,d,zi,v,na;t.d(l,{DrawLayer:()=>r});var s=t(5419),i=t(4292);const T=class T{constructor(q){x(this,d);x(this,v);x(this,a,null);x(this,m,0);x(this,c,new Map);x(this,o,new Map);let{pageIndex:L}=q;this.pageIndex=L}setParent(q){if(!e(this,a)){B(this,a,q);return}if(e(this,a)!==q){if(e(this,c).size>0)for(const L of e(this,c).values())L.remove(),q.append(L);B(this,a,q)}}static get _svgFactory(){return(0,i.shadow)(this,"_svgFactory",new s.DOMSVGFactory)}highlight(q,L,F){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const G=As(this,m)._++,$=O(this,d,zi).call(this,q.box);$.classList.add("highlight"),q.free&&$.classList.add("free");const J=T._svgFactory.createElement("defs");$.append(J);const tt=T._svgFactory.createElement("path");J.append(tt);const Lt=`path_p${this.pageIndex}_${G}`;tt.setAttribute("id",Lt),tt.setAttribute("d",q.toSVGPath()),M&&e(this,o).set(G,tt);const At=O(this,v,na).call(this,J,Lt),Nt=T._svgFactory.createElement("use");return $.append(Nt),$.setAttribute("fill",L),$.setAttribute("fill-opacity",F),Nt.setAttribute("href",`#${Lt}`),e(this,c).set(G,$),{id:G,clipPathId:`url(#${At})`}}highlightOutline(q){const L=As(this,m)._++,F=O(this,d,zi).call(this,q.box);F.classList.add("highlightOutline");const M=T._svgFactory.createElement("defs");F.append(M);const G=T._svgFactory.createElement("path");M.append(G);const $=`path_p${this.pageIndex}_${L}`;G.setAttribute("id",$),G.setAttribute("d",q.toSVGPath()),G.setAttribute("vector-effect","non-scaling-stroke");let J;if(q.free){F.classList.add("free");const At=T._svgFactory.createElement("mask");M.append(At),J=`mask_p${this.pageIndex}_${L}`,At.setAttribute("id",J),At.setAttribute("maskUnits","objectBoundingBox");const Nt=T._svgFactory.createElement("rect");At.append(Nt),Nt.setAttribute("width","1"),Nt.setAttribute("height","1"),Nt.setAttribute("fill","white");const pt=T._svgFactory.createElement("use");At.append(pt),pt.setAttribute("href",`#${$}`),pt.setAttribute("stroke","none"),pt.setAttribute("fill","black"),pt.setAttribute("fill-rule","nonzero"),pt.classList.add("mask")}const tt=T._svgFactory.createElement("use");F.append(tt),tt.setAttribute("href",`#${$}`),J&&tt.setAttribute("mask",`url(#${J})`);const Lt=tt.cloneNode();return F.append(Lt),tt.classList.add("mainOutline"),Lt.classList.add("secondaryOutline"),e(this,c).set(L,F),L}finalizeLine(q,L){const F=e(this,o).get(q);e(this,o).delete(q),this.updateBox(q,L.box),F.setAttribute("d",L.toSVGPath())}updateLine(q,L){e(this,c).get(q).firstChild.firstChild.setAttribute("d",L.toSVGPath())}removeFreeHighlight(q){this.remove(q),e(this,o).delete(q)}updatePath(q,L){e(this,o).get(q).setAttribute("d",L.toSVGPath())}updateBox(q,L){var F;O(F=T,h,Bi).call(F,e(this,c).get(q),L)}show(q,L){e(this,c).get(q).classList.toggle("hidden",!L)}rotate(q,L){e(this,c).get(q).setAttribute("data-main-rotation",L)}changeColor(q,L){e(this,c).get(q).setAttribute("fill",L)}changeOpacity(q,L){e(this,c).get(q).setAttribute("fill-opacity",L)}addClass(q,L){e(this,c).get(q).classList.add(L)}removeClass(q,L){e(this,c).get(q).classList.remove(L)}remove(q){e(this,a)!==null&&(e(this,c).get(q).remove(),e(this,c).delete(q))}destroy(){B(this,a,null);for(const q of e(this,c).values())q.remove();e(this,c).clear()}};a=new WeakMap,m=new WeakMap,c=new WeakMap,o=new WeakMap,h=new WeakSet,Bi=function(q){let{x:L=0,y:F=0,width:M=1,height:G=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{style:$}=q;$.top=`${100*F}%`,$.left=`${100*L}%`,$.width=`${100*M}%`,$.height=`${100*G}%`},d=new WeakSet,zi=function(q){var F;const L=T._svgFactory.create(1,1,!0);return e(this,a).append(L),L.setAttribute("aria-hidden",!0),O(F=T,h,Bi).call(F,L,q),L},v=new WeakSet,na=function(q,L){const F=T._svgFactory.createElement("clipPath");q.append(F);const M=`clip_${L}`;F.setAttribute("id",M),F.setAttribute("clipPathUnits","objectBoundingBox");const G=T._svgFactory.createElement("use");return F.append(G),G.setAttribute("href",`#${L}`),G.classList.add("clip"),M},x(T,h);let r=T},9731:(n,l,t)=>{var T,K,q,L,F,M,G,$,J,tt,Lt,ia,Nt,ra,ot,aa,gt,ni,at,ii,Dt,ri,Qt,oa,be,qi,Ut,la,$t,he,jt,le,Xt,nt,u,g,E,R,y,k,I,D,S,A,w,j,Z,X,$i,ct,Vi,Et,ha,kt,ca,et,da,mt,Gi,qt,Tn,Yt,nn,ne,ua,ge,ai,Ce,Ln,Fe,pa,Le,fa,ue,ga,P,ma,C,N,V,ht,yt,wt,Ht,Mt,Ct,Ft,Kt,re,ie,we,de,ze,va,He,ya,Ge,Aa,dt,ba,Vt,Wi,se,wa,_e,Xi,Re,_a,Xe,Ea,ps,xa,zs,Sa,qs,Ca,Qe,Hs,fs,Yi,Ze,oi,ws,li,_s,rn,dn,Ki,$s,hi,Bn,Ta,un,Ji,zn,La,qn,Ra,pn,Qi,Vs,ci,Ms,Rn,Ye,Ke,Es,gs,xs,Gs,hs,Is,cs,as,fn,Ps,kn,Ds,Mn,Ws,di,gn,Zi,$n,ka,Vn,Ma,mn,tr,Xs,ui,Gn,Ia,Fs,Ys,ds,Ns,ms,vs,ys,ns,Ss,Ks,Js,ts,pe,Cs,Wn,Pa,yn,er,An,sr,bn,nr,Qs,pi;t.d(l,{AnnotationEditorLayer:()=>b}),t(1454),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292),i=t(310);t(4114),t(8992),t(7550);var r=t(7830),a=t(6976);const m=/\r\n?|\n/g,St=class St extends i.AnnotationEditor{constructor(p){super({...p,name:"freeTextEditor"});x(this,Lt);x(this,Nt);x(this,ot);x(this,gt);x(this,Dt);x(this,Qt);x(this,Ut);x(this,T,this.editorDivBlur.bind(this));x(this,K,this.editorDivFocus.bind(this));x(this,q,this.editorDivInput.bind(this));x(this,L,this.editorDivKeydown.bind(this));x(this,F,this.editorDivPaste.bind(this));x(this,M,void 0);x(this,G,"");x(this,$,`${this.id}-editor`);x(this,J,void 0);x(this,tt,null);B(this,M,p.color||St._defaultColor||i.AnnotationEditor._defaultLineColor),B(this,J,p.fontSize||St._defaultFontSize)}static get _keyboardManager(){const p=St.prototype,H=xt=>xt.isEmpty(),it=r.AnnotationEditorUIManager.TRANSLATE_SMALL,ut=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],p.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],p.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],p._translateEmpty,{args:[-it,0],checker:H}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p._translateEmpty,{args:[-ut,0],checker:H}],[["ArrowRight","mac+ArrowRight"],p._translateEmpty,{args:[it,0],checker:H}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p._translateEmpty,{args:[ut,0],checker:H}],[["ArrowUp","mac+ArrowUp"],p._translateEmpty,{args:[0,-it],checker:H}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p._translateEmpty,{args:[0,-ut],checker:H}],[["ArrowDown","mac+ArrowDown"],p._translateEmpty,{args:[0,it],checker:H}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p._translateEmpty,{args:[0,ut],checker:H}]]))}static initialize(p,H){i.AnnotationEditor.initialize(p,H,{strings:["pdfjs-free-text-default-content"]});const it=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(it.getPropertyValue("--freetext-padding"))}static updateDefaultParams(p,H){switch(p){case s.AnnotationEditorParamsType.FREETEXT_SIZE:St._defaultFontSize=H;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:St._defaultColor=H;break}}updateParams(p,H){switch(p){case s.AnnotationEditorParamsType.FREETEXT_SIZE:O(this,Lt,ia).call(this,H);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:O(this,Nt,ra).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,St._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,St._defaultColor||i.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,J)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,M)]]}_translateEmpty(p,H){this._uiManager.translateSelectedEditors(p,H,!0)}getInitialTranslation(){const p=this.parentScale;return[-St._internalPadding*p,-(St._internalPadding+e(this,J))*p]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,L)),this.editorDiv.addEventListener("focus",e(this,K)),this.editorDiv.addEventListener("blur",e(this,T)),this.editorDiv.addEventListener("input",e(this,q)),this.editorDiv.addEventListener("paste",e(this,F)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,$)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,L)),this.editorDiv.removeEventListener("focus",e(this,K)),this.editorDiv.removeEventListener("blur",e(this,T)),this.editorDiv.removeEventListener("input",e(this,q)),this.editorDiv.removeEventListener("paste",e(this,F)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(p){this._focusEventsAllowed&&(super.focusin(p),p.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var p;this.width||(this.enableEditMode(),this.editorDiv.focus(),(p=this._initialOptions)!=null&&p.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const p=e(this,G),H=B(this,G,O(this,ot,aa).call(this).trimEnd());if(p===H)return;const it=ut=>{if(B(this,G,ut),!ut){this.remove();return}O(this,Dt,ri).call(this),this._uiManager.rebuild(this),O(this,gt,ni).call(this)};this.addCommands({cmd:()=>{it(H)},undo:()=>{it(p)},mustExec:!1}),O(this,gt,ni).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(p){this.enterInEditMode()}keydown(p){p.target===this.div&&p.key==="Enter"&&(this.enterInEditMode(),p.preventDefault())}editorDivKeydown(p){St._keyboardManager.exec(this,p)}editorDivFocus(p){this.isEditing=!0}editorDivBlur(p){this.isEditing=!1}editorDivInput(p){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let p,H;this.width&&(p=this.x,H=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,$)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),i.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ut=>{var xt;return(xt=this.editorDiv)==null?void 0:xt.setAttribute("default-content",ut)}),this.editorDiv.contentEditable=!0;const{style:it}=this.editorDiv;if(it.fontSize=`calc(${e(this,J)}px * var(--scale-factor))`,it.color=e(this,M),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ut,xt]=this.parentDimensions;if(this.annotationElementId){const{position:Ot}=e(this,tt);let[Wt,Pt]=this.getInitialTranslation();[Wt,Pt]=this.pageTranslationToScreen(Wt,Pt);const[Jt,Zt]=this.pageDimensions,[ve,Te]=this.pageTranslation;let Se,Ee;switch(this.rotation){case 0:Se=p+(Ot[0]-ve)/Jt,Ee=H+this.height-(Ot[1]-Te)/Zt;break;case 90:Se=p+(Ot[0]-ve)/Jt,Ee=H-(Ot[1]-Te)/Zt,[Wt,Pt]=[Pt,-Wt];break;case 180:Se=p-this.width+(Ot[0]-ve)/Jt,Ee=H-(Ot[1]-Te)/Zt,[Wt,Pt]=[-Wt,-Pt];break;case 270:Se=p+(Ot[0]-ve-this.height*Zt)/Jt,Ee=H+(Ot[1]-Te-this.width*Jt)/Zt,[Wt,Pt]=[-Pt,Wt];break}this.setAt(Se*ut,Ee*xt,Wt,Pt)}else this.setAt(p*ut,H*xt,this.width*ut,this.height*xt);O(this,Dt,ri).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(p){var Se,Ee,De;const H=p.clipboardData||window.clipboardData,{types:it}=H;if(it.length===1&&it[0]==="text/plain")return;p.preventDefault();const ut=O(Se=St,be,qi).call(Se,H.getData("text")||"").replaceAll(m,`
`);if(!ut)return;const xt=window.getSelection();if(!xt.rangeCount)return;this.editorDiv.normalize(),xt.deleteFromDocument();const Ot=xt.getRangeAt(0);if(!ut.includes(`
`)){Ot.insertNode(document.createTextNode(ut)),this.editorDiv.normalize(),xt.collapseToStart();return}const{startContainer:Wt,startOffset:Pt}=Ot,Jt=[],Zt=[];if(Wt.nodeType===Node.TEXT_NODE){const Pe=Wt.parentElement;if(Zt.push(Wt.nodeValue.slice(Pt).replaceAll(m,"")),Pe!==this.editorDiv){let qe=Jt;for(const Be of this.editorDiv.childNodes){if(Be===Pe){qe=Zt;continue}qe.push(O(Ee=St,at,ii).call(Ee,Be))}}Jt.push(Wt.nodeValue.slice(0,Pt).replaceAll(m,""))}else if(Wt===this.editorDiv){let Pe=Jt,qe=0;for(const Be of this.editorDiv.childNodes)qe++===Pt&&(Pe=Zt),Pe.push(O(De=St,at,ii).call(De,Be))}B(this,G,`${Jt.join(`
`)}${ut}${Zt.join(`
`)}`),O(this,Dt,ri).call(this);const ve=new Range;let Te=Jt.reduce((Pe,qe)=>Pe+qe.length,0);for(const{firstChild:Pe}of this.editorDiv.childNodes)if(Pe.nodeType===Node.TEXT_NODE){const qe=Pe.nodeValue.length;if(Te<=qe){ve.setStart(Pe,Te),ve.setEnd(Pe,Te);break}Te-=qe}xt.removeAllRanges(),xt.addRange(ve)}get contentDiv(){return this.editorDiv}static deserialize(p,H,it){var Ot;let ut=null;if(p instanceof a.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Wt,fontColor:Pt},rect:Jt,rotation:Zt,id:ve},textContent:Te,textPosition:Se,parent:{page:{pageNumber:Ee}}}=p;if(!Te||Te.length===0)return null;ut=p={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(Pt),fontSize:Wt,value:Te.join(`
`),position:Se,pageIndex:Ee-1,rect:Jt,rotation:Zt,id:ve,deleted:!1}}const xt=super.deserialize(p,H,it);return B(xt,J,p.fontSize),B(xt,M,s.Util.makeHexColor(...p.color)),B(xt,G,O(Ot=St,be,qi).call(Ot,p.value)),xt.annotationElementId=p.id||null,B(xt,tt,ut),xt}serialize(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const H=St._internalPadding*this.parentScale,it=this.getRect(H,H),ut=i.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,M)),xt={annotationType:s.AnnotationEditorType.FREETEXT,color:ut,fontSize:e(this,J),value:O(this,Qt,oa).call(this),pageIndex:this.pageIndex,rect:it,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return p?xt:this.annotationElementId&&!O(this,Ut,la).call(this,xt)?null:(xt.id=this.annotationElementId,xt)}};T=new WeakMap,K=new WeakMap,q=new WeakMap,L=new WeakMap,F=new WeakMap,M=new WeakMap,G=new WeakMap,$=new WeakMap,J=new WeakMap,tt=new WeakMap,Lt=new WeakSet,ia=function(p){const H=ut=>{this.editorDiv.style.fontSize=`calc(${ut}px * var(--scale-factor))`,this.translate(0,-(ut-e(this,J))*this.parentScale),B(this,J,ut),O(this,gt,ni).call(this)},it=e(this,J);this.addCommands({cmd:H.bind(this,p),undo:H.bind(this,it),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Nt=new WeakSet,ra=function(p){const H=ut=>{B(this,M,this.editorDiv.style.color=ut)},it=e(this,M);this.addCommands({cmd:H.bind(this,p),undo:H.bind(this,it),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ot=new WeakSet,aa=function(){var H;const p=[];this.editorDiv.normalize();for(const it of this.editorDiv.childNodes)p.push(O(H=St,at,ii).call(H,it));return p.join(`
`)},gt=new WeakSet,ni=function(){const[p,H]=this.parentDimensions;let it;if(this.isAttachedToDOM)it=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:xt}=this,Ot=xt.style.display;xt.style.display="hidden",ut.div.append(this.div),it=xt.getBoundingClientRect(),xt.remove(),xt.style.display=Ot}this.rotation%180===this.parentRotation%180?(this.width=it.width/p,this.height=it.height/H):(this.width=it.height/p,this.height=it.width/H),this.fixAndSetPosition()},at=new WeakSet,ii=function(p){return(p.nodeType===Node.TEXT_NODE?p.nodeValue:p.innerText).replaceAll(m,"")},Dt=new WeakSet,ri=function(){if(this.editorDiv.replaceChildren(),!!e(this,G))for(const p of e(this,G).split(`
`)){const H=document.createElement("div");H.append(p?document.createTextNode(p):document.createElement("br")),this.editorDiv.append(H)}},Qt=new WeakSet,oa=function(){return e(this,G).replaceAll("\xA0"," ")},be=new WeakSet,qi=function(p){return p.replaceAll(" ","\xA0")},Ut=new WeakSet,la=function(p){const{value:H,fontSize:it,color:ut,pageIndex:xt}=e(this,tt);return this._hasBeenMoved||p.value!==H||p.fontSize!==it||p.color.some((Ot,Wt)=>Ot!==ut[Wt])||p.pageIndex!==xt},x(St,at),x(St,be),ye(St,"_freeTextDefaultContent",""),ye(St,"_internalPadding",0),ye(St,"_defaultColor",null),ye(St,"_defaultFontSize",10),ye(St,"_type","freetext"),ye(St,"_editorType",s.AnnotationEditorType.FREETEXT);let c=St;var o=t(4061),h=t(2259),_=t(5419);const U=class U extends i.AnnotationEditor{constructor(p){super({...p,name:"highlightEditor"});x(this,X);x(this,ct);x(this,Et);x(this,kt);x(this,et);x(this,mt);x(this,qt);x(this,ne);x(this,ge);x(this,Ce);x(this,Fe);x(this,Le);x(this,$t,null);x(this,he,0);x(this,jt,void 0);x(this,le,null);x(this,Xt,null);x(this,nt,null);x(this,u,null);x(this,g,0);x(this,E,null);x(this,R,null);x(this,y,null);x(this,k,!1);x(this,I,O(this,ne,ua).bind(this));x(this,D,null);x(this,S,void 0);x(this,A,null);x(this,w,"");x(this,j,void 0);x(this,Z,"");this.color=p.color||U._defaultColor,B(this,j,p.thickness||U._defaultThickness),B(this,S,p.opacity||U._defaultOpacity),B(this,jt,p.boxes||null),B(this,Z,p.methodOfCreation||""),B(this,w,p.text||""),this._isDraggable=!1,p.highlightId>-1?(B(this,k,!0),O(this,ct,Vi).call(this,p),O(this,qt,Tn).call(this)):(B(this,$t,p.anchorNode),B(this,he,p.anchorOffset),B(this,u,p.focusNode),B(this,g,p.focusOffset),O(this,X,$i).call(this),O(this,qt,Tn).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const p=U.prototype;return(0,s.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],p._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],p._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],p._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],p._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:e(this,k)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:e(this,j),methodOfCreation:e(this,Z)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(p){return{numberOfColors:p.get("color").size}}static initialize(p,H){var it;i.AnnotationEditor.initialize(p,H),U._defaultColor||(U._defaultColor=((it=H.highlightColors)==null?void 0:it.values().next().value)||"#fff066")}static updateDefaultParams(p,H){switch(p){case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:U._defaultColor=H;break;case s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:U._defaultThickness=H;break}}translateInPage(p,H){}get toolbarPosition(){return e(this,D)}updateParams(p,H){switch(p){case s.AnnotationEditorParamsType.HIGHLIGHT_COLOR:O(this,Et,ha).call(this,H);break;case s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:O(this,kt,ca).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,U._defaultColor],[s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,U._defaultThickness]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||U._defaultColor],[s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,e(this,j)||U._defaultThickness],[s.AnnotationEditorParamsType.HIGHLIGHT_FREE,e(this,k)]]}async addEditToolbar(){const p=await super.addEditToolbar();return p?(this._uiManager.highlightColors&&(B(this,Xt,new h.ColorPicker({editor:this})),p.addColorPicker(e(this,Xt))),p):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(O(this,Ce,Ln).call(this))}getBaseTranslation(){return[0,0]}getRect(p,H){return super.getRect(p,H,O(this,Ce,Ln).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){O(this,mt,Gi).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(O(this,qt,Tn).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(p){var it;let H=!1;this.parent&&!p?O(this,mt,Gi).call(this):p&&(O(this,qt,Tn).call(this,p),H=!this.parent&&((it=this.div)==null?void 0:it.classList.contains("selectedEditor"))),super.setParent(p),this.show(this._isVisible),H&&this.select()}rotate(p){var ut,xt,Ot;const{drawLayer:H}=this.parent;let it;e(this,k)?(p=(p-this.rotation+360)%360,it=O(ut=U,Yt,nn).call(ut,e(this,R).box,p)):it=O(xt=U,Yt,nn).call(xt,this,p),H.rotate(e(this,y),p),H.rotate(e(this,A),p),H.updateBox(e(this,y),it),H.updateBox(e(this,A),O(Ot=U,Yt,nn).call(Ot,e(this,nt).box,p))}render(){if(this.div)return this.div;const p=super.render();e(this,w)&&(p.setAttribute("aria-label",e(this,w)),p.setAttribute("role","mark")),e(this,k)?p.classList.add("free"):this.div.addEventListener("keydown",e(this,I));const H=B(this,E,document.createElement("div"));p.append(H),H.setAttribute("aria-hidden","true"),H.className="internal",H.style.clipPath=e(this,le);const[it,ut]=this.parentDimensions;return this.setDims(this.width*it,this.height*ut),(0,r.bindEvents)(this,e(this,E),["pointerover","pointerleave"]),this.enableEditing(),p}pointerover(){this.parent.drawLayer.addClass(e(this,A),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(e(this,A),"hovered")}_moveCaret(p){switch(this.parent.unselect(this),p){case 0:case 2:O(this,ge,ai).call(this,!0);break;case 1:case 3:O(this,ge,ai).call(this,!1);break}}select(){var p,H;super.select(),e(this,A)&&((p=this.parent)==null||p.drawLayer.removeClass(e(this,A),"hovered"),(H=this.parent)==null||H.drawLayer.addClass(e(this,A),"selected"))}unselect(){var p;super.unselect(),e(this,A)&&((p=this.parent)==null||p.drawLayer.removeClass(e(this,A),"selected"),e(this,k)||O(this,ge,ai).call(this,!1))}get _mustFixPosition(){return!e(this,k)}show(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible;super.show(p),this.parent&&(this.parent.drawLayer.show(e(this,y),p),this.parent.drawLayer.show(e(this,A),p))}static startHighlighting(p,H,it){let{target:ut,x:xt,y:Ot}=it;const{x:Wt,y:Pt,width:Jt,height:Zt}=ut.getBoundingClientRect(),ve=De=>{O(this,ue,ga).call(this,p,De)},Te={capture:!0,passive:!1},Se=De=>{De.preventDefault(),De.stopPropagation()},Ee=De=>{ut.removeEventListener("pointermove",ve),window.removeEventListener("blur",Ee),window.removeEventListener("pointerup",Ee),window.removeEventListener("pointerdown",Se,Te),window.removeEventListener("contextmenu",_.noContextMenu),O(this,P,ma).call(this,p,De)};window.addEventListener("blur",Ee),window.addEventListener("pointerup",Ee),window.addEventListener("pointerdown",Se,Te),window.addEventListener("contextmenu",_.noContextMenu),ut.addEventListener("pointermove",ve),this._freeHighlight=new o.FreeOutliner({x:xt,y:Ot},[Wt,Pt,Jt,Zt],p.scale,this._defaultThickness/2,H,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=p.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(p,H,it){var Ee;const ut=super.deserialize(p,H,it),{rect:[xt,Ot,Wt,Pt],color:Jt,quadPoints:Zt}=p;ut.color=s.Util.makeHexColor(...Jt),B(ut,S,p.opacity);const[ve,Te]=ut.pageDimensions;ut.width=(Wt-xt)/ve,ut.height=(Pt-Ot)/Te;const Se=B(ut,jt,[]);for(let De=0;De<Zt.length;De+=8)Se.push({x:(Zt[4]-Wt)/ve,y:(Pt-(1-Zt[De+5]))/Te,width:(Zt[De+2]-Zt[De])/ve,height:(Zt[De+5]-Zt[De+1])/Te});return O(Ee=ut,X,$i).call(Ee),ut}serialize(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty()||p)return null;const H=this.getRect(0,0),it=i.AnnotationEditor._colorManager.convert(this.color);return{annotationType:s.AnnotationEditorType.HIGHLIGHT,color:it,opacity:e(this,S),thickness:e(this,j),quadPoints:O(this,Fe,pa).call(this),outlines:O(this,Le,fa).call(this,H),pageIndex:this.pageIndex,rect:H,rotation:O(this,Ce,Ln).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};$t=new WeakMap,he=new WeakMap,jt=new WeakMap,le=new WeakMap,Xt=new WeakMap,nt=new WeakMap,u=new WeakMap,g=new WeakMap,E=new WeakMap,R=new WeakMap,y=new WeakMap,k=new WeakMap,I=new WeakMap,D=new WeakMap,S=new WeakMap,A=new WeakMap,w=new WeakMap,j=new WeakMap,Z=new WeakMap,X=new WeakSet,$i=function(){const p=new o.Outliner(e(this,jt),.001);B(this,R,p.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=e(this,R).box;const H=new o.Outliner(e(this,jt),.0025,.001,this._uiManager.direction==="ltr");B(this,nt,H.getOutlines());const{lastPoint:it}=e(this,nt).box;B(this,D,[(it[0]-this.x)/this.width,(it[1]-this.y)/this.height])},ct=new WeakSet,Vi=function(p){var ve,Te;let{highlightOutlines:H,highlightId:it,clipPathId:ut}=p;if(B(this,R,H),B(this,nt,H.getNewOutline(e(this,j)/2+1.5,.0025)),it>=0)B(this,y,it),B(this,le,ut),this.parent.drawLayer.finalizeLine(it,H),B(this,A,this.parent.drawLayer.highlightOutline(e(this,nt)));else if(this.parent){const Se=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(e(this,y),H),this.parent.drawLayer.updateBox(e(this,y),O(ve=U,Yt,nn).call(ve,e(this,R).box,(Se-this.rotation+360)%360)),this.parent.drawLayer.updateLine(e(this,A),e(this,nt)),this.parent.drawLayer.updateBox(e(this,A),O(Te=U,Yt,nn).call(Te,e(this,nt).box,Se))}const{x:Ot,y:Wt,width:Pt,height:Jt}=H.box;switch(this.rotation){case 0:this.x=Ot,this.y=Wt,this.width=Pt,this.height=Jt;break;case 90:{const[Se,Ee]=this.parentDimensions;this.x=Wt,this.y=1-Ot,this.width=Pt*Ee/Se,this.height=Jt*Se/Ee;break}case 180:this.x=1-Ot,this.y=1-Wt,this.width=Pt,this.height=Jt;break;case 270:{const[Se,Ee]=this.parentDimensions;this.x=1-Wt,this.y=Ot,this.width=Pt*Ee/Se,this.height=Jt*Se/Ee;break}}const{lastPoint:Zt}=e(this,nt).box;B(this,D,[(Zt[0]-Ot)/Pt,(Zt[1]-Wt)/Jt])},Et=new WeakSet,ha=function(p){const H=ut=>{var xt,Ot;this.color=ut,(xt=this.parent)==null||xt.drawLayer.changeColor(e(this,y),ut),(Ot=e(this,Xt))==null||Ot.updateColor(ut)},it=this.color;this.addCommands({cmd:H.bind(this,p),undo:H.bind(this,it),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(p)},!0)},kt=new WeakSet,ca=function(p){const H=e(this,j),it=ut=>{B(this,j,ut),O(this,et,da).call(this,ut)};this.addCommands({cmd:it.bind(this,p),undo:it.bind(this,H),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:p},!0)},et=new WeakSet,da=function(p){if(!e(this,k))return;O(this,ct,Vi).call(this,{highlightOutlines:e(this,R).getNewOutline(p/2)}),this.fixAndSetPosition();const[H,it]=this.parentDimensions;this.setDims(this.width*H,this.height*it)},mt=new WeakSet,Gi=function(){e(this,y)===null||!this.parent||(this.parent.drawLayer.remove(e(this,y)),B(this,y,null),this.parent.drawLayer.remove(e(this,A)),B(this,A,null))},qt=new WeakSet,Tn=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.parent;e(this,y)===null&&({id:As(this,y)._,clipPathId:As(this,le)._}=p.drawLayer.highlight(e(this,R),this.color,e(this,S)),B(this,A,p.drawLayer.highlightOutline(e(this,nt))),e(this,E)&&(e(this,E).style.clipPath=e(this,le)))},Yt=new WeakSet,nn=function(p,H){let{x:it,y:ut,width:xt,height:Ot}=p;switch(H){case 90:return{x:1-ut-Ot,y:it,width:Ot,height:xt};case 180:return{x:1-it-xt,y:1-ut-Ot,width:xt,height:Ot};case 270:return{x:ut,y:1-it-xt,width:Ot,height:xt}}return{x:it,y:ut,width:xt,height:Ot}},ne=new WeakSet,ua=function(p){U._keyboardManager.exec(this,p)},ge=new WeakSet,ai=function(p){if(!e(this,$t))return;const H=window.getSelection();p?H.setPosition(e(this,$t),e(this,he)):H.setPosition(e(this,u),e(this,g))},Ce=new WeakSet,Ln=function(){return e(this,k)?this.rotation:0},Fe=new WeakSet,pa=function(){if(e(this,k))return null;const[p,H]=this.pageDimensions,it=e(this,jt),ut=new Array(it.length*8);let xt=0;for(const{x:Ot,y:Wt,width:Pt,height:Jt}of it){const Zt=Ot*p,ve=(1-Wt-Jt)*H;ut[xt]=ut[xt+4]=Zt,ut[xt+1]=ut[xt+3]=ve,ut[xt+2]=ut[xt+6]=Zt+Pt*p,ut[xt+5]=ut[xt+7]=ve+Jt*H,xt+=8}return ut},Le=new WeakSet,fa=function(p){return e(this,R).serialize(p,O(this,Ce,Ln).call(this))},ue=new WeakSet,ga=function(p,H){this._freeHighlight.add(H)&&p.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},P=new WeakSet,ma=function(p,H){this._freeHighlight.isEmpty()?p.drawLayer.removeFreeHighlight(this._freeHighlightId):p.createAndAddNewEditor(H,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},x(U,Yt),x(U,ue),x(U,P),ye(U,"_defaultColor",null),ye(U,"_defaultOpacity",1),ye(U,"_defaultThickness",12),ye(U,"_l10nPromise"),ye(U,"_type","highlight"),ye(U,"_editorType",s.AnnotationEditorType.HIGHLIGHT),ye(U,"_freeHighlightId",-1),ye(U,"_freeHighlight",null),ye(U,"_freeHighlightClipId","");let d=U;const Ne=class Ne extends i.AnnotationEditor{constructor(p){super({...p,name:"inkEditor"});x(this,ze);x(this,He);x(this,Ge);x(this,dt);x(this,Vt);x(this,se);x(this,_e);x(this,Re);x(this,Xe);x(this,ps);x(this,zs);x(this,qs);x(this,Qe);x(this,fs);x(this,Ze);x(this,ws);x(this,_s);x(this,dn);x(this,$s);x(this,qn);x(this,pn);x(this,Vs);x(this,Ms);x(this,C,0);x(this,N,0);x(this,V,this.canvasPointermove.bind(this));x(this,ht,this.canvasPointerleave.bind(this));x(this,yt,this.canvasPointerup.bind(this));x(this,wt,this.canvasPointerdown.bind(this));x(this,Ht,null);x(this,Mt,new Path2D);x(this,Ct,!1);x(this,Ft,!1);x(this,Kt,!1);x(this,re,null);x(this,ie,0);x(this,we,0);x(this,de,null);this.color=p.color||null,this.thickness=p.thickness||null,this.opacity=p.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(p,H){i.AnnotationEditor.initialize(p,H)}static updateDefaultParams(p,H){switch(p){case s.AnnotationEditorParamsType.INK_THICKNESS:Ne._defaultThickness=H;break;case s.AnnotationEditorParamsType.INK_COLOR:Ne._defaultColor=H;break;case s.AnnotationEditorParamsType.INK_OPACITY:Ne._defaultOpacity=H/100;break}}updateParams(p,H){switch(p){case s.AnnotationEditorParamsType.INK_THICKNESS:O(this,ze,va).call(this,H);break;case s.AnnotationEditorParamsType.INK_COLOR:O(this,He,ya).call(this,H);break;case s.AnnotationEditorParamsType.INK_OPACITY:O(this,Ge,Aa).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,Ne._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,Ne._defaultColor||i.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ne._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||Ne._defaultColor||i.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ne._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(O(this,Ze,oi).call(this),O(this,ws,li).call(this)),this.isAttachedToDOM||(this.parent.add(this),O(this,_s,rn).call(this)),O(this,Ms,Rn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,Ht)&&(clearTimeout(e(this,Ht)),B(this,Ht,null)),e(this,re).disconnect(),B(this,re,null),super.remove())}setParent(p){!this.parent&&p?this._uiManager.removeShouldRescale(this):this.parent&&p===null&&this._uiManager.addShouldRescale(this),super.setParent(p)}onScaleChanging(){const[p,H]=this.parentDimensions,it=this.width*p,ut=this.height*H;this.setDimensions(it,ut)}enableEditMode(){e(this,Ct)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,wt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,wt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,Ct)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),B(this,Ct,!0),this.div.classList.add("disabled"),O(this,Ms,Rn).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(p){this._focusEventsAllowed&&(super.focusin(p),this.enableEditMode())}canvasPointerdown(p){p.button!==0||!this.isInEditMode()||e(this,Ct)||(this.setInForeground(),p.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),O(this,se,wa).call(this,p.offsetX,p.offsetY))}canvasPointermove(p){p.preventDefault(),O(this,_e,Xi).call(this,p.offsetX,p.offsetY)}canvasPointerup(p){p.preventDefault(),O(this,fs,Yi).call(this,p)}canvasPointerleave(p){O(this,fs,Yi).call(this,p)}get isResizable(){return!this.isEmpty()&&e(this,Ct)}render(){if(this.div)return this.div;let p,H;this.width&&(p=this.x,H=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[it,ut,xt,Ot]=O(this,dt,ba).call(this);if(this.setAt(it,ut,0,0),this.setDims(xt,Ot),O(this,Ze,oi).call(this),this.width){const[Wt,Pt]=this.parentDimensions;this.setAspectRatio(this.width*Wt,this.height*Pt),this.setAt(p*Wt,H*Pt,this.width*Wt,this.height*Pt),B(this,Kt,!0),O(this,_s,rn).call(this),this.setDims(this.width*Wt,this.height*Pt),O(this,Qe,Hs).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return O(this,ws,li).call(this),this.div}setDimensions(p,H){const it=Math.round(p),ut=Math.round(H);if(e(this,ie)===it&&e(this,we)===ut)return;B(this,ie,it),B(this,we,ut),this.canvas.style.visibility="hidden";const[xt,Ot]=this.parentDimensions;this.width=p/xt,this.height=H/Ot,this.fixAndSetPosition(),e(this,Ct)&&O(this,dn,Ki).call(this,p,H),O(this,_s,rn).call(this),O(this,Qe,Hs).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(p,H,it){var De,Pe,qe;if(p instanceof a.InkAnnotationElement)return null;const ut=super.deserialize(p,H,it);ut.thickness=p.thickness,ut.color=s.Util.makeHexColor(...p.color),ut.opacity=p.opacity;const[xt,Ot]=ut.pageDimensions,Wt=ut.width*xt,Pt=ut.height*Ot,Jt=ut.parentScale,Zt=p.thickness/2;B(ut,Ct,!0),B(ut,ie,Math.round(Wt)),B(ut,we,Math.round(Pt));const{paths:ve,rect:Te,rotation:Se}=p;for(let{bezier:Be}of ve){Be=O(De=Ne,zn,La).call(De,Be,Te,Se);const us=[];ut.paths.push(us);let wn=Jt*(Be[0]-Zt),_n=Jt*(Be[1]-Zt);for(let ls=2,ki=Be.length;ls<ki;ls+=6){const Mi=Jt*(Be[ls]-Zt),Yn=Jt*(Be[ls+1]-Zt),Kn=Jt*(Be[ls+2]-Zt),Jn=Jt*(Be[ls+3]-Zt),En=Jt*(Be[ls+4]-Zt),Jr=Jt*(Be[ls+5]-Zt);us.push([[wn,_n],[Mi,Yn],[Kn,Jn],[En,Jr]]),wn=En,_n=Jr}const Xn=O(this,Bn,Ta).call(this,us);ut.bezierPath2D.push(Xn)}const Ee=O(Pe=ut,pn,Qi).call(Pe);return B(ut,N,Math.max(i.AnnotationEditor.MIN_SIZE,Ee[2]-Ee[0])),B(ut,C,Math.max(i.AnnotationEditor.MIN_SIZE,Ee[3]-Ee[1])),O(qe=ut,dn,Ki).call(qe,Wt,Pt),ut}serialize(){if(this.isEmpty())return null;const p=this.getRect(0,0),H=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:H,thickness:this.thickness,opacity:this.opacity,paths:O(this,qn,Ra).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,p),pageIndex:this.pageIndex,rect:p,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};C=new WeakMap,N=new WeakMap,V=new WeakMap,ht=new WeakMap,yt=new WeakMap,wt=new WeakMap,Ht=new WeakMap,Mt=new WeakMap,Ct=new WeakMap,Ft=new WeakMap,Kt=new WeakMap,re=new WeakMap,ie=new WeakMap,we=new WeakMap,de=new WeakMap,ze=new WeakSet,va=function(p){const H=ut=>{this.thickness=ut,O(this,Ms,Rn).call(this)},it=this.thickness;this.addCommands({cmd:H.bind(this,p),undo:H.bind(this,it),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},He=new WeakSet,ya=function(p){const H=ut=>{this.color=ut,O(this,Qe,Hs).call(this)},it=this.color;this.addCommands({cmd:H.bind(this,p),undo:H.bind(this,it),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ge=new WeakSet,Aa=function(p){const H=ut=>{this.opacity=ut,O(this,Qe,Hs).call(this)};p/=100;const it=this.opacity;this.addCommands({cmd:H.bind(this,p),undo:H.bind(this,it),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},dt=new WeakSet,ba=function(){const{parentRotation:p,parentDimensions:[H,it]}=this;switch(p){case 90:return[0,it,it,H];case 180:return[H,it,H,it];case 270:return[H,0,it,H];default:return[0,0,H,it]}},Vt=new WeakSet,Wi=function(){const{ctx:p,color:H,opacity:it,thickness:ut,parentScale:xt,scaleFactor:Ot}=this;p.lineWidth=ut*xt/Ot,p.lineCap="round",p.lineJoin="round",p.miterLimit=10,p.strokeStyle=`${H}${(0,r.opacityToHex)(it)}`},se=new WeakSet,wa=function(p,H){this.canvas.addEventListener("contextmenu",_.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,ht)),this.canvas.addEventListener("pointermove",e(this,V)),this.canvas.addEventListener("pointerup",e(this,yt)),this.canvas.removeEventListener("pointerdown",e(this,wt)),this.isEditing=!0,e(this,Kt)||(B(this,Kt,!0),O(this,_s,rn).call(this),this.thickness||(this.thickness=Ne._defaultThickness),this.color||(this.color=Ne._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ne._defaultOpacity)),this.currentPath.push([p,H]),B(this,Ft,!1),O(this,Vt,Wi).call(this),B(this,de,()=>{O(this,ps,xa).call(this),e(this,de)&&window.requestAnimationFrame(e(this,de))}),window.requestAnimationFrame(e(this,de))},_e=new WeakSet,Xi=function(p,H){const[it,ut]=this.currentPath.at(-1);if(this.currentPath.length>1&&p===it&&H===ut)return;const xt=this.currentPath;let Ot=e(this,Mt);if(xt.push([p,H]),B(this,Ft,!0),xt.length<=2){Ot.moveTo(...xt[0]),Ot.lineTo(p,H);return}xt.length===3&&(B(this,Mt,Ot=new Path2D),Ot.moveTo(...xt[0])),O(this,zs,Sa).call(this,Ot,...xt.at(-3),...xt.at(-2),p,H)},Re=new WeakSet,_a=function(){if(this.currentPath.length===0)return;const p=this.currentPath.at(-1);e(this,Mt).lineTo(...p)},Xe=new WeakSet,Ea=function(p,H){B(this,de,null),p=Math.min(Math.max(p,0),this.canvas.width),H=Math.min(Math.max(H,0),this.canvas.height),O(this,_e,Xi).call(this,p,H),O(this,Re,_a).call(this);let it;if(this.currentPath.length!==1)it=O(this,qs,Ca).call(this);else{const Pt=[p,H];it=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const ut=e(this,Mt),xt=this.currentPath;this.currentPath=[],B(this,Mt,new Path2D);const Ot=()=>{this.allRawPaths.push(xt),this.paths.push(it),this.bezierPath2D.push(ut),this._uiManager.rebuild(this)},Wt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(O(this,Ze,oi).call(this),O(this,ws,li).call(this)),O(this,Ms,Rn).call(this))};this.addCommands({cmd:Ot,undo:Wt,mustExec:!0})},ps=new WeakSet,xa=function(){if(!e(this,Ft))return;B(this,Ft,!1);const p=Math.ceil(this.thickness*this.parentScale),H=this.currentPath.slice(-3),it=H.map(Ot=>Ot[0]),ut=H.map(Ot=>Ot[1]);Math.min(...it)-p,Math.max(...it)+p,Math.min(...ut)-p,Math.max(...ut)+p;const{ctx:xt}=this;xt.save(),xt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ot of this.bezierPath2D)xt.stroke(Ot);xt.stroke(e(this,Mt)),xt.restore()},zs=new WeakSet,Sa=function(p,H,it,ut,xt,Ot,Wt){const Pt=(H+ut)/2,Jt=(it+xt)/2,Zt=(ut+Ot)/2,ve=(xt+Wt)/2;p.bezierCurveTo(Pt+2*(ut-Pt)/3,Jt+2*(xt-Jt)/3,Zt+2*(ut-Zt)/3,ve+2*(xt-ve)/3,Zt,ve)},qs=new WeakSet,Ca=function(){const p=this.currentPath;if(p.length<=2)return[[p[0],p[0],p.at(-1),p.at(-1)]];const H=[];let it,[ut,xt]=p[0];for(it=1;it<p.length-2;it++){const[Te,Se]=p[it],[Ee,De]=p[it+1],Pe=(Te+Ee)/2,qe=(Se+De)/2,Be=[ut+2*(Te-ut)/3,xt+2*(Se-xt)/3],us=[Pe+2*(Te-Pe)/3,qe+2*(Se-qe)/3];H.push([[ut,xt],Be,us,[Pe,qe]]),[ut,xt]=[Pe,qe]}const[Ot,Wt]=p[it],[Pt,Jt]=p[it+1],Zt=[ut+2*(Ot-ut)/3,xt+2*(Wt-xt)/3],ve=[Pt+2*(Ot-Pt)/3,Jt+2*(Wt-Jt)/3];return H.push([[ut,xt],Zt,ve,[Pt,Jt]]),H},Qe=new WeakSet,Hs=function(){if(this.isEmpty()){O(this,$s,hi).call(this);return}O(this,Vt,Wi).call(this);const{canvas:p,ctx:H}=this;H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,p.width,p.height),O(this,$s,hi).call(this);for(const it of this.bezierPath2D)H.stroke(it)},fs=new WeakSet,Yi=function(p){this.canvas.removeEventListener("pointerleave",e(this,ht)),this.canvas.removeEventListener("pointermove",e(this,V)),this.canvas.removeEventListener("pointerup",e(this,yt)),this.canvas.addEventListener("pointerdown",e(this,wt)),e(this,Ht)&&clearTimeout(e(this,Ht)),B(this,Ht,setTimeout(()=>{B(this,Ht,null),this.canvas.removeEventListener("contextmenu",_.noContextMenu)},10)),O(this,Xe,Ea).call(this,p.offsetX,p.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ze=new WeakSet,oi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ws=new WeakSet,li=function(){B(this,re,new ResizeObserver(p=>{const H=p[0].contentRect;H.width&&H.height&&this.setDimensions(H.width,H.height)})),e(this,re).observe(this.div)},_s=new WeakSet,rn=function(){if(!e(this,Kt))return;const[p,H]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*p),this.canvas.height=Math.ceil(this.height*H),O(this,$s,hi).call(this)},dn=new WeakSet,Ki=function(p,H){const it=O(this,Vs,ci).call(this),ut=(p-it)/e(this,N),xt=(H-it)/e(this,C);this.scaleFactor=Math.min(ut,xt)},$s=new WeakSet,hi=function(){const p=O(this,Vs,ci).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+p,this.translationY*this.scaleFactor+p)},Bn=new WeakSet,Ta=function(p){const H=new Path2D;for(let it=0,ut=p.length;it<ut;it++){const[xt,Ot,Wt,Pt]=p[it];it===0&&H.moveTo(...xt),H.bezierCurveTo(Ot[0],Ot[1],Wt[0],Wt[1],Pt[0],Pt[1])}return H},un=new WeakSet,Ji=function(p,H,it){const[ut,xt,Ot,Wt]=H;switch(it){case 0:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2)p[Pt]+=ut,p[Pt+1]=Wt-p[Pt+1];break;case 90:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2){const Zt=p[Pt];p[Pt]=p[Pt+1]+ut,p[Pt+1]=Zt+xt}break;case 180:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2)p[Pt]=Ot-p[Pt],p[Pt+1]+=xt;break;case 270:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2){const Zt=p[Pt];p[Pt]=Ot-p[Pt+1],p[Pt+1]=Wt-Zt}break;default:throw new Error("Invalid rotation")}return p},zn=new WeakSet,La=function(p,H,it){const[ut,xt,Ot,Wt]=H;switch(it){case 0:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2)p[Pt]-=ut,p[Pt+1]=Wt-p[Pt+1];break;case 90:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2){const Zt=p[Pt];p[Pt]=p[Pt+1]-xt,p[Pt+1]=Zt-ut}break;case 180:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2)p[Pt]=Ot-p[Pt],p[Pt+1]-=xt;break;case 270:for(let Pt=0,Jt=p.length;Pt<Jt;Pt+=2){const Zt=p[Pt];p[Pt]=Wt-p[Pt+1],p[Pt+1]=Ot-Zt}break;default:throw new Error("Invalid rotation")}return p},qn=new WeakSet,Ra=function(p,H,it,ut){var Jt,Zt;const xt=[],Ot=this.thickness/2,Wt=p*H+Ot,Pt=p*it+Ot;for(const ve of this.paths){const Te=[],Se=[];for(let Ee=0,De=ve.length;Ee<De;Ee++){const[Pe,qe,Be,us]=ve[Ee];if(Pe[0]===us[0]&&Pe[1]===us[1]&&De===1){const Jn=p*Pe[0]+Wt,En=p*Pe[1]+Pt;Te.push(Jn,En),Se.push(Jn,En);break}const wn=p*Pe[0]+Wt,_n=p*Pe[1]+Pt,Xn=p*qe[0]+Wt,ls=p*qe[1]+Pt,ki=p*Be[0]+Wt,Mi=p*Be[1]+Pt,Yn=p*us[0]+Wt,Kn=p*us[1]+Pt;Ee===0&&(Te.push(wn,_n),Se.push(wn,_n)),Te.push(Xn,ls,ki,Mi,Yn,Kn),Se.push(Xn,ls),Ee===De-1&&Se.push(Yn,Kn)}xt.push({bezier:O(Jt=Ne,un,Ji).call(Jt,Te,ut,this.rotation),points:O(Zt=Ne,un,Ji).call(Zt,Se,ut,this.rotation)})}return xt},pn=new WeakSet,Qi=function(){let p=1/0,H=-1/0,it=1/0,ut=-1/0;for(const xt of this.paths)for(const[Ot,Wt,Pt,Jt]of xt){const Zt=s.Util.bezierBoundingBox(...Ot,...Wt,...Pt,...Jt);p=Math.min(p,Zt[0]),it=Math.min(it,Zt[1]),H=Math.max(H,Zt[2]),ut=Math.max(ut,Zt[3])}return[p,it,H,ut]},Vs=new WeakSet,ci=function(){return e(this,Ct)?Math.ceil(this.thickness*this.parentScale):0},Ms=new WeakSet,Rn=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!e(this,Ct)){O(this,Qe,Hs).call(this);return}const H=O(this,pn,Qi).call(this),it=O(this,Vs,ci).call(this);B(this,N,Math.max(i.AnnotationEditor.MIN_SIZE,H[2]-H[0])),B(this,C,Math.max(i.AnnotationEditor.MIN_SIZE,H[3]-H[1]));const ut=Math.ceil(it+e(this,N)*this.scaleFactor),xt=Math.ceil(it+e(this,C)*this.scaleFactor),[Ot,Wt]=this.parentDimensions;this.width=ut/Ot,this.height=xt/Wt,this.setAspectRatio(ut,xt);const Pt=this.translationX,Jt=this.translationY;this.translationX=-H[0],this.translationY=-H[1],O(this,_s,rn).call(this),O(this,Qe,Hs).call(this),B(this,ie,ut),B(this,we,xt),this.setDims(ut,xt);const Zt=p?it/this.scaleFactor/2:0;this.translate(Pt-this.translationX-Zt,Jt-this.translationY-Zt)},x(Ne,Bn),x(Ne,un),x(Ne,zn),ye(Ne,"_defaultColor",null),ye(Ne,"_defaultOpacity",1),ye(Ne,"_defaultThickness",1),ye(Ne,"_type","ink"),ye(Ne,"_editorType",s.AnnotationEditorType.INK);let f=Ne;t(4520),t(4979);const vn=class vn extends i.AnnotationEditor{constructor(p){super({...p,name:"stampEditor"});x(this,Ps);x(this,Ds);x(this,Ws);x(this,gn);x(this,$n);x(this,Vn);x(this,mn);x(this,Xs);x(this,Gn);x(this,Ye,null);x(this,Ke,null);x(this,Es,null);x(this,gs,null);x(this,xs,null);x(this,Gs,"");x(this,hs,null);x(this,Is,null);x(this,cs,null);x(this,as,!1);x(this,fn,!1);B(this,gs,p.bitmapUrl),B(this,xs,p.bitmapFile)}static initialize(p,H){i.AnnotationEditor.initialize(p,H)}static get supportedTypes(){const p=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",p.map(H=>`image/${H}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(p){return this.supportedTypes.includes(p)}static paste(p,H){H.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:p.getAsFile()})}remove(){var p,H;e(this,Ke)&&(B(this,Ye,null),this._uiManager.imageManager.deleteId(e(this,Ke)),(p=e(this,hs))==null||p.remove(),B(this,hs,null),(H=e(this,Is))==null||H.disconnect(),B(this,Is,null),e(this,cs)&&(clearTimeout(e(this,cs)),B(this,cs,null))),super.remove()}rebuild(){if(!this.parent){e(this,Ke)&&O(this,Ws,di).call(this);return}super.rebuild(),this.div!==null&&(e(this,Ke)&&e(this,hs)===null&&O(this,Ws,di).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,Es)||e(this,Ye)||e(this,gs)||e(this,xs)||e(this,Ke))}get isResizable(){return!0}render(){if(this.div)return this.div;let p,H;if(this.width&&(p=this.x,H=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),e(this,Ye)?O(this,gn,Zi).call(this):O(this,Ws,di).call(this),this.width){const[it,ut]=this.parentDimensions;this.setAt(p*it,H*ut,this.width*it,this.height*ut)}return this.div}getImageForAltText(){return e(this,hs)}static deserialize(p,H,it){if(p instanceof a.StampAnnotationElement)return null;const ut=super.deserialize(p,H,it),{rect:xt,bitmapUrl:Ot,bitmapId:Wt,isSvg:Pt,accessibilityData:Jt}=p;Wt&&it.imageManager.isValidId(Wt)?B(ut,Ke,Wt):B(ut,gs,Ot),B(ut,as,Pt);const[Zt,ve]=ut.pageDimensions;return ut.width=(xt[2]-xt[0])/Zt,ut.height=(xt[3]-xt[1])/ve,Jt&&(ut.altTextData=Jt),ut}serialize(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.isEmpty())return null;const it={annotationType:s.AnnotationEditorType.STAMP,bitmapId:e(this,Ke),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,as),structTreeParentId:this._structTreeParentId};if(p)return it.bitmapUrl=O(this,Xs,ui).call(this,!0),it.accessibilityData=this.altTextData,it;const{decorative:ut,altText:xt}=this.altTextData;if(!ut&&xt&&(it.accessibilityData={type:"Figure",alt:xt}),H===null)return it;H.stamps||(H.stamps=new Map);const Ot=e(this,as)?(it.rect[2]-it.rect[0])*(it.rect[3]-it.rect[1]):null;if(!H.stamps.has(e(this,Ke)))H.stamps.set(e(this,Ke),{area:Ot,serialized:it}),it.bitmap=O(this,Xs,ui).call(this,!1);else if(e(this,as)){const Wt=H.stamps.get(e(this,Ke));Ot>Wt.area&&(Wt.area=Ot,Wt.serialized.bitmap.close(),Wt.serialized.bitmap=O(this,Xs,ui).call(this,!1))}return it}};Ye=new WeakMap,Ke=new WeakMap,Es=new WeakMap,gs=new WeakMap,xs=new WeakMap,Gs=new WeakMap,hs=new WeakMap,Is=new WeakMap,cs=new WeakMap,as=new WeakMap,fn=new WeakMap,Ps=new WeakSet,kn=function(p){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!p){this.remove();return}B(this,Ye,p.bitmap),H||(B(this,Ke,p.id),B(this,as,p.isSvg)),p.file&&B(this,Gs,p.file.name),O(this,gn,Zi).call(this)},Ds=new WeakSet,Mn=function(){B(this,Es,null),this._uiManager.enableWaiting(!1),e(this,hs)&&this.div.focus()},Ws=new WeakSet,di=function(){if(e(this,Ke)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,Ke)).then(H=>O(this,Ps,kn).call(this,H,!0)).finally(()=>O(this,Ds,Mn).call(this));return}if(e(this,gs)){const H=e(this,gs);B(this,gs,null),this._uiManager.enableWaiting(!0),B(this,Es,this._uiManager.imageManager.getFromUrl(H).then(it=>O(this,Ps,kn).call(this,it)).finally(()=>O(this,Ds,Mn).call(this)));return}if(e(this,xs)){const H=e(this,xs);B(this,xs,null),this._uiManager.enableWaiting(!0),B(this,Es,this._uiManager.imageManager.getFromFile(H).then(it=>O(this,Ps,kn).call(this,it)).finally(()=>O(this,Ds,Mn).call(this)));return}const p=document.createElement("input");p.type="file",p.accept=vn.supportedTypesStr,B(this,Es,new Promise(H=>{p.addEventListener("change",async()=>{if(!p.files||p.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const it=await this._uiManager.imageManager.getFromFile(p.files[0]);O(this,Ps,kn).call(this,it)}H()}),p.addEventListener("cancel",()=>{this.remove(),H()})}).finally(()=>O(this,Ds,Mn).call(this))),p.click()},gn=new WeakSet,Zi=function(){const{div:p}=this;let{width:H,height:it}=e(this,Ye);const[ut,xt]=this.pageDimensions,Ot=.75;if(this.width)H=this.width*ut,it=this.height*xt;else if(H>Ot*ut||it>Ot*xt){const Zt=Math.min(Ot*ut/H,Ot*xt/it);H*=Zt,it*=Zt}const[Wt,Pt]=this.parentDimensions;this.setDims(H*Wt/ut,it*Pt/xt),this._uiManager.enableWaiting(!1);const Jt=B(this,hs,document.createElement("canvas"));p.append(Jt),p.hidden=!1,O(this,mn,tr).call(this,H,it),O(this,Gn,Ia).call(this),e(this,fn)||(this.parent.addUndoableEditor(this),B(this,fn,!0)),this._reportTelemetry({action:"inserted_image"}),e(this,Gs)&&Jt.setAttribute("aria-label",e(this,Gs))},$n=new WeakSet,ka=function(p,H){var Ot;const[it,ut]=this.parentDimensions;this.width=p/it,this.height=H/ut,this.setDims(p,H),(Ot=this._initialOptions)!=null&&Ot.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,cs)!==null&&clearTimeout(e(this,cs)),B(this,cs,setTimeout(()=>{B(this,cs,null),O(this,mn,tr).call(this,p,H)},200))},Vn=new WeakSet,Ma=function(p,H){const{width:it,height:ut}=e(this,Ye);let xt=it,Ot=ut,Wt=e(this,Ye);for(;xt>2*p||Ot>2*H;){const Pt=xt,Jt=Ot;xt>2*p&&(xt=xt>=16384?Math.floor(xt/2)-1:Math.ceil(xt/2)),Ot>2*H&&(Ot=Ot>=16384?Math.floor(Ot/2)-1:Math.ceil(Ot/2));const Zt=new OffscreenCanvas(xt,Ot);Zt.getContext("2d").drawImage(Wt,0,0,Pt,Jt,0,0,xt,Ot),Wt=Zt.transferToImageBitmap()}return Wt},mn=new WeakSet,tr=function(p,H){p=Math.ceil(p),H=Math.ceil(H);const it=e(this,hs);if(!it||it.width===p&&it.height===H)return;it.width=p,it.height=H;const ut=e(this,as)?e(this,Ye):O(this,Vn,Ma).call(this,p,H);if(this._uiManager.hasMLManager&&!this.hasAltText()){const Ot=new OffscreenCanvas(p,H);Ot.getContext("2d").drawImage(ut,0,0,ut.width,ut.height,0,0,p,H),Ot.convertToBlob().then(Wt=>{const Pt=new FileReader;Pt.onload=()=>{const Jt=Pt.result;this._uiManager.mlGuess({service:"image-to-text",request:{imageData:Jt}}).then(Zt=>{const ve=(Zt==null?void 0:Zt.output)||"";this.parent&&ve&&!this.hasAltText()&&(this.altTextData={altText:ve,decorative:!1})})},Pt.readAsDataURL(Wt)})}const xt=it.getContext("2d");xt.filter=this._uiManager.hcmFilter,xt.drawImage(ut,0,0,ut.width,ut.height,0,0,p,H)},Xs=new WeakSet,ui=function(p){if(p){if(e(this,as)){const it=this._uiManager.imageManager.getSvgUrl(e(this,Ke));if(it)return it}const H=document.createElement("canvas");return{width:H.width,height:H.height}=e(this,Ye),H.getContext("2d").drawImage(e(this,Ye),0,0),H.toDataURL()}if(e(this,as)){const[H,it]=this.pageDimensions,ut=Math.round(this.width*H*_.PixelsPerInch.PDF_TO_CSS_UNITS),xt=Math.round(this.height*it*_.PixelsPerInch.PDF_TO_CSS_UNITS),Ot=new OffscreenCanvas(ut,xt);return Ot.getContext("2d").drawImage(e(this,Ye),0,0,e(this,Ye).width,e(this,Ye).height,0,0,ut,xt),Ot.transferToImageBitmap()}return structuredClone(e(this,Ye))},Gn=new WeakSet,Ia=function(){B(this,Is,new ResizeObserver(p=>{const H=p[0].contentRect;H.width&&H.height&&O(this,$n,ka).call(this,H.width,H.height)})),e(this,Is).observe(this.div)},ye(vn,"_type","stamp"),ye(vn,"_editorType",s.AnnotationEditorType.STAMP);let v=vn;const os=class os{constructor(_t){x(this,Wn);x(this,yn);x(this,An);x(this,bn);x(this,Qs);x(this,Fs,void 0);x(this,Ys,!1);x(this,ds,null);x(this,Ns,null);x(this,ms,null);x(this,vs,null);x(this,ys,null);x(this,ns,new Map);x(this,Ss,!1);x(this,Ks,!1);x(this,Js,!1);x(this,ts,null);x(this,pe,void 0);let{uiManager:p,pageIndex:H,div:it,accessibilityManager:ut,annotationLayer:xt,drawLayer:Ot,textLayer:Wt,viewport:Pt,l10n:Jt}=_t;const Zt=[...e(os,Cs).values()];if(!os._initialized){os._initialized=!0;for(const ve of Zt)ve.initialize(Jt,p)}p.registerEditorTypes(Zt),B(this,pe,p),this.pageIndex=H,this.div=it,B(this,Fs,ut),B(this,ds,xt),this.viewport=Pt,B(this,ts,Wt),this.drawLayer=Ot,e(this,pe).addLayer(this)}get isEmpty(){return e(this,ns).size===0}get isInvisible(){return this.isEmpty&&e(this,pe).getMode()===s.AnnotationEditorType.NONE}updateToolbar(_t){e(this,pe).updateToolbar(_t)}updateMode(){let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e(this,pe).getMode();switch(O(this,Qs,pi).call(this),_t){case s.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case s.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case s.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:p}=this.div;for(const H of e(os,Cs).values())p.toggle(`${H._type}Editing`,_t===H._editorType);this.div.hidden=!1}hasTextLayer(_t){var p;return _t===((p=e(this,ts))==null?void 0:p.div)}addInkEditorIfNeeded(_t){if(e(this,pe).getMode()===s.AnnotationEditorType.INK){if(!_t){for(const p of e(this,ns).values())if(p.isEmpty()){p.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(_t){e(this,pe).setEditingState(_t)}addCommands(_t){e(this,pe).addCommands(_t)}togglePointerEvents(){let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.div.classList.toggle("disabled",!_t)}toggleAnnotationLayerPointerEvents(){var p;let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;(p=e(this,ds))==null||p.div.classList.toggle("disabled",!_t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const _t=new Set;for(const H of e(this,ns).values())H.enableEditing(),H.annotationElementId&&_t.add(H.annotationElementId);if(!e(this,ds))return;const p=e(this,ds).getEditableAnnotations();for(const H of p){if(H.hide(),e(this,pe).isDeletedAnnotationElement(H.data.id)||_t.has(H.data.id))continue;const it=this.deserialize(H);it&&(this.addOrRebuild(it),it.enableEditing())}}disable(){var H;B(this,Js,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const _t=new Set;for(const it of e(this,ns).values()){if(it.disableEditing(),!it.annotationElementId||it.serialize()!==null){_t.add(it.annotationElementId);continue}(H=this.getEditableAnnotation(it.annotationElementId))==null||H.show(),it.remove()}if(e(this,ds)){const it=e(this,ds).getEditableAnnotations();for(const ut of it){const{id:xt}=ut.data;_t.has(xt)||e(this,pe).isDeletedAnnotationElement(xt)||ut.show()}}O(this,Qs,pi).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:p}=this.div;for(const it of e(os,Cs).values())p.remove(`${it._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),B(this,Js,!1)}getEditableAnnotation(_t){var p;return((p=e(this,ds))==null?void 0:p.getEditableAnnotation(_t))||null}setActiveEditor(_t){e(this,pe).getActive()!==_t&&e(this,pe).setActiveEditor(_t)}enableTextSelection(){var _t;this.div.tabIndex=-1,(_t=e(this,ts))!=null&&_t.div&&!e(this,vs)&&(B(this,vs,O(this,Wn,Pa).bind(this)),e(this,ts).div.addEventListener("pointerdown",e(this,vs)),e(this,ts).div.classList.add("highlighting"))}disableTextSelection(){var _t;this.div.tabIndex=0,(_t=e(this,ts))!=null&&_t.div&&e(this,vs)&&(e(this,ts).div.removeEventListener("pointerdown",e(this,vs)),B(this,vs,null),e(this,ts).div.classList.remove("highlighting"))}enableClick(){e(this,ms)||(B(this,ms,this.pointerdown.bind(this)),B(this,Ns,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",e(this,ms)),this.div.addEventListener("pointerup",e(this,Ns)))}disableClick(){e(this,ms)&&(this.div.removeEventListener("pointerdown",e(this,ms)),this.div.removeEventListener("pointerup",e(this,Ns)),B(this,ms,null),B(this,Ns,null))}attach(_t){e(this,ns).set(_t.id,_t);const{annotationElementId:p}=_t;p&&e(this,pe).isDeletedAnnotationElement(p)&&e(this,pe).removeDeletedAnnotationElement(_t)}detach(_t){var p;e(this,ns).delete(_t.id),(p=e(this,Fs))==null||p.removePointerInTextLayer(_t.contentDiv),!e(this,Js)&&_t.annotationElementId&&e(this,pe).addDeletedAnnotationElement(_t)}remove(_t){this.detach(_t),e(this,pe).removeEditor(_t),_t.div.remove(),_t.isAttachedToDOM=!1,e(this,Ks)||this.addInkEditorIfNeeded(!1)}changeParent(_t){var p;_t.parent!==this&&(_t.annotationElementId&&(e(this,pe).addDeletedAnnotationElement(_t.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(_t),_t.annotationElementId=null),this.attach(_t),(p=_t.parent)==null||p.detach(_t),_t.setParent(this),_t.div&&_t.isAttachedToDOM&&(_t.div.remove(),this.div.append(_t.div)))}add(_t){if(!(_t.parent===this&&_t.isAttachedToDOM)){if(this.changeParent(_t),e(this,pe).addEditor(_t),this.attach(_t),!_t.isAttachedToDOM){const p=_t.render();this.div.append(p),_t.isAttachedToDOM=!0}_t.fixAndSetPosition(),_t.onceAdded(),e(this,pe).addToAnnotationStorage(_t),_t._reportTelemetry(_t.telemetryInitialData)}}moveEditorInDOM(_t){var H;if(!_t.isAttachedToDOM)return;const{activeElement:p}=document;_t.div.contains(p)&&!e(this,ys)&&(_t._focusEventsAllowed=!1,B(this,ys,setTimeout(()=>{B(this,ys,null),_t.div.contains(document.activeElement)?_t._focusEventsAllowed=!0:(_t.div.addEventListener("focusin",()=>{_t._focusEventsAllowed=!0},{once:!0}),p.focus())},0))),_t._structTreeParentId=(H=e(this,Fs))==null?void 0:H.moveElementInDOM(this.div,_t.div,_t.contentDiv,!0)}addOrRebuild(_t){_t.needsToBeRebuilt()?(_t.parent||(_t.parent=this),_t.rebuild(),_t.show()):this.add(_t)}addUndoableEditor(_t){const p=()=>_t._uiManager.rebuild(_t),H=()=>{_t.remove()};this.addCommands({cmd:p,undo:H,mustExec:!1})}getNextId(){return e(this,pe).getId()}canCreateNewEmptyEditor(){var _t;return(_t=e(this,yn,er))==null?void 0:_t.canCreateNewEmptyEditor()}pasteEditor(_t,p){e(this,pe).updateToolbar(_t),e(this,pe).updateMode(_t);const{offsetX:H,offsetY:it}=O(this,bn,nr).call(this),ut=this.getNextId(),xt=O(this,An,sr).call(this,{parent:this,id:ut,x:H,y:it,uiManager:e(this,pe),isCentered:!0,...p});xt&&this.add(xt)}deserialize(_t){var p;return((p=e(os,Cs).get(_t.annotationType??_t.annotationEditorType))==null?void 0:p.deserialize(_t,this,e(this,pe)))||null}createAndAddNewEditor(_t,p){let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const it=this.getNextId(),ut=O(this,An,sr).call(this,{parent:this,id:it,x:_t.offsetX,y:_t.offsetY,uiManager:e(this,pe),isCentered:p,...H});return ut&&this.add(ut),ut}addNewEditor(){this.createAndAddNewEditor(O(this,bn,nr).call(this),!0)}setSelected(_t){e(this,pe).setSelected(_t)}toggleSelected(_t){e(this,pe).toggleSelected(_t)}isSelected(_t){return e(this,pe).isSelected(_t)}unselect(_t){e(this,pe).unselect(_t)}pointerup(_t){const{isMac:p}=s.FeatureTest.platform;if(!(_t.button!==0||_t.ctrlKey&&p)&&_t.target===this.div&&e(this,Ss)){if(B(this,Ss,!1),!e(this,Ys)){B(this,Ys,!0);return}if(e(this,pe).getMode()===s.AnnotationEditorType.STAMP){e(this,pe).unselectAll();return}this.createAndAddNewEditor(_t,!1)}}pointerdown(_t){if(e(this,pe).getMode()===s.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),e(this,Ss)){B(this,Ss,!1);return}const{isMac:p}=s.FeatureTest.platform;if(_t.button!==0||_t.ctrlKey&&p||_t.target!==this.div)return;B(this,Ss,!0);const H=e(this,pe).getActive();B(this,Ys,!H||H.isEmpty())}findNewParent(_t,p,H){const it=e(this,pe).findParent(p,H);return it===null||it===this?!1:(it.changeParent(_t),!0)}destroy(){var _t,p;((_t=e(this,pe).getActive())==null?void 0:_t.parent)===this&&(e(this,pe).commitOrRemove(),e(this,pe).setActiveEditor(null)),e(this,ys)&&(clearTimeout(e(this,ys)),B(this,ys,null));for(const H of e(this,ns).values())(p=e(this,Fs))==null||p.removePointerInTextLayer(H.contentDiv),H.setParent(null),H.isAttachedToDOM=!1,H.div.remove();this.div=null,e(this,ns).clear(),e(this,pe).removeLayer(this)}render(_t){let{viewport:p}=_t;this.viewport=p,(0,_.setLayerDimensions)(this.div,p);for(const H of e(this,pe).getEditors(this.pageIndex))this.add(H),H.rebuild();this.updateMode()}update(_t){let{viewport:p}=_t;e(this,pe).commitOrRemove(),O(this,Qs,pi).call(this);const H=this.viewport.rotation,it=p.rotation;if(this.viewport=p,(0,_.setLayerDimensions)(this.div,{rotation:it}),H!==it)for(const ut of e(this,ns).values())ut.rotate(it);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:_t,pageHeight:p}=this.viewport.rawDims;return[_t,p]}get scale(){return e(this,pe).viewParameters.realScale}};Fs=new WeakMap,Ys=new WeakMap,ds=new WeakMap,Ns=new WeakMap,ms=new WeakMap,vs=new WeakMap,ys=new WeakMap,ns=new WeakMap,Ss=new WeakMap,Ks=new WeakMap,Js=new WeakMap,ts=new WeakMap,pe=new WeakMap,Cs=new WeakMap,Wn=new WeakSet,Pa=function(_t){if(e(this,pe).unselectAll(),_t.target===e(this,ts).div){const{isMac:p}=s.FeatureTest.platform;if(_t.button!==0||_t.ctrlKey&&p)return;e(this,pe).showAllEditors("highlight",!0,!0),e(this,ts).div.classList.add("free"),d.startHighlighting(this,e(this,pe).direction==="ltr",_t),e(this,ts).div.addEventListener("pointerup",()=>{e(this,ts).div.classList.remove("free")},{once:!0}),_t.preventDefault()}},yn=new WeakSet,er=function(){return e(os,Cs).get(e(this,pe).getMode())},An=new WeakSet,sr=function(_t){const p=e(this,yn,er);return p?new p.prototype.constructor(_t):null},bn=new WeakSet,nr=function(){const{x:_t,y:p,width:H,height:it}=this.div.getBoundingClientRect(),ut=Math.max(0,_t),xt=Math.max(0,p),Ot=Math.min(window.innerWidth,_t+H),Wt=Math.min(window.innerHeight,p+it),Pt=(ut+Ot)/2-_t,Jt=(xt+Wt)/2-p,[Zt,ve]=this.viewport.rotation%180===0?[Pt,Jt]:[Jt,Pt];return{offsetX:Zt,offsetY:ve}},Qs=new WeakSet,pi=function(){B(this,Ks,!0);for(const _t of e(this,ns).values())_t.isEmpty()&&_t.remove();B(this,Ks,!1)},ye(os,"_initialized",!1),x(os,Cs,new Map([c,f,v,d].map(_t=>[_t._editorType,_t])));let b=os},2259:(n,l,t)=>{var m,c,o,h,_,d,f,v,b,T,K,q,L,ir,M,rr,$,Da,tt,js,At,Fa,pt,Ts;t.d(l,{ColorPicker:()=>a});var s=t(4292),i=t(7830),r=t(5419);const ft=class ft{constructor(Q){x(this,L);x(this,M);x(this,$);x(this,tt);x(this,At);x(this,pt);x(this,m,O(this,$,Da).bind(this));x(this,c,O(this,At,Fa).bind(this));x(this,o,null);x(this,h,null);x(this,_,void 0);x(this,d,null);x(this,f,!1);x(this,v,!1);x(this,b,null);x(this,T,void 0);x(this,K,null);x(this,q,void 0);var Dt;let{editor:at=null,uiManager:Rt=null}=Q;at?(B(this,v,!1),B(this,q,s.AnnotationEditorParamsType.HIGHLIGHT_COLOR),B(this,b,at)):(B(this,v,!0),B(this,q,s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),B(this,K,(at==null?void 0:at._uiManager)||Rt),B(this,T,e(this,K)._eventBus),B(this,_,(at==null?void 0:at.color)||((Dt=e(this,K))==null?void 0:Dt.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,s.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["Escape","mac+Escape"],ft.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ft.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ft.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ft.prototype._moveToPrevious],[["Home","mac+Home"],ft.prototype._moveToBeginning],[["End","mac+End"],ft.prototype._moveToEnd]]))}renderButton(){const Q=B(this,o,document.createElement("button"));Q.className="colorPicker",Q.tabIndex="0",Q.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),Q.setAttribute("aria-haspopup",!0),Q.addEventListener("click",O(this,tt,js).bind(this)),Q.addEventListener("keydown",e(this,m));const at=B(this,h,document.createElement("span"));return at.className="swatch",at.setAttribute("aria-hidden",!0),at.style.backgroundColor=e(this,_),Q.append(at),Q}renderMainDropdown(){const Q=B(this,d,O(this,L,ir).call(this));return Q.setAttribute("aria-orientation","horizontal"),Q.setAttribute("aria-labelledby","highlightColorPickerLabel"),Q}_colorSelectFromKeyboard(Q){if(Q.target===e(this,o)){O(this,tt,js).call(this,Q);return}const at=Q.target.getAttribute("data-color");at&&O(this,M,rr).call(this,at,Q)}_moveToNext(Q){var at,Rt;if(!e(this,pt,Ts)){O(this,tt,js).call(this,Q);return}if(Q.target===e(this,o)){(at=e(this,d).firstChild)==null||at.focus();return}(Rt=Q.target.nextSibling)==null||Rt.focus()}_moveToPrevious(Q){var at,Rt;if(Q.target===((at=e(this,d))==null?void 0:at.firstChild)||Q.target===e(this,o)){e(this,pt,Ts)&&this._hideDropdownFromKeyboard();return}e(this,pt,Ts)||O(this,tt,js).call(this,Q),(Rt=Q.target.previousSibling)==null||Rt.focus()}_moveToBeginning(Q){var at;if(!e(this,pt,Ts)){O(this,tt,js).call(this,Q);return}(at=e(this,d).firstChild)==null||at.focus()}_moveToEnd(Q){var at;if(!e(this,pt,Ts)){O(this,tt,js).call(this,Q);return}(at=e(this,d).lastChild)==null||at.focus()}hideDropdown(){var Q;(Q=e(this,d))==null||Q.classList.add("hidden"),window.removeEventListener("pointerdown",e(this,c))}_hideDropdownFromKeyboard(){var Q;if(!e(this,v)){if(!e(this,pt,Ts)){(Q=e(this,b))==null||Q.unselect();return}this.hideDropdown(),e(this,o).focus({preventScroll:!0,focusVisible:e(this,f)})}}updateColor(Q){if(e(this,h)&&(e(this,h).style.backgroundColor=Q),!e(this,d))return;const at=e(this,K).highlightColors.values();for(const Rt of e(this,d).children)Rt.setAttribute("aria-selected",at.next().value===Q)}destroy(){var Q,at;(Q=e(this,o))==null||Q.remove(),B(this,o,null),B(this,h,null),(at=e(this,d))==null||at.remove(),B(this,d,null)}};m=new WeakMap,c=new WeakMap,o=new WeakMap,h=new WeakMap,_=new WeakMap,d=new WeakMap,f=new WeakMap,v=new WeakMap,b=new WeakMap,T=new WeakMap,K=new WeakMap,q=new WeakMap,L=new WeakSet,ir=function(){const Q=document.createElement("div");Q.addEventListener("contextmenu",r.noContextMenu),Q.className="dropdown",Q.role="listbox",Q.setAttribute("aria-multiselectable",!1),Q.setAttribute("aria-orientation","vertical"),Q.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[at,Rt]of e(this,K).highlightColors){const Dt=document.createElement("button");Dt.tabIndex="0",Dt.role="option",Dt.setAttribute("data-color",Rt),Dt.title=at,Dt.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${at}`);const Gt=document.createElement("span");Dt.append(Gt),Gt.className="swatch",Gt.style.backgroundColor=Rt,Dt.setAttribute("aria-selected",Rt===e(this,_)),Dt.addEventListener("click",O(this,M,rr).bind(this,Rt)),Q.append(Dt)}return Q.addEventListener("keydown",e(this,m)),Q},M=new WeakSet,rr=function(Q,at){at.stopPropagation(),e(this,T).dispatch("switchannotationeditorparams",{source:this,type:e(this,q),value:Q})},$=new WeakSet,Da=function(Q){ft._keyboardManager.exec(this,Q)},tt=new WeakSet,js=function(Q){if(e(this,pt,Ts)){this.hideDropdown();return}if(B(this,f,Q.detail===0),window.addEventListener("pointerdown",e(this,c)),e(this,d)){e(this,d).classList.remove("hidden");return}const at=B(this,d,O(this,L,ir).call(this));e(this,o).append(at)},At=new WeakSet,Fa=function(Q){var at;(at=e(this,d))!=null&&at.contains(Q.target)||this.hideDropdown()},pt=new WeakSet,Ts=function(){return e(this,d)&&!e(this,d).classList.contains("hidden")};let a=ft},310:(n,l,t)=>{var h,_,d,f,v,b,T,K,ar,F,M,G,$,J,tt,Lt,At,Nt,pt,ot,ft,gt,Q,at,Rt,Dt,Gt,Qt,ae,be,me,or,It,lr,$t,hr,jt,Na,Xt,Oa,u,cr,E,dr,y,ur,I,Ha,S,ja,w,Ua,Z,Ba,rt,pr,bt,In;t.d(l,{AnnotationEditor:()=>c});var s=t(7830),i=t(4292),r=t(5419);const L=class L{constructor(z){x(this,K);x(this,h,"");x(this,_,!1);x(this,d,null);x(this,f,null);x(this,v,null);x(this,b,!1);x(this,T,null);B(this,T,z)}static initialize(z){L._l10nPromise||(L._l10nPromise=z)}async render(){const z=B(this,d,document.createElement("button"));z.className="altText";const et=await L._l10nPromise.get("pdfjs-editor-alt-text-button-label");z.textContent=et,z.setAttribute("aria-label",et),z.tabIndex="0",z.addEventListener("contextmenu",r.noContextMenu),z.addEventListener("pointerdown",mt=>mt.stopPropagation());const lt=mt=>{mt.preventDefault(),e(this,T)._uiManager.editAltText(e(this,T))};return z.addEventListener("click",lt,{capture:!0}),z.addEventListener("keydown",mt=>{mt.target===z&&mt.key==="Enter"&&(B(this,b,!0),lt(mt))}),await O(this,K,ar).call(this),z}finish(){e(this,d)&&(e(this,d).focus({focusVisible:e(this,b)}),B(this,b,!1))}isEmpty(){return!e(this,h)&&!e(this,_)}get data(){return{altText:e(this,h),decorative:e(this,_)}}set data(z){let{altText:et,decorative:lt}=z;e(this,h)===et&&e(this,_)===lt||(B(this,h,et),B(this,_,lt),O(this,K,ar).call(this))}toggle(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;e(this,d)&&(!z&&e(this,v)&&(clearTimeout(e(this,v)),B(this,v,null)),e(this,d).disabled=!z)}destroy(){var z;(z=e(this,d))==null||z.remove(),B(this,d,null),B(this,f,null)}};h=new WeakMap,_=new WeakMap,d=new WeakMap,f=new WeakMap,v=new WeakMap,b=new WeakMap,T=new WeakMap,K=new WeakSet,ar=async function(){var lt,mt;const z=e(this,d);if(!z)return;if(!e(this,h)&&!e(this,_)){z.classList.remove("done"),(lt=e(this,f))==null||lt.remove();return}z.classList.add("done"),L._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(Tt=>{z.setAttribute("aria-label",Tt)});let et=e(this,f);if(!et){B(this,f,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip");const Tt=et.id=`alt-text-tooltip-${e(this,T).id}`;z.setAttribute("aria-describedby",Tt);const qt=100;z.addEventListener("mouseenter",()=>{B(this,v,setTimeout(()=>{B(this,v,null),e(this,f).classList.add("show"),e(this,T)._reportTelemetry({action:"alt_text_tooltip"})},qt))}),z.addEventListener("mouseleave",()=>{var zt;e(this,v)&&(clearTimeout(e(this,v)),B(this,v,null)),(zt=e(this,f))==null||zt.classList.remove("show")})}et.innerText=e(this,_)?await L._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):e(this,h),et.parentNode||z.append(et),(mt=e(this,T).getImageForAltText())==null||mt.setAttribute("aria-describedby",et.id)},ye(L,"_l10nPromise",null);let a=L;var m=t(4362);const vt=class vt{constructor(z){x(this,me);x(this,$t);x(this,jt);x(this,Xt);x(this,u);x(this,E);x(this,y);x(this,I);x(this,S);x(this,w);x(this,Z);x(this,rt);x(this,bt);x(this,F,null);x(this,M,null);x(this,G,!1);x(this,$,!1);x(this,J,null);x(this,tt,null);x(this,Lt,this.focusin.bind(this));x(this,At,this.focusout.bind(this));x(this,Nt,null);x(this,pt,"");x(this,ot,!1);x(this,ft,null);x(this,gt,!1);x(this,Q,!1);x(this,at,!1);x(this,Rt,null);x(this,Dt,0);x(this,Gt,0);x(this,Qt,null);ye(this,"_initialOptions",Object.create(null));ye(this,"_isVisible",!0);ye(this,"_uiManager",null);ye(this,"_focusEventsAllowed",!0);ye(this,"_l10nPromise",null);x(this,ae,!1);x(this,be,vt._zIndex++);this.constructor===vt&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=z.parent,this.id=z.id,this.width=this.height=null,this.pageIndex=z.parent.pageIndex,this.name=z.name,this.div=null,this._uiManager=z.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=z.isCentered,this._structTreeParentId=null;const{rotation:et,rawDims:{pageWidth:lt,pageHeight:mt,pageX:Tt,pageY:qt}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[lt,mt],this.pageTranslation=[Tt,qt];const[zt,Yt]=this.parentDimensions;this.x=z.x/zt,this.y=z.y/Yt,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const z=vt.prototype._resizeWithKeyboard,et=s.AnnotationEditorUIManager.TRANSLATE_SMALL,lt=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_resizerKeyboardManager",new s.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],z,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],z,{args:[-lt,0]}],[["ArrowRight","mac+ArrowRight"],z,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],z,{args:[lt,0]}],[["ArrowUp","mac+ArrowUp"],z,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],z,{args:[0,-lt]}],[["ArrowDown","mac+ArrowDown"],z,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],z,{args:[0,lt]}],[["Escape","mac+Escape"],vt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(z){const et=new o({id:z.parent.getNextId(),parent:z.parent,uiManager:z._uiManager});et.annotationElementId=z.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(z,et,lt){if(vt._l10nPromise||(vt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(Tt=>[Tt,z.get(Tt.replaceAll(/([A-Z])/g,qt=>`-${qt.toLowerCase()}`))]))),lt==null?void 0:lt.strings)for(const Tt of lt.strings)vt._l10nPromise.set(Tt,z.get(Tt));if(vt._borderLineWidth!==-1)return;const mt=getComputedStyle(document.documentElement);vt._borderLineWidth=parseFloat(mt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(z,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(z){return!1}static paste(z,et){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,ae)}set _isDraggable(z){var et;B(this,ae,z),(et=this.div)==null||et.classList.toggle("draggable",z)}get isEnterHandled(){return!0}center(){const[z,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(z*2),this.y+=this.width*z/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(z*2),this.y-=this.width*z/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(z){this._uiManager.addCommands(z)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,be)}setParent(z){z!==null?(this.pageIndex=z.pageIndex,this.pageDimensions=z.pageDimensions):O(this,bt,In).call(this),this.parent=z}focusin(z){this._focusEventsAllowed&&(e(this,ot)?B(this,ot,!1):this.parent.setSelected(this))}focusout(z){var et,lt;!this._focusEventsAllowed||!this.isAttachedToDOM||(et=z.relatedTarget)!=null&&et.closest(`#${this.id}`)||(z.preventDefault(),(lt=this.parent)!=null&&lt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(z,et,lt,mt){const[Tt,qt]=this.parentDimensions;[lt,mt]=this.screenToPageTranslation(lt,mt),this.x=(z+lt)/Tt,this.y=(et+mt)/qt,this.fixAndSetPosition()}translate(z,et){O(this,me,or).call(this,this.parentDimensions,z,et)}translateInPage(z,et){e(this,ft)||B(this,ft,[this.x,this.y]),O(this,me,or).call(this,this.pageDimensions,z,et),this.div.scrollIntoView({block:"nearest"})}drag(z,et){e(this,ft)||B(this,ft,[this.x,this.y]);const[lt,mt]=this.parentDimensions;if(this.x+=z/lt,this.y+=et/mt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:te,y:ne}=this.div.getBoundingClientRect();this.parent.findNewParent(this,te,ne)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Tt,y:qt}=this;const[zt,Yt]=this.getBaseTranslation();Tt+=zt,qt+=Yt,this.div.style.left=`${(100*Tt).toFixed(2)}%`,this.div.style.top=`${(100*qt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!e(this,ft)&&(e(this,ft)[0]!==this.x||e(this,ft)[1]!==this.y)}getBaseTranslation(){const[z,et]=this.parentDimensions,{_borderLineWidth:lt}=vt,mt=lt/z,Tt=lt/et;switch(this.rotation){case 90:return[-mt,Tt];case 180:return[mt,Tt];case 270:return[mt,-Tt];default:return[-mt,-Tt]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.rotation;const[et,lt]=this.pageDimensions;let{x:mt,y:Tt,width:qt,height:zt}=this;if(qt*=et,zt*=lt,mt*=et,Tt*=lt,this._mustFixPosition)switch(z){case 0:mt=Math.max(0,Math.min(et-qt,mt)),Tt=Math.max(0,Math.min(lt-zt,Tt));break;case 90:mt=Math.max(0,Math.min(et-zt,mt)),Tt=Math.min(lt,Math.max(qt,Tt));break;case 180:mt=Math.min(et,Math.max(qt,mt)),Tt=Math.min(lt,Math.max(zt,Tt));break;case 270:mt=Math.min(et,Math.max(zt,mt)),Tt=Math.max(0,Math.min(lt-qt,Tt));break}this.x=mt/=et,this.y=Tt/=lt;const[Yt,te]=this.getBaseTranslation();mt+=Yt,Tt+=te;const{style:ne}=this.div;ne.left=`${(100*mt).toFixed(2)}%`,ne.top=`${(100*Tt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(z,et){var lt;return O(lt=vt,It,lr).call(lt,z,et,this.parentRotation)}pageTranslationToScreen(z,et){var lt;return O(lt=vt,It,lr).call(lt,z,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:z,pageDimensions:[et,lt]}=this,mt=et*z,Tt=lt*z;return i.FeatureTest.isCSSRoundSupported?[Math.round(mt),Math.round(Tt)]:[mt,Tt]}setDims(z,et){const[lt,mt]=this.parentDimensions;this.div.style.width=`${(100*z/lt).toFixed(2)}%`,e(this,$)||(this.div.style.height=`${(100*et/mt).toFixed(2)}%`)}fixDims(){const{style:z}=this.div,{height:et,width:lt}=z,mt=lt.endsWith("%"),Tt=!e(this,$)&&et.endsWith("%");if(mt&&Tt)return;const[qt,zt]=this.parentDimensions;mt||(z.width=`${(100*parseFloat(lt)/qt).toFixed(2)}%`),!e(this,$)&&!Tt&&(z.height=`${(100*parseFloat(et)/zt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var z;(z=e(this,M))==null||z.finish()}async addEditToolbar(){return e(this,Nt)||e(this,Q)?e(this,Nt):(B(this,Nt,new m.EditorToolbar(this)),this.div.append(e(this,Nt).render()),e(this,M)&&e(this,Nt).addAltTextButton(await e(this,M).render()),e(this,Nt))}removeEditToolbar(){var z;e(this,Nt)&&(e(this,Nt).remove(),B(this,Nt,null),(z=e(this,M))==null||z.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){e(this,M)||(a.initialize(vt._l10nPromise),B(this,M,new a(this)),await this.addEditToolbar())}get altTextData(){var z;return(z=e(this,M))==null?void 0:z.data}set altTextData(z){e(this,M)&&(e(this,M).data=z)}hasAltText(){var z;return!((z=e(this,M))!=null&&z.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=e(this,G)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",e(this,Lt)),this.div.addEventListener("focusout",e(this,At));const[z,et]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*et/z).toFixed(2)}%`,this.div.style.maxHeight=`${(100*z/et).toFixed(2)}%`);const[lt,mt]=this.getInitialTranslation();return this.translate(lt,mt),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(z){const{isMac:et}=i.FeatureTest.platform;if(z.button!==0||z.ctrlKey&&et){z.preventDefault();return}if(B(this,ot,!0),this._isDraggable){O(this,I,Ha).call(this,z);return}O(this,y,ur).call(this,z)}moveInDOM(){e(this,Rt)&&clearTimeout(e(this,Rt)),B(this,Rt,setTimeout(()=>{var z;B(this,Rt,null),(z=this.parent)==null||z.moveEditorInDOM(this)},0))}_setParentAndPosition(z,et,lt){z.changeParent(this),this.x=et,this.y=lt,this.fixAndSetPosition()}getRect(z,et){let lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.rotation;const mt=this.parentScale,[Tt,qt]=this.pageDimensions,[zt,Yt]=this.pageTranslation,te=z/mt,ne=et/mt,ce=this.x*Tt,ge=this.y*qt,Ae=this.width*Tt,Ce=this.height*qt;switch(lt){case 0:return[ce+te+zt,qt-ge-ne-Ce+Yt,ce+te+Ae+zt,qt-ge-ne+Yt];case 90:return[ce+ne+zt,qt-ge+te+Yt,ce+ne+Ce+zt,qt-ge+te+Ae+Yt];case 180:return[ce-te-Ae+zt,qt-ge+ne+Yt,ce-te+zt,qt-ge+ne+Ce+Yt];case 270:return[ce-ne-Ce+zt,qt-ge-te-Ae+Yt,ce-ne+zt,qt-ge-te+Yt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(z,et){const[lt,mt,Tt,qt]=z,zt=Tt-lt,Yt=qt-mt;switch(this.rotation){case 0:return[lt,et-qt,zt,Yt];case 90:return[lt,et-mt,Yt,zt];case 180:return[Tt,et-mt,zt,Yt];case 270:return[Tt,et-qt,Yt,zt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){B(this,Q,!0)}disableEditMode(){B(this,Q,!1)}isInEditMode(){return e(this,Q)}shouldGetKeyboardEvents(){return e(this,at)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var z,et;(z=this.div)==null||z.addEventListener("focusin",e(this,Lt)),(et=this.div)==null||et.addEventListener("focusout",e(this,At))}rotate(z){}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(z,et,lt){const mt=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:lt});mt.rotation=z.rotation;const[Tt,qt]=mt.pageDimensions,[zt,Yt,te,ne]=mt.getRectInCurrentCoords(z.rect,qt);return mt.x=zt/Tt,mt.y=Yt/qt,mt.width=te/Tt,mt.height=ne/qt,mt}remove(){if(this.div.removeEventListener("focusin",e(this,Lt)),this.div.removeEventListener("focusout",e(this,At)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),e(this,Rt)&&(clearTimeout(e(this,Rt)),B(this,Rt,null)),O(this,bt,In).call(this),this.removeEditToolbar(),e(this,Qt)){for(const z of e(this,Qt).values())clearTimeout(z);B(this,Qt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(O(this,jt,Na).call(this),e(this,J).classList.remove("hidden"),(0,s.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(z){if(!this.isResizable||z.target!==this.div||z.key!=="Enter")return;this._uiManager.setSelected(this),B(this,tt,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=e(this,J).children;if(!e(this,F)){B(this,F,Array.from(et));const qt=O(this,S,ja).bind(this),zt=O(this,w,Ua).bind(this);for(const Yt of e(this,F)){const te=Yt.getAttribute("data-resizer-name");Yt.setAttribute("role","spinbutton"),Yt.addEventListener("keydown",qt),Yt.addEventListener("blur",zt),Yt.addEventListener("focus",O(this,Z,Ba).bind(this,te)),vt._l10nPromise.get(`pdfjs-editor-resizer-label-${te}`).then(ne=>Yt.setAttribute("aria-label",ne))}}const lt=e(this,F)[0];let mt=0;for(const qt of et){if(qt===lt)break;mt++}const Tt=(360-this.rotation+this.parentRotation)%360/90*(e(this,F).length/4);if(Tt!==mt){if(Tt<mt)for(let zt=0;zt<mt-Tt;zt++)e(this,J).append(e(this,J).firstChild);else if(Tt>mt)for(let zt=0;zt<Tt-mt;zt++)e(this,J).firstChild.before(e(this,J).lastChild);let qt=0;for(const zt of et){const Yt=e(this,F)[qt++].getAttribute("data-resizer-name");vt._l10nPromise.get(`pdfjs-editor-resizer-label-${Yt}`).then(te=>zt.setAttribute("aria-label",te))}}O(this,rt,pr).call(this,0),B(this,at,!0),e(this,J).firstChild.focus({focusVisible:!0}),z.preventDefault(),z.stopImmediatePropagation()}_resizeWithKeyboard(z,et){e(this,at)&&O(this,E,dr).call(this,e(this,pt),{movementX:z,movementY:et})}_stopResizingWithKeyboard(){O(this,bt,In).call(this),this.div.focus()}select(){var z,et;if(this.makeResizable(),(z=this.div)==null||z.classList.add("selectedEditor"),!e(this,Nt)){this.addEditToolbar().then(()=>{var lt,mt;(lt=this.div)!=null&&lt.classList.contains("selectedEditor")&&((mt=e(this,Nt))==null||mt.show())});return}(et=e(this,Nt))==null||et.show()}unselect(){var z,et,lt,mt;(z=e(this,J))==null||z.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(lt=this.div)!=null&&lt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(mt=e(this,Nt))==null||mt.hide()}updateParams(z,et){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return e(this,gt)}set isEditing(z){B(this,gt,z),this.parent&&(z?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(z,et){B(this,$,!0);const lt=z/et,{style:mt}=this.div;mt.aspectRatio=lt,mt.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(z){if(arguments.length>1&&arguments[1]!==void 0&&arguments[1]){e(this,Qt)||B(this,Qt,new Map);const{action:et}=z;let lt=e(this,Qt).get(et);lt&&clearTimeout(lt),lt=setTimeout(()=>{this._reportTelemetry(z),e(this,Qt).delete(et),e(this,Qt).size===0&&B(this,Qt,null)},vt._telemetryTimeout),e(this,Qt).set(et,lt);return}z.type||(z.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:z}})}show(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!z),this._isVisible=z}enable(){this.div&&(this.div.tabIndex=0),B(this,G,!1)}disable(){this.div&&(this.div.tabIndex=-1),B(this,G,!0)}};F=new WeakMap,M=new WeakMap,G=new WeakMap,$=new WeakMap,J=new WeakMap,tt=new WeakMap,Lt=new WeakMap,At=new WeakMap,Nt=new WeakMap,pt=new WeakMap,ot=new WeakMap,ft=new WeakMap,gt=new WeakMap,Q=new WeakMap,at=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,ae=new WeakMap,be=new WeakMap,me=new WeakSet,or=function(z,et,lt){let[mt,Tt]=z;[et,lt]=this.screenToPageTranslation(et,lt),this.x+=et/mt,this.y+=lt/Tt,this.fixAndSetPosition()},It=new WeakSet,lr=function(z,et,lt){switch(lt){case 90:return[et,-z];case 180:return[-z,-et];case 270:return[-et,z];default:return[z,et]}},$t=new WeakSet,hr=function(z){switch(z){case 90:{const[et,lt]=this.pageDimensions;return[0,-et/lt,lt/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,lt]=this.pageDimensions;return[0,et/lt,-lt/et,0]}default:return[1,0,0,1]}},jt=new WeakSet,Na=function(){if(e(this,J))return;B(this,J,document.createElement("div")),e(this,J).classList.add("resizers");const z=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const et of z){const lt=document.createElement("div");e(this,J).append(lt),lt.classList.add("resizer",et),lt.setAttribute("data-resizer-name",et),lt.addEventListener("pointerdown",O(this,Xt,Oa).bind(this,et)),lt.addEventListener("contextmenu",r.noContextMenu),lt.tabIndex=-1}this.div.prepend(e(this,J))},Xt=new WeakSet,Oa=function(z,et){var Ce;et.preventDefault();const{isMac:lt}=i.FeatureTest.platform;if(et.button!==0||et.ctrlKey&&lt)return;(Ce=e(this,M))==null||Ce.toggle(!1);const mt=O(this,E,dr).bind(this,z),Tt=this._isDraggable;this._isDraggable=!1;const qt={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",mt,qt);const zt=this.x,Yt=this.y,te=this.width,ne=this.height,ce=this.parent.div.style.cursor,ge=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const Ae=()=>{var Oe;this.parent.togglePointerEvents(!0),(Oe=e(this,M))==null||Oe.toggle(!0),this._isDraggable=Tt,window.removeEventListener("pointerup",Ae),window.removeEventListener("blur",Ae),window.removeEventListener("pointermove",mt,qt),this.parent.div.style.cursor=ce,this.div.style.cursor=ge,O(this,u,cr).call(this,zt,Yt,te,ne)};window.addEventListener("pointerup",Ae),window.addEventListener("blur",Ae)},u=new WeakSet,cr=function(z,et,lt,mt){const Tt=this.x,qt=this.y,zt=this.width,Yt=this.height;Tt===z&&qt===et&&zt===lt&&Yt===mt||this.addCommands({cmd:()=>{this.width=zt,this.height=Yt,this.x=Tt,this.y=qt;const[te,ne]=this.parentDimensions;this.setDims(te*zt,ne*Yt),this.fixAndSetPosition()},undo:()=>{this.width=lt,this.height=mt,this.x=z,this.y=et;const[te,ne]=this.parentDimensions;this.setDims(te*lt,ne*mt),this.fixAndSetPosition()},mustExec:!0})},E=new WeakSet,dr=function(z,et){const[lt,mt]=this.parentDimensions,Tt=this.x,qt=this.y,zt=this.width,Yt=this.height,te=vt.MIN_SIZE/lt,ne=vt.MIN_SIZE/mt,ce=Ct=>Math.round(Ct*1e4)/1e4,ge=O(this,$t,hr).call(this,this.rotation),Ae=(Ct,Ft)=>[ge[0]*Ct+ge[2]*Ft,ge[1]*Ct+ge[3]*Ft],Ce=O(this,$t,hr).call(this,360-this.rotation),Oe=(Ct,Ft)=>[Ce[0]*Ct+Ce[2]*Ft,Ce[1]*Ct+Ce[3]*Ft];let Fe,Ue,Le=!1,Ie=!1;switch(z){case"topLeft":Le=!0,Fe=(Ct,Ft)=>[0,0],Ue=(Ct,Ft)=>[Ct,Ft];break;case"topMiddle":Fe=(Ct,Ft)=>[Ct/2,0],Ue=(Ct,Ft)=>[Ct/2,Ft];break;case"topRight":Le=!0,Fe=(Ct,Ft)=>[Ct,0],Ue=(Ct,Ft)=>[0,Ft];break;case"middleRight":Ie=!0,Fe=(Ct,Ft)=>[Ct,Ft/2],Ue=(Ct,Ft)=>[0,Ft/2];break;case"bottomRight":Le=!0,Fe=(Ct,Ft)=>[Ct,Ft],Ue=(Ct,Ft)=>[0,0];break;case"bottomMiddle":Fe=(Ct,Ft)=>[Ct/2,Ft],Ue=(Ct,Ft)=>[Ct/2,0];break;case"bottomLeft":Le=!0,Fe=(Ct,Ft)=>[0,Ft],Ue=(Ct,Ft)=>[Ct,0];break;case"middleLeft":Ie=!0,Fe=(Ct,Ft)=>[0,Ft/2],Ue=(Ct,Ft)=>[Ct,Ft/2];break}const ue=Fe(zt,Yt),Y=Ue(zt,Yt);let P=Ae(...Y);const st=ce(Tt+P[0]),U=ce(qt+P[1]);let C=1,N=1,[V,ht]=this.screenToPageTranslation(et.movementX,et.movementY);if([V,ht]=Oe(V/lt,ht/mt),Le){const Ct=Math.hypot(zt,Yt);C=N=Math.max(Math.min(Math.hypot(Y[0]-ue[0]-V,Y[1]-ue[1]-ht)/Ct,1/zt,1/Yt),te/zt,ne/Yt)}else Ie?C=Math.max(te,Math.min(1,Math.abs(Y[0]-ue[0]-V)))/zt:N=Math.max(ne,Math.min(1,Math.abs(Y[1]-ue[1]-ht)))/Yt;const yt=ce(zt*C),wt=ce(Yt*N);P=Ae(...Ue(yt,wt));const Ht=st-P[0],Mt=U-P[1];this.width=yt,this.height=wt,this.x=Ht,this.y=Mt,this.setDims(lt*yt,mt*wt),this.fixAndSetPosition()},y=new WeakSet,ur=function(z){const{isMac:et}=i.FeatureTest.platform;z.ctrlKey&&!et||z.shiftKey||z.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},I=new WeakSet,Ha=function(z){const et=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let lt,mt;et&&(this.div.classList.add("moving"),lt={passive:!0,capture:!0},B(this,Dt,z.clientX),B(this,Gt,z.clientY),mt=qt=>{const{clientX:zt,clientY:Yt}=qt,[te,ne]=this.screenToPageTranslation(zt-e(this,Dt),Yt-e(this,Gt));B(this,Dt,zt),B(this,Gt,Yt),this._uiManager.dragSelectedEditors(te,ne)},window.addEventListener("pointermove",mt,lt));const Tt=()=>{window.removeEventListener("pointerup",Tt),window.removeEventListener("blur",Tt),et&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",mt,lt)),B(this,ot,!1),this._uiManager.endDragSession()||O(this,y,ur).call(this,z)};window.addEventListener("pointerup",Tt),window.addEventListener("blur",Tt)},S=new WeakSet,ja=function(z){vt._resizerKeyboardManager.exec(this,z)},w=new WeakSet,Ua=function(z){var et;e(this,at)&&((et=z.relatedTarget)==null?void 0:et.parentNode)!==e(this,J)&&O(this,bt,In).call(this)},Z=new WeakSet,Ba=function(z){B(this,pt,e(this,at)?z:"")},rt=new WeakSet,pr=function(z){if(e(this,F))for(const et of e(this,F))et.tabIndex=z},bt=new WeakSet,In=function(){if(B(this,at,!1),O(this,rt,pr).call(this,-1),e(this,tt)){const{savedX:z,savedY:et,savedWidth:lt,savedHeight:mt}=e(this,tt);O(this,u,cr).call(this,z,et,lt,mt),B(this,tt,null)}},x(vt,It),ye(vt,"_borderLineWidth",-1),ye(vt,"_colorManager",new s.ColorManager),ye(vt,"_zIndex",1),ye(vt,"_telemetryTimeout",1e3);let c=vt;class o extends c{constructor(z){super(z),this.annotationElementId=z.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},4061:(n,l,t)=>{var o,h,_,d,za,v,fi,T,qa,q,$a,F,fr,G,$,J,tt,Lt,At,Nt,pt,ot,ft,gt,Q,at,Rt,Dt,Gt,Qt,ae,be,gr,It,St,$t,he,jt,le,Xt,nt,Pn,g,Dn,R,Va;t.d(l,{FreeOutliner:()=>m,Outliner:()=>i}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292);class i{constructor(I){x(this,d);x(this,v);x(this,T);x(this,q);x(this,F);x(this,o,void 0);x(this,h,[]);x(this,_,[]);let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,w=1/0,j=-1/0,Z=1/0,X=-1/0;const rt=10**-4;for(const{x:et,y:lt,width:mt,height:Tt}of I){const qt=Math.floor((et-D)/rt)*rt,zt=Math.ceil((et+mt+D)/rt)*rt,Yt=Math.floor((lt-D)/rt)*rt,te=Math.ceil((lt+Tt+D)/rt)*rt,ne=[qt,Yt,te,!0],ce=[zt,Yt,te,!1];e(this,h).push(ne,ce),w=Math.min(w,qt),j=Math.max(j,zt),Z=Math.min(Z,Yt),X=Math.max(X,te)}const ct=j-w+2*S,bt=X-Z+2*S,Et=w-S,vt=Z-S,kt=e(this,h).at(A?-1:-2),z=[kt[0],kt[2]];for(const et of e(this,h)){const[lt,mt,Tt]=et;et[0]=(lt-Et)/ct,et[1]=(mt-vt)/bt,et[2]=(Tt-vt)/bt}B(this,o,{x:Et,y:vt,width:ct,height:bt,lastPoint:z})}getOutlines(){e(this,h).sort((D,S)=>D[0]-S[0]||D[1]-S[1]||D[2]-S[2]);const I=[];for(const D of e(this,h))D[3]?(I.push(...O(this,F,fr).call(this,D)),O(this,T,qa).call(this,D)):(O(this,q,$a).call(this,D),I.push(...O(this,F,fr).call(this,D)));return O(this,d,za).call(this,I)}}o=new WeakMap,h=new WeakMap,_=new WeakMap,d=new WeakSet,za=function(I){const D=[],S=new Set;for(const j of I){const[Z,X,rt]=j;D.push([Z,X,j],[Z,rt,j])}D.sort((j,Z)=>j[1]-Z[1]||j[0]-Z[0]);for(let j=0,Z=D.length;j<Z;j+=2){const X=D[j][2],rt=D[j+1][2];X.push(rt),rt.push(X),S.add(X),S.add(rt)}const A=[];let w;for(;S.size>0;){const j=S.values().next().value;let[Z,X,rt,ct,bt]=j;S.delete(j);let Et=Z,vt=X;for(w=[Z,rt],A.push(w);;){let kt;if(S.has(ct))kt=ct;else if(S.has(bt))kt=bt;else break;S.delete(kt),[Z,X,rt,ct,bt]=kt,Et!==Z&&(w.push(Et,vt,Z,vt===X?X:rt),Et=Z),vt=vt===X?rt:X}w.push(Et,vt)}return new a(A,e(this,o))},v=new WeakSet,fi=function(I){const D=e(this,_);let S=0,A=D.length-1;for(;S<=A;){const w=S+A>>1,j=D[w][0];if(j===I)return w;j<I?S=w+1:A=w-1}return A+1},T=new WeakSet,qa=function(I){let[,D,S]=I;const A=O(this,v,fi).call(this,D);e(this,_).splice(A,0,[D,S])},q=new WeakSet,$a=function(I){let[,D,S]=I;const A=O(this,v,fi).call(this,D);for(let w=A;w<e(this,_).length;w++){const[j,Z]=e(this,_)[w];if(j!==D)break;if(j===D&&Z===S){e(this,_).splice(w,1);return}}for(let w=A-1;w>=0;w--){const[j,Z]=e(this,_)[w];if(j!==D)break;if(j===D&&Z===S){e(this,_).splice(w,1);return}}},F=new WeakSet,fr=function(I){const[D,S,A]=I,w=[[D,S,A]],j=O(this,v,fi).call(this,A);for(let Z=0;Z<j;Z++){const[X,rt]=e(this,_)[Z];for(let ct=0,bt=w.length;ct<bt;ct++){const[,Et,vt]=w[ct];if(!(rt<=Et||vt<=X)){if(Et>=X){if(vt>rt)w[ct][1]=rt;else{if(bt===1)return[];w.splice(ct,1),ct--,bt--}continue}w[ct][2]=X,vt>rt&&w.push([D,rt,vt])}}}return w};class r{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(I,D){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof c}}class a extends r{constructor(D,S){super();x(this,G,void 0);x(this,$,void 0);B(this,$,D),B(this,G,S)}toSVGPath(){const D=[];for(const S of e(this,$)){let[A,w]=S;D.push(`M${A} ${w}`);for(let j=2;j<S.length;j+=2){const Z=S[j],X=S[j+1];Z===A?(D.push(`V${X}`),w=X):X===w&&(D.push(`H${Z}`),A=Z)}D.push("Z")}return D.join(" ")}serialize(D,S){let[A,w,j,Z]=D;const X=[],rt=j-A,ct=Z-w;for(const bt of e(this,$)){const Et=new Array(bt.length);for(let vt=0;vt<bt.length;vt+=2)Et[vt]=A+bt[vt]*rt,Et[vt+1]=Z-bt[vt+1]*ct;X.push(Et)}return X}get box(){return e(this,G)}}G=new WeakMap,$=new WeakMap;const Ut=class Ut{constructor(I,D,S,A,w){x(this,be);x(this,J,void 0);x(this,tt,[]);x(this,Lt,void 0);x(this,At,void 0);x(this,Nt,[]);x(this,pt,new Float64Array(18));x(this,ot,void 0);x(this,ft,void 0);x(this,gt,void 0);x(this,Q,void 0);x(this,at,void 0);x(this,Rt,void 0);x(this,Dt,[]);let{x:j,y:Z}=I,X=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;B(this,J,D),B(this,Rt,A*S),B(this,At,w),e(this,pt).set([NaN,NaN,NaN,NaN,j,Z],6),B(this,Lt,X),B(this,Q,e(Ut,Gt)*S),B(this,gt,e(Ut,ae)*S),B(this,at,S),e(this,Dt).push(j,Z)}get free(){return!0}isEmpty(){return isNaN(e(this,pt)[8])}add(I){var ce;let{x:D,y:S}=I;B(this,ot,D),B(this,ft,S);const[A,w,j,Z]=e(this,J);let[X,rt,ct,bt]=e(this,pt).subarray(8,12);const Et=D-ct,vt=S-bt,kt=Math.hypot(Et,vt);if(kt<e(this,gt))return!1;const z=kt-e(this,Q),et=z/kt,lt=et*Et,mt=et*vt;let Tt=X,qt=rt;X=ct,rt=bt,ct+=lt,bt+=mt,(ce=e(this,Dt))==null||ce.push(D,S);const zt=-mt/z,Yt=lt/z,te=zt*e(this,Rt),ne=Yt*e(this,Rt);return e(this,pt).set(e(this,pt).subarray(2,8),0),e(this,pt).set([ct+te,bt+ne],4),e(this,pt).set(e(this,pt).subarray(14,18),12),e(this,pt).set([ct-te,bt-ne],16),isNaN(e(this,pt)[6])?(e(this,Nt).length===0&&(e(this,pt).set([X+te,rt+ne],2),e(this,Nt).push(NaN,NaN,NaN,NaN,(X+te-A)/j,(rt+ne-w)/Z),e(this,pt).set([X-te,rt-ne],14),e(this,tt).push(NaN,NaN,NaN,NaN,(X-te-A)/j,(rt-ne-w)/Z)),e(this,pt).set([Tt,qt,X,rt,ct,bt],6),!this.isEmpty()):(e(this,pt).set([Tt,qt,X,rt,ct,bt],6),Math.abs(Math.atan2(qt-rt,Tt-X)-Math.atan2(mt,lt))<Math.PI/2?([X,rt,ct,bt]=e(this,pt).subarray(2,6),e(this,Nt).push(NaN,NaN,NaN,NaN,((X+ct)/2-A)/j,((rt+bt)/2-w)/Z),[X,rt,Tt,qt]=e(this,pt).subarray(14,18),e(this,tt).push(NaN,NaN,NaN,NaN,((Tt+X)/2-A)/j,((qt+rt)/2-w)/Z),!0):([Tt,qt,X,rt,ct,bt]=e(this,pt).subarray(0,6),e(this,Nt).push(((Tt+5*X)/6-A)/j,((qt+5*rt)/6-w)/Z,((5*X+ct)/6-A)/j,((5*rt+bt)/6-w)/Z,((X+ct)/2-A)/j,((rt+bt)/2-w)/Z),[ct,bt,X,rt,Tt,qt]=e(this,pt).subarray(12,18),e(this,tt).push(((Tt+5*X)/6-A)/j,((qt+5*rt)/6-w)/Z,((5*X+ct)/6-A)/j,((5*rt+bt)/6-w)/Z,((X+ct)/2-A)/j,((rt+bt)/2-w)/Z),!0))}toSVGPath(){if(this.isEmpty())return"";const I=e(this,Nt),D=e(this,tt),S=e(this,pt).subarray(4,6),A=e(this,pt).subarray(16,18),[w,j,Z,X]=e(this,J),[rt,ct,bt,Et]=O(this,be,gr).call(this);if(isNaN(e(this,pt)[6])&&!this.isEmpty())return`M${(e(this,pt)[2]-w)/Z} ${(e(this,pt)[3]-j)/X} L${(e(this,pt)[4]-w)/Z} ${(e(this,pt)[5]-j)/X} L${rt} ${ct} L${bt} ${Et} L${(e(this,pt)[16]-w)/Z} ${(e(this,pt)[17]-j)/X} L${(e(this,pt)[14]-w)/Z} ${(e(this,pt)[15]-j)/X} Z`;const vt=[];vt.push(`M${I[4]} ${I[5]}`);for(let kt=6;kt<I.length;kt+=6)isNaN(I[kt])?vt.push(`L${I[kt+4]} ${I[kt+5]}`):vt.push(`C${I[kt]} ${I[kt+1]} ${I[kt+2]} ${I[kt+3]} ${I[kt+4]} ${I[kt+5]}`);vt.push(`L${(S[0]-w)/Z} ${(S[1]-j)/X} L${rt} ${ct} L${bt} ${Et} L${(A[0]-w)/Z} ${(A[1]-j)/X}`);for(let kt=D.length-6;kt>=6;kt-=6)isNaN(D[kt])?vt.push(`L${D[kt+4]} ${D[kt+5]}`):vt.push(`C${D[kt]} ${D[kt+1]} ${D[kt+2]} ${D[kt+3]} ${D[kt+4]} ${D[kt+5]}`);return vt.push(`L${D[4]} ${D[5]} Z`),vt.join(" ")}getOutlines(){var lt;const I=e(this,Nt),D=e(this,tt),S=e(this,pt),A=S.subarray(4,6),w=S.subarray(16,18),[j,Z,X,rt]=e(this,J),ct=new Float64Array((((lt=e(this,Dt))==null?void 0:lt.length)??0)+2);for(let mt=0,Tt=ct.length-2;mt<Tt;mt+=2)ct[mt]=(e(this,Dt)[mt]-j)/X,ct[mt+1]=(e(this,Dt)[mt+1]-Z)/rt;ct[ct.length-2]=(e(this,ot)-j)/X,ct[ct.length-1]=(e(this,ft)-Z)/rt;const[bt,Et,vt,kt]=O(this,be,gr).call(this);if(isNaN(S[6])&&!this.isEmpty()){const mt=new Float64Array(36);return mt.set([NaN,NaN,NaN,NaN,(S[2]-j)/X,(S[3]-Z)/rt,NaN,NaN,NaN,NaN,(S[4]-j)/X,(S[5]-Z)/rt,NaN,NaN,NaN,NaN,bt,Et,NaN,NaN,NaN,NaN,vt,kt,NaN,NaN,NaN,NaN,(S[16]-j)/X,(S[17]-Z)/rt,NaN,NaN,NaN,NaN,(S[14]-j)/X,(S[15]-Z)/rt],0),new c(mt,ct,e(this,J),e(this,at),e(this,Lt),e(this,At))}const z=new Float64Array(e(this,Nt).length+24+e(this,tt).length);let et=I.length;for(let mt=0;mt<et;mt+=2){if(isNaN(I[mt])){z[mt]=z[mt+1]=NaN;continue}z[mt]=I[mt],z[mt+1]=I[mt+1]}z.set([NaN,NaN,NaN,NaN,(A[0]-j)/X,(A[1]-Z)/rt,NaN,NaN,NaN,NaN,bt,Et,NaN,NaN,NaN,NaN,vt,kt,NaN,NaN,NaN,NaN,(w[0]-j)/X,(w[1]-Z)/rt],et),et+=24;for(let mt=D.length-6;mt>=6;mt-=6)for(let Tt=0;Tt<6;Tt+=2){if(isNaN(D[mt+Tt])){z[et]=z[et+1]=NaN,et+=2;continue}z[et]=D[mt+Tt],z[et+1]=D[mt+Tt+1],et+=2}return z.set([NaN,NaN,NaN,NaN,D[4],D[5]],et),new c(z,ct,e(this,J),e(this,at),e(this,Lt),e(this,At))}};J=new WeakMap,tt=new WeakMap,Lt=new WeakMap,At=new WeakMap,Nt=new WeakMap,pt=new WeakMap,ot=new WeakMap,ft=new WeakMap,gt=new WeakMap,Q=new WeakMap,at=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,ae=new WeakMap,be=new WeakSet,gr=function(){const I=e(this,pt).subarray(4,6),D=e(this,pt).subarray(16,18),[S,A,w,j]=e(this,J);return[(e(this,ot)+(I[0]-D[0])/2-S)/w,(e(this,ft)+(I[1]-D[1])/2-A)/j,(e(this,ot)+(D[0]-I[0])/2-S)/w,(e(this,ft)+(D[1]-I[1])/2-A)/j]},x(Ut,Gt,8),x(Ut,Qt,2),x(Ut,ae,e(Ut,Gt)+e(Ut,Qt));let m=Ut;class c extends r{constructor(D,S,A,w,j,Z){super();x(this,nt);x(this,g);x(this,R);x(this,It,void 0);x(this,St,null);x(this,$t,void 0);x(this,he,void 0);x(this,jt,void 0);x(this,le,void 0);x(this,Xt,void 0);B(this,Xt,D),B(this,jt,S),B(this,It,A),B(this,le,w),B(this,$t,j),B(this,he,Z),O(this,R,Va).call(this,Z);const{x:X,y:rt,width:ct,height:bt}=e(this,St);for(let Et=0,vt=D.length;Et<vt;Et+=2)D[Et]=(D[Et]-X)/ct,D[Et+1]=(D[Et+1]-rt)/bt;for(let Et=0,vt=S.length;Et<vt;Et+=2)S[Et]=(S[Et]-X)/ct,S[Et+1]=(S[Et+1]-rt)/bt}toSVGPath(){const D=[`M${e(this,Xt)[4]} ${e(this,Xt)[5]}`];for(let S=6,A=e(this,Xt).length;S<A;S+=6){if(isNaN(e(this,Xt)[S])){D.push(`L${e(this,Xt)[S+4]} ${e(this,Xt)[S+5]}`);continue}D.push(`C${e(this,Xt)[S]} ${e(this,Xt)[S+1]} ${e(this,Xt)[S+2]} ${e(this,Xt)[S+3]} ${e(this,Xt)[S+4]} ${e(this,Xt)[S+5]}`)}return D.push("Z"),D.join(" ")}serialize(D,S){let[A,w,j,Z]=D;const X=j-A,rt=Z-w;let ct,bt;switch(S){case 0:ct=O(this,nt,Pn).call(this,e(this,Xt),A,Z,X,-rt),bt=O(this,nt,Pn).call(this,e(this,jt),A,Z,X,-rt);break;case 90:ct=O(this,g,Dn).call(this,e(this,Xt),A,w,X,rt),bt=O(this,g,Dn).call(this,e(this,jt),A,w,X,rt);break;case 180:ct=O(this,nt,Pn).call(this,e(this,Xt),j,w,-X,rt),bt=O(this,nt,Pn).call(this,e(this,jt),j,w,-X,rt);break;case 270:ct=O(this,g,Dn).call(this,e(this,Xt),j,Z,-X,-rt),bt=O(this,g,Dn).call(this,e(this,jt),j,Z,-X,-rt);break}return{outline:Array.from(ct),points:[Array.from(bt)]}}get box(){return e(this,St)}getNewOutline(D,S){const{x:A,y:w,width:j,height:Z}=e(this,St),[X,rt,ct,bt]=e(this,It),Et=j*ct,vt=Z*bt,kt=A*ct+X,z=w*bt+rt,et=new m({x:e(this,jt)[0]*Et+kt,y:e(this,jt)[1]*vt+z},e(this,It),e(this,le),D,e(this,he),S??e(this,$t));for(let lt=2;lt<e(this,jt).length;lt+=2)et.add({x:e(this,jt)[lt]*Et+kt,y:e(this,jt)[lt+1]*vt+z});return et.getOutlines()}}It=new WeakMap,St=new WeakMap,$t=new WeakMap,he=new WeakMap,jt=new WeakMap,le=new WeakMap,Xt=new WeakMap,nt=new WeakSet,Pn=function(D,S,A,w,j){const Z=new Float64Array(D.length);for(let X=0,rt=D.length;X<rt;X+=2)Z[X]=S+D[X]*w,Z[X+1]=A+D[X+1]*j;return Z},g=new WeakSet,Dn=function(D,S,A,w,j){const Z=new Float64Array(D.length);for(let X=0,rt=D.length;X<rt;X+=2)Z[X]=S+D[X+1]*w,Z[X+1]=A+D[X]*j;return Z},R=new WeakSet,Va=function(D){const S=e(this,Xt);let A=S[4],w=S[5],j=A,Z=w,X=A,rt=w,ct=A,bt=w;const Et=D?Math.max:Math.min;for(let lt=6,mt=S.length;lt<mt;lt+=6){if(isNaN(S[lt]))j=Math.min(j,S[lt+4]),Z=Math.min(Z,S[lt+5]),X=Math.max(X,S[lt+4]),rt=Math.max(rt,S[lt+5]),bt<S[lt+5]?(ct=S[lt+4],bt=S[lt+5]):bt===S[lt+5]&&(ct=Et(ct,S[lt+4]));else{const Tt=s.Util.bezierBoundingBox(A,w,...S.slice(lt,lt+6));j=Math.min(j,Tt[0]),Z=Math.min(Z,Tt[1]),X=Math.max(X,Tt[2]),rt=Math.max(rt,Tt[3]),bt<Tt[3]?(ct=Tt[2],bt=Tt[3]):bt===Tt[3]&&(ct=Et(ct,Tt[2]))}A=S[lt+4],w=S[lt+5]}const vt=j-e(this,$t),kt=Z-e(this,$t),z=X-j+2*e(this,$t),et=rt-Z+2*e(this,$t);B(this,St,{x:vt,y:kt,width:z,height:et,lastPoint:[ct,bt]})}},4362:(n,l,t)=>{var a,m,c,o,h,Ga,d,Wa,v,Xa,T,gi,q,Ya,F,mr,$,J,tt,Lt,Ka,Nt,Ja,ot,Qa;t.d(l,{EditorToolbar:()=>i,HighlightToolbar:()=>r});var s=t(5419);const G=class G{constructor(Q){x(this,d);x(this,v);x(this,T);x(this,q);x(this,F);x(this,a,null);x(this,m,null);x(this,c,void 0);x(this,o,null);B(this,c,Q)}render(){const Q=B(this,a,document.createElement("div"));Q.className="editToolbar",Q.setAttribute("role","toolbar"),Q.addEventListener("contextmenu",s.noContextMenu),Q.addEventListener("pointerdown",O(G,h,Ga));const at=B(this,o,document.createElement("div"));at.className="buttons",Q.append(at);const Rt=e(this,c).toolbarPosition;if(Rt){const{style:Dt}=Q,Gt=e(this,c)._uiManager.direction==="ltr"?1-Rt[0]:Rt[0];Dt.insetInlineEnd=`${100*Gt}%`,Dt.top=`calc(${100*Rt[1]}% + var(--editor-toolbar-vert-offset))`}return O(this,q,Ya).call(this),Q}hide(){var Q;e(this,a).classList.add("hidden"),(Q=e(this,m))==null||Q.hideDropdown()}show(){e(this,a).classList.remove("hidden")}addAltTextButton(Q){O(this,T,gi).call(this,Q),e(this,o).prepend(Q,e(this,F,mr))}addColorPicker(Q){B(this,m,Q);const at=Q.renderButton();O(this,T,gi).call(this,at),e(this,o).prepend(at,e(this,F,mr))}remove(){var Q;e(this,a).remove(),(Q=e(this,m))==null||Q.destroy(),B(this,m,null)}};a=new WeakMap,m=new WeakMap,c=new WeakMap,o=new WeakMap,h=new WeakSet,Ga=function(Q){Q.stopPropagation()},d=new WeakSet,Wa=function(Q){e(this,c)._focusEventsAllowed=!1,Q.preventDefault(),Q.stopPropagation()},v=new WeakSet,Xa=function(Q){e(this,c)._focusEventsAllowed=!0,Q.preventDefault(),Q.stopPropagation()},T=new WeakSet,gi=function(Q){Q.addEventListener("focusin",O(this,d,Wa).bind(this),{capture:!0}),Q.addEventListener("focusout",O(this,v,Xa).bind(this),{capture:!0}),Q.addEventListener("contextmenu",s.noContextMenu)},q=new WeakSet,Ya=function(){const Q=document.createElement("button");Q.className="delete",Q.tabIndex=0,Q.setAttribute("data-l10n-id",`pdfjs-editor-remove-${e(this,c).editorType}-button`),O(this,T,gi).call(this,Q),Q.addEventListener("click",at=>{e(this,c)._uiManager.delete()}),e(this,o).append(Q)},F=new WeakSet,mr=function(){const Q=document.createElement("div");return Q.className="divider",Q},x(G,h);let i=G;class r{constructor(Q){x(this,Lt);x(this,Nt);x(this,ot);x(this,$,null);x(this,J,null);x(this,tt,void 0);B(this,tt,Q)}show(Q,at,Rt){const[Dt,Gt]=O(this,Nt,Ja).call(this,at,Rt),{style:Qt}=e(this,J)||B(this,J,O(this,Lt,Ka).call(this));Q.append(e(this,J)),Qt.insetInlineEnd=`${100*Dt}%`,Qt.top=`calc(${100*Gt}% + var(--editor-toolbar-vert-offset))`}hide(){e(this,J).remove()}}$=new WeakMap,J=new WeakMap,tt=new WeakMap,Lt=new WeakSet,Ka=function(){const Q=B(this,J,document.createElement("div"));Q.className="editToolbar",Q.setAttribute("role","toolbar"),Q.addEventListener("contextmenu",s.noContextMenu);const at=B(this,$,document.createElement("div"));return at.className="buttons",Q.append(at),O(this,ot,Qa).call(this),Q},Nt=new WeakSet,Ja=function(Q,at){let Rt=0,Dt=0;for(const Gt of Q){const Qt=Gt.y+Gt.height;if(Qt<Rt)continue;const ae=Gt.x+(at?Gt.width:0);if(Qt>Rt){Dt=ae,Rt=Qt;continue}at?ae>Dt&&(Dt=ae):ae<Dt&&(Dt=ae)}return[at?1-Dt:Dt,Rt]},ot=new WeakSet,Qa=function(){const Q=document.createElement("button");Q.className="highlightButton",Q.tabIndex=0,Q.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const at=document.createElement("span");Q.append(at),at.className="visuallyHidden",at.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),Q.addEventListener("contextmenu",s.noContextMenu),Q.addEventListener("click",()=>{e(this,tt).highlightSelection("floating_button")}),e(this,$).append(Q)}},7830:(n,l,t)=>{var v,b,T,K,q,vr,M,G,$,J,tt,Za,Nt,pt,ot,ft,gt,Q,at,Rt,Dt,Gt,Qt,ae,be,me,Ut,It,St,$t,he,jt,le,Xt,nt,u,g,E,R,y,k,I,D,S,A,w,j,Z,X,rt,ct,bt,Et,vt,kt,z,et,lt,mi,Tt,to,zt,eo,te,vi,ce,so,Ae,no,Oe,io,Ue,yr,Ie,Ar,Y,br,st,wr,C,_r,V,es,yt,Ls,Ht,ro,Ct,ao,Kt,Er,ie,oo,de,Fn,Ve,xr;t.d(l,{AnnotationEditorUIManager:()=>f,ColorManager:()=>d,KeyboardManager:()=>_,bindEvents:()=>a,opacityToHex:()=>m}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(8992),t(3215),t(1454),t(7550),t(8335),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292),i=t(5419),r=t(4362);function a(Ge,W,dt){for(const Bt of dt)W.addEventListener(Bt,Ge[Bt].bind(Ge))}function m(Ge){return Math.round(Math.min(255,Math.max(1,255*Ge))).toString(16).padStart(2,"0")}class c{constructor(){x(this,v,0)}get id(){return`${s.AnnotationEditorPrefix}${As(this,v)._++}`}}v=new WeakMap;const F=class F{constructor(){x(this,q);x(this,b,(0,s.getUuid)());x(this,T,0);x(this,K,null)}static get _isSVGFittingCanvas(){const W='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',dt=new OffscreenCanvas(1,3).getContext("2d"),Bt=new Image;Bt.src=W;const Vt=Bt.decode().then(()=>(dt.drawImage(Bt,0,0,1,1,0,0,1,3),new Uint32Array(dt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",Vt)}async getFromFile(W){const{lastModified:dt,name:Bt,size:Vt,type:ee}=W;return O(this,q,vr).call(this,`${dt}_${Bt}_${Vt}_${ee}`,W)}async getFromUrl(W){return O(this,q,vr).call(this,W,W)}async getFromId(W){e(this,K)||B(this,K,new Map);const dt=e(this,K).get(W);return dt?dt.bitmap?(dt.refCounter+=1,dt):dt.file?this.getFromFile(dt.file):this.getFromUrl(dt.url):null}getSvgUrl(W){const dt=e(this,K).get(W);return dt!=null&&dt.isSvg?dt.svgUrl:null}deleteId(W){e(this,K)||B(this,K,new Map);const dt=e(this,K).get(W);dt&&(dt.refCounter-=1,dt.refCounter===0&&(dt.bitmap=null))}isValidId(W){return W.startsWith(`image_${e(this,b)}_`)}};b=new WeakMap,T=new WeakMap,K=new WeakMap,q=new WeakSet,vr=async function(W,dt){e(this,K)||B(this,K,new Map);let Bt=e(this,K).get(W);if(Bt===null)return null;if(Bt!=null&&Bt.bitmap)return Bt.refCounter+=1,Bt;try{Bt||(Bt={bitmap:null,id:`image_${e(this,b)}_${As(this,T)._++}`,refCounter:0,isSvg:!1});let Vt;if(typeof dt=="string"?(Bt.url=dt,Vt=await(0,i.fetchData)(dt,"blob")):Vt=Bt.file=dt,Vt.type==="image/svg+xml"){const ee=F._isSVGFittingCanvas,se=new FileReader,oe=new Image,_e=new Promise((xe,Re)=>{oe.onload=()=>{Bt.bitmap=oe,Bt.isSvg=!0,xe()},se.onload=async()=>{const We=Bt.svgUrl=se.result;oe.src=await ee?`${We}#svgView(preserveAspectRatio(none))`:We},oe.onerror=se.onerror=Re});se.readAsDataURL(Vt),await _e}else Bt.bitmap=await createImageBitmap(Vt);Bt.refCounter=1}catch(Vt){console.error(Vt),Bt=null}return e(this,K).set(W,Bt),Bt&&e(this,K).set(Bt.id,Bt),Bt};let o=F;class h{constructor(){x(this,M,[]);x(this,G,!1);x(this,$,void 0);x(this,J,-1);let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;B(this,$,W)}add(W){let{cmd:dt,undo:Bt,post:Vt,mustExec:ee,type:se=NaN,overwriteIfSameType:oe=!1,keepUndo:_e=!1}=W;if(ee&&dt(),e(this,G))return;const xe={cmd:dt,undo:Bt,post:Vt,type:se};if(e(this,J)===-1){e(this,M).length>0&&(e(this,M).length=0),B(this,J,0),e(this,M).push(xe);return}if(oe&&e(this,M)[e(this,J)].type===se){_e&&(xe.undo=e(this,M)[e(this,J)].undo),e(this,M)[e(this,J)]=xe;return}const Re=e(this,J)+1;Re===e(this,$)?e(this,M).splice(0,1):(B(this,J,Re),Re<e(this,M).length&&e(this,M).splice(Re)),e(this,M).push(xe)}undo(){if(e(this,J)===-1)return;B(this,G,!0);const{undo:W,post:dt}=e(this,M)[e(this,J)];W(),dt==null||dt(),B(this,G,!1),B(this,J,e(this,J)-1)}redo(){if(e(this,J)<e(this,M).length-1){B(this,J,e(this,J)+1),B(this,G,!0);const{cmd:W,post:dt}=e(this,M)[e(this,J)];W(),dt==null||dt(),B(this,G,!1)}}hasSomethingToUndo(){return e(this,J)!==-1}hasSomethingToRedo(){return e(this,J)<e(this,M).length-1}destroy(){B(this,M,null)}}M=new WeakMap,G=new WeakMap,$=new WeakMap,J=new WeakMap;class _{constructor(W){x(this,tt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:dt}=s.FeatureTest.platform;for(const[Bt,Vt,ee={}]of W)for(const se of Bt){const oe=se.startsWith("mac+");dt&&oe?(this.callbacks.set(se.slice(4),{callback:Vt,options:ee}),this.allKeys.add(se.split("+").at(-1))):!dt&&!oe&&(this.callbacks.set(se,{callback:Vt,options:ee}),this.allKeys.add(se.split("+").at(-1)))}}exec(W,dt){if(!this.allKeys.has(dt.key))return;const Bt=this.callbacks.get(O(this,tt,Za).call(this,dt));if(!Bt)return;const{callback:Vt,options:{bubbles:ee=!1,args:se=[],checker:oe=null}}=Bt;oe&&!oe(W,dt)||(Vt.bind(W,...se,dt)(),ee||(dt.stopPropagation(),dt.preventDefault()))}}tt=new WeakSet,Za=function(W){W.altKey&&this.buffer.push("alt"),W.ctrlKey&&this.buffer.push("ctrl"),W.metaKey&&this.buffer.push("meta"),W.shiftKey&&this.buffer.push("shift"),this.buffer.push(W.key);const dt=this.buffer.join("+");return this.buffer.length=0,dt};const At=class At{get _colors(){const W=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(W),(0,s.shadow)(this,"_colors",W)}convert(W){const dt=(0,i.getRGB)(W);if(!window.matchMedia("(forced-colors: active)").matches)return dt;for(const[Bt,Vt]of this._colors)if(Vt.every((ee,se)=>ee===dt[se]))return At._colorsMapping.get(Bt);return dt}getHexCode(W){const dt=this._colors.get(W);return dt?s.Util.makeHexColor(...dt):W}};ye(At,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let d=At;const ss=class ss{constructor(W,dt,Bt,Vt,ee,se,oe,_e,xe){x(this,lt);x(this,Tt);x(this,zt);x(this,te);x(this,ce);x(this,Ae);x(this,Oe);x(this,Ue);x(this,Ie);x(this,Y);x(this,st);x(this,C);x(this,V);x(this,yt);x(this,Ht);x(this,Ct);x(this,Kt);x(this,ie);x(this,de);x(this,Ve);x(this,Nt,null);x(this,pt,new Map);x(this,ot,new Map);x(this,ft,null);x(this,gt,null);x(this,Q,new h);x(this,at,0);x(this,Rt,new Set);x(this,Dt,null);x(this,Gt,null);x(this,Qt,new Set);x(this,ae,!1);x(this,be,null);x(this,me,null);x(this,Ut,null);x(this,It,!1);x(this,St,null);x(this,$t,new c);x(this,he,!1);x(this,jt,!1);x(this,le,null);x(this,Xt,null);x(this,nt,null);x(this,u,s.AnnotationEditorType.NONE);x(this,g,new Set);x(this,E,null);x(this,R,null);x(this,y,null);x(this,k,this.blur.bind(this));x(this,I,this.focus.bind(this));x(this,D,this.copy.bind(this));x(this,S,this.cut.bind(this));x(this,A,this.paste.bind(this));x(this,w,this.keydown.bind(this));x(this,j,this.keyup.bind(this));x(this,Z,this.onEditingAction.bind(this));x(this,X,this.onPageChanging.bind(this));x(this,rt,this.onScaleChanging.bind(this));x(this,ct,O(this,zt,eo).bind(this));x(this,bt,this.onRotationChanging.bind(this));x(this,Et,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,vt,[0,0]);x(this,kt,null);x(this,z,null);x(this,et,null);B(this,z,W),B(this,et,dt),B(this,ft,Bt),this._eventBus=Vt,this._eventBus._on("editingaction",e(this,Z)),this._eventBus._on("pagechanging",e(this,X)),this._eventBus._on("scalechanging",e(this,rt)),this._eventBus._on("rotationchanging",e(this,bt)),O(this,ce,so).call(this),O(this,Ie,Ar).call(this),B(this,gt,ee.annotationStorage),B(this,be,ee.filterFactory),B(this,R,se),B(this,Ut,oe||null),B(this,ae,_e),B(this,nt,xe||null),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const W=ss.prototype,dt=se=>e(se,z).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&se.hasSomethingToControl(),Bt=(se,oe)=>{let{target:_e}=oe;if(_e instanceof HTMLInputElement){const{type:xe}=_e;return xe!=="text"&&xe!=="number"}return!0},Vt=this.TRANSLATE_SMALL,ee=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],W.selectAll,{checker:Bt}],[["ctrl+z","mac+meta+z"],W.undo,{checker:Bt}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],W.redo,{checker:Bt}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],W.delete,{checker:Bt}],[["Enter","mac+Enter"],W.addNewEditorFromKeyboard,{checker:(se,oe)=>{let{target:_e}=oe;return!(_e instanceof HTMLButtonElement)&&e(se,z).contains(_e)&&!se.isEnterHandled}}],[[" ","mac+ "],W.addNewEditorFromKeyboard,{checker:(se,oe)=>{let{target:_e}=oe;return!(_e instanceof HTMLButtonElement)&&e(se,z).contains(document.activeElement)}}],[["Escape","mac+Escape"],W.unselectAll],[["ArrowLeft","mac+ArrowLeft"],W.translateSelectedEditors,{args:[-Vt,0],checker:dt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],W.translateSelectedEditors,{args:[-ee,0],checker:dt}],[["ArrowRight","mac+ArrowRight"],W.translateSelectedEditors,{args:[Vt,0],checker:dt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],W.translateSelectedEditors,{args:[ee,0],checker:dt}],[["ArrowUp","mac+ArrowUp"],W.translateSelectedEditors,{args:[0,-Vt],checker:dt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],W.translateSelectedEditors,{args:[0,-ee],checker:dt}],[["ArrowDown","mac+ArrowDown"],W.translateSelectedEditors,{args:[0,Vt],checker:dt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],W.translateSelectedEditors,{args:[0,ee],checker:dt}]]))}destroy(){var W,dt;O(this,Y,br).call(this),O(this,Ue,yr).call(this),this._eventBus._off("editingaction",e(this,Z)),this._eventBus._off("pagechanging",e(this,X)),this._eventBus._off("scalechanging",e(this,rt)),this._eventBus._off("rotationchanging",e(this,bt));for(const Bt of e(this,ot).values())Bt.destroy();e(this,ot).clear(),e(this,pt).clear(),e(this,Qt).clear(),B(this,Nt,null),e(this,g).clear(),e(this,Q).destroy(),(W=e(this,ft))==null||W.destroy(),(dt=e(this,St))==null||dt.hide(),B(this,St,null),e(this,me)&&(clearTimeout(e(this,me)),B(this,me,null)),e(this,kt)&&(clearTimeout(e(this,kt)),B(this,kt,null)),O(this,Ae,no).call(this)}async mlGuess(W){var dt;return((dt=e(this,nt))==null?void 0:dt.guess(W))||null}get hasMLManager(){return!!e(this,nt)}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",e(this,R)?e(this,be).addHCMFilter(e(this,R).foreground,e(this,R).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(e(this,z)).direction)}get highlightColors(){return(0,s.shadow)(this,"highlightColors",e(this,Ut)?new Map(e(this,Ut).split(",").map(W=>W.split("=").map(dt=>dt.trim()))):null)}get highlightColorNames(){return(0,s.shadow)(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,W=>W.reverse())):null)}setMainHighlightColorPicker(W){B(this,Xt,W)}editAltText(W){var dt;(dt=e(this,ft))==null||dt.editAltText(this,W)}onPageChanging(W){let{pageNumber:dt}=W;B(this,at,dt-1)}focusMainContainer(){e(this,z).focus()}findParent(W,dt){for(const Bt of e(this,ot).values()){const{x:Vt,y:ee,width:se,height:oe}=Bt.div.getBoundingClientRect();if(W>=Vt&&W<=Vt+se&&dt>=ee&&dt<=ee+oe)return Bt}return null}disableUserSelect(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;e(this,et).classList.toggle("noUserSelect",W)}addShouldRescale(W){e(this,Qt).add(W)}removeShouldRescale(W){e(this,Qt).delete(W)}onScaleChanging(W){let{scale:dt}=W;this.commitOrRemove(),this.viewParameters.realScale=dt*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Bt of e(this,Qt))Bt.onScaleChanging()}onRotationChanging(W){let{pagesRotation:dt}=W;this.commitOrRemove(),this.viewParameters.rotation=dt}highlightSelection(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const dt=document.getSelection();if(!dt||dt.isCollapsed)return;const{anchorNode:Bt,anchorOffset:Vt,focusNode:ee,focusOffset:se}=dt,oe=dt.toString(),_e=O(this,lt,mi).call(this,dt).closest(".textLayer"),xe=this.getSelectionBoxes(_e);if(xe){dt.empty(),e(this,u)===s.AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:s.AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const Re of e(this,ot).values())if(Re.hasTextLayer(_e)){Re.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:W,boxes:xe,anchorNode:Bt,anchorOffset:Vt,focusNode:ee,focusOffset:se,text:oe});break}}}addToAnnotationStorage(W){!W.isEmpty()&&e(this,gt)&&!e(this,gt).has(W.id)&&e(this,gt).setValue(W.id,W)}blur(){if(this.isShiftKeyDown=!1,e(this,It)&&(B(this,It,!1),O(this,te,vi).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:W}=document;for(const dt of e(this,g))if(dt.div.contains(W)){B(this,le,[dt,W]),dt._focusEventsAllowed=!1;break}}focus(){if(!e(this,le))return;const[W,dt]=e(this,le);B(this,le,null),dt.addEventListener("focusin",()=>{W._focusEventsAllowed=!0},{once:!0}),dt.focus()}addEditListeners(){O(this,Ie,Ar).call(this),O(this,st,wr).call(this)}removeEditListeners(){O(this,Y,br).call(this),O(this,C,_r).call(this)}copy(W){var Bt;if(W.preventDefault(),(Bt=e(this,Nt))==null||Bt.commitOrRemove(),!this.hasSelection)return;const dt=[];for(const Vt of e(this,g)){const ee=Vt.serialize(!0);ee&&dt.push(ee)}dt.length!==0&&W.clipboardData.setData("application/pdfjs",JSON.stringify(dt))}cut(W){this.copy(W),this.delete()}paste(W){W.preventDefault();const{clipboardData:dt}=W;for(const ee of dt.items)for(const se of e(this,Gt))if(se.isHandlingMimeForPasting(ee.type)){se.paste(ee,this.currentLayer);return}let Bt=dt.getData("application/pdfjs");if(!Bt)return;try{Bt=JSON.parse(Bt)}catch(ee){(0,s.warn)(`paste: "${ee.message}".`);return}if(!Array.isArray(Bt))return;this.unselectAll();const Vt=this.currentLayer;try{const ee=[];for(const _e of Bt){const xe=Vt.deserialize(_e);if(!xe)return;ee.push(xe)}const se=()=>{for(const _e of ee)O(this,Kt,Er).call(this,_e);O(this,Ve,xr).call(this,ee)},oe=()=>{for(const _e of ee)_e.remove()};this.addCommands({cmd:se,undo:oe,mustExec:!0})}catch(ee){(0,s.warn)(`paste: "${ee.message}".`)}}keydown(W){!this.isShiftKeyDown&&W.key==="Shift"&&(this.isShiftKeyDown=!0),e(this,u)!==s.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&ss._keyboardManager.exec(this,W)}keyup(W){this.isShiftKeyDown&&W.key==="Shift"&&(this.isShiftKeyDown=!1,e(this,It)&&(B(this,It,!1),O(this,te,vi).call(this,"main_toolbar")))}onEditingAction(W){let{name:dt}=W;switch(dt){case"undo":case"redo":case"delete":case"selectAll":this[dt]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(W){W?(O(this,Oe,io).call(this),O(this,st,wr).call(this),O(this,V,es).call(this,{isEditing:e(this,u)!==s.AnnotationEditorType.NONE,isEmpty:O(this,de,Fn).call(this),hasSomethingToUndo:e(this,Q).hasSomethingToUndo(),hasSomethingToRedo:e(this,Q).hasSomethingToRedo(),hasSelectedEditor:!1})):(O(this,Ue,yr).call(this),O(this,C,_r).call(this),O(this,V,es).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(W){if(!e(this,Gt)){B(this,Gt,W);for(const dt of e(this,Gt))O(this,yt,Ls).call(this,dt.defaultPropertiesToUpdate)}}getId(){return e(this,$t).id}get currentLayer(){return e(this,ot).get(e(this,at))}getLayer(W){return e(this,ot).get(W)}get currentPageIndex(){return e(this,at)}addLayer(W){e(this,ot).set(W.pageIndex,W),e(this,he)?W.enable():W.disable()}removeLayer(W){e(this,ot).delete(W.pageIndex)}updateMode(W){let dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e(this,u)!==W){if(B(this,u,W),W===s.AnnotationEditorType.NONE){this.setEditingState(!1),O(this,Ct,ao).call(this);return}this.setEditingState(!0),O(this,Ht,ro).call(this),this.unselectAll();for(const Vt of e(this,ot).values())Vt.updateMode(W);if(!dt&&Bt){this.addNewEditorFromKeyboard();return}if(dt){for(const Vt of e(this,pt).values())if(Vt.annotationElementId===dt){this.setSelected(Vt),Vt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(W){W!==e(this,u)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:W})}updateParams(W,dt){var Bt;if(e(this,Gt)){switch(W){case s.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(Bt=e(this,Xt))==null||Bt.updateColor(dt);break;case s.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(e(this,y)||B(this,y,new Map)).set(W,dt),this.showAllEditors("highlight",dt);break}for(const Vt of e(this,g))Vt.updateParams(W,dt);for(const Vt of e(this,Gt))Vt.updateDefaultParams(W,dt)}}showAllEditors(W,dt){var Bt;for(const Vt of e(this,pt).values())Vt.editorType===W&&Vt.show(dt);(((Bt=e(this,y))==null?void 0:Bt.get(s.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==dt&&O(this,yt,Ls).call(this,[[s.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,dt]])}enableWaiting(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(e(this,jt)!==W){B(this,jt,W);for(const dt of e(this,ot).values())W?dt.disableClick():dt.enableClick(),dt.div.classList.toggle("waiting",W)}}getEditors(W){const dt=[];for(const Bt of e(this,pt).values())Bt.pageIndex===W&&dt.push(Bt);return dt}getEditor(W){return e(this,pt).get(W)}addEditor(W){e(this,pt).set(W.id,W)}removeEditor(W){var dt;W.div.contains(document.activeElement)&&(e(this,me)&&clearTimeout(e(this,me)),B(this,me,setTimeout(()=>{this.focusMainContainer(),B(this,me,null)},0))),e(this,pt).delete(W.id),this.unselect(W),(!W.annotationElementId||!e(this,Rt).has(W.annotationElementId))&&((dt=e(this,gt))==null||dt.remove(W.id))}addDeletedAnnotationElement(W){e(this,Rt).add(W.annotationElementId),W.deleted=!0}isDeletedAnnotationElement(W){return e(this,Rt).has(W)}removeDeletedAnnotationElement(W){e(this,Rt).delete(W.annotationElementId),W.deleted=!1}setActiveEditor(W){e(this,Nt)!==W&&(B(this,Nt,W),W&&O(this,yt,Ls).call(this,W.propertiesToUpdate))}updateUI(W){e(this,ie,oo)===W&&O(this,yt,Ls).call(this,W.propertiesToUpdate)}toggleSelected(W){if(e(this,g).has(W)){e(this,g).delete(W),W.unselect(),O(this,V,es).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,g).add(W),W.select(),O(this,yt,Ls).call(this,W.propertiesToUpdate),O(this,V,es).call(this,{hasSelectedEditor:!0})}setSelected(W){for(const dt of e(this,g))dt!==W&&dt.unselect();e(this,g).clear(),e(this,g).add(W),W.select(),O(this,yt,Ls).call(this,W.propertiesToUpdate),O(this,V,es).call(this,{hasSelectedEditor:!0})}isSelected(W){return e(this,g).has(W)}get firstSelectedEditor(){return e(this,g).values().next().value}unselect(W){W.unselect(),e(this,g).delete(W),O(this,V,es).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,g).size!==0}get isEnterHandled(){return e(this,g).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){e(this,Q).undo(),O(this,V,es).call(this,{hasSomethingToUndo:e(this,Q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:O(this,de,Fn).call(this)})}redo(){e(this,Q).redo(),O(this,V,es).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,Q).hasSomethingToRedo(),isEmpty:O(this,de,Fn).call(this)})}addCommands(W){e(this,Q).add(W),O(this,V,es).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:O(this,de,Fn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const W=[...e(this,g)],dt=()=>{for(const Vt of W)Vt.remove()},Bt=()=>{for(const Vt of W)O(this,Kt,Er).call(this,Vt)};this.addCommands({cmd:dt,undo:Bt,mustExec:!0})}commitOrRemove(){var W;(W=e(this,Nt))==null||W.commitOrRemove()}hasSomethingToControl(){return e(this,Nt)||this.hasSelection}selectAll(){for(const W of e(this,g))W.commit();O(this,Ve,xr).call(this,e(this,pt).values())}unselectAll(){if(!(e(this,Nt)&&(e(this,Nt).commitOrRemove(),e(this,u)!==s.AnnotationEditorType.NONE))&&this.hasSelection){for(const W of e(this,g))W.unselect();e(this,g).clear(),O(this,V,es).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(W,dt){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;e(this,vt)[0]+=W,e(this,vt)[1]+=dt;const[Bt,Vt]=e(this,vt),ee=[...e(this,g)];e(this,kt)&&clearTimeout(e(this,kt)),B(this,kt,setTimeout(()=>{B(this,kt,null),e(this,vt)[0]=e(this,vt)[1]=0,this.addCommands({cmd:()=>{for(const oe of ee)e(this,pt).has(oe.id)&&oe.translateInPage(Bt,Vt)},undo:()=>{for(const oe of ee)e(this,pt).has(oe.id)&&oe.translateInPage(-Bt,-Vt)},mustExec:!1})},1e3));for(const oe of ee)oe.translateInPage(W,dt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),B(this,Dt,new Map);for(const W of e(this,g))e(this,Dt).set(W,{savedX:W.x,savedY:W.y,savedPageIndex:W.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,Dt))return!1;this.disableUserSelect(!1);const W=e(this,Dt);B(this,Dt,null);let dt=!1;for(const[{x:Vt,y:ee,pageIndex:se},oe]of W)oe.newX=Vt,oe.newY=ee,oe.newPageIndex=se,dt||(dt=Vt!==oe.savedX||ee!==oe.savedY||se!==oe.savedPageIndex);if(!dt)return!1;const Bt=(Vt,ee,se,oe)=>{if(e(this,pt).has(Vt.id)){const _e=e(this,ot).get(oe);_e?Vt._setParentAndPosition(_e,ee,se):(Vt.pageIndex=oe,Vt.x=ee,Vt.y=se)}};return this.addCommands({cmd:()=>{for(const[Vt,{newX:ee,newY:se,newPageIndex:oe}]of W)Bt(Vt,ee,se,oe)},undo:()=>{for(const[Vt,{savedX:ee,savedY:se,savedPageIndex:oe}]of W)Bt(Vt,ee,se,oe)},mustExec:!0}),!0}dragSelectedEditors(W,dt){if(e(this,Dt))for(const Bt of e(this,Dt).keys())Bt.drag(W,dt)}rebuild(W){if(W.parent===null){const dt=this.getLayer(W.pageIndex);dt?(dt.changeParent(W),dt.addOrRebuild(W)):(this.addEditor(W),this.addToAnnotationStorage(W),W.rebuild())}else W.parent.addOrRebuild(W)}get isEditorHandlingKeyboard(){var W;return((W=this.getActive())==null?void 0:W.shouldGetKeyboardEvents())||e(this,g).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(W){return e(this,Nt)===W}getActive(){return e(this,Nt)}getMode(){return e(this,u)}get imageManager(){return(0,s.shadow)(this,"imageManager",new o)}getSelectionBoxes(W){if(!W)return null;const dt=document.getSelection();for(let xe=0,Re=dt.rangeCount;xe<Re;xe++)if(!W.contains(dt.getRangeAt(xe).commonAncestorContainer))return null;const{x:Bt,y:Vt,width:ee,height:se}=W.getBoundingClientRect();let oe;switch(W.getAttribute("data-main-rotation")){case"90":oe=(xe,Re,We,Xe)=>({x:(Re-Vt)/se,y:1-(xe+We-Bt)/ee,width:Xe/se,height:We/ee});break;case"180":oe=(xe,Re,We,Xe)=>({x:1-(xe+We-Bt)/ee,y:1-(Re+Xe-Vt)/se,width:We/ee,height:Xe/se});break;case"270":oe=(xe,Re,We,Xe)=>({x:1-(Re+Xe-Vt)/se,y:(xe-Bt)/ee,width:Xe/se,height:We/ee});break;default:oe=(xe,Re,We,Xe)=>({x:(xe-Bt)/ee,y:(Re-Vt)/se,width:We/ee,height:Xe/se});break}const _e=[];for(let xe=0,Re=dt.rangeCount;xe<Re;xe++){const We=dt.getRangeAt(xe);if(!We.collapsed)for(const{x:Xe,y:hn,width:ps,height:Un}of We.getClientRects())ps===0||Un===0||_e.push(oe(Xe,hn,ps,Un))}return _e.length===0?null:_e}};Nt=new WeakMap,pt=new WeakMap,ot=new WeakMap,ft=new WeakMap,gt=new WeakMap,Q=new WeakMap,at=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,ae=new WeakMap,be=new WeakMap,me=new WeakMap,Ut=new WeakMap,It=new WeakMap,St=new WeakMap,$t=new WeakMap,he=new WeakMap,jt=new WeakMap,le=new WeakMap,Xt=new WeakMap,nt=new WeakMap,u=new WeakMap,g=new WeakMap,E=new WeakMap,R=new WeakMap,y=new WeakMap,k=new WeakMap,I=new WeakMap,D=new WeakMap,S=new WeakMap,A=new WeakMap,w=new WeakMap,j=new WeakMap,Z=new WeakMap,X=new WeakMap,rt=new WeakMap,ct=new WeakMap,bt=new WeakMap,Et=new WeakMap,vt=new WeakMap,kt=new WeakMap,z=new WeakMap,et=new WeakMap,lt=new WeakSet,mi=function(W){let{anchorNode:dt}=W;return dt.nodeType===Node.TEXT_NODE?dt.parentElement:dt},Tt=new WeakSet,to=function(){const W=document.getSelection();if(!W||W.isCollapsed)return;const dt=O(this,lt,mi).call(this,W).closest(".textLayer"),Bt=this.getSelectionBoxes(dt);Bt&&(e(this,St)||B(this,St,new r.HighlightToolbar(this)),e(this,St).show(dt,Bt,this.direction==="ltr"))},zt=new WeakSet,eo=function(){var Bt,Vt,ee;const W=document.getSelection();if(!W||W.isCollapsed){e(this,E)&&((Bt=e(this,St))==null||Bt.hide(),B(this,E,null),O(this,V,es).call(this,{hasSelectedText:!1}));return}const{anchorNode:dt}=W;if(dt!==e(this,E)){if(!O(this,lt,mi).call(this,W).closest(".textLayer")){e(this,E)&&((Vt=e(this,St))==null||Vt.hide(),B(this,E,null),O(this,V,es).call(this,{hasSelectedText:!1}));return}if((ee=e(this,St))==null||ee.hide(),B(this,E,dt),O(this,V,es).call(this,{hasSelectedText:!0}),!(e(this,u)!==s.AnnotationEditorType.HIGHLIGHT&&e(this,u)!==s.AnnotationEditorType.NONE)&&(e(this,u)===s.AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),B(this,It,this.isShiftKeyDown),!this.isShiftKeyDown)){const se=oe=>{oe.type==="pointerup"&&oe.button!==0||(window.removeEventListener("pointerup",se),window.removeEventListener("blur",se),oe.type==="pointerup"&&O(this,te,vi).call(this,"main_toolbar"))};window.addEventListener("pointerup",se),window.addEventListener("blur",se)}}},te=new WeakSet,vi=function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";e(this,u)===s.AnnotationEditorType.HIGHLIGHT?this.highlightSelection(W):e(this,ae)&&O(this,Tt,to).call(this)},ce=new WeakSet,so=function(){document.addEventListener("selectionchange",e(this,ct))},Ae=new WeakSet,no=function(){document.removeEventListener("selectionchange",e(this,ct))},Oe=new WeakSet,io=function(){window.addEventListener("focus",e(this,I)),window.addEventListener("blur",e(this,k))},Ue=new WeakSet,yr=function(){window.removeEventListener("focus",e(this,I)),window.removeEventListener("blur",e(this,k))},Ie=new WeakSet,Ar=function(){window.addEventListener("keydown",e(this,w)),window.addEventListener("keyup",e(this,j))},Y=new WeakSet,br=function(){window.removeEventListener("keydown",e(this,w)),window.removeEventListener("keyup",e(this,j))},st=new WeakSet,wr=function(){document.addEventListener("copy",e(this,D)),document.addEventListener("cut",e(this,S)),document.addEventListener("paste",e(this,A))},C=new WeakSet,_r=function(){document.removeEventListener("copy",e(this,D)),document.removeEventListener("cut",e(this,S)),document.removeEventListener("paste",e(this,A))},V=new WeakSet,es=function(W){Object.entries(W).some(dt=>{let[Bt,Vt]=dt;return e(this,Et)[Bt]!==Vt})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,Et),W)}),e(this,u)===s.AnnotationEditorType.HIGHLIGHT&&W.hasSelectedEditor===!1&&O(this,yt,Ls).call(this,[[s.AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},yt=new WeakSet,Ls=function(W){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:W})},Ht=new WeakSet,ro=function(){if(!e(this,he)){B(this,he,!0);for(const W of e(this,ot).values())W.enable();for(const W of e(this,pt).values())W.enable()}},Ct=new WeakSet,ao=function(){if(this.unselectAll(),e(this,he)){B(this,he,!1);for(const W of e(this,ot).values())W.disable();for(const W of e(this,pt).values())W.disable()}},Kt=new WeakSet,Er=function(W){const dt=e(this,ot).get(W.pageIndex);dt?dt.addOrRebuild(W):(this.addEditor(W),this.addToAnnotationStorage(W))},ie=new WeakSet,oo=function(){let W=null;for(W of e(this,g));return W},de=new WeakSet,Fn=function(){if(e(this,pt).size===0)return!0;if(e(this,pt).size===1)for(const W of e(this,pt).values())return W.isEmpty();return!1},Ve=new WeakSet,xr=function(W){for(const dt of e(this,g))dt.unselect();e(this,g).clear();for(const dt of W)dt.isEmpty()||(e(this,g).add(dt),dt.select());O(this,V,es).call(this,{hasSelectedEditor:this.hasSelection})},ye(ss,"TRANSLATE_SMALL",1),ye(ss,"TRANSLATE_BIG",10);let f=ss},4094:(n,l,t)=>{t.d(l,{PDFFetchStream:()=>c}),t(4114),t(6573),t(8100),t(7936),t(4628),t(7467),t(4732),t(9577);var s=t(4292),i=t(6490);function r(_,d,f){return{method:"GET",headers:_,signal:f.signal,mode:"cors",credentials:d?"include":"same-origin",redirect:"follow"}}function a(_){const d=new Headers;for(const f in _){const v=_[f];v!==void 0&&d.append(f,v)}return d}function m(_){return _ instanceof Uint8Array?_.buffer:_ instanceof ArrayBuffer?_:((0,s.warn)(`getArrayBuffer - unexpected data format: ${_}`),new Uint8Array(_).buffer)}class c{constructor(d){this.source=d,this.isHttp=/^https?:/i.test(d.url),this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new o(this),this._fullRequestReader}getRangeReader(d,f){if(f<=this._progressiveDataLength)return null;const v=new h(this,d,f);return this._rangeRequestReaders.push(v),v}cancelAllRequests(d){var f;(f=this._fullRequestReader)==null||f.cancel(d);for(const v of this._rangeRequestReaders.slice(0))v.cancel(d)}}class o{constructor(d){this._stream=d,this._reader=null,this._loaded=0,this._filename=null;const f=d.source;this._withCredentials=f.withCredentials||!1,this._contentLength=f.length,this._headersCapability=Promise.withResolvers(),this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._headers=a(this._stream.httpHeaders);const v=f.url;fetch(v,r(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,i.validateResponseStatus)(b.status))throw(0,i.createResponseStatusError)(b.status,v);this._reader=b.body.getReader(),this._headersCapability.resolve();const T=L=>b.headers.get(L),{allowRangeRequests:K,suggestedLength:q}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=K,this._contentLength=q||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(T),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._headersCapability.promise;const{value:d,done:f}=await this._reader.read();return f?{value:d,done:f}:(this._loaded+=d.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:m(d),done:!1})}cancel(d){var f;(f=this._reader)==null||f.cancel(d),this._abortController.abort()}}class h{constructor(d,f,v){this._stream=d,this._reader=null,this._loaded=0;const b=d.source;this._withCredentials=b.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${f}-${v-1}`);const T=b.url;fetch(T,r(this._headers,this._withCredentials,this._abortController)).then(K=>{if(!(0,i.validateResponseStatus)(K.status))throw(0,i.createResponseStatusError)(K.status,T);this._readCapability.resolve(),this._reader=K.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._readCapability.promise;const{value:d,done:f}=await this._reader.read();return f?{value:d,done:f}:(this._loaded+=d.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:m(d),done:!1})}cancel(d){var f;(f=this._reader)==null||f.cancel(d),this._abortController.abort()}}},10:(n,l,t)=>{var a;t.d(l,{FontFaceObject:()=>r,FontLoader:()=>i}),t(4114),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197),t(4979);var s=t(4292);class i{constructor(c){x(this,a,new Set);let{ownerDocument:o=globalThis.document,styleElement:h=null}=c;this._document=o,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(c){this.nativeFontFaces.add(c),this._document.fonts.add(c)}removeNativeFontFace(c){this.nativeFontFaces.delete(c),this._document.fonts.delete(c)}insertRule(c){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const o=this.styleElement.sheet;o.insertRule(c,o.cssRules.length)}clear(){for(const c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.clear(),e(this,a).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(c){let{systemFontInfo:o,_inspectFont:h}=c;if(!(!o||e(this,a).has(o.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:d,style:f}=o,v=new FontFace(_,d,f);this.addNativeFontFace(v);try{await v.load(),e(this,a).add(_),h==null||h(o)}catch{(0,s.warn)(`Cannot load system font: ${o.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(v)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(c){if(c.attached||c.missingFile&&!c.systemFontInfo)return;if(c.attached=!0,c.systemFontInfo){await this.loadSystemFont(c);return}if(this.isFontLoadingAPISupported){const h=c.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(_){throw(0,s.warn)(`Failed to load font '${h.family}': '${_}'.`),c.disableFontFace=!0,_}}return}const o=c.createFontFaceRule();if(o){if(this.insertRule(o),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const _=this._queueLoadingCallback(h);this._prepareFontLoadEvent(c,_)})}}get isFontLoadingAPISupported(){var o;const c=!!((o=this._document)!=null&&o.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){let c=!1;return(s.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(c=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function o(){for((0,s.assert)(!_.done,"completeRequest() cannot be called twice."),_.done=!0;h.length>0&&h[0].done;){const d=h.shift();setTimeout(d.callback,0)}}const{loadingRequests:h}=this,_={done:!1,complete:o,callback:c};return h.push(_),_}get _loadTestFont(){const c=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",c)}_prepareFontLoadEvent(c,o){function h(Lt,At){return Lt.charCodeAt(At)<<24|Lt.charCodeAt(At+1)<<16|Lt.charCodeAt(At+2)<<8|Lt.charCodeAt(At+3)&255}function _(Lt,At,Nt,pt){const ot=Lt.substring(0,At),ft=Lt.substring(At+Nt);return ot+pt+ft}let d,f;const v=this._document.createElement("canvas");v.width=1,v.height=1;const b=v.getContext("2d");let T=0;function K(Lt,At){if(++T>30){(0,s.warn)("Load test font never loaded."),At();return}if(b.font="30px "+Lt,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){At();return}setTimeout(K.bind(null,Lt,At))}const q=`lt${Date.now()}${this.loadTestFontId++}`;let L=this._loadTestFont;L=_(L,976,q.length,q);const F=16,M=1482184792;let G=h(L,F);for(d=0,f=q.length-3;d<f;d+=4)G=G-M+h(q,d)|0;d<q.length&&(G=G-M+h(q+"XXX",d)|0),L=_(L,F,4,(0,s.string32)(G));const $=`url(data:font/opentype;base64,${btoa(L)});`,J=`@font-face {font-family:"${q}";src:${$}}`;this.insertRule(J);const tt=this._document.createElement("div");tt.style.visibility="hidden",tt.style.width=tt.style.height="10px",tt.style.position="absolute",tt.style.top=tt.style.left="0px";for(const Lt of[c.loadedName,q]){const At=this._document.createElement("span");At.textContent="Hi",At.style.fontFamily=Lt,tt.append(At)}this._document.body.append(tt),K(q,()=>{tt.remove(),o.complete()})}}a=new WeakMap;class r{constructor(c,o){let{isEvalSupported:h=!0,disableFontFace:_=!1,ignoreErrors:d=!1,inspectFont:f=null}=o;this.compiledGlyphs=Object.create(null);for(const v in c)this[v]=c[v];this.isEvalSupported=h!==!1,this.disableFontFace=_===!0,this.ignoreErrors=d===!0,this._inspectFont=f}createNativeFontFace(){var o;if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{const h={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(h.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,h)}return(o=this._inspectFont)==null||o.call(this,this),c}createFontFaceRule(){var _;if(!this.data||this.disableFontFace)return null;const c=(0,s.bytesToString)(this.data),o=`url(data:${this.mimetype};base64,${btoa(c)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${o}}`;else{let d=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(d+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${d}src:${o}}`}return(_=this._inspectFont)==null||_.call(this,this,o),h}getPathGenerator(c,o){if(this.compiledGlyphs[o]!==void 0)return this.compiledGlyphs[o];let h;try{h=c.get(this.loadedName+"_path_"+o)}catch(_){if(!this.ignoreErrors)throw _;return(0,s.warn)(`getPathGenerator - ignoring character: "${_}".`),this.compiledGlyphs[o]=function(d,f){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const _=[];for(const d of h){const f=d.args!==void 0?d.args.join(","):"";_.push("c.",d.cmd,"(",f,`);
`)}return this.compiledGlyphs[o]=new Function("c","size",_.join(""))}return this.compiledGlyphs[o]=function(_,d){for(const f of h)f.cmd==="scale"&&(f.args=[d,-d]),_[f.cmd].apply(_,f.args)}}}},6062:(n,l,t)=>{var r,a;t.d(l,{Metadata:()=>i});var s=t(4292);class i{constructor(c){x(this,r,void 0);x(this,a,void 0);let{parsedData:o,rawData:h}=c;B(this,r,o),B(this,a,h)}getRaw(){return e(this,a)}get(c){return e(this,r).get(c)??null}getAll(){return(0,s.objectFromMap)(e(this,r))}has(c){return e(this,r).has(c)}}r=new WeakMap,a=new WeakMap},7457:(n,l,t)=>{t.d(l,{PDFNetworkStream:()=>o}),t(4114),t(4628);var s=t(4292),i=t(6490);const r=200,a=206;function m(d){const f=d.response;return typeof f!="string"?f:(0,s.stringToBytes)(f).buffer}class c{constructor(f){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=f,this.isHttp=/^https?:/i.test(f),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(f,v,b){const T={begin:f,end:v};for(const K in b)T[K]=b[K];return this.request(T)}requestFull(f){return this.request(f)}request(f){const v=new XMLHttpRequest,b=this.currXhrId++,T=this.pendingRequests[b]={xhr:v};v.open("GET",this.url),v.withCredentials=this.withCredentials;for(const K in this.httpHeaders){const q=this.httpHeaders[K];q!==void 0&&v.setRequestHeader(K,q)}return this.isHttp&&"begin"in f&&"end"in f?(v.setRequestHeader("Range",`bytes=${f.begin}-${f.end-1}`),T.expectedStatus=a):T.expectedStatus=r,v.responseType="arraybuffer",f.onError&&(v.onerror=function(K){f.onError(v.status)}),v.onreadystatechange=this.onStateChange.bind(this,b),v.onprogress=this.onProgress.bind(this,b),T.onHeadersReceived=f.onHeadersReceived,T.onDone=f.onDone,T.onError=f.onError,T.onProgress=f.onProgress,v.send(null),b}onProgress(f,v){var T;const b=this.pendingRequests[f];b&&((T=b.onProgress)==null||T.call(b,v))}onStateChange(f,v){var L,F,M;const b=this.pendingRequests[f];if(!b)return;const T=b.xhr;if(T.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),T.readyState!==4||!(f in this.pendingRequests))return;if(delete this.pendingRequests[f],T.status===0&&this.isHttp){(L=b.onError)==null||L.call(b,T.status);return}const K=T.status||r;if(!(K===r&&b.expectedStatus===a)&&K!==b.expectedStatus){(F=b.onError)==null||F.call(b,T.status);return}const q=m(T);if(K===a){const G=T.getResponseHeader("Content-Range"),$=/bytes (\d+)-(\d+)\/(\d+)/.exec(G);b.onDone({begin:parseInt($[1],10),chunk:q})}else q?b.onDone({begin:0,chunk:q}):(M=b.onError)==null||M.call(b,T.status)}getRequestXhr(f){return this.pendingRequests[f].xhr}isPendingRequest(f){return f in this.pendingRequests}abortRequest(f){const v=this.pendingRequests[f].xhr;delete this.pendingRequests[f],v.abort()}}class o{constructor(f){this._source=f,this._manager=new c(f.url,{httpHeaders:f.httpHeaders,withCredentials:f.withCredentials}),this._rangeChunkSize=f.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(f){const v=this._rangeRequestReaders.indexOf(f);v>=0&&this._rangeRequestReaders.splice(v,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}getRangeReader(f,v){const b=new _(this._manager,f,v);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(f){var v;(v=this._fullRequestReader)==null||v.cancel(f);for(const b of this._rangeRequestReaders.slice(0))b.cancel(f)}}class h{constructor(f,v){this._manager=f;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._fullRequestId=f.requestFull(b),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=v.disableRange||!1,this._contentLength=v.length,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const f=this._fullRequestId,v=this._manager.getRequestXhr(f),b=q=>v.getResponseHeader(q),{allowRangeRequests:T,suggestedLength:K}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});T&&(this._isRangeSupported=!0),this._contentLength=K||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(f),this._headersReceivedCapability.resolve()}_onDone(f){if(f&&(this._requests.length>0?this._requests.shift().resolve({value:f.chunk,done:!1}):this._cachedChunks.push(f.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(f){this._storedError=(0,i.createResponseStatusError)(f,this._url),this._headersReceivedCapability.reject(this._storedError);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(f){var v;(v=this.onProgress)==null||v.call(this,{loaded:f.loaded,total:f.lengthComputable?f.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=Promise.withResolvers();return this._requests.push(f),f.promise}cancel(f){this._done=!0,this._headersReceivedCapability.reject(f);for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(f,v,b){this._manager=f;const T={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._requestId=f.requestRange(v,b,T),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var f;(f=this.onClosed)==null||f.call(this,this)}_onDone(f){const v=f.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(f){this._storedError=(0,i.createResponseStatusError)(f,this._url);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(f){var v;this.isStreamingSupported||((v=this.onProgress)==null||v.call(this,{loaded:f.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const f=Promise.withResolvers();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},6490:(n,l,t)=>{t.d(l,{createResponseStatusError:()=>c,extractFilenameFromHeader:()=>m,validateRangeRequestCapabilities:()=>a,validateResponseStatus:()=>o});var s=t(4292);t(4114),t(4979);function i(h){let _=!0,d=f("filename\\*","i").exec(h);if(d){d=d[1];let F=K(d);return F=unescape(F),F=q(F),F=L(F),b(F)}if(d=T(h),d){const F=L(d);return b(F)}if(d=f("filename","i").exec(h),d){d=d[1];let F=K(d);return F=L(F),b(F)}function f(F,M){return new RegExp("(?:^|;)\\s*"+F+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',M)}function v(F,M){if(F){if(!/^[\x00-\xFF]+$/.test(M))return M;try{const G=new TextDecoder(F,{fatal:!0}),$=(0,s.stringToBytes)(M);M=G.decode($),_=!1}catch{}}return M}function b(F){return _&&/[\x80-\xff]/.test(F)&&(F=v("utf-8",F),_&&(F=v("iso-8859-1",F))),F}function T(F){const M=[];let G;const $=f("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(G=$.exec(F))!==null;){let[,tt,Lt,At]=G;if(tt=parseInt(tt,10),tt in M){if(tt===0)break;continue}M[tt]=[Lt,At]}const J=[];for(let tt=0;tt<M.length&&tt in M;++tt){let[Lt,At]=M[tt];At=K(At),Lt&&(At=unescape(At),tt===0&&(At=q(At))),J.push(At)}return J.join("")}function K(F){if(F.startsWith('"')){const M=F.slice(1).split('\\"');for(let G=0;G<M.length;++G){const $=M[G].indexOf('"');$!==-1&&(M[G]=M[G].slice(0,$),M.length=G+1),M[G]=M[G].replaceAll(/\\(.)/g,"$1")}F=M.join('"')}return F}function q(F){const M=F.indexOf("'");if(M===-1)return F;const G=F.slice(0,M),$=F.slice(M+1).replace(/^[^']*'/,"");return v(G,$)}function L(F){return!F.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(F)?F:F.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(M,G,$,J){if($==="q"||$==="Q")return J=J.replaceAll("_"," "),J=J.replaceAll(/=([0-9a-fA-F]{2})/g,function(tt,Lt){return String.fromCharCode(parseInt(Lt,16))}),v(G,J);try{J=atob(J)}catch{}return v(G,J)})}return""}var r=t(5419);function a(h){let{getResponseHeader:_,isHttp:d,rangeChunkSize:f,disableRange:v}=h;const b={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(_("Content-Length"),10);return!Number.isInteger(T)||(b.suggestedLength=T,T<=2*f)||v||!d||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(b.allowRangeRequests=!0),b}function m(h){const _=h("Content-Disposition");if(_){let d=i(_);if(d.includes("%"))try{d=decodeURIComponent(d)}catch{}if((0,r.isPdfFile)(d))return d}return null}function c(h,_){return h===404||h===0&&_.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+_+'".'):new s.UnexpectedResponseException(`Unexpected server response (${h}) while retrieving PDF "${_}".`,h)}function o(h){return h===200||h===206}},4786:(n,l,t)=>{t.a(n,async(s,i)=>{try{let b=function(pt){const ot=F.parse(pt);return ot.protocol==="file:"||ot.host?ot:/^[a-z]:[/\\]/i.test(pt)?F.parse(`file:///${pt}`):(ot.host||(ot.protocol="file:"),ot)},T=function(pt,ot){return{protocol:pt.protocol,auth:pt.auth,host:pt.hostname,port:pt.port,path:pt.path,method:"GET",headers:ot}};t.d(l,{PDFNodeStream:()=>G});var r=t(4114),a=t(6573),m=t(8100),c=t(7936),o=t(4628),h=t(7467),_=t(4732),d=t(9577),f=t(4292),v=t(6490);let K,q,L,F;f.isNodeJS&&(K=await bs(()=>import("./chunk.js"),[]),q=await bs(()=>import("./chunk.js"),[]),L=await bs(()=>import("./chunk.js"),[]),F=await bs(()=>import("./chunk.js"),[]));const M=/^file:\/\/\/[a-zA-Z]:\//;class G{constructor(ot){this.source=ot,this.url=b(ot.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&ot.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ot;return((ot=this._fullRequestReader)==null?void 0:ot._loaded)??0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new At(this):new tt(this),this._fullRequestReader}getRangeReader(ot,ft){if(ft<=this._progressiveDataLength)return null;const gt=this.isFsUrl?new Nt(this,ot,ft):new Lt(this,ot,ft);return this._rangeRequestReaders.push(gt),gt}cancelAllRequests(ot){var ft;(ft=this._fullRequestReader)==null||ft.cancel(ot);for(const gt of this._rangeRequestReaders.slice(0))gt.cancel(ot)}}class ${constructor(ot){this._url=ot.url,this._done=!1,this._storedError=null,this.onProgress=null;const ft=ot.source;this._contentLength=ft.length,this._loaded=0,this._filename=null,this._disableRange=ft.disableRange||!1,this._rangeChunkSize=ft.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ft.disableStream,this._isRangeSupported=!ft.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ft;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ot=this._readableStream.read();return ot===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=ot.length,(ft=this.onProgress)==null||ft.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ot).buffer,done:!1})}cancel(ot){if(!this._readableStream){this._error(ot);return}this._readableStream.destroy(ot)}_error(ot){this._storedError=ot,this._readCapability.resolve()}_setReadableStream(ot){this._readableStream=ot,ot.on("readable",()=>{this._readCapability.resolve()}),ot.on("end",()=>{ot.destroy(),this._done=!0,this._readCapability.resolve()}),ot.on("error",ft=>{this._error(ft)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new f.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class J{constructor(ot){this._url=ot.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ft=ot.source;this._isStreamingSupported=!ft.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ft;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ot=this._readableStream.read();return ot===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=ot.length,(ft=this.onProgress)==null||ft.call(this,{loaded:this._loaded}),{value:new Uint8Array(ot).buffer,done:!1})}cancel(ot){if(!this._readableStream){this._error(ot);return}this._readableStream.destroy(ot)}_error(ot){this._storedError=ot,this._readCapability.resolve()}_setReadableStream(ot){this._readableStream=ot,ot.on("readable",()=>{this._readCapability.resolve()}),ot.on("end",()=>{ot.destroy(),this._done=!0,this._readCapability.resolve()}),ot.on("error",ft=>{this._error(ft)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class tt extends ${constructor(ot){super(ot);const ft=gt=>{if(gt.statusCode===404){const Dt=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Dt,this._headersCapability.reject(Dt);return}this._headersCapability.resolve(),this._setReadableStream(gt);const Q=Dt=>this._readableStream.headers[Dt.toLowerCase()],{allowRangeRequests:at,suggestedLength:Rt}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:Q,isHttp:ot.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=at,this._contentLength=Rt||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(Q)};this._request=null,this._url.protocol==="http:"?this._request=q.request(T(this._url,ot.httpHeaders),ft):this._request=L.request(T(this._url,ot.httpHeaders),ft),this._request.on("error",gt=>{this._storedError=gt,this._headersCapability.reject(gt)}),this._request.end()}}class Lt extends J{constructor(ot,ft,gt){super(ot),this._httpHeaders={};for(const at in ot.httpHeaders){const Rt=ot.httpHeaders[at];Rt!==void 0&&(this._httpHeaders[at]=Rt)}this._httpHeaders.Range=`bytes=${ft}-${gt-1}`;const Q=at=>{if(at.statusCode===404){const Rt=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Rt;return}this._setReadableStream(at)};this._request=null,this._url.protocol==="http:"?this._request=q.request(T(this._url,this._httpHeaders),Q):this._request=L.request(T(this._url,this._httpHeaders),Q),this._request.on("error",at=>{this._storedError=at}),this._request.end()}}class At extends ${constructor(ot){super(ot);let ft=decodeURIComponent(this._url.path);M.test(this._url.href)&&(ft=ft.replace(/^\//,"")),K.promises.lstat(ft).then(gt=>{this._contentLength=gt.size,this._setReadableStream(K.createReadStream(ft)),this._headersCapability.resolve()},gt=>{gt.code==="ENOENT"&&(gt=new f.MissingPDFException(`Missing PDF "${ft}".`)),this._storedError=gt,this._headersCapability.reject(gt)})}}class Nt extends J{constructor(ot,ft,gt){super(ot);let Q=decodeURIComponent(this._url.path);M.test(this._url.href)&&(Q=Q.replace(/^\//,"")),this._setReadableStream(K.createReadStream(Q,{start:ft,end:gt-1}))}}i()}catch(b){i(b)}},1)},1573:(n,l,t)=>{t.a(n,async(s,i)=>{try{t.d(l,{NodeCMapReaderFactory:()=>L,NodeCanvasFactory:()=>q,NodeFilterFactory:()=>K,NodeStandardFontDataFactory:()=>F});var r=t(6573),a=t(8100),m=t(7936),c=t(7467),o=t(4732),h=t(9577),_=t(2583),d=t(4292);let f,v,b;if(d.isNodeJS){f=await bs(()=>import("./chunk.js"),[]);try{v=await bs(()=>import("./chunk.js"),[])}catch{}try{b=await bs(()=>import("./chunk2.js"),[])}catch{}}(function(){if(globalThis.DOMMatrix||!d.isNodeJS)return;const M=v==null?void 0:v.DOMMatrix;M?globalThis.DOMMatrix=M:(0,d.warn)("Cannot polyfill `DOMMatrix`, rendering may be broken.")})(),function(){if(globalThis.Path2D||!d.isNodeJS)return;const M=v==null?void 0:v.CanvasRenderingContext2D,G=b==null?void 0:b.applyPath2DToCanvasRenderingContext,$=b==null?void 0:b.Path2D;M&&G&&$?(G(M),globalThis.Path2D=$):(0,d.warn)("Cannot polyfill `Path2D`, rendering may be broken.")}();const T=function(M){return f.promises.readFile(M).then(G=>new Uint8Array(G))};class K extends _.BaseFilterFactory{}class q extends _.BaseCanvasFactory{_createCanvas(G,$){return v.createCanvas(G,$)}}class L extends _.BaseCMapReaderFactory{_fetchData(G,$){return T(G).then(J=>({cMapData:J,compressionType:$}))}}class F extends _.BaseStandardFontDataFactory{_fetchData(G){return T(G)}}i()}catch(f){i(f)}},1)},5626:(n,l,t)=>{var c,o,h,_,d,f,v,b,T,Sr;t.d(l,{OptionalContentConfig:()=>m});var s=t(4292),i=t(7651);const r=Symbol("INTERNAL");class a{constructor(L,F){x(this,c,!1);x(this,o,!1);x(this,h,!1);x(this,_,!0);let{name:M,intent:G,usage:$}=F;B(this,c,!!(L&s.RenderingIntentFlag.DISPLAY)),B(this,o,!!(L&s.RenderingIntentFlag.PRINT)),this.name=M,this.intent=G,this.usage=$}get visible(){if(e(this,h))return e(this,_);if(!e(this,_))return!1;const{print:L,view:F}=this.usage;return e(this,c)?(F==null?void 0:F.viewState)!=="OFF":e(this,o)?(L==null?void 0:L.printState)!=="OFF":!0}_setVisible(L,F){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;L!==r&&(0,s.unreachable)("Internal method `_setVisible` called."),B(this,h,M),B(this,_,F)}}c=new WeakMap,o=new WeakMap,h=new WeakMap,_=new WeakMap;class m{constructor(L){x(this,T);x(this,d,null);x(this,f,new Map);x(this,v,null);x(this,b,null);let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.RenderingIntentFlag.DISPLAY;if(this.renderingIntent=F,this.name=null,this.creator=null,L!==null){this.name=L.name,this.creator=L.creator,B(this,b,L.order);for(const M of L.groups)e(this,f).set(M.id,new a(F,M));if(L.baseState==="OFF")for(const M of e(this,f).values())M._setVisible(r,!1);for(const M of L.on)e(this,f).get(M)._setVisible(r,!0);for(const M of L.off)e(this,f).get(M)._setVisible(r,!1);B(this,v,this.getHash())}}isVisible(L){if(e(this,f).size===0)return!0;if(!L)return(0,s.info)("Optional content group not defined."),!0;if(L.type==="OCG")return e(this,f).has(L.id)?e(this,f).get(L.id).visible:((0,s.warn)(`Optional content group not found: ${L.id}`),!0);if(L.type==="OCMD"){if(L.expression)return O(this,T,Sr).call(this,L.expression);if(!L.policy||L.policy==="AnyOn"){for(const F of L.ids){if(!e(this,f).has(F))return(0,s.warn)(`Optional content group not found: ${F}`),!0;if(e(this,f).get(F).visible)return!0}return!1}else if(L.policy==="AllOn"){for(const F of L.ids){if(!e(this,f).has(F))return(0,s.warn)(`Optional content group not found: ${F}`),!0;if(!e(this,f).get(F).visible)return!1}return!0}else if(L.policy==="AnyOff"){for(const F of L.ids){if(!e(this,f).has(F))return(0,s.warn)(`Optional content group not found: ${F}`),!0;if(!e(this,f).get(F).visible)return!0}return!1}else if(L.policy==="AllOff"){for(const F of L.ids){if(!e(this,f).has(F))return(0,s.warn)(`Optional content group not found: ${F}`),!0;if(e(this,f).get(F).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${L.policy}.`),!0}return(0,s.warn)(`Unknown group type ${L.type}.`),!0}setVisibility(L){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const M=e(this,f).get(L);if(!M){(0,s.warn)(`Optional content group not found: ${L}`);return}M._setVisible(r,!!F,!0),B(this,d,null)}setOCGState(L){let{state:F,preserveRB:M}=L,G;for(const $ of F){switch($){case"ON":case"OFF":case"Toggle":G=$;continue}const J=e(this,f).get($);if(J)switch(G){case"ON":J._setVisible(r,!0);break;case"OFF":J._setVisible(r,!1);break;case"Toggle":J._setVisible(r,!J.visible);break}}B(this,d,null)}get hasInitialVisibility(){return e(this,v)===null||this.getHash()===e(this,v)}getOrder(){return e(this,f).size?e(this,b)?e(this,b).slice():[...e(this,f).keys()]:null}getGroups(){return e(this,f).size>0?(0,s.objectFromMap)(e(this,f)):null}getGroup(L){return e(this,f).get(L)||null}getHash(){if(e(this,d)!==null)return e(this,d);const L=new i.MurmurHash3_64;for(const[F,M]of e(this,f))L.update(`${F}:${M.visible}`);return B(this,d,L.hexdigest())}}d=new WeakMap,f=new WeakMap,v=new WeakMap,b=new WeakMap,T=new WeakSet,Sr=function(L){const F=L.length;if(F<2)return!0;const M=L[0];for(let G=1;G<F;G++){const $=L[G];let J;if(Array.isArray($))J=O(this,T,Sr).call(this,$);else if(e(this,f).has($))J=e(this,f).get($).visible;else return(0,s.warn)(`Optional content group not found: ${$}`),!0;switch(M){case"And":if(!J)return!1;break;case"Or":if(J)return!0;break;case"Not":return!J;default:return!0}}return M==="And"}},6814:(n,l,t)=>{t.d(l,{cleanupTextLayer:()=>_,renderTextLayer:()=>K,updateTextLayer:()=>q}),t(4114),t(4628);var s=t(4292),i=t(5419);const r=1e5,a=30,m=.8,c=new Map;let o=null;function h(){if(!o){const L=document.createElement("canvas");L.className="hiddenCanvasElement",document.body.append(L),o=L.getContext("2d",{alpha:!1})}return o}function _(){o==null||o.canvas.remove(),o=null}function d(L){const F=c.get(L);if(F)return F;const M=h(),G=M.font;M.canvas.width=M.canvas.height=a,M.font=`${a}px ${L}`;const $=M.measureText("");let J=$.fontBoundingBoxAscent,tt=Math.abs($.fontBoundingBoxDescent);if(J){const At=J/(J+tt);return c.set(L,At),M.canvas.width=M.canvas.height=0,M.font=G,At}M.strokeStyle="red",M.clearRect(0,0,a,a),M.strokeText("g",0,0);let Lt=M.getImageData(0,0,a,a).data;tt=0;for(let At=Lt.length-1-3;At>=0;At-=4)if(Lt[At]>0){tt=Math.ceil(At/4/a);break}M.clearRect(0,0,a,a),M.strokeText("A",0,a),Lt=M.getImageData(0,0,a,a).data,J=0;for(let At=0,Nt=Lt.length;At<Nt;At+=4)if(Lt[At]>0){J=a-Math.floor(At/4/a);break}if(M.canvas.width=M.canvas.height=0,M.font=G,J){const At=J/(J+tt);return c.set(L,At),At}return c.set(L,m),m}function f(L,F,M){const G=document.createElement("span"),$={angle:0,canvasWidth:0,hasText:F.str!=="",hasEOL:F.hasEOL,fontSize:0};L._textDivs.push(G);const J=s.Util.transform(L._transform,F.transform);let tt=Math.atan2(J[1],J[0]);const Lt=M[F.fontName];Lt.vertical&&(tt+=Math.PI/2);const At=L._fontInspectorEnabled&&Lt.fontSubstitution||Lt.fontFamily,Nt=Math.hypot(J[2],J[3]),pt=Nt*d(At);let ot,ft;tt===0?(ot=J[4],ft=J[5]-pt):(ot=J[4]+pt*Math.sin(tt),ft=J[5]-pt*Math.cos(tt));const gt="calc(var(--scale-factor)*",Q=G.style;L._container===L._rootContainer?(Q.left=`${(100*ot/L._pageWidth).toFixed(2)}%`,Q.top=`${(100*ft/L._pageHeight).toFixed(2)}%`):(Q.left=`${gt}${ot.toFixed(2)}px)`,Q.top=`${gt}${ft.toFixed(2)}px)`),Q.fontSize=`${gt}${Nt.toFixed(2)}px)`,Q.fontFamily=At,$.fontSize=Nt,G.setAttribute("role","presentation"),G.textContent=F.str,G.dir=F.dir,L._fontInspectorEnabled&&(G.dataset.fontName=Lt.fontSubstitutionLoadedName||F.fontName),tt!==0&&($.angle=tt*(180/Math.PI));let at=!1;if(F.str.length>1)at=!0;else if(F.str!==" "&&F.transform[0]!==F.transform[3]){const Rt=Math.abs(F.transform[0]),Dt=Math.abs(F.transform[3]);Rt!==Dt&&Math.max(Rt,Dt)/Math.min(Rt,Dt)>1.5&&(at=!0)}at&&($.canvasWidth=Lt.vertical?F.height:F.width),L._textDivProperties.set(G,$),L._isReadableStream&&L._layoutText(G)}function v(L){const{div:F,scale:M,properties:G,ctx:$,prevFontSize:J,prevFontFamily:tt}=L,{style:Lt}=F;let At="";if(G.canvasWidth!==0&&G.hasText){const{fontFamily:Nt}=Lt,{canvasWidth:pt,fontSize:ot}=G;(J!==ot||tt!==Nt)&&($.font=`${ot*M}px ${Nt}`,L.prevFontSize=ot,L.prevFontFamily=Nt);const{width:ft}=$.measureText(F.textContent);ft>0&&(At=`scaleX(${pt*M/ft})`)}G.angle!==0&&(At=`rotate(${G.angle}deg) ${At}`),At.length>0&&(Lt.transform=At)}function b(L){if(L._canceled)return;const F=L._textDivs,M=L._capability;if(F.length>r){M.resolve();return}if(!L._isReadableStream)for(const G of F)L._layoutText(G);M.resolve()}class T{constructor(F){var ft;let{textContentSource:M,container:G,viewport:$,textDivs:J,textDivProperties:tt,textContentItemsStr:Lt}=F;this._textContentSource=M,this._isReadableStream=M instanceof ReadableStream,this._container=this._rootContainer=G,this._textDivs=J||[],this._textContentItemsStr=Lt||[],this._fontInspectorEnabled=!!((ft=globalThis.FontInspector)!=null&&ft.enabled),this._reader=null,this._textDivProperties=tt||new WeakMap,this._canceled=!1,this._capability=Promise.withResolvers(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:$.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h()};const{pageWidth:At,pageHeight:Nt,pageX:pt,pageY:ot}=$.rawDims;this._transform=[1,0,0,-1,-pt,ot+Nt],this._pageWidth=At,this._pageHeight=Nt,(0,i.setLayerDimensions)(G,$),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(F,M){for(const G of F){if(G.str===void 0){if(G.type==="beginMarkedContentProps"||G.type==="beginMarkedContent"){const $=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),G.id!==null&&this._container.setAttribute("id",`${G.id}`),$.append(this._container)}else G.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(G.str),f(this,G,M)}}_layoutText(F){const M=this._layoutTextParams.properties=this._textDivProperties.get(F);if(this._layoutTextParams.div=F,v(this._layoutTextParams),M.hasText&&this._container.append(F),M.hasEOL){const G=document.createElement("br");G.setAttribute("role","presentation"),this._container.append(G)}}_render(){const{promise:F,resolve:M,reject:G}=Promise.withResolvers();let $=Object.create(null);if(this._isReadableStream){const J=()=>{this._reader.read().then(tt=>{let{value:Lt,done:At}=tt;if(At){M();return}Object.assign($,Lt.styles),this._processItems(Lt.items,$),J()},G)};this._reader=this._textContentSource.getReader(),J()}else if(this._textContentSource){const{items:J,styles:tt}=this._textContentSource;this._processItems(J,tt),M()}else throw new Error('No "textContentSource" parameter specified.');F.then(()=>{$=null,b(this)},this._capability.reject)}}function K(L){const F=new T(L);return F._render(),F}function q(L){let{container:F,viewport:M,textDivs:G,textDivProperties:$,mustRotate:J=!0,mustRescale:tt=!0}=L;if(J&&(0,i.setLayerDimensions)(F,{rotation:M.rotation}),tt){const Lt=h(),At={prevFontSize:null,prevFontFamily:null,div:null,scale:M.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Lt};for(const Nt of G)At.properties=$.get(Nt),At.div=Nt,v(At)}}},585:(n,l,t)=>{t.d(l,{PDFDataTransportStream:()=>r}),t(4114),t(6573),t(8100),t(7936),t(4628),t(7467),t(4732),t(9577),t(8992),t(7550);var s=t(4292),i=t(5419);class r{constructor(o,h){let{disableRange:_=!1,disableStream:d=!1}=h;(0,s.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:f,initialData:v,progressiveDone:b,contentDispositionFilename:T}=o;if(this._queuedChunks=[],this._progressiveDone=b,this._contentDispositionFilename=T,(v==null?void 0:v.length)>0){const K=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(K)}this._pdfDataRangeTransport=o,this._isStreamingSupported=!d,this._isRangeSupported=!_,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],o.addRangeListener((K,q)=>{this._onReceiveData({begin:K,chunk:q})}),o.addProgressListener((K,q)=>{this._onProgress({loaded:K,total:q})}),o.addProgressiveReadListener(K=>{this._onReceiveData({chunk:K})}),o.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),o.transportReady()}_onReceiveData(o){let{begin:h,chunk:_}=o;const d=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{const f=this._rangeReaders.some(function(v){return v._begin!==h?!1:(v._enqueue(d),!0)});(0,s.assert)(f,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var o;return((o=this._fullRequestReader)==null?void 0:o._loaded)??0}_onProgress(o){var h,_,d,f;o.total===void 0?(_=(h=this._rangeReaders[0])==null?void 0:h.onProgress)==null||_.call(h,{loaded:o.loaded}):(f=(d=this._fullRequestReader)==null?void 0:d.onProgress)==null||f.call(d,{loaded:o.loaded,total:o.total})}_onProgressiveDone(){var o;(o=this._fullRequestReader)==null||o.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(o){const h=this._rangeReaders.indexOf(o);h>=0&&this._rangeReaders.splice(h,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const o=this._queuedChunks;return this._queuedChunks=null,new a(this,o,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(o,h){if(h<=this._progressiveDataLength)return null;const _=new m(this,o,h);return this._pdfDataRangeTransport.requestDataRange(o,h),this._rangeReaders.push(_),_}cancelAllRequests(o){var h;(h=this._fullRequestReader)==null||h.cancel(o);for(const _ of this._rangeReaders.slice(0))_.cancel(o);this._pdfDataRangeTransport.abort()}}class a{constructor(o,h){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=o,this._done=_||!1,this._filename=(0,i.isPdfFile)(d)?d:null,this._queuedChunks=h||[],this._loaded=0;for(const f of this._queuedChunks)this._loaded+=f.byteLength;this._requests=[],this._headersReady=Promise.resolve(),o._fullRequestReader=this,this.onProgress=null}_enqueue(o){this._done||(this._requests.length>0?this._requests.shift().resolve({value:o,done:!1}):this._queuedChunks.push(o),this._loaded+=o.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const o=Promise.withResolvers();return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(o,h,_){this._stream=o,this._begin=h,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(o){if(!this._done){if(this._requests.length===0)this._queuedChunk=o;else{this._requests.shift().resolve({value:o,done:!1});for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const o=Promise.withResolvers();return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},6164:(n,l,t)=>{var i,r;t.d(l,{GlobalWorkerOptions:()=>s});class s{static get workerPort(){return e(this,i)}static set workerPort(m){if(!(typeof Worker<"u"&&m instanceof Worker)&&m!==null)throw new Error("Invalid `workerPort` type.");B(this,i,m)}static get workerSrc(){return e(this,r)}static set workerSrc(m){if(typeof m!="string")throw new Error("Invalid `workerSrc` type.");B(this,r,m)}}i=new WeakMap,r=new WeakMap,x(s,i,null),x(s,r,"")},8284:(n,l,t)=>{t.d(l,{XfaLayer:()=>i}),t(4114);var s=t(2050);class i{static setupStorage(a,m,c,o,h){const _=o.getValue(m,{value:null});switch(c.name){case"textarea":if(_.value!==null&&(a.textContent=_.value),h==="print")break;a.addEventListener("input",d=>{o.setValue(m,{value:d.target.value})});break;case"input":if(c.attributes.type==="radio"||c.attributes.type==="checkbox"){if(_.value===c.attributes.xfaOn?a.setAttribute("checked",!0):_.value===c.attributes.xfaOff&&a.removeAttribute("checked"),h==="print")break;a.addEventListener("change",d=>{o.setValue(m,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(_.value!==null&&a.setAttribute("value",_.value),h==="print")break;a.addEventListener("input",d=>{o.setValue(m,{value:d.target.value})})}break;case"select":if(_.value!==null){a.setAttribute("value",_.value);for(const d of c.children)d.attributes.value===_.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}a.addEventListener("input",d=>{const f=d.target.options,v=f.selectedIndex===-1?"":f[f.selectedIndex].value;o.setValue(m,{value:v})});break}}static setAttributes(a){let{html:m,element:c,storage:o=null,intent:h,linkService:_}=a;const{attributes:d}=c,f=m instanceof HTMLAnchorElement;d.type==="radio"&&(d.name=`${d.name}-${h}`);for(const[v,b]of Object.entries(d))if(b!=null)switch(v){case"class":b.length&&m.setAttribute(v,b.join(" "));break;case"dataId":break;case"id":m.setAttribute("data-element-id",b);break;case"style":Object.assign(m.style,b);break;case"textContent":m.textContent=b;break;default:(!f||v!=="href"&&v!=="newWindow")&&m.setAttribute(v,b)}f&&_.addLinkAttributes(m,d.href,d.newWindow),o&&d.dataId&&this.setupStorage(m,d.dataId,c,o)}static render(a){var T,K;const m=a.annotationStorage,c=a.linkService,o=a.xfaHtml,h=a.intent||"display",_=document.createElement(o.name);o.attributes&&this.setAttributes({html:_,element:o,intent:h,linkService:c});const d=h!=="richText",f=a.div;if(f.append(_),a.viewport){const q=`matrix(${a.viewport.transform.join(",")})`;f.style.transform=q}d&&f.setAttribute("class","xfaLayer xfaFont");const v=[];if(o.children.length===0){if(o.value){const q=document.createTextNode(o.value);_.append(q),d&&s.XfaText.shouldBuildText(o.name)&&v.push(q)}return{textDivs:v}}const b=[[o,-1,_]];for(;b.length>0;){const[q,L,F]=b.at(-1);if(L+1===q.children.length){b.pop();continue}const M=q.children[++b.at(-1)[1]];if(M===null)continue;const{name:G}=M;if(G==="#text"){const J=document.createTextNode(M.value);v.push(J),F.append(J);continue}const $=(T=M==null?void 0:M.attributes)!=null&&T.xmlns?document.createElementNS(M.attributes.xmlns,G):document.createElement(G);if(F.append($),M.attributes&&this.setAttributes({html:$,element:M,storage:m,intent:h,linkService:c}),((K=M.children)==null?void 0:K.length)>0)b.push([M,-1,$]);else if(M.value){const J=document.createTextNode(M.value);d&&s.XfaText.shouldBuildText(G)&&v.push(J),$.append(J)}}for(const q of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))q.setAttribute("readOnly",!0);return{textDivs:v}}static update(a){const m=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=m,a.div.hidden=!1}}},2050:(n,l,t)=>{t.d(l,{XfaText:()=>s}),t(4114);class s{static textContent(r){const a=[],m={items:a,styles:Object.create(null)};function c(o){var d;if(!o)return;let h=null;const _=o.name;if(_==="#text")h=o.value;else if(s.shouldBuildText(_))(d=o==null?void 0:o.attributes)!=null&&d.textContent?h=o.attributes.textContent:o.value&&(h=o.value);else return;if(h!==null&&a.push({str:h}),!!o.children)for(const f of o.children)c(f)}return c(r),m}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}},1228:(n,l,t)=>{t.a(n,async(s,i)=>{try{t.d(l,{AbortException:()=>r.AbortException,AnnotationEditorLayer:()=>o.AnnotationEditorLayer,AnnotationEditorParamsType:()=>r.AnnotationEditorParamsType,AnnotationEditorType:()=>r.AnnotationEditorType,AnnotationEditorUIManager:()=>h.AnnotationEditorUIManager,AnnotationLayer:()=>_.AnnotationLayer,AnnotationMode:()=>r.AnnotationMode,CMapCompressionType:()=>r.CMapCompressionType,ColorPicker:()=>d.ColorPicker,DOMSVGFactory:()=>m.DOMSVGFactory,DrawLayer:()=>f.DrawLayer,FeatureTest:()=>r.FeatureTest,GlobalWorkerOptions:()=>v.GlobalWorkerOptions,ImageKind:()=>r.ImageKind,InvalidPDFException:()=>r.InvalidPDFException,MissingPDFException:()=>r.MissingPDFException,OPS:()=>r.OPS,Outliner:()=>b.Outliner,PDFDataRangeTransport:()=>a.PDFDataRangeTransport,PDFDateString:()=>m.PDFDateString,PDFWorker:()=>a.PDFWorker,PasswordResponses:()=>r.PasswordResponses,PermissionFlag:()=>r.PermissionFlag,PixelsPerInch:()=>m.PixelsPerInch,RenderingCancelledException:()=>m.RenderingCancelledException,UnexpectedResponseException:()=>r.UnexpectedResponseException,Util:()=>r.Util,VerbosityLevel:()=>r.VerbosityLevel,XfaLayer:()=>T.XfaLayer,build:()=>a.build,createValidAbsoluteUrl:()=>r.createValidAbsoluteUrl,fetchData:()=>m.fetchData,getDocument:()=>a.getDocument,getFilenameFromUrl:()=>m.getFilenameFromUrl,getPdfFilenameFromUrl:()=>m.getPdfFilenameFromUrl,getXfaPageViewport:()=>m.getXfaPageViewport,isDataScheme:()=>m.isDataScheme,isPdfFile:()=>m.isPdfFile,noContextMenu:()=>m.noContextMenu,normalizeUnicode:()=>r.normalizeUnicode,renderTextLayer:()=>c.renderTextLayer,setLayerDimensions:()=>m.setLayerDimensions,shadow:()=>r.shadow,updateTextLayer:()=>c.updateTextLayer,version:()=>a.version});var r=t(4292),a=t(3831),m=t(5419),c=t(6814),o=t(9731),h=t(7830),_=t(6976),d=t(2259),f=t(4047),v=t(6164),b=t(4061),T=t(8284),K=s([a]);a=(K.then?(await K)():K)[0];const q="4.1.392",L="fcb76a78d";i()}catch(q){i(q)}})},5178:(n,l,t)=>{var c,lo,h,ho,d,yi;t.d(l,{MessageHandler:()=>m}),t(4628);var s=t(4292);const i={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new s.AbortException(v.message);case"MissingPDFException":return new s.MissingPDFException(v.message);case"PasswordException":return new s.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new s.UnknownErrorException(v.message,v.details);default:return new s.UnknownErrorException(v.message,v.toString())}}class m{constructor(b,T,K){x(this,c);x(this,h);x(this,d);this.sourceName=b,this.targetName=T,this.comObj=K,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=q=>{const L=q.data;if(L.targetName!==this.sourceName)return;if(L.stream){O(this,h,ho).call(this,L);return}if(L.callback){const M=L.callbackId,G=this.callbackCapabilities[M];if(!G)throw new Error(`Cannot resolve callback ${M}`);if(delete this.callbackCapabilities[M],L.callback===i.DATA)G.resolve(L.data);else if(L.callback===i.ERROR)G.reject(a(L.reason));else throw new Error("Unexpected callback case");return}const F=this.actionHandler[L.action];if(!F)throw new Error(`Unknown action from worker: ${L.action}`);if(L.callbackId){const M=this.sourceName,G=L.sourceName;new Promise(function($){$(F(L.data))}).then(function($){K.postMessage({sourceName:M,targetName:G,callback:i.DATA,callbackId:L.callbackId,data:$})},function($){K.postMessage({sourceName:M,targetName:G,callback:i.ERROR,callbackId:L.callbackId,reason:a($)})});return}if(L.streamId){O(this,c,lo).call(this,L);return}F(L.data)},K.addEventListener("message",this._onComObjOnMessage)}on(b,T){const K=this.actionHandler;if(K[b])throw new Error(`There is already an actionName called "${b}"`);K[b]=T}send(b,T,K){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,data:T},K)}sendWithPromise(b,T,K){const q=this.callbackId++,L=Promise.withResolvers();this.callbackCapabilities[q]=L;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,callbackId:q,data:T},K)}catch(F){L.reject(F)}return L.promise}sendWithStream(b,T,K,q){const L=this.streamId++,F=this.sourceName,M=this.targetName,G=this.comObj;return new ReadableStream({start:$=>{const J=Promise.withResolvers();return this.streamControllers[L]={controller:$,startCall:J,pullCall:null,cancelCall:null,isClosed:!1},G.postMessage({sourceName:F,targetName:M,action:b,streamId:L,data:T,desiredSize:$.desiredSize},q),J.promise},pull:$=>{const J=Promise.withResolvers();return this.streamControllers[L].pullCall=J,G.postMessage({sourceName:F,targetName:M,stream:r.PULL,streamId:L,desiredSize:$.desiredSize}),J.promise},cancel:$=>{(0,s.assert)($ instanceof Error,"cancel must have a valid reason");const J=Promise.withResolvers();return this.streamControllers[L].cancelCall=J,this.streamControllers[L].isClosed=!0,G.postMessage({sourceName:F,targetName:M,stream:r.CANCEL,streamId:L,reason:a($)}),J.promise}},K)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}c=new WeakSet,lo=function(b){const T=b.streamId,K=this.sourceName,q=b.sourceName,L=this.comObj,F=this,M=this.actionHandler[b.action],G={enqueue($){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,tt=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const Lt=this.desiredSize;this.desiredSize-=J,Lt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),L.postMessage({sourceName:K,targetName:q,stream:r.ENQUEUE,streamId:T,chunk:$},tt)},close(){this.isCancelled||(this.isCancelled=!0,L.postMessage({sourceName:K,targetName:q,stream:r.CLOSE,streamId:T}),delete F.streamSinks[T])},error($){(0,s.assert)($ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,L.postMessage({sourceName:K,targetName:q,stream:r.ERROR,streamId:T,reason:a($)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:b.desiredSize,ready:null};G.sinkCapability.resolve(),G.ready=G.sinkCapability.promise,this.streamSinks[T]=G,new Promise(function($){$(M(b.data,G))}).then(function(){L.postMessage({sourceName:K,targetName:q,stream:r.START_COMPLETE,streamId:T,success:!0})},function($){L.postMessage({sourceName:K,targetName:q,stream:r.START_COMPLETE,streamId:T,reason:a($)})})},h=new WeakSet,ho=function(b){const T=b.streamId,K=this.sourceName,q=b.sourceName,L=this.comObj,F=this.streamControllers[T],M=this.streamSinks[T];switch(b.stream){case r.START_COMPLETE:b.success?F.startCall.resolve():F.startCall.reject(a(b.reason));break;case r.PULL_COMPLETE:b.success?F.pullCall.resolve():F.pullCall.reject(a(b.reason));break;case r.PULL:if(!M){L.postMessage({sourceName:K,targetName:q,stream:r.PULL_COMPLETE,streamId:T,success:!0});break}M.desiredSize<=0&&b.desiredSize>0&&M.sinkCapability.resolve(),M.desiredSize=b.desiredSize,new Promise(function(G){var $;G(($=M.onPull)==null?void 0:$.call(M))}).then(function(){L.postMessage({sourceName:K,targetName:q,stream:r.PULL_COMPLETE,streamId:T,success:!0})},function(G){L.postMessage({sourceName:K,targetName:q,stream:r.PULL_COMPLETE,streamId:T,reason:a(G)})});break;case r.ENQUEUE:if((0,s.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(b.chunk);break;case r.CLOSE:if((0,s.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),O(this,d,yi).call(this,F,T);break;case r.ERROR:(0,s.assert)(F,"error should have stream controller"),F.controller.error(a(b.reason)),O(this,d,yi).call(this,F,T);break;case r.CANCEL_COMPLETE:b.success?F.cancelCall.resolve():F.cancelCall.reject(a(b.reason)),O(this,d,yi).call(this,F,T);break;case r.CANCEL:if(!M)break;new Promise(function(G){var $;G(($=M.onCancel)==null?void 0:$.call(M,a(b.reason)))}).then(function(){L.postMessage({sourceName:K,targetName:q,stream:r.CANCEL_COMPLETE,streamId:T,success:!0})},function(G){L.postMessage({sourceName:K,targetName:q,stream:r.CANCEL_COMPLETE,streamId:T,reason:a(G)})}),M.sinkCapability.reject(a(b.reason)),M.isCancelled=!0,delete this.streamSinks[T];break;default:throw new Error("Unexpected stream case")}},d=new WeakSet,yi=async function(b,T){var K,q,L;await Promise.allSettled([(K=b.startCall)==null?void 0:K.promise,(q=b.pullCall)==null?void 0:q.promise,(L=b.cancelCall)==null?void 0:L.promise]),delete this.streamControllers[T]}},7651:(n,l,t)=>{t.d(l,{MurmurHash3_64:()=>a}),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577);const s=3285377520,i=4294901760,r=65535;class a{constructor(c){this.h1=c?c&4294967295:s,this.h2=c?c&4294967295:s}update(c){let o,h;if(typeof c=="string"){o=new Uint8Array(c.length*2),h=0;for(let G=0,$=c.length;G<$;G++){const J=c.charCodeAt(G);J<=255?o[h++]=J:(o[h++]=J>>>8,o[h++]=J&255)}}else if(ArrayBuffer.isView(c))o=c.slice(),h=o.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const _=h>>2,d=h-_*4,f=new Uint32Array(o.buffer,0,_);let v=0,b=0,T=this.h1,K=this.h2;const q=3432918353,L=461845907,F=q&r,M=L&r;for(let G=0;G<_;G++)G&1?(v=f[G],v=v*q&i|v*F&r,v=v<<15|v>>>17,v=v*L&i|v*M&r,T^=v,T=T<<13|T>>>19,T=T*5+3864292196):(b=f[G],b=b*q&i|b*F&r,b=b<<15|b>>>17,b=b*L&i|b*M&r,K^=b,K=K<<13|K>>>19,K=K*5+3864292196);switch(v=0,d){case 3:v^=o[_*4+2]<<16;case 2:v^=o[_*4+1]<<8;case 1:v^=o[_*4],v=v*q&i|v*F&r,v=v<<15|v>>>17,v=v*L&i|v*M&r,_&1?T^=v:K^=v}this.h1=T,this.h2=K}hexdigest(){let c=this.h1,o=this.h2;return c^=o>>>1,c=c*3981806797&i|c*36045&r,o=o*4283543511&i|((o<<16|c>>>16)*2950163797&i)>>>16,c^=o>>>1,c=c*444984403&i|c*60499&r,o=o*3301882366&i|((o<<16|c>>>16)*3120437893&i)>>>16,c^=o>>>1,(c>>>0).toString(16).padStart(8,"0")+(o>>>0).toString(16).padStart(8,"0")}}},4292:(n,l,t)=>{var y,Ai,I,Cr;t.d(l,{AbortException:()=>ae,AnnotationBorderStyleType:()=>K,AnnotationEditorParamsType:()=>d,AnnotationEditorPrefix:()=>h,AnnotationEditorType:()=>_,AnnotationMode:()=>o,AnnotationPrefix:()=>R,AnnotationType:()=>T,BaseException:()=>gt,CMapCompressionType:()=>L,FONT_IDENTITY_MATRIX:()=>r,FeatureTest:()=>he,FormatError:()=>Qt,IDENTITY_MATRIX:()=>i,ImageKind:()=>b,InvalidPDFException:()=>Rt,LINE_FACTOR:()=>m,MAX_IMAGE_SIZE_TO_CACHE:()=>a,MissingPDFException:()=>Dt,OPS:()=>F,PasswordException:()=>Q,PasswordResponses:()=>M,PermissionFlag:()=>f,RenderingIntentFlag:()=>c,TextRenderingMode:()=>v,UnexpectedResponseException:()=>Gt,UnknownErrorException:()=>at,Util:()=>le,VerbosityLevel:()=>q,assert:()=>Nt,bytesToString:()=>be,createValidAbsoluteUrl:()=>ot,getUuid:()=>E,getVerbosityLevel:()=>J,info:()=>tt,isNodeJS:()=>s,normalizeUnicode:()=>g,objectFromMap:()=>It,setVerbosityLevel:()=>$,shadow:()=>ft,string32:()=>Ut,stringToBytes:()=>me,unreachable:()=>At,warn:()=>Lt}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(4603),t(7566),t(8721);const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),i=[1,0,0,1,0,0],r=[.001,0,0,.001,0,0],a=1e7,m=1.35,c={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},h="pdfjs_internal_editor_",_={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},d={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},f={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},T={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},K={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},q={ERRORS:0,WARNINGS:1,INFOS:5},L={NONE:0,BINARY:1},F={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},M={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let G=q.WARNINGS;function $(S){Number.isInteger(S)&&(G=S)}function J(){return G}function tt(S){G>=q.INFOS&&console.log(`Info: ${S}`)}function Lt(S){G>=q.WARNINGS&&console.log(`Warning: ${S}`)}function At(S){throw new Error(S)}function Nt(S,A){S||At(A)}function pt(S){switch(S==null?void 0:S.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ot(S){var j;let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!S)return null;try{if(w&&typeof S=="string"&&(w.addDefaultProtocol&&S.startsWith("www.")&&((j=S.match(/\./g))==null?void 0:j.length)>=2&&(S=`http://${S}`),w.tryConvertEncoding))try{S=Xt(S)}catch{}const Z=A?new URL(S,A):new URL(S);if(pt(Z))return Z}catch{}return null}function ft(S,A,w){let j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Object.defineProperty(S,A,{value:w,enumerable:!j,configurable:!0,writable:!1}),w}const gt=function(){function S(A,w){this.constructor===S&&At("Cannot initialize BaseException."),this.message=A,this.name=w}return S.prototype=new Error,S.constructor=S,S}();class Q extends gt{constructor(A,w){super(A,"PasswordException"),this.code=w}}class at extends gt{constructor(A,w){super(A,"UnknownErrorException"),this.details=w}}class Rt extends gt{constructor(A){super(A,"InvalidPDFException")}}class Dt extends gt{constructor(A){super(A,"MissingPDFException")}}class Gt extends gt{constructor(A,w){super(A,"UnexpectedResponseException"),this.status=w}}class Qt extends gt{constructor(A){super(A,"FormatError")}}class ae extends gt{constructor(A){super(A,"AbortException")}}function be(S){(typeof S!="object"||(S==null?void 0:S.length)===void 0)&&At("Invalid argument for bytesToString");const A=S.length,w=8192;if(A<w)return String.fromCharCode.apply(null,S);const j=[];for(let Z=0;Z<A;Z+=w){const X=Math.min(Z+w,A),rt=S.subarray(Z,X);j.push(String.fromCharCode.apply(null,rt))}return j.join("")}function me(S){typeof S!="string"&&At("Invalid argument for stringToBytes");const A=S.length,w=new Uint8Array(A);for(let j=0;j<A;++j)w[j]=S.charCodeAt(j)&255;return w}function Ut(S){return String.fromCharCode(S>>24&255,S>>16&255,S>>8&255,S&255)}function It(S){const A=Object.create(null);for(const[w,j]of S)A[w]=j;return A}function St(){const S=new Uint8Array(4);return S[0]=1,new Uint32Array(S.buffer,0,1)[0]===1}function $t(){try{return new Function(""),!0}catch{return!1}}class he{static get isLittleEndian(){return ft(this,"isLittleEndian",St())}static get isEvalSupported(){return ft(this,"isEvalSupported",$t())}static get isOffscreenCanvasSupported(){return ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ft(this,"platform",{isMac:navigator.platform.includes("Mac")}):ft(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var A,w;return ft(this,"isCSSRoundSupported",(w=(A=globalThis.CSS)==null?void 0:A.supports)==null?void 0:w.call(A,"width: round(1.5px, 1px)"))}}const jt=Array.from(Array(256).keys(),S=>S.toString(16).padStart(2,"0"));class le{static makeHexColor(A,w,j){return`#${jt[A]}${jt[w]}${jt[j]}`}static scaleMinMax(A,w){let j;A[0]?(A[0]<0&&(j=w[0],w[0]=w[2],w[2]=j),w[0]*=A[0],w[2]*=A[0],A[3]<0&&(j=w[1],w[1]=w[3],w[3]=j),w[1]*=A[3],w[3]*=A[3]):(j=w[0],w[0]=w[1],w[1]=j,j=w[2],w[2]=w[3],w[3]=j,A[1]<0&&(j=w[1],w[1]=w[3],w[3]=j),w[1]*=A[1],w[3]*=A[1],A[2]<0&&(j=w[0],w[0]=w[2],w[2]=j),w[0]*=A[2],w[2]*=A[2]),w[0]+=A[4],w[1]+=A[5],w[2]+=A[4],w[3]+=A[5]}static transform(A,w){return[A[0]*w[0]+A[2]*w[1],A[1]*w[0]+A[3]*w[1],A[0]*w[2]+A[2]*w[3],A[1]*w[2]+A[3]*w[3],A[0]*w[4]+A[2]*w[5]+A[4],A[1]*w[4]+A[3]*w[5]+A[5]]}static applyTransform(A,w){const j=A[0]*w[0]+A[1]*w[2]+w[4],Z=A[0]*w[1]+A[1]*w[3]+w[5];return[j,Z]}static applyInverseTransform(A,w){const j=w[0]*w[3]-w[1]*w[2],Z=(A[0]*w[3]-A[1]*w[2]+w[2]*w[5]-w[4]*w[3])/j,X=(-A[0]*w[1]+A[1]*w[0]+w[4]*w[1]-w[5]*w[0])/j;return[Z,X]}static getAxialAlignedBoundingBox(A,w){const j=this.applyTransform(A,w),Z=this.applyTransform(A.slice(2,4),w),X=this.applyTransform([A[0],A[3]],w),rt=this.applyTransform([A[2],A[1]],w);return[Math.min(j[0],Z[0],X[0],rt[0]),Math.min(j[1],Z[1],X[1],rt[1]),Math.max(j[0],Z[0],X[0],rt[0]),Math.max(j[1],Z[1],X[1],rt[1])]}static inverseTransform(A){const w=A[0]*A[3]-A[1]*A[2];return[A[3]/w,-A[1]/w,-A[2]/w,A[0]/w,(A[2]*A[5]-A[4]*A[3])/w,(A[4]*A[1]-A[5]*A[0])/w]}static singularValueDecompose2dScale(A){const w=[A[0],A[2],A[1],A[3]],j=A[0]*w[0]+A[1]*w[2],Z=A[0]*w[1]+A[1]*w[3],X=A[2]*w[0]+A[3]*w[2],rt=A[2]*w[1]+A[3]*w[3],ct=(j+rt)/2,bt=Math.sqrt((j+rt)**2-4*(j*rt-X*Z))/2,Et=ct+bt||1,vt=ct-bt||1;return[Math.sqrt(Et),Math.sqrt(vt)]}static normalizeRect(A){const w=A.slice(0);return A[0]>A[2]&&(w[0]=A[2],w[2]=A[0]),A[1]>A[3]&&(w[1]=A[3],w[3]=A[1]),w}static intersect(A,w){const j=Math.max(Math.min(A[0],A[2]),Math.min(w[0],w[2])),Z=Math.min(Math.max(A[0],A[2]),Math.max(w[0],w[2]));if(j>Z)return null;const X=Math.max(Math.min(A[1],A[3]),Math.min(w[1],w[3])),rt=Math.min(Math.max(A[1],A[3]),Math.max(w[1],w[3]));return X>rt?null:[j,X,Z,rt]}static bezierBoundingBox(A,w,j,Z,X,rt,ct,bt,Et){return Et?(Et[0]=Math.min(Et[0],A,ct),Et[1]=Math.min(Et[1],w,bt),Et[2]=Math.max(Et[2],A,ct),Et[3]=Math.max(Et[3],w,bt)):Et=[Math.min(A,ct),Math.min(w,bt),Math.max(A,ct),Math.max(w,bt)],O(this,I,Cr).call(this,A,j,X,ct,w,Z,rt,bt,3*(-A+3*(j-X)+ct),6*(A-2*j+X),3*(j-A),Et),O(this,I,Cr).call(this,A,j,X,ct,w,Z,rt,bt,3*(-w+3*(Z-rt)+bt),6*(w-2*Z+rt),3*(Z-w),Et),Et}}y=new WeakSet,Ai=function(A,w,j,Z,X,rt,ct,bt,Et,vt){if(Et<=0||Et>=1)return;const kt=1-Et,z=Et*Et,et=z*Et,lt=kt*(kt*(kt*A+3*Et*w)+3*z*j)+et*Z,mt=kt*(kt*(kt*X+3*Et*rt)+3*z*ct)+et*bt;vt[0]=Math.min(vt[0],lt),vt[1]=Math.min(vt[1],mt),vt[2]=Math.max(vt[2],lt),vt[3]=Math.max(vt[3],mt)},I=new WeakSet,Cr=function(A,w,j,Z,X,rt,ct,bt,Et,vt,kt,z){if(Math.abs(Et)<1e-12){Math.abs(vt)>=1e-12&&O(this,y,Ai).call(this,A,w,j,Z,X,rt,ct,bt,-kt/vt,z);return}const et=vt**2-4*kt*Et;if(et<0)return;const lt=Math.sqrt(et),mt=2*Et;O(this,y,Ai).call(this,A,w,j,Z,X,rt,ct,bt,(-vt+lt)/mt,z),O(this,y,Ai).call(this,A,w,j,Z,X,rt,ct,bt,(-vt-lt)/mt,z)},x(le,y),x(le,I);function Xt(S){return decodeURIComponent(escape(S))}let nt=null,u=null;function g(S){return nt||(nt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,u=new Map([["\uFB05","\u017Ft"]])),S.replaceAll(nt,(A,w,j)=>w?w.normalize("NFKC"):u.get(j))}function E(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const S=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(S);else for(let A=0;A<32;A++)S[A]=Math.floor(Math.random()*255);return be(S)}const R="pdfjs_internal_id_"}},$r={};function ks(n){var l=$r[n];if(l!==void 0)return l.exports;var t=$r[n]={exports:{}};return sl[n].call(t.exports,t,t.exports,ks),t.exports}(()=>{var n=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",l=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=r=>{r&&r.d<1&&(r.d=1,r.forEach(a=>a.r--),r.forEach(a=>a.r--?a.r++:a()))},i=r=>r.map(a=>{if(a!==null&&typeof a=="object"){if(a[n])return a;if(a.then){var m=[];m.d=0,a.then(h=>{c[l]=h,s(m)},h=>{c[t]=h,s(m)});var c={};return c[n]=h=>h(m),c}}var o={};return o[n]=h=>{},o[l]=a,o});ks.a=(r,a,m)=>{var c;m&&((c=[]).d=-1);var o=new Set,h=r.exports,_,d,f,v=new Promise((b,T)=>{f=T,d=b});v[l]=h,v[n]=b=>(c&&b(c),o.forEach(b),v.catch(T=>{})),r.exports=v,a(b=>{_=i(b);var T,K=()=>_.map(L=>{if(L[t])throw L[t];return L[l]}),q=new Promise(L=>{T=()=>L(K),T.r=0;var F=M=>M!==c&&!o.has(M)&&(o.add(M),M&&!M.d&&(T.r++,M.push(T)));_.map(M=>M[n](F))});return T.r?q:K()},b=>(b?f(v[t]=b):d(h),s(c))),c&&c.d<0&&(c.d=0)}})(),ks.d=(n,l)=>{for(var t in l)ks.o(l,t)&&!ks.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:l[t]})},ks.o=(n,l)=>Object.prototype.hasOwnProperty.call(n,l);var fe=ks(1228);fe=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=fe),fe.AbortException,fe.AnnotationEditorLayer,fe.AnnotationEditorParamsType,fe.AnnotationEditorType,fe.AnnotationEditorUIManager,fe.AnnotationLayer,fe.AnnotationMode,fe.CMapCompressionType,fe.ColorPicker,fe.DOMSVGFactory,fe.DrawLayer,fe.FeatureTest;var nl=fe.GlobalWorkerOptions;fe.ImageKind,fe.InvalidPDFException,fe.MissingPDFException,fe.OPS,fe.Outliner,fe.PDFDataRangeTransport,fe.PDFDateString,fe.PDFWorker,fe.PasswordResponses,fe.PermissionFlag,fe.PixelsPerInch,fe.RenderingCancelledException,fe.UnexpectedResponseException,fe.Util,fe.VerbosityLevel,fe.XfaLayer,fe.build,fe.createValidAbsoluteUrl,fe.fetchData;var il=fe.getDocument;fe.getFilenameFromUrl,fe.getPdfFilenameFromUrl,fe.getXfaPageViewport,fe.isDataScheme,fe.isPdfFile,fe.noContextMenu,fe.normalizeUnicode,fe.renderTextLayer,fe.setLayerDimensions,fe.shadow,fe.updateTextLayer,fe.version;const rl="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-cdn/cdn/cmaps/",al="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-cdn/cdn/pdf-regacy.worker.mjs";class Li{constructor(l,t=2,s=async(i,r)=>{}){if(!l||!l.dataset.url)throw new Error("PdfConvert: failed to instanciate");this.element=l,this.url=l.dataset.url,this.scale=t,this.data=[],this.callback=s}async init(){fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(l=>l.blob()).then(l=>{var t=new Blob([l],{type:"application/pdf"});return Gr(t)}).then(l=>this.convertFiles(l)).catch(l=>{this.loading=!1,this.error=l})}blobInit(){return new Promise((l,t)=>{var s=Vr(this.url,"application/pdf");Gr(s).then(i=>this.convertFiles(i)).then(()=>l()).catch(i=>{this.loading=!1,this.error=i})})}convertFiles(l){return new Promise((t,s)=>{nl.workerSrc=al;const i=il({data:atob(l),cMapUrl:rl,cMapPacked:!0});if(i){let r;i.onProgress=a=>{a.loaded&&(r&&clearTimeout(r),r=setTimeout(()=>{this.element.querySelector("img")},1e4))},i.promise.then(async a=>{for(let m=1;m<=a.numPages;m++)await this.pdf2png(m,a)},a=>{console.error(a)}).then(async()=>{await this.callback(this.data,this.element),t()})}else s()})}pdf2png(l,t){const s=this.scale,i=this.data;return new Promise(r=>{t.getPage(l).then(function(a){var m=a.getViewport({scale:s});let c=100/72;var o=document.createElement("canvas"),h=o.getContext("2d");o.height=m.height*c,o.width=m.width*c;var _={canvasContext:h,viewport:m,transform:[c,0,0,c,0,0]},d=a.render(_);d.promise.then(()=>{i.push(o.toDataURL("image/png")),r()})})})}}function ol(n,l){var t="application/octet-stream";if(l=="pdf")var s=Vr(n,t);else return;var i=(window.URL||window.webkitURL).createObjectURL(s);return i}function Vr(n,l){const t=atob(n),s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return new Blob([s.buffer],{type:l})}function Gr(n){return new Promise(l=>{const t=new FileReader;t.readAsDataURL(n),t.onload=()=>{l(t.result.replace("data:application/pdf;base64,",""))}})}document.querySelectorAll('[data-role="file-display"]').forEach(n=>{const l=n.dataset.fileData,t="data:image/"+n.dataset.extension+";base64,"+l;n.src=t}),document.querySelectorAll('[data-role="additionalFiles"]').forEach(n=>{const l=n.dataset.fileData,t=n.dataset.extension,s=ol(l,t);n.removeAttribute("data-file-data"),n.removeAttribute("data-extension"),n.download=n.dataset.download??`test.${t}`,n.setAttribute("target","_blank"),n.href=s});const Wr=document.querySelectorAll('[data-role="pdf-preview-dl"]');if(Wr.length>0){const n=Array.from(Wr),l=async(t,s)=>{const i=document.createElement("div");i.classList.add("pdf-preview__container");for(const r of t)await new Promise(a=>{const m=document.createElement("img");m.classList.add("pdf__img"),m.onload=()=>{i.appendChild(m),s.innerHTML=null,s.appendChild(i),a()},m.src=r})};for(const t of n){const s=new Li(t,1,l);t.dataset.value==="blob"?await s.blobInit():await s.init()}}const Xr=document.querySelectorAll('[data-role="download-document-dialog"]');if(Xr.length>0){const n=Array.from(Xr);for(const l of n){const t=document.querySelector(l.dataset.target),s=t.querySelector('[data-role="dialog-dismiss"]'),i=l.querySelector(".download-document__value"),r=l.querySelector('input[type="hidden"]'),a=l.querySelector("a"),m=t.querySelector(".scroll-check>button"),c=t.querySelector('input[type="checkbox"]'),o=t.querySelector(".dialog__body"),h=t.querySelector(".pdf-preview");c&&m&&(c.addEventListener("change",v=>{m.disabled=!v.target.checked}),m.addEventListener("click",v=>{a.click(),s.click();const b=new Date().toISOString();r.value=b,r.dispatchEvent(new Event("change")),i.textContent=`\u627F\u8AFE\u6E08\u307F ${b.slice(0,10)}`}));const _=()=>{_.read||!c||(_.read=Math.abs(o.scrollHeight-o.clientHeight-o.scrollTop)<3,_.read&&c&&(c.disabled=!1))},d=async(v,b)=>{const T=document.createElement("div");T.classList.add("pdf-preview__container");let K=0;for(const q of v)await new Promise(L=>{const F=document.createElement("img");F.classList.add("pdf__img"),F.onload=()=>{if(T.appendChild(F),K===v.length-1){if(c){let M=new MutationObserver(function(G){b.contains(F)&&(_(),window.addEventListener("resize",_),o.addEventListener("scroll",_),M.disconnect())});M.observe(b,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}b.innerHTML=null,b.appendChild(T)}L()},F.src=q}),K+=1},f=new Li(h,2,d);l.dataset.value==="blob"?await f.blobInit():await f.init()}}document.querySelectorAll('[data-role="open-blank"]').forEach(n=>{fetch(n.dataset.url,{headers:{"Content-Type":"application/pdf"}}).then(l=>l.blob()).then(l=>{var t=new Blob([l],{type:"application/octet-stream"});n.href=(window.URL||window.webkitURL).createObjectURL(t)})});const Yr=document.querySelectorAll('[data-role="debug-pdf"]');if(Yr.length>0){const n=Array.from(Yr),l=async(t,s)=>{const i=document.createElement("div");i.classList.add("pdf-preview__container");for(const r of t)await new Promise(a=>{const m=document.createElement("img");m.classList.add("pdf__img"),m.onload=()=>{i.appendChild(m),s.innerHTML=null,s.appendChild(i),a()},m.src=r})};for(const t of n)await new Li(t,1,l).blobInit()}document.querySelectorAll('tbody>tr[data-role="tr-link"]').forEach(n=>n.addEventListener("click",()=>{location.href=n.dataset.url}))})();
