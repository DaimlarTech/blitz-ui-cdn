var vh=Object.defineProperty;var yh=(ke,Me,je)=>Me in ke?vh(ke,Me,{enumerable:!0,configurable:!0,writable:!0,value:je}):ke[Me]=je;var ye=(ke,Me,je)=>(yh(ke,typeof Me!="symbol"?Me+"":Me,je),je),Mn=(ke,Me,je)=>{if(!Me.has(ke))throw TypeError("Cannot "+je)};var e=(ke,Me,je)=>(Mn(ke,Me,"read from private field"),je?je.call(ke):Me.get(ke)),x=(ke,Me,je)=>{if(Me.has(ke))throw TypeError("Cannot add the same private member more than once");Me instanceof WeakSet?Me.add(ke):Me.set(ke,je)},z=(ke,Me,je,Rs)=>(Mn(ke,Me,"write to private field"),Rs?Rs.call(ke,je):Me.set(ke,je),je);var bs=(ke,Me,je,Rs)=>({set _(An){z(ke,Me,An,je)},get _(){return e(ke,Me,Rs)}}),O=(ke,Me,je)=>(Mn(ke,Me,"access private method"),je);(async()=>{(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const ke=document.querySelectorAll(".navigation-drawer"),Me=document.querySelectorAll(".navigation-drawer__dialog"),je=document.querySelectorAll('[data-role="drawer"]');je.forEach(i=>i.addEventListener("click",Rs)),ke.forEach(i=>i.addEventListener("click",Rs)),Me.forEach(i=>i.addEventListener("click",o=>{o.stopPropagation()}));function Rs(){ke.forEach(o=>o.classList.toggle("drawer_show")),je.forEach(o=>o.classList.toggle("toggler_show"));const i=go();document.querySelector("body:has(.drawer_show)")?document.body.style.paddingRight=`${i}px`:document.body.style.paddingRight=0}const An=document.querySelectorAll(".drawer"),fo=document.querySelectorAll('[data-role="drawer-toggler"]');An.forEach(i=>{i.addEventListener("click",()=>{i.classList.remove("drawer_is_open")});const o=i.querySelector(".drawer__content");o&&o.addEventListener("click",t=>{t.stopPropagation()})}),fo.forEach(i=>{i.addEventListener("click",()=>{const o=document.querySelector(i.dataset.target);o&&o.classList.toggle("drawer_is_open")})});function go(){const i=document.createElement("div");i.style.overflowY="scroll",document.body.appendChild(i);const o=i.clientWidth;return i.offsetWidth-o}document.addEventListener("DOMContentLoaded",function(){const i=document.getElementById("agreement-box"),o=document.getElementById("agreement-check"),t=document.getElementById("agree_chk_id");if(t&&i){let s=function(r,a){let m;return function(...l){const h=()=>{clearTimeout(m),r(...l)};clearTimeout(m),m=setTimeout(h,a)}},n=function(){Math.abs(i.scrollHeight-i.clientHeight-i.scrollTop)<=1&&t.disabled&&(t.disabled=!1,o.classList.remove("check-disabled"),o.classList.add("check-enabled"),t.classList.add("check-enabled"))};t.disabled=!0,i.addEventListener("scroll",s(n,100)),window.addEventListener("load",n)}}),document.addEventListener("DOMContentLoaded",function(){const i="noantisocial",o="edelivery",t=document.getElementById("confirmButton");if(t){let s=function(){const r=document.getElementById(i).checked,a=document.getElementById(o).checked;t.disabled=!(r&&a)},n=function(r,a,m,l,h,p,w){const f=document.getElementById(r),g=document.getElementById(a),v=document.getElementById(m),A=document.getElementById(l),R=document.getElementById(h),V=document.getElementById(p),$=document.getElementById(w);A.disabled=!0,R.disabled=!0;function L(){let D=!(g.clientHeight<v.scrollHeight)||g.scrollHeight-g.scrollTop<=g.clientHeight+1;A.disabled=!D}f.addEventListener("shown.bs.modal",function(){L(),g.addEventListener("scroll",L)}),A.addEventListener("click",function(){this.disabled||(V.style.display="none",R.disabled=!1,$.classList.remove("check-disabled"),$.classList.add("check-enabled"),R.classList.remove("check-disabled"),R.classList.add("check-enabled"))}),R.addEventListener("change",s)};t.disabled=!0,n("noantisocialModal","noantisocialBox","noantisocialItem","noantisocialButton",i,"noantisocialText","noantisocialLabel"),n("edeliveryModal","edeliveryBox","edeliveryItem","edeliveryButton",o,"edeliveryText","edeliveryLabel"),s()}});const Tr=document.querySelector('[data-role="zip-search_input"]'),Fi=document.querySelector('[data-role="zip-search_btn"'),Cr=document.querySelector("#prefecture"),mo=document.querySelector("#city"),vo=document.querySelector("#street"),yo=document.querySelector("#js-zip_error"),bo="https://api.zipaddress.net/";var wn="",Ni="";Tr&&Fi&&(Tr.addEventListener("input",wo),Fi.addEventListener("click",_o));async function Ao(){const i=`${bo}?zipcode=${wn}`;return fetch(i).then(o=>o.json()).then(o=>o.code!==200?{data:o.message,error:!0}:{data:o.data,error:!1})}function wo(i){const o=i.target.value;Fi.disabled=!0,Ni="",o.length===7?(wn=o,Fi.disabled=!1):o.length!=0&&(Ni="7\u6841\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),Lr()}async function _o(i){var o;if(wn.length===7){const t=await Ao();if(t.error){Ni=t.data,Lr();return}i.target.dataset.type==="text"?Cr.value=t.data.pref:Cr.value=_n[o=t.data.pref]??(_n[o]=""),mo.value=t.data.city,vo.value=t.data.town}}function Lr(){yo.textContent=Ni}const _n={\u5317\u6D77\u9053:1,\u9752\u68EE\u770C:2,\u5CA9\u624B\u770C:3,\u5BAE\u57CE\u770C:4,\u79CB\u7530\u770C:5,\u5C71\u5F62\u770C:6,\u798F\u5CF6\u770C:7,\u8328\u57CE\u770C:8,\u6803\u6728\u770C:9,\u7FA4\u99AC\u770C:10,\u57FC\u7389\u770C:11,\u5343\u8449\u770C:12,\u6771\u4EAC\u90FD:13,\u795E\u5948\u5DDD\u770C:14,\u65B0\u6F5F\u770C:15,\u5BCC\u5C71\u770C:16,\u77F3\u5DDD\u770C:17,\u798F\u4E95\u770C:18,\u5C71\u68A8\u770C:19,\u9577\u91CE\u770C:20,\u5C90\u961C\u770C:21,\u9759\u5CA1\u770C:22,\u611B\u77E5\u770C:23,\u4E09\u91CD\u770C:24,\u6ECB\u8CC0\u770C:25,\u4EAC\u90FD\u5E9C:26,\u5927\u962A\u5E9C:27,\u5175\u5EAB\u770C:28,\u5948\u826F\u770C:29,\u548C\u6B4C\u5C71\u770C:30,\u9CE5\u53D6\u770C:31,\u5CF6\u6839\u770C:32,\u5CA1\u5C71\u770C:33,\u5E83\u5CF6\u770C:34,\u5C71\u53E3\u770C:35,\u5FB3\u5CF6\u770C:36,\u9999\u5DDD\u770C:37,\u611B\u5A9B\u770C:38,\u9AD8\u77E5\u770C:39,\u798F\u5CA1\u770C:40,\u4F50\u8CC0\u770C:41,\u9577\u5D0E\u770C:42,\u718A\u672C\u770C:43,\u5927\u5206\u770C:44,\u5BAE\u5D0E\u770C:45,\u9E7F\u5150\u5CF6\u770C:46,\u6C96\u7E04\u770C:47};document.querySelectorAll('#admin-body form:has(button[data-role="search-reset"])').forEach(i=>{i.querySelector('button[data-role="search-reset"]').addEventListener("click",()=>{const o=i.querySelectorAll('input[type="text"],input[type="number"],input[type="date"]'),t=i.querySelectorAll("input:checked");o.forEach(s=>{s.value=null}),t.forEach(s=>{s.checked=!1})})});const Rr="button-admin_type_line",kr="button-admin_icon";document.querySelectorAll('[data-role="toggle-edit"]').forEach(i=>{const o=i.dataset.id,t=(s=void 0)=>{const n=i.dataset.editable==="false";s&&n&&window.location.replace(location.href);const r=document.querySelector(`[data-role="editable"][data-id="${o}"]`);r.querySelectorAll("input,select,textarea").forEach(m=>{m.readOnly=n,m.setAttribute("tabindex",n?-1:0)});const a=r.querySelector('[data-role="submit-btns"]');a.style.visibility=n?"hidden":"visible",a.style.display=n?"none":"flex",i.textContent=n?"\u7DE8\u96C6\u3059\u308B":"\u30AD\u30E3\u30F3\u30BB\u30EB",i.classList.remove(Rr,kr),n?i.classList.add(kr):i.classList.add(Rr),i.dataset.editable=n};t(),i.addEventListener("click",t)}),document.querySelectorAll('[data-role="accordion"]').forEach(i=>{const o=i.querySelectorAll(".accordion__item");o.forEach(t=>{t.querySelector(".accordion__button").addEventListener("click",()=>{o.forEach(s=>{let n="0px",r="hidden",a="add";const m=s.querySelector(".accordion__button-icon"),l=s.querySelector(".accordion__content"),h=s.dataset.state==="hidden";l.classList.remove("accordion__content_show"),s===t&&h&&(l.classList.add("accordion__content_show"),n=`${l.scrollHeight}px`,r="show",a="remove"),l.style.maxHeight=n,m.textContent=a,s.dataset.state=r})})})});const Eo=document.getElementById("js-dialog-area"),xo=document.querySelectorAll('[data-role="dialog-dismiss"]'),So=document.querySelectorAll('[data-role="dialog-toggler"]'),Mr=document.querySelectorAll(".dialog"),To=document.querySelectorAll(".dialog__container"),Bs="dialog_is_open",Ir="dialog_close_hard";Ro(),Mr.forEach(i=>{document.getElementById("js-dialog-area").appendChild(i),i.classList.contains(Ir)||i.addEventListener("click",Pr)}),So.forEach(i=>{i.addEventListener("click",Co)}),xo.forEach(i=>{i.addEventListener("click",Pr)}),To.forEach(i=>i.addEventListener("click",Lo)),window.addEventListener("keydown",i=>{i.key==="Escape"&&document.querySelectorAll(`.${Bs}:not(.${Ir})`).forEach(o=>o.classList.remove(Bs))});function Co(){const i=document.querySelector(this.dataset.target);if(i.classList.toggle(Bs),i.classList.contains(Bs)){const o=ko();document.body.style.paddingRight=`${o}px`}else document.body.style.paddingRight="0px"}function Pr(){document.querySelectorAll(`.${Bs}`).forEach(i=>i.classList.remove(Bs)),document.body.style.paddingRight="0px"}function Lo(i){i.stopPropagation()}function Ro(){if(!Eo&&Mr.length>0){const i=document.createElement("div");i.setAttribute("id","js-dialog-area"),i.style.zIndex="100",i.style.position="relative",document.body.appendChild(i)}}function ko(){const i=document.createElement("div");i.style.overflowY="scroll",document.body.appendChild(i);const o=i.clientWidth;return i.offsetWidth-o}const Mo=document.querySelectorAll('[data-role="dropdown"]'),Dr=i=>{const o=i.querySelector("button"),t=i.querySelector(".dropdown__list-wrapper"),s=i.querySelector(".dropdown__list"),n=i.querySelector(".dropdown__input"),r=i.querySelectorAll(".dropdown__list-item"),a=Array.from(r).map(p=>p);i.classList.contains("dropdown_type_right"),o.addEventListener("click",()=>{l()}),t.addEventListener("click",p=>{p.stopPropagation()}),n&&i.classList.contains("dropdown_search")&&(o.dataset.value,n.addEventListener("input",p=>{let w=a;if(s.replaceChildren(),p.target.value.length>0&&(w=w.filter(f=>new RegExp(p.target.value).test(f.textContent)).map(f=>f)),w.length===0){const f=document.createElement("li");f.classList.add("dropdown__list-item","dropdown__list-item_no-item"),f.textContent="items not found",s.appendChild(f)}w.forEach(f=>{const g=document.createElement("li");g.innerHTML=f.innerHTML,g.classList.add("dropdown__list-item"),g.addEventListener("click",h),s.appendChild(g)})})),r.forEach(p=>p.addEventListener("click",h));function m(){i.classList.remove("dropdown_is_open"),o.classList.remove("dropdown__btn_is_active"),window.removeEventListener("click",m)}function l(p){console.log(i),i.classList.toggle("dropdown_is_open"),o.classList.toggle("dropdown__btn_is_active"),setTimeout(()=>{i.classList.contains("dropdown_is_open")&&window.addEventListener("click",m)},0)}function h(p){n&&i.classList.contains("dropdown_search")&&(o.textContent=p.target.textContent,o.dataset.value=p.target.textContent),l()}};Mo.forEach(i=>Dr(i)),window.initDropDown=Dr;const Io=document.querySelectorAll(".format_num"),Po=document.querySelectorAll(".format_date"),Do=document.querySelectorAll(".format_datetime"),Fo=document.querySelectorAll(".format_datetime_second"),No=document.querySelectorAll(".format_month_date"),Oo=document.querySelectorAll(".format_post_code"),Ho="format_area",jo="format_rate",qe="--",Bo={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};Io.forEach(i=>{if(i.textContent&&i.textContent!==qe){let o;(i.classList.contains(Ho)||i.classList.contains(jo))&&(o={minimumFractionDigits:2});const t=Number(i.textContent).toLocaleString(void 0,o);i.innerHTML=isNaN(parseFloat(i.textContent))?i.textContent:t}}),Po.forEach(i=>{if(i.textContent&&i.textContent!==qe){let o=i.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");i.innerHTML=`<span class="format format_unit" data-format="\u5E74">${o[0]??(o[0]=qe)}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u6708">${o[1]??(o[1]=qe)}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${o[2]??(o[2]=qe)}</span>`}}),Do.forEach(i=>{if(i.textContent&&i.textContent!==qe){let o=new Date(i.textContent);o!="Invalid Date"?(i.innerHTML=`<span class="format format_unit" data-format="\u5E74">${o.getFullYear()}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u6708">${o.getMonth()+1}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${o.getDate()}</span> `,i.innerHTML+=` ${o.getHours()}:${o.getMinutes()<10?"0":""}${o.getMinutes()}`):(i.innerHTML=`<span class="format format_unit" data-format="\u5E74">${qe}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u6708">${qe}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${qe}</span>`,i.innerHTML+=`${qe}`)}}),Fo.forEach(i=>{if(i.textContent&&i.textContent!==qe){const o=new Date(i.textContent).toLocaleDateString("ja-JP",Bo);let[t,s]=o.replaceAll(`
`,"").split(" ");t=t.split("/"),i.innerHTML=`<span class="format format_unit" data-format="\u5E74">${t[0]??(t[0]=qe)}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u6708">${t[1]??(t[1]=qe)}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${t[2]??(t[2]=qe)}</span>`,s=s.split(":"),i.innerHTML+=` <span class="format format_unit" data-format="\u6642">${s[0]??(s[0]=qe)}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u5206">${s[1]??(s[1]=qe)}</span>`}}),No.forEach(i=>{if(i.textContent&&i.textContent!==qe){let o=i.textContent.replaceAll(`
`,"").replaceAll(" ","").split("/");i.innerHTML=`<span class="format format_unit" data-format="\u6708">${o[0]??(o[0]=qe)}</span> `,i.innerHTML+=`<span class="format format_unit" data-format="\u65E5">${o[1]??(o[1]=qe)}</span>`}}),Oo.forEach(i=>{if(i.textContent&&i.textContent.length>=7){let o=i.textContent.replaceAll(`
`,"").replaceAll(" ","").replaceAll("-","");i.textContent=`\u3012 ${o.substring(0,3)}-${o.substring(3)}`}}),document.querySelectorAll(".password__toggler").forEach(i=>i.addEventListener("click",$o));function $o(){const i=document.querySelector(this.dataset.target);i.type=i.type==="password"?"text":"password"}const zo=document.querySelectorAll('[data-role="open-menus"]'),Fr=document.querySelectorAll('[data-role="menus"]');zo.forEach(i=>{i.addEventListener("mouseenter",()=>{Fr.forEach(o=>{o.classList.add("is-visible")})}),i.addEventListener("mouseleave",()=>{Fr.forEach(o=>{o.classList.remove("is-visible")})})});const Uo="modulepreload",qo=function(i){return"/"+i},Nr={},As=function(i,o,t){let s=Promise.resolve();if(o&&o.length>0){const n=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.all(o.map(m=>{if(m=qo(m),m in Nr)return;Nr[m]=!0;const l=m.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(t)for(let w=n.length-1;w>=0;w--){const f=n[w];if(f.href===m&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${h}`))return;const p=document.createElement("link");if(p.rel=l?"stylesheet":Uo,l||(p.as="script",p.crossOrigin=""),p.href=m,a&&p.setAttribute("nonce",a),document.head.appendChild(p),l)return new Promise((w,f)=>{p.addEventListener("load",w),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${m}`)))})}))}return s.then(()=>i()).catch(n=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n})};var Go={9306:(i,o,t)=>{var s=t(4901),n=t(6823),r=TypeError;i.exports=function(a){if(s(a))return a;throw new r(n(a)+" is not a function")}},3506:(i,o,t)=>{var s=t(3925),n=String,r=TypeError;i.exports=function(a){if(s(a))return a;throw new r("Can't set "+n(a)+" as a prototype")}},7080:(i,o,t)=>{var s=t(4402).has;i.exports=function(n){return s(n),n}},679:(i,o,t)=>{var s=t(1625),n=TypeError;i.exports=function(r,a){if(s(a,r))return r;throw new n("Incorrect invocation")}},8551:(i,o,t)=>{var s=t(34),n=String,r=TypeError;i.exports=function(a){if(s(a))return a;throw new r(n(a)+" is not an object")}},7811:i=>{i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7394:(i,o,t)=>{var s=t(6706),n=t(4576),r=TypeError;i.exports=s(ArrayBuffer.prototype,"byteLength","get")||function(a){if(n(a)!=="ArrayBuffer")throw new r("ArrayBuffer expected");return a.byteLength}},3238:(i,o,t)=>{var s=t(9504),n=t(7394),r=s(ArrayBuffer.prototype.slice);i.exports=function(a){if(n(a)!==0)return!1;try{return r(a,0,0),!1}catch{return!0}}},5636:(i,o,t)=>{var s=t(4475),n=t(9504),r=t(6706),a=t(7696),m=t(3238),l=t(7394),h=t(4483),p=t(1548),w=s.structuredClone,f=s.ArrayBuffer,g=s.DataView,v=s.TypeError,A=Math.min,R=f.prototype,V=g.prototype,$=n(R.slice),L=r(R,"resizable","get"),D=r(R,"maxByteLength","get"),C=n(V.getInt8),G=n(V.setInt8);i.exports=(p||h)&&function(q,J,Q){var Tt=l(q),mt=J===void 0?Tt:a(J),Dt=!L||!L(q),pt;if(m(q))throw new v("ArrayBuffer is detached");if(p&&(q=w(q,{transfer:[q]}),Tt===mt&&(Q||Dt)))return q;if(Tt>=mt&&(!Q||Dt))pt=$(q,0,mt);else{var ot=Q&&!Dt&&D?{maxByteLength:D(q)}:void 0;pt=new f(mt,ot);for(var ft=new g(q),gt=new g(pt),Z=A(mt,Tt),at=0;at<Z;at++)G(gt,at,C(ft,at))}return p||h(q),pt}},4644:(i,o,t)=>{var s=t(7811),n=t(3724),r=t(4475),a=t(4901),m=t(34),l=t(9297),h=t(6955),p=t(6823),w=t(6699),f=t(6840),g=t(2106),v=t(1625),A=t(2787),R=t(2967),V=t(8227),$=t(3392),L=t(1181),D=L.enforce,C=L.get,G=r.Int8Array,q=G&&G.prototype,J=r.Uint8ClampedArray,Q=J&&J.prototype,Tt=G&&A(G),mt=q&&A(q),Dt=Object.prototype,pt=r.TypeError,ot=V("toStringTag"),ft=$("TYPED_ARRAY_TAG"),gt="TypedArrayConstructor",Z=s&&!!R&&h(r.opera)!=="Opera",at=!1,Rt,Ft,Vt,Qt={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ae={BigInt64Array:8,BigUint64Array:8},Ae=function(jt){if(!m(jt))return!1;var he=h(jt);return he==="DataView"||l(Qt,he)||l(ae,he)},me=function(jt){var he=A(jt);if(m(he)){var Xt=C(he);return Xt&&l(Xt,gt)?Xt[gt]:me(he)}},Bt=function(jt){if(!m(jt))return!1;var he=h(jt);return l(Qt,he)||l(ae,he)},It=function(jt){if(Bt(jt))return jt;throw new pt("Target is not a typed array")},St=function(jt){if(a(jt)&&(!R||v(Tt,jt)))return jt;throw new pt(p(jt)+" is not a typed array constructor")},qt=function(jt,he,Xt,it){if(n){if(Xt)for(var c in Qt){var u=r[c];if(u&&l(u.prototype,jt))try{delete u.prototype[jt]}catch{try{u.prototype[jt]=he}catch{}}}(!mt[jt]||Xt)&&f(mt,jt,Xt?he:Z&&q[jt]||he,it)}},le=function(jt,he,Xt){var it,c;if(n){if(R){if(Xt){for(it in Qt)if(c=r[it],c&&l(c,jt))try{delete c[jt]}catch{}}if(!Tt[jt]||Xt)try{return f(Tt,jt,Xt?he:Z&&Tt[jt]||he)}catch{}else return}for(it in Qt)c=r[it],c&&(!c[jt]||Xt)&&f(c,jt,he)}};for(Rt in Qt)Ft=r[Rt],Vt=Ft&&Ft.prototype,Vt?D(Vt)[gt]=Ft:Z=!1;for(Rt in ae)Ft=r[Rt],Vt=Ft&&Ft.prototype,Vt&&(D(Vt)[gt]=Ft);if((!Z||!a(Tt)||Tt===Function.prototype)&&(Tt=function(){throw new pt("Incorrect invocation")},Z))for(Rt in Qt)r[Rt]&&R(r[Rt],Tt);if((!Z||!mt||mt===Dt)&&(mt=Tt.prototype,Z))for(Rt in Qt)r[Rt]&&R(r[Rt].prototype,mt);if(Z&&A(Q)!==mt&&R(Q,mt),n&&!l(mt,ot)){at=!0,g(mt,ot,{configurable:!0,get:function(){return m(this)?this[ft]:void 0}});for(Rt in Qt)r[Rt]&&w(r[Rt],ft,Rt)}i.exports={NATIVE_ARRAY_BUFFER_VIEWS:Z,TYPED_ARRAY_TAG:at&&ft,aTypedArray:It,aTypedArrayConstructor:St,exportTypedArrayMethod:qt,exportTypedArrayStaticMethod:le,getTypedArrayConstructor:me,isView:Ae,isTypedArray:Bt,TypedArray:Tt,TypedArrayPrototype:mt}},5370:(i,o,t)=>{var s=t(6198);i.exports=function(n,r,a){for(var m=0,l=arguments.length>2?a:s(r),h=new n(l);l>m;)h[m]=r[m++];return h}},9617:(i,o,t)=>{var s=t(5397),n=t(5610),r=t(6198),a=function(m){return function(l,h,p){var w=s(l),f=r(w);if(f===0)return!m&&-1;var g=n(p,f),v;if(m&&h!==h){for(;f>g;)if(v=w[g++],v!==v)return!0}else for(;f>g;g++)if((m||g in w)&&w[g]===h)return m||g||0;return!m&&-1}};i.exports={includes:a(!0),indexOf:a(!1)}},4527:(i,o,t)=>{var s=t(3724),n=t(4376),r=TypeError,a=Object.getOwnPropertyDescriptor,m=s&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(l){return l instanceof TypeError}}();i.exports=m?function(l,h){if(n(l)&&!a(l,"length").writable)throw new r("Cannot set read only .length");return l.length=h}:function(l,h){return l.length=h}},7628:(i,o,t)=>{var s=t(6198);i.exports=function(n,r){for(var a=s(n),m=new r(a),l=0;l<a;l++)m[l]=n[a-l-1];return m}},9928:(i,o,t)=>{var s=t(6198),n=t(1291),r=RangeError;i.exports=function(a,m,l,h){var p=s(a),w=n(l),f=w<0?p+w:w;if(f>=p||f<0)throw new r("Incorrect index");for(var g=new m(p),v=0;v<p;v++)g[v]=v===f?h:a[v];return g}},6319:(i,o,t)=>{var s=t(8551),n=t(9539);i.exports=function(r,a,m,l){try{return l?a(s(m)[0],m[1]):a(m)}catch(h){n(r,"throw",h)}}},4576:(i,o,t)=>{var s=t(9504),n=s({}.toString),r=s("".slice);i.exports=function(a){return r(n(a),8,-1)}},6955:(i,o,t)=>{var s=t(2140),n=t(4901),r=t(4576),a=t(8227),m=a("toStringTag"),l=Object,h=r(function(){return arguments}())==="Arguments",p=function(w,f){try{return w[f]}catch{}};i.exports=s?r:function(w){var f,g,v;return w===void 0?"Undefined":w===null?"Null":typeof(g=p(f=l(w),m))=="string"?g:h?r(f):(v=r(f))==="Object"&&n(f.callee)?"Arguments":v}},7740:(i,o,t)=>{var s=t(9297),n=t(5031),r=t(7347),a=t(4913);i.exports=function(m,l,h){for(var p=n(l),w=a.f,f=r.f,g=0;g<p.length;g++){var v=p[g];!s(m,v)&&!(h&&s(h,v))&&w(m,v,f(l,v))}}},2211:(i,o,t)=>{var s=t(9039);i.exports=!s(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},2529:i=>{i.exports=function(o,t){return{value:o,done:t}}},6699:(i,o,t)=>{var s=t(3724),n=t(4913),r=t(6980);i.exports=s?function(a,m,l){return n.f(a,m,r(1,l))}:function(a,m,l){return a[m]=l,a}},6980:i=>{i.exports=function(o,t){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:t}}},4659:(i,o,t)=>{var s=t(3724),n=t(4913),r=t(6980);i.exports=function(a,m,l){s?n.f(a,m,r(0,l)):a[m]=l}},2106:(i,o,t)=>{var s=t(283),n=t(4913);i.exports=function(r,a,m){return m.get&&s(m.get,a,{getter:!0}),m.set&&s(m.set,a,{setter:!0}),n.f(r,a,m)}},6840:(i,o,t)=>{var s=t(4901),n=t(4913),r=t(283),a=t(9433);i.exports=function(m,l,h,p){p||(p={});var w=p.enumerable,f=p.name!==void 0?p.name:l;if(s(h)&&r(h,f,p),p.global)w?m[l]=h:a(l,h);else{try{p.unsafe?m[l]&&(w=!0):delete m[l]}catch{}w?m[l]=h:n.f(m,l,{value:h,enumerable:!1,configurable:!p.nonConfigurable,writable:!p.nonWritable})}return m}},6279:(i,o,t)=>{var s=t(6840);i.exports=function(n,r,a){for(var m in r)s(n,m,r[m],a);return n}},9433:(i,o,t)=>{var s=t(4475),n=Object.defineProperty;i.exports=function(r,a){try{n(s,r,{value:a,configurable:!0,writable:!0})}catch{s[r]=a}return a}},3724:(i,o,t)=>{var s=t(9039);i.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},4483:(i,o,t)=>{var s=t(4475),n=t(9714),r=t(1548),a=s.structuredClone,m=s.ArrayBuffer,l=s.MessageChannel,h=!1,p,w,f,g;if(r)h=function(v){a(v,{transfer:[v]})};else if(m)try{l||(p=n("worker_threads"),p&&(l=p.MessageChannel)),l&&(w=new l,f=new m(2),g=function(v){w.port1.postMessage(null,[v])},f.byteLength===2&&(g(f),f.byteLength===0&&(h=g)))}catch{}i.exports=h},4055:(i,o,t)=>{var s=t(4475),n=t(34),r=s.document,a=n(r)&&n(r.createElement);i.exports=function(m){return a?r.createElement(m):{}}},6837:i=>{var o=TypeError,t=9007199254740991;i.exports=function(s){if(s>t)throw o("Maximum allowed index exceeded");return s}},5002:i=>{i.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},7290:(i,o,t)=>{var s=t(516),n=t(9088);i.exports=!s&&!n&&typeof window=="object"&&typeof document=="object"},516:i=>{i.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},9088:(i,o,t)=>{var s=t(4475),n=t(4576);i.exports=n(s.process)==="process"},9392:i=>{i.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},7388:(i,o,t)=>{var s=t(4475),n=t(9392),r=s.process,a=s.Deno,m=r&&r.versions||a&&a.version,l=m&&m.v8,h,p;l&&(h=l.split("."),p=h[0]>0&&h[0]<4?1:+(h[0]+h[1])),!p&&n&&(h=n.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=n.match(/Chrome\/(\d+)/),h&&(p=+h[1]))),i.exports=p},8727:i=>{i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6193:(i,o,t)=>{var s=t(9504),n=Error,r=s("".replace),a=function(h){return String(new n(h).stack)}("zxcasd"),m=/\n\s*at [^:]*:[^\n]*/,l=m.test(a);i.exports=function(h,p){if(l&&typeof h=="string"&&!n.prepareStackTrace)for(;p--;)h=r(h,m,"");return h}},6518:(i,o,t)=>{var s=t(4475),n=t(7347).f,r=t(6699),a=t(6840),m=t(9433),l=t(7740),h=t(2796);i.exports=function(p,w){var f=p.target,g=p.global,v=p.stat,A,R,V,$,L,D;if(g?R=s:v?R=s[f]||m(f,{}):R=s[f]&&s[f].prototype,R)for(V in w){if(L=w[V],p.dontCallGetSet?(D=n(R,V),$=D&&D.value):$=R[V],A=h(g?V:f+(v?".":"#")+V,p.forced),!A&&$!==void 0){if(typeof L==typeof $)continue;l(L,$)}(p.sham||$&&$.sham)&&r(L,"sham",!0),a(R,V,L,p)}}},9039:i=>{i.exports=function(o){try{return!!o()}catch{return!0}}},6080:(i,o,t)=>{var s=t(7476),n=t(9306),r=t(616),a=s(s.bind);i.exports=function(m,l){return n(m),l===void 0?m:r?a(m,l):function(){return m.apply(l,arguments)}}},616:(i,o,t)=>{var s=t(9039);i.exports=!s(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")})},9565:(i,o,t)=>{var s=t(616),n=Function.prototype.call;i.exports=s?n.bind(n):function(){return n.apply(n,arguments)}},350:(i,o,t)=>{var s=t(3724),n=t(9297),r=Function.prototype,a=s&&Object.getOwnPropertyDescriptor,m=n(r,"name"),l=m&&(function(){}).name==="something",h=m&&(!s||s&&a(r,"name").configurable);i.exports={EXISTS:m,PROPER:l,CONFIGURABLE:h}},6706:(i,o,t)=>{var s=t(9504),n=t(9306);i.exports=function(r,a,m){try{return s(n(Object.getOwnPropertyDescriptor(r,a)[m]))}catch{}}},7476:(i,o,t)=>{var s=t(4576),n=t(9504);i.exports=function(r){if(s(r)==="Function")return n(r)}},9504:(i,o,t)=>{var s=t(616),n=Function.prototype,r=n.call,a=s&&n.bind.bind(r,r);i.exports=s?a:function(m){return function(){return r.apply(m,arguments)}}},7751:(i,o,t)=>{var s=t(4475),n=t(4901),r=function(a){return n(a)?a:void 0};i.exports=function(a,m){return arguments.length<2?r(s[a]):s[a]&&s[a][m]}},1767:i=>{i.exports=function(o){return{iterator:o,next:o.next,done:!1}}},8646:(i,o,t)=>{var s=t(9565),n=t(8551),r=t(1767),a=t(851);i.exports=function(m,l){(!l||typeof m!="string")&&n(m);var h=a(m);return r(n(h!==void 0?s(h,m):m))}},851:(i,o,t)=>{var s=t(6955),n=t(5966),r=t(4117),a=t(6269),m=t(8227),l=m("iterator");i.exports=function(h){if(!r(h))return n(h,l)||n(h,"@@iterator")||a[s(h)]}},81:(i,o,t)=>{var s=t(9565),n=t(9306),r=t(8551),a=t(6823),m=t(851),l=TypeError;i.exports=function(h,p){var w=arguments.length<2?m(h):p;if(n(w))return r(s(w,h));throw new l(a(h)+" is not iterable")}},5966:(i,o,t)=>{var s=t(9306),n=t(4117);i.exports=function(r,a){var m=r[a];return n(m)?void 0:s(m)}},3789:(i,o,t)=>{var s=t(9306),n=t(8551),r=t(9565),a=t(1291),m=t(1767),l="Invalid size",h=RangeError,p=TypeError,w=Math.max,f=function(g,v){this.set=g,this.size=w(v,0),this.has=s(g.has),this.keys=s(g.keys)};f.prototype={getIterator:function(){return m(n(r(this.keys,this.set)))},includes:function(g){return r(this.has,this.set,g)}},i.exports=function(g){n(g);var v=+g.size;if(v!==v)throw new p(l);var A=a(v);if(A<0)throw new h(l);return new f(g,A)}},4475:function(i){var o=function(t){return t&&t.Math===Math&&t};i.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof global=="object"&&global)||o(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},9297:(i,o,t)=>{var s=t(9504),n=t(8981),r=s({}.hasOwnProperty);i.exports=Object.hasOwn||function(a,m){return r(n(a),m)}},421:i=>{i.exports={}},397:(i,o,t)=>{var s=t(7751);i.exports=s("document","documentElement")},5917:(i,o,t)=>{var s=t(3724),n=t(9039),r=t(4055);i.exports=!s&&!n(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7})},7055:(i,o,t)=>{var s=t(9504),n=t(9039),r=t(4576),a=Object,m=s("".split);i.exports=n(function(){return!a("z").propertyIsEnumerable(0)})?function(l){return r(l)==="String"?m(l,""):a(l)}:a},3167:(i,o,t)=>{var s=t(4901),n=t(34),r=t(2967);i.exports=function(a,m,l){var h,p;return r&&s(h=m.constructor)&&h!==l&&n(p=h.prototype)&&p!==l.prototype&&r(a,p),a}},3706:(i,o,t)=>{var s=t(9504),n=t(4901),r=t(7629),a=s(Function.toString);n(r.inspectSource)||(r.inspectSource=function(m){return a(m)}),i.exports=r.inspectSource},1181:(i,o,t)=>{var s=t(8622),n=t(4475),r=t(34),a=t(6699),m=t(9297),l=t(7629),h=t(6119),p=t(421),w="Object already initialized",f=n.TypeError,g=n.WeakMap,v,A,R,V=function(C){return R(C)?A(C):v(C,{})},$=function(C){return function(G){var q;if(!r(G)||(q=A(G)).type!==C)throw new f("Incompatible receiver, "+C+" required");return q}};if(s||l.state){var L=l.state||(l.state=new g);L.get=L.get,L.has=L.has,L.set=L.set,v=function(C,G){if(L.has(C))throw new f(w);return G.facade=C,L.set(C,G),G},A=function(C){return L.get(C)||{}},R=function(C){return L.has(C)}}else{var D=h("state");p[D]=!0,v=function(C,G){if(m(C,D))throw new f(w);return G.facade=C,a(C,D,G),G},A=function(C){return m(C,D)?C[D]:{}},R=function(C){return m(C,D)}}i.exports={set:v,get:A,has:R,enforce:V,getterFor:$}},4209:(i,o,t)=>{var s=t(8227),n=t(6269),r=s("iterator"),a=Array.prototype;i.exports=function(m){return m!==void 0&&(n.Array===m||a[r]===m)}},4376:(i,o,t)=>{var s=t(4576);i.exports=Array.isArray||function(n){return s(n)==="Array"}},1108:(i,o,t)=>{var s=t(6955);i.exports=function(n){var r=s(n);return r==="BigInt64Array"||r==="BigUint64Array"}},4901:i=>{var o=typeof document=="object"&&document.all;i.exports=typeof o>"u"&&o!==void 0?function(t){return typeof t=="function"||t===o}:function(t){return typeof t=="function"}},2796:(i,o,t)=>{var s=t(9039),n=t(4901),r=/#|\.prototype\./,a=function(w,f){var g=l[m(w)];return g===p?!0:g===h?!1:n(f)?s(f):!!f},m=a.normalize=function(w){return String(w).replace(r,".").toLowerCase()},l=a.data={},h=a.NATIVE="N",p=a.POLYFILL="P";i.exports=a},4117:i=>{i.exports=function(o){return o==null}},34:(i,o,t)=>{var s=t(4901);i.exports=function(n){return typeof n=="object"?n!==null:s(n)}},3925:(i,o,t)=>{var s=t(34);i.exports=function(n){return s(n)||n===null}},6395:i=>{i.exports=!1},757:(i,o,t)=>{var s=t(7751),n=t(4901),r=t(1625),a=t(7040),m=Object;i.exports=a?function(l){return typeof l=="symbol"}:function(l){var h=s("Symbol");return n(h)&&r(h.prototype,m(l))}},507:(i,o,t)=>{var s=t(9565);i.exports=function(n,r,a){for(var m=a?n:n.iterator,l=n.next,h,p;!(h=s(l,m)).done;)if(p=r(h.value),p!==void 0)return p}},2652:(i,o,t)=>{var s=t(6080),n=t(9565),r=t(8551),a=t(6823),m=t(4209),l=t(6198),h=t(1625),p=t(81),w=t(851),f=t(9539),g=TypeError,v=function(R,V){this.stopped=R,this.result=V},A=v.prototype;i.exports=function(R,V,$){var L=$&&$.that,D=!!($&&$.AS_ENTRIES),C=!!($&&$.IS_RECORD),G=!!($&&$.IS_ITERATOR),q=!!($&&$.INTERRUPTED),J=s(V,L),Q,Tt,mt,Dt,pt,ot,ft,gt=function(at){return Q&&f(Q,"normal",at),new v(!0,at)},Z=function(at){return D?(r(at),q?J(at[0],at[1],gt):J(at[0],at[1])):q?J(at,gt):J(at)};if(C)Q=R.iterator;else if(G)Q=R;else{if(Tt=w(R),!Tt)throw new g(a(R)+" is not iterable");if(m(Tt)){for(mt=0,Dt=l(R);Dt>mt;mt++)if(pt=Z(R[mt]),pt&&h(A,pt))return pt;return new v(!1)}Q=p(R,Tt)}for(ot=C?R.next:Q.next;!(ft=n(ot,Q)).done;){try{pt=Z(ft.value)}catch(at){f(Q,"throw",at)}if(typeof pt=="object"&&pt&&h(A,pt))return pt}return new v(!1)}},9539:(i,o,t)=>{var s=t(9565),n=t(8551),r=t(5966);i.exports=function(a,m,l){var h,p;n(a);try{if(h=r(a,"return"),!h){if(m==="throw")throw l;return l}h=s(h,a)}catch(w){p=!0,h=w}if(m==="throw")throw l;if(p)throw h;return n(h),l}},9462:(i,o,t)=>{var s=t(9565),n=t(2360),r=t(6699),a=t(6279),m=t(8227),l=t(1181),h=t(5966),p=t(7657).IteratorPrototype,w=t(2529),f=t(9539),g=m("toStringTag"),v="IteratorHelper",A="WrapForValidIterator",R=l.set,V=function(D){var C=l.getterFor(D?A:v);return a(n(p),{next:function(){var G=C(this);if(D)return G.nextHandler();try{var q=G.done?void 0:G.nextHandler();return w(q,G.done)}catch(J){throw G.done=!0,J}},return:function(){var G=C(this),q=G.iterator;if(G.done=!0,D){var J=h(q,"return");return J?s(J,q):w(void 0,!0)}if(G.inner)try{f(G.inner.iterator,"normal")}catch(Q){return f(q,"throw",Q)}return f(q,"normal"),w(void 0,!0)}})},$=V(!0),L=V(!1);r(L,g,"Iterator Helper"),i.exports=function(D,C){var G=function(q,J){J?(J.iterator=q.iterator,J.next=q.next):J=q,J.type=C?A:v,J.nextHandler=D,J.counter=0,J.done=!1,R(this,J)};return G.prototype=C?$:L,G}},713:(i,o,t)=>{var s=t(9565),n=t(9306),r=t(8551),a=t(1767),m=t(9462),l=t(6319),h=m(function(){var p=this.iterator,w=r(s(this.next,p)),f=this.done=!!w.done;if(!f)return l(p,this.mapper,[w.value,this.counter++],!0)});i.exports=function(p){return r(this),n(p),new h(a(this),{mapper:p})}},7657:(i,o,t)=>{var s=t(9039),n=t(4901),r=t(34),a=t(2360),m=t(2787),l=t(6840),h=t(8227),p=t(6395),w=h("iterator"),f=!1,g,v,A;[].keys&&(A=[].keys(),"next"in A?(v=m(m(A)),v!==Object.prototype&&(g=v)):f=!0);var R=!r(g)||s(function(){var V={};return g[w].call(V)!==V});R?g={}:p&&(g=a(g)),n(g[w])||l(g,w,function(){return this}),i.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:f}},6269:i=>{i.exports={}},6198:(i,o,t)=>{var s=t(8014);i.exports=function(n){return s(n.length)}},283:(i,o,t)=>{var s=t(9504),n=t(9039),r=t(4901),a=t(9297),m=t(3724),l=t(350).CONFIGURABLE,h=t(3706),p=t(1181),w=p.enforce,f=p.get,g=String,v=Object.defineProperty,A=s("".slice),R=s("".replace),V=s([].join),$=m&&!n(function(){return v(function(){},"length",{value:8}).length!==8}),L=String(String).split("String"),D=i.exports=function(C,G,q){A(g(G),0,7)==="Symbol("&&(G="["+R(g(G),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),q&&q.getter&&(G="get "+G),q&&q.setter&&(G="set "+G),(!a(C,"name")||l&&C.name!==G)&&(m?v(C,"name",{value:G,configurable:!0}):C.name=G),$&&q&&a(q,"arity")&&C.length!==q.arity&&v(C,"length",{value:q.arity});try{q&&a(q,"constructor")&&q.constructor?m&&v(C,"prototype",{writable:!1}):C.prototype&&(C.prototype=void 0)}catch{}var J=w(C);return a(J,"source")||(J.source=V(L,typeof G=="string"?G:"")),C};Function.prototype.toString=D(function(){return r(this)&&f(this).source||h(this)},"toString")},741:i=>{var o=Math.ceil,t=Math.floor;i.exports=Math.trunc||function(s){var n=+s;return(n>0?t:o)(n)}},6043:(i,o,t)=>{var s=t(9306),n=TypeError,r=function(a){var m,l;this.promise=new a(function(h,p){if(m!==void 0||l!==void 0)throw new n("Bad Promise constructor");m=h,l=p}),this.resolve=s(m),this.reject=s(l)};i.exports.f=function(a){return new r(a)}},2603:(i,o,t)=>{var s=t(655);i.exports=function(n,r){return n===void 0?arguments.length<2?"":r:s(n)}},2360:(i,o,t)=>{var s=t(8551),n=t(6801),r=t(8727),a=t(421),m=t(397),l=t(4055),h=t(6119),p=">",w="<",f="prototype",g="script",v=h("IE_PROTO"),A=function(){},R=function(C){return w+g+p+C+w+"/"+g+p},V=function(C){C.write(R("")),C.close();var G=C.parentWindow.Object;return C=null,G},$=function(){var C=l("iframe"),G="java"+g+":",q;return C.style.display="none",m.appendChild(C),C.src=String(G),q=C.contentWindow.document,q.open(),q.write(R("document.F=Object")),q.close(),q.F},L,D=function(){try{L=new ActiveXObject("htmlfile")}catch{}D=typeof document<"u"?document.domain&&L?V(L):$():V(L);for(var C=r.length;C--;)delete D[f][r[C]];return D()};a[v]=!0,i.exports=Object.create||function(C,G){var q;return C!==null?(A[f]=s(C),q=new A,A[f]=null,q[v]=C):q=D(),G===void 0?q:n.f(q,G)}},6801:(i,o,t)=>{var s=t(3724),n=t(8686),r=t(4913),a=t(8551),m=t(5397),l=t(1072);o.f=s&&!n?Object.defineProperties:function(h,p){a(h);for(var w=m(p),f=l(p),g=f.length,v=0,A;g>v;)r.f(h,A=f[v++],w[A]);return h}},4913:(i,o,t)=>{var s=t(3724),n=t(5917),r=t(8686),a=t(8551),m=t(6969),l=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,w="enumerable",f="configurable",g="writable";o.f=s?r?function(v,A,R){if(a(v),A=m(A),a(R),typeof v=="function"&&A==="prototype"&&"value"in R&&g in R&&!R[g]){var V=p(v,A);V&&V[g]&&(v[A]=R.value,R={configurable:f in R?R[f]:V[f],enumerable:w in R?R[w]:V[w],writable:!1})}return h(v,A,R)}:h:function(v,A,R){if(a(v),A=m(A),a(R),n)try{return h(v,A,R)}catch{}if("get"in R||"set"in R)throw new l("Accessors not supported");return"value"in R&&(v[A]=R.value),v}},7347:(i,o,t)=>{var s=t(3724),n=t(9565),r=t(8773),a=t(6980),m=t(5397),l=t(6969),h=t(9297),p=t(5917),w=Object.getOwnPropertyDescriptor;o.f=s?w:function(f,g){if(f=m(f),g=l(g),p)try{return w(f,g)}catch{}if(h(f,g))return a(!n(r.f,f,g),f[g])}},8480:(i,o,t)=>{var s=t(1828),n=t(8727),r=n.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(a){return s(a,r)}},3717:(i,o)=>{o.f=Object.getOwnPropertySymbols},2787:(i,o,t)=>{var s=t(9297),n=t(4901),r=t(8981),a=t(6119),m=t(2211),l=a("IE_PROTO"),h=Object,p=h.prototype;i.exports=m?h.getPrototypeOf:function(w){var f=r(w);if(s(f,l))return f[l];var g=f.constructor;return n(g)&&f instanceof g?g.prototype:f instanceof h?p:null}},1625:(i,o,t)=>{var s=t(9504);i.exports=s({}.isPrototypeOf)},1828:(i,o,t)=>{var s=t(9504),n=t(9297),r=t(5397),a=t(9617).indexOf,m=t(421),l=s([].push);i.exports=function(h,p){var w=r(h),f=0,g=[],v;for(v in w)!n(m,v)&&n(w,v)&&l(g,v);for(;p.length>f;)n(w,v=p[f++])&&(~a(g,v)||l(g,v));return g}},1072:(i,o,t)=>{var s=t(1828),n=t(8727);i.exports=Object.keys||function(r){return s(r,n)}},8773:(i,o)=>{var t={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,n=s&&!t.call({1:2},1);o.f=n?function(r){var a=s(this,r);return!!a&&a.enumerable}:t},2967:(i,o,t)=>{var s=t(6706),n=t(34),r=t(7750),a=t(3506);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m=!1,l={},h;try{h=s(Object.prototype,"__proto__","set"),h(l,[]),m=l instanceof Array}catch{}return function(p,w){return r(p),a(w),n(p)&&(m?h(p,w):p.__proto__=w),p}}():void 0)},4270:(i,o,t)=>{var s=t(9565),n=t(4901),r=t(34),a=TypeError;i.exports=function(m,l){var h,p;if(l==="string"&&n(h=m.toString)&&!r(p=s(h,m))||n(h=m.valueOf)&&!r(p=s(h,m))||l!=="string"&&n(h=m.toString)&&!r(p=s(h,m)))return p;throw new a("Can't convert object to primitive value")}},5031:(i,o,t)=>{var s=t(7751),n=t(9504),r=t(8480),a=t(3717),m=t(8551),l=n([].concat);i.exports=s("Reflect","ownKeys")||function(h){var p=r.f(m(h)),w=a.f;return w?l(p,w(h)):p}},8235:(i,o,t)=>{var s=t(9504),n=t(9297),r=SyntaxError,a=parseInt,m=String.fromCharCode,l=s("".charAt),h=s("".slice),p=s(/./.exec),w={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},f=/^[\da-f]{4}$/i,g=/^[\u0000-\u001F]$/;i.exports=function(v,A){for(var R=!0,V="";A<v.length;){var $=l(v,A);if($==="\\"){var L=h(v,A,A+2);if(n(w,L))V+=w[L],A+=2;else if(L==="\\u"){A+=2;var D=h(v,A,A+4);if(!p(f,D))throw new r("Bad Unicode escape at: "+A);V+=m(a(D,16)),A+=4}else throw new r('Unknown escape sequence: "'+L+'"')}else if($==='"'){R=!1,A++;break}else{if(p(g,$))throw new r("Bad control character in string literal at: "+A);V+=$,A++}}if(R)throw new r("Unterminated string at: "+A);return{value:V,end:A}}},7750:(i,o,t)=>{var s=t(4117),n=TypeError;i.exports=function(r){if(s(r))throw new n("Can't call method on "+r);return r}},9286:(i,o,t)=>{var s=t(4402),n=t(8469),r=s.Set,a=s.add;i.exports=function(m){var l=new r;return n(m,function(h){a(l,h)}),l}},3440:(i,o,t)=>{var s=t(7080),n=t(4402),r=t(9286),a=t(5170),m=t(3789),l=t(8469),h=t(507),p=n.has,w=n.remove;i.exports=function(f){var g=s(this),v=m(f),A=r(g);return a(g)<=v.size?l(g,function(R){v.includes(R)&&w(A,R)}):h(v.getIterator(),function(R){p(g,R)&&w(A,R)}),A}},4402:(i,o,t)=>{var s=t(9504),n=Set.prototype;i.exports={Set,add:s(n.add),has:s(n.has),remove:s(n.delete),proto:n}},8750:(i,o,t)=>{var s=t(7080),n=t(4402),r=t(5170),a=t(3789),m=t(8469),l=t(507),h=n.Set,p=n.add,w=n.has;i.exports=function(f){var g=s(this),v=a(f),A=new h;return r(g)>v.size?l(v.getIterator(),function(R){w(g,R)&&p(A,R)}):m(g,function(R){v.includes(R)&&p(A,R)}),A}},4449:(i,o,t)=>{var s=t(7080),n=t(4402).has,r=t(5170),a=t(3789),m=t(8469),l=t(507),h=t(9539);i.exports=function(p){var w=s(this),f=a(p);if(r(w)<=f.size)return m(w,function(v){if(f.includes(v))return!1},!0)!==!1;var g=f.getIterator();return l(g,function(v){if(n(w,v))return h(g,"normal",!1)})!==!1}},3838:(i,o,t)=>{var s=t(7080),n=t(5170),r=t(8469),a=t(3789);i.exports=function(m){var l=s(this),h=a(m);return n(l)>h.size?!1:r(l,function(p){if(!h.includes(p))return!1},!0)!==!1}},8527:(i,o,t)=>{var s=t(7080),n=t(4402).has,r=t(5170),a=t(3789),m=t(507),l=t(9539);i.exports=function(h){var p=s(this),w=a(h);if(r(p)<w.size)return!1;var f=w.getIterator();return m(f,function(g){if(!n(p,g))return l(f,"normal",!1)})!==!1}},8469:(i,o,t)=>{var s=t(9504),n=t(507),r=t(4402),a=r.Set,m=r.proto,l=s(m.forEach),h=s(m.keys),p=h(new a).next;i.exports=function(w,f,g){return g?n({iterator:h(w),next:p},f):l(w,f)}},4916:(i,o,t)=>{var s=t(7751),n=function(r){return{size:r,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};i.exports=function(r){var a=s("Set");try{new a()[r](n(0));try{return new a()[r](n(-1)),!1}catch{return!0}}catch{return!1}}},5170:(i,o,t)=>{var s=t(6706),n=t(4402);i.exports=s(n.proto,"size","get")||function(r){return r.size}},3650:(i,o,t)=>{var s=t(7080),n=t(4402),r=t(9286),a=t(3789),m=t(507),l=n.add,h=n.has,p=n.remove;i.exports=function(w){var f=s(this),g=a(w).getIterator(),v=r(f);return m(g,function(A){h(f,A)?p(v,A):l(v,A)}),v}},4204:(i,o,t)=>{var s=t(7080),n=t(4402).add,r=t(9286),a=t(3789),m=t(507);i.exports=function(l){var h=s(this),p=a(l).getIterator(),w=r(h);return m(p,function(f){n(w,f)}),w}},6119:(i,o,t)=>{var s=t(5745),n=t(3392),r=s("keys");i.exports=function(a){return r[a]||(r[a]=n(a))}},7629:(i,o,t)=>{var s=t(6395),n=t(4475),r=t(9433),a="__core-js_shared__",m=i.exports=n[a]||r(a,{});(m.versions||(m.versions=[])).push({version:"3.36.1",mode:s?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(i,o,t)=>{var s=t(7629);i.exports=function(n,r){return s[n]||(s[n]=r||{})}},1548:(i,o,t)=>{var s=t(4475),n=t(9039),r=t(7388),a=t(7290),m=t(516),l=t(9088),h=s.structuredClone;i.exports=!!h&&!n(function(){if(m&&r>92||l&&r>94||a&&r>97)return!1;var p=new ArrayBuffer(8),w=h(p,{transfer:[p]});return p.byteLength!==0||w.byteLength!==8})},4495:(i,o,t)=>{var s=t(7388),n=t(9039),r=t(4475),a=r.String;i.exports=!!Object.getOwnPropertySymbols&&!n(function(){var m=Symbol("symbol detection");return!a(m)||!(Object(m)instanceof Symbol)||!Symbol.sham&&s&&s<41})},5610:(i,o,t)=>{var s=t(1291),n=Math.max,r=Math.min;i.exports=function(a,m){var l=s(a);return l<0?n(l+m,0):r(l,m)}},5854:(i,o,t)=>{var s=t(2777),n=TypeError;i.exports=function(r){var a=s(r,"number");if(typeof a=="number")throw new n("Can't convert number to bigint");return BigInt(a)}},7696:(i,o,t)=>{var s=t(1291),n=t(8014),r=RangeError;i.exports=function(a){if(a===void 0)return 0;var m=s(a),l=n(m);if(m!==l)throw new r("Wrong length or index");return l}},5397:(i,o,t)=>{var s=t(7055),n=t(7750);i.exports=function(r){return s(n(r))}},1291:(i,o,t)=>{var s=t(741);i.exports=function(n){var r=+n;return r!==r||r===0?0:s(r)}},8014:(i,o,t)=>{var s=t(1291),n=Math.min;i.exports=function(r){var a=s(r);return a>0?n(a,9007199254740991):0}},8981:(i,o,t)=>{var s=t(7750),n=Object;i.exports=function(r){return n(s(r))}},2777:(i,o,t)=>{var s=t(9565),n=t(34),r=t(757),a=t(5966),m=t(4270),l=t(8227),h=TypeError,p=l("toPrimitive");i.exports=function(w,f){if(!n(w)||r(w))return w;var g=a(w,p),v;if(g){if(f===void 0&&(f="default"),v=s(g,w,f),!n(v)||r(v))return v;throw new h("Can't convert object to primitive value")}return f===void 0&&(f="number"),m(w,f)}},6969:(i,o,t)=>{var s=t(2777),n=t(757);i.exports=function(r){var a=s(r,"string");return n(a)?a:a+""}},2140:(i,o,t)=>{var s=t(8227),n=s("toStringTag"),r={};r[n]="z",i.exports=String(r)==="[object z]"},655:(i,o,t)=>{var s=t(6955),n=String;i.exports=function(r){if(s(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return n(r)}},9714:(i,o,t)=>{var s=t(9088);i.exports=function(n){try{if(s)return Function('return require("'+n+'")')()}catch{}}},6823:i=>{var o=String;i.exports=function(t){try{return o(t)}catch{return"Object"}}},3392:(i,o,t)=>{var s=t(9504),n=0,r=Math.random(),a=s(1 .toString);i.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+a(++n+r,36)}},7040:(i,o,t)=>{var s=t(4495);i.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},8686:(i,o,t)=>{var s=t(3724),n=t(9039);i.exports=s&&n(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},2812:i=>{var o=TypeError;i.exports=function(t,s){if(t<s)throw new o("Not enough arguments");return t}},8622:(i,o,t)=>{var s=t(4475),n=t(4901),r=s.WeakMap;i.exports=n(r)&&/native code/.test(String(r))},8227:(i,o,t)=>{var s=t(4475),n=t(5745),r=t(9297),a=t(3392),m=t(4495),l=t(7040),h=s.Symbol,p=n("wks"),w=l?h.for||h:h&&h.withoutSetter||a;i.exports=function(f){return r(p,f)||(p[f]=m&&r(h,f)?h[f]:w("Symbol."+f)),p[f]}},6573:(i,o,t)=>{var s=t(3724),n=t(2106),r=t(3238),a=ArrayBuffer.prototype;s&&!("detached"in a)&&n(a,"detached",{configurable:!0,get:function(){return r(this)}})},7936:(i,o,t)=>{var s=t(6518),n=t(5636);n&&s({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(i,o,t)=>{var s=t(6518),n=t(5636);n&&s({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},4114:(i,o,t)=>{var s=t(6518),n=t(8981),r=t(6198),a=t(4527),m=t(6837),l=t(9039),h=l(function(){return[].push.call({length:4294967296},1)!==4294967297}),p=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(f){return f instanceof TypeError}},w=h||!p();s({target:"Array",proto:!0,arity:1,forced:w},{push:function(f){var g=n(this),v=r(g),A=arguments.length;m(v+A);for(var R=0;R<A;R++)g[v]=arguments[R],v++;return a(g,v),v}})},4628:(i,o,t)=>{var s=t(6518),n=t(6043);s({target:"Promise",stat:!0},{withResolvers:function(){var r=n.f(this);return{promise:r.promise,resolve:r.resolve,reject:r.reject}}})},7467:(i,o,t)=>{var s=t(7628),n=t(4644),r=n.aTypedArray,a=n.exportTypedArrayMethod,m=n.getTypedArrayConstructor;a("toReversed",function(){return s(r(this),m(this))})},4732:(i,o,t)=>{var s=t(4644),n=t(9504),r=t(9306),a=t(5370),m=s.aTypedArray,l=s.getTypedArrayConstructor,h=s.exportTypedArrayMethod,p=n(s.TypedArrayPrototype.sort);h("toSorted",function(w){w!==void 0&&r(w);var f=m(this),g=a(l(f),f);return p(g,w)})},9577:(i,o,t)=>{var s=t(9928),n=t(4644),r=t(1108),a=t(1291),m=t(5854),l=n.aTypedArray,h=n.getTypedArrayConstructor,p=n.exportTypedArrayMethod,w=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(f){return f===8}}();p("with",function(f,g){var v=l(this),A=a(f),R=r(v)?m(g):+g;return s(v,h(v),A,R)},!w)},8992:(i,o,t)=>{var s=t(6518),n=t(4475),r=t(679),a=t(8551),m=t(4901),l=t(2787),h=t(2106),p=t(4659),w=t(9039),f=t(9297),g=t(8227),v=t(7657).IteratorPrototype,A=t(3724),R=t(6395),V="constructor",$="Iterator",L=g("toStringTag"),D=TypeError,C=n[$],G=R||!m(C)||C.prototype!==v||!w(function(){C({})}),q=function(){if(r(this,v),l(this)===v)throw new D("Abstract class Iterator not directly constructable")},J=function(Q,Tt){A?h(v,Q,{configurable:!0,get:function(){return Tt},set:function(mt){if(a(this),this===v)throw new D("You can't redefine this property");f(this,Q)?this[Q]=mt:p(this,Q,mt)}}):v[Q]=Tt};f(v,L)||J(L,$),(G||!f(v,V)||v[V]===Object)&&J(V,q),q.prototype=v,s({global:!0,constructor:!0,forced:G},{Iterator:q})},3215:(i,o,t)=>{var s=t(6518),n=t(2652),r=t(9306),a=t(8551),m=t(1767);s({target:"Iterator",proto:!0,real:!0},{every:function(l){a(this),r(l);var h=m(this),p=0;return!n(h,function(w,f){if(!l(w,p++))return f()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},4520:(i,o,t)=>{var s=t(6518),n=t(9565),r=t(9306),a=t(8551),m=t(1767),l=t(9462),h=t(6319),p=t(6395),w=l(function(){for(var f=this.iterator,g=this.predicate,v=this.next,A,R,V;;){if(A=a(n(v,f)),R=this.done=!!A.done,R)return;if(V=A.value,h(f,g,[V,this.counter++],!0))return V}});s({target:"Iterator",proto:!0,real:!0,forced:p},{filter:function(f){return a(this),r(f),new w(m(this),{predicate:f})}})},670:(i,o,t)=>{var s=t(6518),n=t(9565),r=t(9306),a=t(8551),m=t(1767),l=t(8646),h=t(9462),p=t(9539),w=t(6395),f=h(function(){for(var g=this.iterator,v=this.mapper,A,R;;){if(R=this.inner)try{if(A=a(n(R.next,R.iterator)),!A.done)return A.value;this.inner=null}catch(V){p(g,"throw",V)}if(A=a(n(this.next,g)),this.done=!!A.done)return;try{this.inner=l(v(A.value,this.counter++),!1)}catch(V){p(g,"throw",V)}}});s({target:"Iterator",proto:!0,real:!0,forced:w},{flatMap:function(g){return a(this),r(g),new f(m(this),{mapper:g,inner:null})}})},1454:(i,o,t)=>{var s=t(6518),n=t(713),r=t(6395);s({target:"Iterator",proto:!0,real:!0,forced:r},{map:n})},7550:(i,o,t)=>{var s=t(6518),n=t(2652),r=t(9306),a=t(8551),m=t(1767);s({target:"Iterator",proto:!0,real:!0},{some:function(l){a(this),r(l);var h=m(this),p=0;return n(h,function(w,f){if(l(w,p++))return f()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},8335:(i,o,t)=>{var s=t(6518),n=t(3724),r=t(4475),a=t(7751),m=t(9504),l=t(9565),h=t(4901),p=t(34),w=t(4376),f=t(9297),g=t(655),v=t(6198),A=t(4659),R=t(9039),V=t(8235),$=t(4495),L=r.JSON,D=r.Number,C=r.SyntaxError,G=L&&L.parse,q=a("Object","keys"),J=Object.getOwnPropertyDescriptor,Q=m("".charAt),Tt=m("".slice),mt=m(/./.exec),Dt=m([].push),pt=/^\d$/,ot=/^[1-9]$/,ft=/^(?:-|\d)$/,gt=/^[\t\n\r ]$/,Z=0,at=1,Rt=function(Bt,It){Bt=g(Bt);var St=new ae(Bt,0),qt=St.parse(),le=qt.value,jt=St.skip(gt,qt.end);if(jt<Bt.length)throw new C('Unexpected extra character: "'+Q(Bt,jt)+'" after the parsed data at: '+jt);return h(It)?Ft({"":le},"",It,qt):le},Ft=function(Bt,It,St,qt){var le=Bt[It],jt=qt&&le===qt.value,he=jt&&typeof qt.source=="string"?{source:qt.source}:{},Xt,it,c,u,E;if(p(le)){var k=w(le),y=jt?qt.nodes:k?[]:{};if(k)for(Xt=y.length,c=v(le),u=0;u<c;u++)Vt(le,u,Ft(le,""+u,St,u<Xt?y[u]:void 0));else for(it=q(le),c=v(it),u=0;u<c;u++)E=it[u],Vt(le,E,Ft(le,E,St,f(y,E)?y[E]:void 0))}return l(St,Bt,It,le,he)},Vt=function(Bt,It,St){if(n){var qt=J(Bt,It);if(qt&&!qt.configurable)return}St===void 0?delete Bt[It]:A(Bt,It,St)},Qt=function(Bt,It,St,qt){this.value=Bt,this.end=It,this.source=St,this.nodes=qt},ae=function(Bt,It){this.source=Bt,this.index=It};ae.prototype={fork:function(Bt){return new ae(this.source,Bt)},parse:function(){var Bt=this.source,It=this.skip(gt,this.index),St=this.fork(It),qt=Q(Bt,It);if(mt(ft,qt))return St.number();switch(qt){case"{":return St.object();case"[":return St.array();case'"':return St.string();case"t":return St.keyword(!0);case"f":return St.keyword(!1);case"n":return St.keyword(null)}throw new C('Unexpected character: "'+qt+'" at: '+It)},node:function(Bt,It,St,qt,le){return new Qt(It,qt,Bt?null:Tt(this.source,St,qt),le)},object:function(){for(var Bt=this.source,It=this.index+1,St=!1,qt={},le={};It<Bt.length;){if(It=this.until(['"',"}"],It),Q(Bt,It)==="}"&&!St){It++;break}var jt=this.fork(It).string(),he=jt.value;It=jt.end,It=this.until([":"],It)+1,It=this.skip(gt,It),jt=this.fork(It).parse(),A(le,he,jt),A(qt,he,jt.value),It=this.until([",","}"],jt.end);var Xt=Q(Bt,It);if(Xt===",")St=!0,It++;else if(Xt==="}"){It++;break}}return this.node(at,qt,this.index,It,le)},array:function(){for(var Bt=this.source,It=this.index+1,St=!1,qt=[],le=[];It<Bt.length;){if(It=this.skip(gt,It),Q(Bt,It)==="]"&&!St){It++;break}var jt=this.fork(It).parse();if(Dt(le,jt),Dt(qt,jt.value),It=this.until([",","]"],jt.end),Q(Bt,It)===",")St=!0,It++;else if(Q(Bt,It)==="]"){It++;break}}return this.node(at,qt,this.index,It,le)},string:function(){var Bt=this.index,It=V(this.source,this.index+1);return this.node(Z,It.value,Bt,It.end)},number:function(){var Bt=this.source,It=this.index,St=It;if(Q(Bt,St)==="-"&&St++,Q(Bt,St)==="0")St++;else if(mt(ot,Q(Bt,St)))St=this.skip(pt,++St);else throw new C("Failed to parse number at: "+St);if(Q(Bt,St)==="."&&(St=this.skip(pt,++St)),Q(Bt,St)==="e"||Q(Bt,St)==="E"){St++,(Q(Bt,St)==="+"||Q(Bt,St)==="-")&&St++;var qt=St;if(St=this.skip(pt,St),qt===St)throw new C("Failed to parse number's exponent value at: "+St)}return this.node(Z,D(Tt(Bt,It,St)),It,St)},keyword:function(Bt){var It=""+Bt,St=this.index,qt=St+It.length;if(Tt(this.source,St,qt)!==It)throw new C("Failed to parse value at: "+St);return this.node(Z,Bt,St,qt)},skip:function(Bt,It){for(var St=this.source;It<St.length&&mt(Bt,Q(St,It));It++);return It},until:function(Bt,It){It=this.skip(gt,It);for(var St=Q(this.source,It),qt=0;qt<Bt.length;qt++)if(Bt[qt]===St)return It;throw new C('Unexpected character: "'+St+'" at: '+It)}};var Ae=R(function(){var Bt="9007199254740993",It;return G(Bt,function(St,qt,le){It=le.source}),It!==Bt}),me=$&&!R(function(){return 1/G("-0 	")!==-1/0});s({target:"JSON",stat:!0,forced:Ae},{parse:function(Bt,It){return me&&!h(It)?G(Bt):Rt(Bt,It)}})},3375:(i,o,t)=>{var s=t(6518),n=t(3440),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:n})},9225:(i,o,t)=>{var s=t(6518),n=t(9039),r=t(8750),a=t(4916),m=!a("intersection")||n(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});s({target:"Set",proto:!0,real:!0,forced:m},{intersection:r})},3972:(i,o,t)=>{var s=t(6518),n=t(4449),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:n})},9209:(i,o,t)=>{var s=t(6518),n=t(3838),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:n})},5714:(i,o,t)=>{var s=t(6518),n=t(8527),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:n})},7561:(i,o,t)=>{var s=t(6518),n=t(3650),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:n})},6197:(i,o,t)=>{var s=t(6518),n=t(4204),r=t(4916);s({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:n})},4979:(i,o,t)=>{var s=t(6518),n=t(4475),r=t(7751),a=t(6980),m=t(4913).f,l=t(9297),h=t(679),p=t(3167),w=t(2603),f=t(5002),g=t(6193),v=t(3724),A=t(6395),R="DOMException",V=r("Error"),$=r(R),L=function(){h(this,D);var ft=arguments.length,gt=w(ft<1?void 0:arguments[0]),Z=w(ft<2?void 0:arguments[1],"Error"),at=new $(gt,Z),Rt=new V(gt);return Rt.name=R,m(at,"stack",a(1,g(Rt.stack,1))),p(at,this,L),at},D=L.prototype=$.prototype,C="stack"in new V(R),G="stack"in new $(1,2),q=$&&v&&Object.getOwnPropertyDescriptor(n,R),J=!!q&&!(q.writable&&q.configurable),Q=C&&!J&&!G;s({global:!0,constructor:!0,forced:A||Q},{DOMException:Q?L:$});var Tt=r(R),mt=Tt.prototype;if(mt.constructor!==Tt){A||m(mt,"constructor",a(1,Tt));for(var Dt in f)if(l(f,Dt)){var pt=f[Dt],ot=pt.s;l(Tt,ot)||m(Tt,ot,a(6,pt.c))}}},4603:(i,o,t)=>{var s=t(6840),n=t(9504),r=t(655),a=t(2812),m=URLSearchParams,l=m.prototype,h=n(l.append),p=n(l.delete),w=n(l.forEach),f=n([].push),g=new m("a=1&a=2&b=3");g.delete("a",1),g.delete("b",void 0),g+""!="a=2"&&s(l,"delete",function(v){var A=arguments.length,R=A<2?void 0:arguments[1];if(A&&R===void 0)return p(this,v);var V=[];w(this,function(Q,Tt){f(V,{key:Tt,value:Q})}),a(A,1);for(var $=r(v),L=r(R),D=0,C=0,G=!1,q=V.length,J;D<q;)J=V[D++],G||J.key===$?(G=!0,p(this,J.key)):C++;for(;C<q;)J=V[C++],J.key===$&&J.value===L||h(this,J.key,J.value)},{enumerable:!0,unsafe:!0})},7566:(i,o,t)=>{var s=t(6840),n=t(9504),r=t(655),a=t(2812),m=URLSearchParams,l=m.prototype,h=n(l.getAll),p=n(l.has),w=new m("a=1");(w.has("a",2)||!w.has("a",void 0))&&s(l,"has",function(f){var g=arguments.length,v=g<2?void 0:arguments[1];if(g&&v===void 0)return p(this,f);var A=h(this,f);a(g,1);for(var R=r(v),V=0;V<A.length;)if(A[V++]===R)return!0;return!1},{enumerable:!0,unsafe:!0})},8721:(i,o,t)=>{var s=t(3724),n=t(9504),r=t(2106),a=URLSearchParams.prototype,m=n(a.forEach);s&&!("size"in a)&&r(a,"size",{get:function(){var l=0;return m(this,function(){l++}),l},configurable:!0,enumerable:!0})},6976:(i,o,t)=>{var Bt,St,Os,le,ea,he,sa,it,c,u,E,k,y,M,I,F,S,b,_,j,tt,K,rt,ct,At,ia,yt,Ji,U,In,ht,Pn,Lt,Ut,zt,Kt,te,ie,ce,Dn,be,Te,Oe,Fe,na,Le,Fn;t.d(o,{AnnotationLayer:()=>me,FreeTextAnnotationElement:()=>mt,InkAnnotationElement:()=>at,StampAnnotationElement:()=>ae}),t(4114),t(8992),t(670),t(1454),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292),n=t(5419),r=t(9792);function a(ue){return Math.floor(Math.max(0,Math.min(1,ue))*255).toString(16).padStart(2,"0")}function m(ue){return Math.max(0,Math.min(255,255*ue))}class l{static CMYK_G(Y){let[P,st,B,T]=Y;return["G",1-Math.min(1,.3*P+.59*B+.11*st+T)]}static G_CMYK(Y){let[P]=Y;return["CMYK",0,0,0,1-P]}static G_RGB(Y){let[P]=Y;return["RGB",P,P,P]}static G_rgb(Y){let[P]=Y;return P=m(P),[P,P,P]}static G_HTML(Y){let[P]=Y;const st=a(P);return`#${st}${st}${st}`}static RGB_G(Y){let[P,st,B]=Y;return["G",.3*P+.59*st+.11*B]}static RGB_rgb(Y){return Y.map(m)}static RGB_HTML(Y){return`#${Y.map(a).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(Y){let[P,st,B,T]=Y;return["RGB",1-Math.min(1,P+T),1-Math.min(1,B+T),1-Math.min(1,st+T)]}static CMYK_rgb(Y){let[P,st,B,T]=Y;return[m(1-Math.min(1,P+T)),m(1-Math.min(1,B+T)),m(1-Math.min(1,st+T))]}static CMYK_HTML(Y){const P=this.CMYK_RGB(Y).slice(1);return this.RGB_HTML(P)}static RGB_CMYK(Y){let[P,st,B]=Y;const T=1-P,N=1-st,W=1-B,lt=Math.min(T,N,W);return["CMYK",T,N,W,lt]}}var h=t(8284);const p=1e3,w=9,f=new WeakSet;function g(ue){return{width:ue[2]-ue[0],height:ue[3]-ue[1]}}class v{static create(Y){switch(Y.data.annotationType){case s.AnnotationType.LINK:return new R(Y);case s.AnnotationType.TEXT:return new V(Y);case s.AnnotationType.WIDGET:switch(Y.data.fieldType){case"Tx":return new L(Y);case"Btn":return Y.data.radioButton?new G(Y):Y.data.checkBox?new C(Y):new q(Y);case"Ch":return new J(Y);case"Sig":return new D(Y)}return new $(Y);case s.AnnotationType.POPUP:return new Q(Y);case s.AnnotationType.FREETEXT:return new mt(Y);case s.AnnotationType.LINE:return new Dt(Y);case s.AnnotationType.SQUARE:return new pt(Y);case s.AnnotationType.CIRCLE:return new ot(Y);case s.AnnotationType.POLYLINE:return new ft(Y);case s.AnnotationType.CARET:return new Z(Y);case s.AnnotationType.INK:return new at(Y);case s.AnnotationType.POLYGON:return new gt(Y);case s.AnnotationType.HIGHLIGHT:return new Rt(Y);case s.AnnotationType.UNDERLINE:return new Ft(Y);case s.AnnotationType.SQUIGGLY:return new Vt(Y);case s.AnnotationType.STRIKEOUT:return new Qt(Y);case s.AnnotationType.STAMP:return new ae(Y);case s.AnnotationType.FILEATTACHMENT:return new Ae(Y);default:return new A(Y)}}}const It=class It{constructor(Y){x(this,Bt,!1);let{isRenderable:P=!1,ignoreBorder:st=!1,createQuadrilaterals:B=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=P,this.data=Y.data,this.layer=Y.layer,this.linkService=Y.linkService,this.downloadManager=Y.downloadManager,this.imageResourcesPath=Y.imageResourcesPath,this.renderForms=Y.renderForms,this.svgFactory=Y.svgFactory,this.annotationStorage=Y.annotationStorage,this.enableScripting=Y.enableScripting,this.hasJSActions=Y.hasJSActions,this._fieldObjects=Y.fieldObjects,this.parent=Y.parent,P&&(this.container=this._createContainer(st)),B&&this._createQuadrilaterals()}static _hasPopupData(Y){let{titleObj:P,contentsObj:st,richText:B}=Y;return!!(P!=null&&P.str||st!=null&&st.str||B!=null&&B.str)}get hasPopupData(){return It._hasPopupData(this.data)}_createContainer(Y){const{data:P,parent:{page:st,viewport:B}}=this,T=document.createElement("section");T.setAttribute("data-annotation-id",P.id),this instanceof $||(T.tabIndex=p),T.style.zIndex=this.parent.zIndex++,P.popupRef&&T.setAttribute("aria-haspopup","dialog"),P.alternativeText&&(T.title=P.alternativeText),P.noRotate&&T.classList.add("norotate");const{pageWidth:N,pageHeight:W,pageX:lt,pageY:bt}=B.rawDims;if(!P.rect||this instanceof Q){const{rotation:Nt}=P;return!P.hasOwnCanvas&&Nt!==0&&this.setRotation(Nt,T),T}const{width:wt,height:Ht}=g(P.rect),Mt=s.Util.normalizeRect([P.rect[0],st.view[3]-P.rect[1]+st.view[1],P.rect[2],st.view[3]-P.rect[3]+st.view[1]]);if(!Y&&P.borderStyle.width>0){T.style.borderWidth=`${P.borderStyle.width}px`;const Nt=P.borderStyle.horizontalCornerRadius,Yt=P.borderStyle.verticalCornerRadius;if(Nt>0||Yt>0){const ne=`calc(${Nt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;T.style.borderRadius=ne}else if(this instanceof G){const ne=`calc(${wt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;T.style.borderRadius=ne}switch(P.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid";break}const re=P.borderColor||null;re?(z(this,Bt,!0),T.style.borderColor=s.Util.makeHexColor(re[0]|0,re[1]|0,re[2]|0)):T.style.borderWidth=0}T.style.left=`${100*(Mt[0]-lt)/N}%`,T.style.top=`${100*(Mt[1]-bt)/W}%`;const{rotation:Ct}=P;return P.hasOwnCanvas||Ct===0?(T.style.width=`${100*wt/N}%`,T.style.height=`${100*Ht/W}%`):this.setRotation(Ct,T),T}setRotation(Y){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:st,pageHeight:B}=this.parent.viewport.rawDims,{width:T,height:N}=g(this.data.rect);let W,lt;Y%180===0?(W=100*T/st,lt=100*N/B):(W=100*N/st,lt=100*T/B),P.style.width=`${W}%`,P.style.height=`${lt}%`,P.setAttribute("data-main-rotation",(360-Y)%360)}get _commonActions(){const Y=(P,st,B)=>{const T=B.detail[P],N=T[0],W=T.slice(1);B.target.style[st]=l[`${N}_HTML`](W),this.annotationStorage.setValue(this.data.id,{[st]:l[`${N}_rgb`](W)})};return(0,s.shadow)(this,"_commonActions",{display:P=>{const{display:st}=P.detail,B=st%2===1;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:B,noPrint:st===1||st===2})},print:P=>{this.annotationStorage.setValue(this.data.id,{noPrint:!P.detail.print})},hidden:P=>{const{hidden:st}=P.detail;this.container.style.visibility=st?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:st,noView:st})},focus:P=>{setTimeout(()=>P.target.focus({preventScroll:!1}),0)},userName:P=>{P.target.title=P.detail.userName},readonly:P=>{P.target.disabled=P.detail.readonly},required:P=>{this._setRequired(P.target,P.detail.required)},bgColor:P=>{Y("bgColor","backgroundColor",P)},fillColor:P=>{Y("fillColor","backgroundColor",P)},fgColor:P=>{Y("fgColor","color",P)},textColor:P=>{Y("textColor","color",P)},borderColor:P=>{Y("borderColor","borderColor",P)},strokeColor:P=>{Y("strokeColor","borderColor",P)},rotation:P=>{const st=P.detail.rotation;this.setRotation(st),this.annotationStorage.setValue(this.data.id,{rotation:st})}})}_dispatchEventFromSandbox(Y,P){var B;const st=this._commonActions;for(const T of Object.keys(P.detail))(B=Y[T]||st[T])==null||B(P)}_setDefaultPropertiesFromJS(Y){if(!this.enableScripting)return;const P=this.annotationStorage.getRawValue(this.data.id);if(!P)return;const st=this._commonActions;for(const[B,T]of Object.entries(P)){const N=st[B];if(N){const W={detail:{[B]:T},target:Y};N(W),delete P[B]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Y}=this.data;if(!Y)return;const[P,st,B,T]=this.data.rect;if(Y.length===1){const[,{x:Yt,y:re},{x:ne,y:we}]=Y[0];if(B===Yt&&T===re&&P===ne&&st===we)return}const{style:N}=this.container;let W;if(e(this,Bt)){const{borderColor:Yt,borderWidth:re}=N;N.borderWidth=0,W=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Yt}" stroke-width="${re}">`],this.container.classList.add("hasBorder")}const lt=B-P,bt=T-st,{svgFactory:wt}=this,Ht=wt.createElement("svg");Ht.classList.add("quadrilateralsContainer"),Ht.setAttribute("width",0),Ht.setAttribute("height",0);const Mt=wt.createElement("defs");Ht.append(Mt);const Ct=wt.createElement("clipPath"),Nt=`clippath_${this.data.id}`;Ct.setAttribute("id",Nt),Ct.setAttribute("clipPathUnits","objectBoundingBox"),Mt.append(Ct);for(const[,{x:Yt,y:re},{x:ne,y:we}]of Y){const de=wt.createElement("rect"),ze=(ne-P)/lt,Ge=(T-re)/bt,He=(Yt-ne)/lt,ss=(re-we)/bt;de.setAttribute("x",ze),de.setAttribute("y",Ge),de.setAttribute("width",He),de.setAttribute("height",ss),Ct.append(de),W==null||W.push(`<rect vector-effect="non-scaling-stroke" x="${ze}" y="${Ge}" width="${He}" height="${ss}"/>`)}e(this,Bt)&&(W.push("</g></svg>')"),N.backgroundImage=W.join("")),this.container.append(Ht),this.container.style.clipPath=`url(#${Nt})`}_createPopup(){const{container:Y,data:P}=this;Y.setAttribute("aria-haspopup","dialog");const st=new Q({data:{color:P.color,titleObj:P.titleObj,modificationDate:P.modificationDate,contentsObj:P.contentsObj,richText:P.richText,parentRect:P.rect,borderStyle:0,id:`popup_${P.id}`,rotation:P.rotation},parent:this.parent,elements:[this]});this.parent.div.append(st.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Y){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const st=[];if(this._fieldObjects){const B=this._fieldObjects[Y];if(B)for(const{page:T,id:N,exportValues:W}of B){if(T===-1||N===P)continue;const lt=typeof W=="string"?W:null,bt=document.querySelector(`[data-element-id="${N}"]`);if(bt&&!f.has(bt)){(0,s.warn)(`_getElementsByName - element not allowed: ${N}`);continue}st.push({id:N,exportValue:lt,domElement:bt})}return st}for(const B of document.getElementsByName(Y)){const{exportValue:T}=B,N=B.getAttribute("data-element-id");N!==P&&f.has(B)&&st.push({id:N,exportValue:T,domElement:B})}return st}show(){var Y;this.container&&(this.container.hidden=!1),(Y=this.popup)==null||Y.maybeShow()}hide(){var Y;this.container&&(this.container.hidden=!0),(Y=this.popup)==null||Y.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Y=this.getElementsToTriggerPopup();if(Array.isArray(Y))for(const P of Y)P.classList.add("highlightArea");else Y.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:Y,data:{id:P}}=this;this.container.addEventListener("dblclick",()=>{var st;(st=this.linkService.eventBus)==null||st.dispatch("switchannotationeditormode",{source:this,mode:Y,editId:P})})}};Bt=new WeakMap;let A=It;class R extends A{constructor(P){let st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(P,{isRenderable:!0,ignoreBorder:!!(st!=null&&st.ignoreBorder),createQuadrilaterals:!0});x(this,St);x(this,le);x(this,he);this.isTooltipOnly=P.data.isTooltipOnly}render(){const{data:P,linkService:st}=this,B=document.createElement("a");B.setAttribute("data-element-id",P.id);let T=!1;return P.url?(st.addLinkAttributes(B,P.url,P.newWindow),T=!0):P.action?(this._bindNamedAction(B,P.action),T=!0):P.attachment?(O(this,le,ea).call(this,B,P.attachment,P.attachmentDest),T=!0):P.setOCGState?(O(this,he,sa).call(this,B,P.setOCGState),T=!0):P.dest?(this._bindLink(B,P.dest),T=!0):(P.actions&&(P.actions.Action||P.actions["Mouse Up"]||P.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(B,P),T=!0),P.resetForm?(this._bindResetFormAction(B,P.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(B,""),T=!0)),this.container.classList.add("linkAnnotation"),T&&this.container.append(B),this.container}_bindLink(P,st){P.href=this.linkService.getDestinationHash(st),P.onclick=()=>(st&&this.linkService.goToDestination(st),!1),(st||st==="")&&O(this,St,Os).call(this)}_bindNamedAction(P,st){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeNamedAction(st),!1),O(this,St,Os).call(this)}_bindJSAction(P,st){P.href=this.linkService.getAnchorUrl("");const B=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(st.actions)){const N=B.get(T);N&&(P[N]=()=>{var W;return(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:st.id,name:T}}),!1})}P.onclick||(P.onclick=()=>!1),O(this,St,Os).call(this)}_bindResetFormAction(P,st){const B=P.onclick;if(B||(P.href=this.linkService.getAnchorUrl("")),O(this,St,Os).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),B||(P.onclick=()=>!1);return}P.onclick=()=>{var Ht;B==null||B();const{fields:T,refs:N,include:W}=st,lt=[];if(T.length!==0||N.length!==0){const Mt=new Set(N);for(const Ct of T){const Nt=this._fieldObjects[Ct]||[];for(const{id:Yt}of Nt)Mt.add(Yt)}for(const Ct of Object.values(this._fieldObjects))for(const Nt of Ct)Mt.has(Nt.id)===W&&lt.push(Nt)}else for(const Mt of Object.values(this._fieldObjects))lt.push(...Mt);const bt=this.annotationStorage,wt=[];for(const Mt of lt){const{id:Ct}=Mt;switch(wt.push(Ct),Mt.type){case"text":{const Yt=Mt.defaultValue||"";bt.setValue(Ct,{value:Yt});break}case"checkbox":case"radiobutton":{const Yt=Mt.defaultValue===Mt.exportValues;bt.setValue(Ct,{value:Yt});break}case"combobox":case"listbox":{const Yt=Mt.defaultValue||"";bt.setValue(Ct,{value:Yt});break}default:continue}const Nt=document.querySelector(`[data-element-id="${Ct}"]`);if(Nt){if(!f.has(Nt)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Ct}`);continue}}else continue;Nt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:wt,name:"ResetForm"}})),!1}}}St=new WeakSet,Os=function(){this.container.setAttribute("data-internal-link","")},le=new WeakSet,ea=function(P,st){let B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>{var T;return(T=this.downloadManager)==null||T.openOrDownloadData(st.content,st.filename,B),!1},O(this,St,Os).call(this)},he=new WeakSet,sa=function(P,st){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeSetOCGState(st),!1),O(this,St,Os).call(this)};class V extends A{constructor(Y){super(Y,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Y=document.createElement("img");return Y.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Y.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),Y.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Y),this.container}}class $ extends A{render(){return this.container}showElementAndHideCanvas(Y){var P;this.data.hasOwnCanvas&&(((P=Y.previousSibling)==null?void 0:P.nodeName)==="CANVAS"&&(Y.previousSibling.hidden=!0),Y.hidden=!1)}_getKeyModifier(Y){return s.FeatureTest.platform.isMac?Y.metaKey:Y.ctrlKey}_setEventListener(Y,P,st,B,T){st.includes("mouse")?Y.addEventListener(st,N=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:T(N),shift:N.shiftKey,modifier:this._getKeyModifier(N)}})}):Y.addEventListener(st,N=>{var W;if(st==="blur"){if(!P.focused||!N.relatedTarget)return;P.focused=!1}else if(st==="focus"){if(P.focused)return;P.focused=!0}T&&((W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:T(N)}}))})}_setEventListeners(Y,P,st,B){var T,N,W;for(const[lt,bt]of st)(bt==="Action"||(T=this.data.actions)!=null&&T[bt])&&((bt==="Focus"||bt==="Blur")&&(P||(P={focused:!1})),this._setEventListener(Y,P,lt,bt,B),bt==="Focus"&&!((N=this.data.actions)!=null&&N.Blur)?this._setEventListener(Y,P,"blur","Blur",null):bt==="Blur"&&!((W=this.data.actions)!=null&&W.Focus)&&this._setEventListener(Y,P,"focus","Focus",null))}_setBackgroundColor(Y){const P=this.data.backgroundColor||null;Y.style.backgroundColor=P===null?"transparent":s.Util.makeHexColor(P[0],P[1],P[2])}_setTextStyle(Y){const P=["left","center","right"],{fontColor:st}=this.data.defaultAppearanceData,B=this.data.defaultAppearanceData.fontSize||w,T=Y.style;let N;const W=2,lt=bt=>Math.round(10*bt)/10;if(this.data.multiLine){const bt=Math.abs(this.data.rect[3]-this.data.rect[1]-W),wt=Math.round(bt/(s.LINE_FACTOR*B))||1,Ht=bt/wt;N=Math.min(B,lt(Ht/s.LINE_FACTOR))}else{const bt=Math.abs(this.data.rect[3]-this.data.rect[1]-W);N=Math.min(B,lt(bt/s.LINE_FACTOR))}T.fontSize=`calc(${N}px * var(--scale-factor))`,T.color=s.Util.makeHexColor(st[0],st[1],st[2]),this.data.textAlignment!==null&&(T.textAlign=P[this.data.textAlignment])}_setRequired(Y,P){P?Y.setAttribute("required",!0):Y.removeAttribute("required"),Y.setAttribute("aria-required",P)}}class L extends ${constructor(Y){const P=Y.renderForms||Y.data.hasOwnCanvas||!Y.data.hasAppearance&&!!Y.data.fieldValue;super(Y,{isRenderable:P})}setPropertyOnSiblings(Y,P,st,B){const T=this.annotationStorage;for(const N of this._getElementsByName(Y.name,Y.id))N.domElement&&(N.domElement[P]=st),T.setValue(N.id,{[B]:st})}render(){var B,T;const Y=this.annotationStorage,P=this.data.id;this.container.classList.add("textWidgetAnnotation");let st=null;if(this.renderForms){const N=Y.getValue(P,{value:this.data.fieldValue});let W=N.value||"";const lt=Y.getValue(P,{charLimit:this.data.maxLen}).charLimit;lt&&W.length>lt&&(W=W.slice(0,lt));let bt=N.formattedValue||((B=this.data.textContent)==null?void 0:B.join(`
`))||null;bt&&this.data.comb&&(bt=bt.replaceAll(/\s+/g,""));const wt={userValue:W,formattedValue:bt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(st=document.createElement("textarea"),st.textContent=bt??W,this.data.doNotScroll&&(st.style.overflowY="hidden")):(st=document.createElement("input"),st.type="text",st.setAttribute("value",bt??W),this.data.doNotScroll&&(st.style.overflowX="hidden")),this.data.hasOwnCanvas&&(st.hidden=!0),f.add(st),st.setAttribute("data-element-id",P),st.disabled=this.data.readOnly,st.name=this.data.fieldName,st.tabIndex=p,this._setRequired(st,this.data.required),lt&&(st.maxLength=lt),st.addEventListener("input",Mt=>{Y.setValue(P,{value:Mt.target.value}),this.setPropertyOnSiblings(st,"value",Mt.target.value,"value"),wt.formattedValue=null}),st.addEventListener("resetform",Mt=>{const Ct=this.data.defaultFieldValue??"";st.value=wt.userValue=Ct,wt.formattedValue=null});let Ht=Mt=>{const{formattedValue:Ct}=wt;Ct!=null&&(Mt.target.value=Ct),Mt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){st.addEventListener("focus",Ct=>{var Yt;if(wt.focused)return;const{target:Nt}=Ct;wt.userValue&&(Nt.value=wt.userValue),wt.lastCommittedValue=Nt.value,wt.commitKey=1,(Yt=this.data.actions)!=null&&Yt.Focus||(wt.focused=!0)}),st.addEventListener("updatefromsandbox",Ct=>{this.showElementAndHideCanvas(Ct.target);const Nt={value(Yt){wt.userValue=Yt.detail.value??"",Y.setValue(P,{value:wt.userValue.toString()}),Yt.target.value=wt.userValue},formattedValue(Yt){const{formattedValue:re}=Yt.detail;wt.formattedValue=re,re!=null&&Yt.target!==document.activeElement&&(Yt.target.value=re),Y.setValue(P,{formattedValue:re})},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var de;const{charLimit:re}=Yt.detail,{target:ne}=Yt;if(re===0){ne.removeAttribute("maxLength");return}ne.setAttribute("maxLength",re);let we=wt.userValue;!we||we.length<=re||(we=we.slice(0,re),ne.value=wt.userValue=we,Y.setValue(P,{value:we}),(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:we,willCommit:!0,commitKey:1,selStart:ne.selectionStart,selEnd:ne.selectionEnd}}))}};this._dispatchEventFromSandbox(Nt,Ct)}),st.addEventListener("keydown",Ct=>{var re;wt.commitKey=1;let Nt=-1;if(Ct.key==="Escape"?Nt=0:Ct.key==="Enter"&&!this.data.multiLine?Nt=2:Ct.key==="Tab"&&(wt.commitKey=3),Nt===-1)return;const{value:Yt}=Ct.target;wt.lastCommittedValue!==Yt&&(wt.lastCommittedValue=Yt,wt.userValue=Yt,(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Nt,selStart:Ct.target.selectionStart,selEnd:Ct.target.selectionEnd}}))});const Mt=Ht;Ht=null,st.addEventListener("blur",Ct=>{var Yt,re;if(!wt.focused||!Ct.relatedTarget)return;(Yt=this.data.actions)!=null&&Yt.Blur||(wt.focused=!1);const{value:Nt}=Ct.target;wt.userValue=Nt,wt.lastCommittedValue!==Nt&&((re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Nt,willCommit:!0,commitKey:wt.commitKey,selStart:Ct.target.selectionStart,selEnd:Ct.target.selectionEnd}})),Mt(Ct)}),(T=this.data.actions)!=null&&T.Keystroke&&st.addEventListener("beforeinput",Ct=>{var Ge;wt.lastCommittedValue=null;const{data:Nt,target:Yt}=Ct,{value:re,selectionStart:ne,selectionEnd:we}=Yt;let de=ne,ze=we;switch(Ct.inputType){case"deleteWordBackward":{const He=re.substring(0,ne).match(/\w*[^\w]*$/);He&&(de-=He[0].length);break}case"deleteWordForward":{const He=re.substring(ne).match(/^[^\w]*\w*/);He&&(ze+=He[0].length);break}case"deleteContentBackward":ne===we&&(de-=1);break;case"deleteContentForward":ne===we&&(ze+=1);break}Ct.preventDefault(),(Ge=this.linkService.eventBus)==null||Ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:re,change:Nt||"",willCommit:!1,selStart:de,selEnd:ze}})}),this._setEventListeners(st,wt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ct=>Ct.target.value)}if(Ht&&st.addEventListener("blur",Ht),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/lt;st.classList.add("comb"),st.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else st=document.createElement("div"),st.textContent=this.data.fieldValue,st.style.verticalAlign="middle",st.style.display="table-cell",this.data.hasOwnCanvas&&(st.hidden=!0);return this._setTextStyle(st),this._setBackgroundColor(st),this._setDefaultPropertiesFromJS(st),this.container.append(st),this.container}}class D extends ${constructor(Y){super(Y,{isRenderable:!!Y.data.hasOwnCanvas})}}class C extends ${constructor(Y){super(Y,{isRenderable:Y.renderForms})}render(){const Y=this.annotationStorage,P=this.data,st=P.id;let B=Y.getValue(st,{value:P.exportValue===P.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",Y.setValue(st,{value:B})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const T=document.createElement("input");return f.add(T),T.setAttribute("data-element-id",st),T.disabled=P.readOnly,this._setRequired(T,this.data.required),T.type="checkbox",T.name=P.fieldName,B&&T.setAttribute("checked",!0),T.setAttribute("exportValue",P.exportValue),T.tabIndex=p,T.addEventListener("change",N=>{const{name:W,checked:lt}=N.target;for(const bt of this._getElementsByName(W,st)){const wt=lt&&bt.exportValue===P.exportValue;bt.domElement&&(bt.domElement.checked=wt),Y.setValue(bt.id,{value:wt})}Y.setValue(st,{value:lt})}),T.addEventListener("resetform",N=>{const W=P.defaultFieldValue||"Off";N.target.checked=W===P.exportValue}),this.enableScripting&&this.hasJSActions&&(T.addEventListener("updatefromsandbox",N=>{const W={value(lt){lt.target.checked=lt.detail.value!=="Off",Y.setValue(st,{value:lt.target.checked})}};this._dispatchEventFromSandbox(W,N)}),this._setEventListeners(T,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.checked)),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class G extends ${constructor(Y){super(Y,{isRenderable:Y.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Y=this.annotationStorage,P=this.data,st=P.id;let B=Y.getValue(st,{value:P.fieldValue===P.buttonValue}).value;if(typeof B=="string"&&(B=B!==P.buttonValue,Y.setValue(st,{value:B})),B)for(const N of this._getElementsByName(P.fieldName,st))Y.setValue(N.id,{value:!1});const T=document.createElement("input");if(f.add(T),T.setAttribute("data-element-id",st),T.disabled=P.readOnly,this._setRequired(T,this.data.required),T.type="radio",T.name=P.fieldName,B&&T.setAttribute("checked",!0),T.tabIndex=p,T.addEventListener("change",N=>{const{name:W,checked:lt}=N.target;for(const bt of this._getElementsByName(W,st))Y.setValue(bt.id,{value:!1});Y.setValue(st,{value:lt})}),T.addEventListener("resetform",N=>{const W=P.defaultFieldValue;N.target.checked=W!=null&&W===P.buttonValue}),this.enableScripting&&this.hasJSActions){const N=P.buttonValue;T.addEventListener("updatefromsandbox",W=>{const lt={value:bt=>{const wt=N===bt.detail.value;for(const Ht of this._getElementsByName(bt.target.name)){const Mt=wt&&Ht.id===st;Ht.domElement&&(Ht.domElement.checked=Mt),Y.setValue(Ht.id,{value:Mt})}}};this._dispatchEventFromSandbox(lt,W)}),this._setEventListeners(T,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)}return this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class q extends R{constructor(Y){super(Y,{ignoreBorder:Y.data.hasAppearance})}render(){const Y=super.render();Y.classList.add("buttonWidgetAnnotation","pushButton");const P=Y.lastChild;return this.enableScripting&&this.hasJSActions&&P&&(this._setDefaultPropertiesFromJS(P),P.addEventListener("updatefromsandbox",st=>{this._dispatchEventFromSandbox({},st)})),Y}}class J extends ${constructor(Y){super(Y,{isRenderable:Y.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Y=this.annotationStorage,P=this.data.id,st=Y.getValue(P,{value:this.data.fieldValue}),B=document.createElement("select");f.add(B),B.setAttribute("data-element-id",P),B.disabled=this.data.readOnly,this._setRequired(B,this.data.required),B.name=this.data.fieldName,B.tabIndex=p;let T=this.data.combo&&this.data.options.length>0;this.data.combo||(B.size=this.data.options.length,this.data.multiSelect&&(B.multiple=!0)),B.addEventListener("resetform",wt=>{const Ht=this.data.defaultFieldValue;for(const Mt of B.options)Mt.selected=Mt.value===Ht});for(const wt of this.data.options){const Ht=document.createElement("option");Ht.textContent=wt.displayValue,Ht.value=wt.exportValue,st.value.includes(wt.exportValue)&&(Ht.setAttribute("selected",!0),T=!1),B.append(Ht)}let N=null;if(T){const wt=document.createElement("option");wt.value=" ",wt.setAttribute("hidden",!0),wt.setAttribute("selected",!0),B.prepend(wt),N=()=>{wt.remove(),B.removeEventListener("input",N),N=null},B.addEventListener("input",N)}const W=wt=>{const Ht=wt?"value":"textContent",{options:Mt,multiple:Ct}=B;return Ct?Array.prototype.filter.call(Mt,Nt=>Nt.selected).map(Nt=>Nt[Ht]):Mt.selectedIndex===-1?null:Mt[Mt.selectedIndex][Ht]};let lt=W(!1);const bt=wt=>{const Ht=wt.target.options;return Array.prototype.map.call(Ht,Mt=>({displayValue:Mt.textContent,exportValue:Mt.value}))};return this.enableScripting&&this.hasJSActions?(B.addEventListener("updatefromsandbox",wt=>{const Ht={value(Mt){N==null||N();const Ct=Mt.detail.value,Nt=new Set(Array.isArray(Ct)?Ct:[Ct]);for(const Yt of B.options)Yt.selected=Nt.has(Yt.value);Y.setValue(P,{value:W(!0)}),lt=W(!1)},multipleSelection(Mt){B.multiple=!0},remove(Mt){const Ct=B.options,Nt=Mt.detail.remove;Ct[Nt].selected=!1,B.remove(Nt),Ct.length>0&&Array.prototype.findIndex.call(Ct,Yt=>Yt.selected)===-1&&(Ct[0].selected=!0),Y.setValue(P,{value:W(!0),items:bt(Mt)}),lt=W(!1)},clear(Mt){for(;B.length!==0;)B.remove(0);Y.setValue(P,{value:null,items:[]}),lt=W(!1)},insert(Mt){const{index:Ct,displayValue:Nt,exportValue:Yt}=Mt.detail.insert,re=B.children[Ct],ne=document.createElement("option");ne.textContent=Nt,ne.value=Yt,re?re.before(ne):B.append(ne),Y.setValue(P,{value:W(!0),items:bt(Mt)}),lt=W(!1)},items(Mt){const{items:Ct}=Mt.detail;for(;B.length!==0;)B.remove(0);for(const Nt of Ct){const{displayValue:Yt,exportValue:re}=Nt,ne=document.createElement("option");ne.textContent=Yt,ne.value=re,B.append(ne)}B.options.length>0&&(B.options[0].selected=!0),Y.setValue(P,{value:W(!0),items:bt(Mt)}),lt=W(!1)},indices(Mt){const Ct=new Set(Mt.detail.indices);for(const Nt of Mt.target.options)Nt.selected=Ct.has(Nt.index);Y.setValue(P,{value:W(!0)}),lt=W(!1)},editable(Mt){Mt.target.disabled=!Mt.detail.editable}};this._dispatchEventFromSandbox(Ht,wt)}),B.addEventListener("input",wt=>{var Mt;const Ht=W(!0);Y.setValue(P,{value:Ht}),wt.preventDefault(),(Mt=this.linkService.eventBus)==null||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:lt,changeEx:Ht,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(B,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],wt=>wt.target.value)):B.addEventListener("input",function(wt){Y.setValue(P,{value:W(!0)})}),this.data.combo&&this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class Q extends A{constructor(Y){const{data:P,elements:st}=Y;super(Y,{isRenderable:A._hasPopupData(P)}),this.elements=st}render(){this.container.classList.add("popupAnnotation");const Y=new Tt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),P=[];for(const st of this.elements)st.popup=Y,P.push(st.data.id),st.addHighlightArea();return this.container.setAttribute("aria-controls",P.map(st=>`${s.AnnotationPrefix}${st}`).join(",")),this.container}}class Tt{constructor(Y){x(this,At);x(this,yt);x(this,U);x(this,ht);x(this,it,O(this,At,ia).bind(this));x(this,c,O(this,ht,Pn).bind(this));x(this,u,O(this,U,In).bind(this));x(this,E,O(this,yt,Ji).bind(this));x(this,k,null);x(this,y,null);x(this,M,null);x(this,I,null);x(this,F,null);x(this,S,null);x(this,b,null);x(this,_,!1);x(this,j,null);x(this,tt,null);x(this,K,null);x(this,rt,null);x(this,ct,!1);var Ct;let{container:P,color:st,elements:B,titleObj:T,modificationDate:N,contentsObj:W,richText:lt,parent:bt,rect:wt,parentRect:Ht,open:Mt}=Y;z(this,y,P),z(this,rt,T),z(this,M,W),z(this,K,lt),z(this,S,bt),z(this,k,st),z(this,tt,wt),z(this,b,Ht),z(this,F,B),z(this,I,n.PDFDateString.toDateObject(N)),this.trigger=B.flatMap(Nt=>Nt.getElementsToTriggerPopup());for(const Nt of this.trigger)Nt.addEventListener("click",e(this,E)),Nt.addEventListener("mouseenter",e(this,u)),Nt.addEventListener("mouseleave",e(this,c)),Nt.classList.add("popupTriggerArea");for(const Nt of B)(Ct=Nt.container)==null||Ct.addEventListener("keydown",e(this,it));e(this,y).hidden=!0,Mt&&O(this,yt,Ji).call(this)}render(){if(e(this,j))return;const{page:{view:Y},viewport:{rawDims:{pageWidth:P,pageHeight:st,pageX:B,pageY:T}}}=e(this,S),N=z(this,j,document.createElement("div"));if(N.className="popup",e(this,k)){const we=N.style.outlineColor=s.Util.makeHexColor(...e(this,k));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?N.style.backgroundColor=`color-mix(in srgb, ${we} 30%, white)`:N.style.backgroundColor=s.Util.makeHexColor(...e(this,k).map(de=>Math.floor(.7*(255-de)+de)))}const W=document.createElement("span");W.className="header";const lt=document.createElement("h1");if(W.append(lt),{dir:lt.dir,str:lt.textContent}=e(this,rt),N.append(W),e(this,I)){const we=document.createElement("span");we.classList.add("popupDate"),we.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),we.setAttribute("data-l10n-args",JSON.stringify({date:e(this,I).toLocaleDateString(),time:e(this,I).toLocaleTimeString()})),W.append(we)}const bt=e(this,M),wt=e(this,K);if(wt!=null&&wt.str&&(!(bt!=null&&bt.str)||bt.str===wt.str))h.XfaLayer.render({xfaHtml:wt.html,intent:"richText",div:N}),N.lastChild.classList.add("richText","popupContent");else{const we=this._formatContents(bt);N.append(we)}let Ht=!!e(this,b),Mt=Ht?e(this,b):e(this,tt);for(const we of e(this,F))if(!Mt||s.Util.intersect(we.data.rect,Mt)!==null){Mt=we.data.rect,Ht=!0;break}const Ct=s.Util.normalizeRect([Mt[0],Y[3]-Mt[1]+Y[1],Mt[2],Y[3]-Mt[3]+Y[1]]),Nt=Ht?Mt[2]-Mt[0]+5:0,Yt=Ct[0]+Nt,re=Ct[1],{style:ne}=e(this,y);ne.left=`${100*(Yt-B)/P}%`,ne.top=`${100*(re-T)/st}%`,e(this,y).append(N)}_formatContents(Y){let{str:P,dir:st}=Y;const B=document.createElement("p");B.classList.add("popupContent"),B.dir=st;const T=P.split(/(?:\r\n?|\n)/);for(let N=0,W=T.length;N<W;++N){const lt=T[N];B.append(document.createTextNode(lt)),N<W-1&&B.append(document.createElement("br"))}return B}forceHide(){z(this,ct,this.isVisible),e(this,ct)&&(e(this,y).hidden=!0)}maybeShow(){e(this,ct)&&(z(this,ct,!1),e(this,y).hidden=!1)}get isVisible(){return e(this,y).hidden===!1}}it=new WeakMap,c=new WeakMap,u=new WeakMap,E=new WeakMap,k=new WeakMap,y=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,S=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,tt=new WeakMap,K=new WeakMap,rt=new WeakMap,ct=new WeakMap,At=new WeakSet,ia=function(Y){Y.altKey||Y.shiftKey||Y.ctrlKey||Y.metaKey||(Y.key==="Enter"||Y.key==="Escape"&&e(this,_))&&O(this,yt,Ji).call(this)},yt=new WeakSet,Ji=function(){z(this,_,!e(this,_)),e(this,_)?(O(this,U,In).call(this),e(this,y).addEventListener("click",e(this,E)),e(this,y).addEventListener("keydown",e(this,it))):(O(this,ht,Pn).call(this),e(this,y).removeEventListener("click",e(this,E)),e(this,y).removeEventListener("keydown",e(this,it)))},U=new WeakSet,In=function(){e(this,j)||this.render(),this.isVisible?e(this,_)&&e(this,y).classList.add("focused"):(e(this,y).hidden=!1,e(this,y).style.zIndex=parseInt(e(this,y).style.zIndex)+1e3)},ht=new WeakSet,Pn=function(){e(this,y).classList.remove("focused"),!(e(this,_)||!this.isVisible)&&(e(this,y).hidden=!0,e(this,y).style.zIndex=parseInt(e(this,y).style.zIndex)-1e3)};class mt extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Y.data.textContent,this.textPosition=Y.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Y=document.createElement("div");Y.classList.add("annotationTextContent"),Y.setAttribute("role","comment");for(const P of this.textContent){const st=document.createElement("span");st.textContent=P,Y.append(st)}this.container.append(Y)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Dt extends A{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,Lt,null)}render(){this.container.classList.add("lineAnnotation");const P=this.data,{width:st,height:B}=g(P.rect),T=this.svgFactory.create(st,B,!0),N=z(this,Lt,this.svgFactory.createElement("svg:line"));return N.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),N.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),N.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),N.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),N.setAttribute("stroke-width",P.borderStyle.width||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),T.append(N),this.container.append(T),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lt=new WeakMap;class pt extends A{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,Ut,null)}render(){this.container.classList.add("squareAnnotation");const P=this.data,{width:st,height:B}=g(P.rect),T=this.svgFactory.create(st,B,!0),N=P.borderStyle.width,W=z(this,Ut,this.svgFactory.createElement("svg:rect"));return W.setAttribute("x",N/2),W.setAttribute("y",N/2),W.setAttribute("width",st-N),W.setAttribute("height",B-N),W.setAttribute("stroke-width",N||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ut=new WeakMap;class ot extends A{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,zt,null)}render(){this.container.classList.add("circleAnnotation");const P=this.data,{width:st,height:B}=g(P.rect),T=this.svgFactory.create(st,B,!0),N=P.borderStyle.width,W=z(this,zt,this.svgFactory.createElement("svg:ellipse"));return W.setAttribute("cx",st/2),W.setAttribute("cy",B/2),W.setAttribute("rx",st/2-N/2),W.setAttribute("ry",B/2-N/2),W.setAttribute("stroke-width",N||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class ft extends A{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,Kt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:st,height:B}=g(P.rect),T=this.svgFactory.create(st,B,!0);let N=[];for(const lt of P.vertices){const bt=lt.x-P.rect[0],wt=P.rect[3]-lt.y;N.push(bt+","+wt)}N=N.join(" ");const W=z(this,Kt,this.svgFactory.createElement(this.svgElementName));return W.setAttribute("points",N),W.setAttribute("stroke-width",P.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Kt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kt=new WeakMap;class gt extends ft{constructor(Y){super(Y),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Z extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends A{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0});x(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:st,height:B}=g(P.rect),T=this.svgFactory.create(st,B,!0);for(const N of P.inkLists){let W=[];for(const bt of N){const wt=bt.x-P.rect[0],Ht=P.rect[3]-bt.y;W.push(`${wt},${Ht}`)}W=W.join(" ");const lt=this.svgFactory.createElement(this.svgElementName);e(this,te).push(lt),lt.setAttribute("points",W),lt.setAttribute("stroke-width",P.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),!P.popupRef&&this.hasPopupData&&this._createPopup(),T.append(lt)}return this.container.append(T),this.container}getElementsToTriggerPopup(){return e(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap;class Rt extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Ft extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Vt extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Qt extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ae extends A{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ae extends A{constructor(P){var T;super(P,{isRenderable:!0});x(this,ce);x(this,ie,null);const{filename:st,content:B}=this.data.file;this.filename=(0,n.getFilenameFromUrl)(st,!0),this.content=B,(T=this.linkService.eventBus)==null||T.dispatch("fileattachmentannotation",{source:this,filename:st,content:B})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:P,data:st}=this;let B;st.hasAppearance||st.fillAlpha===0?B=document.createElement("div"):(B=document.createElement("img"),B.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(st.name)?"paperclip":"pushpin"}.svg`,st.fillAlpha&&st.fillAlpha<1&&(B.style=`filter: opacity(${Math.round(st.fillAlpha*100)}%);`)),B.addEventListener("dblclick",O(this,ce,Dn).bind(this)),z(this,ie,B);const{isMac:T}=s.FeatureTest.platform;return P.addEventListener("keydown",N=>{N.key==="Enter"&&(T?N.metaKey:N.ctrlKey)&&O(this,ce,Dn).call(this)}),!st.popupRef&&this.hasPopupData?this._createPopup():B.classList.add("popupTriggerArea"),P.append(B),P}getElementsToTriggerPopup(){return e(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap,ce=new WeakSet,Dn=function(){var P;(P=this.downloadManager)==null||P.openOrDownloadData(this.content,this.filename)};class me{constructor(Y){x(this,Fe);x(this,Le);x(this,be,null);x(this,Te,null);x(this,Oe,new Map);let{div:P,accessibilityManager:st,annotationCanvasMap:B,page:T,viewport:N}=Y;this.div=P,z(this,be,st),z(this,Te,B),this.page=T,this.viewport=N,this.zIndex=0}async render(Y){const{annotations:P}=Y,st=this.div;(0,n.setLayerDimensions)(st,this.viewport);const B=new Map,T={data:null,layer:st,linkService:Y.linkService,downloadManager:Y.downloadManager,imageResourcesPath:Y.imageResourcesPath||"",renderForms:Y.renderForms!==!1,svgFactory:new n.DOMSVGFactory,annotationStorage:Y.annotationStorage||new r.AnnotationStorage,enableScripting:Y.enableScripting===!0,hasJSActions:Y.hasJSActions,fieldObjects:Y.fieldObjects,parent:this,elements:null};for(const N of P){if(N.noHTML)continue;const W=N.annotationType===s.AnnotationType.POPUP;if(W){const wt=B.get(N.id);if(!wt)continue;T.elements=wt}else{const{width:wt,height:Ht}=g(N.rect);if(wt<=0||Ht<=0)continue}T.data=N;const lt=v.create(T);if(!lt.isRenderable)continue;if(!W&&N.popupRef){const wt=B.get(N.popupRef);wt?wt.push(lt):B.set(N.popupRef,[lt])}lt.annotationEditorType>0&&e(this,Oe).set(lt.data.id,lt);const bt=lt.render();N.hidden&&(bt.style.visibility="hidden"),O(this,Fe,na).call(this,bt,N.id)}O(this,Le,Fn).call(this)}update(Y){let{viewport:P}=Y;const st=this.div;this.viewport=P,(0,n.setLayerDimensions)(st,{rotation:P.rotation}),O(this,Le,Fn).call(this),st.hidden=!1}getEditableAnnotations(){return Array.from(e(this,Oe).values())}getEditableAnnotation(Y){return e(this,Oe).get(Y)}}be=new WeakMap,Te=new WeakMap,Oe=new WeakMap,Fe=new WeakSet,na=function(Y,P){var B;const st=Y.firstChild||Y;st.id=`${s.AnnotationPrefix}${P}`,this.div.append(Y),(B=e(this,be))==null||B.moveElementInDOM(this.div,Y,st,!1)},Le=new WeakSet,Fn=function(){if(!e(this,Te))return;const Y=this.div;for(const[P,st]of e(this,Te)){const B=Y.querySelector(`[data-annotation-id="${P}"]`);if(!B)continue;const{firstChild:T}=B;T?T.nodeName==="CANVAS"?T.replaceWith(st):T.before(st):B.append(st)}e(this,Te).clear()}},9792:(i,o,t)=>{var h,p,w,ra,g;t.d(o,{AnnotationStorage:()=>m,PrintAnnotationStorage:()=>l,SerializableEmpty:()=>a}),t(4114),t(1454),t(4979);var s=t(4292),n=t(310),r=t(7651);const a=Object.freeze({map:null,hash:"",transfer:void 0});class m{constructor(){x(this,w);x(this,h,!1);x(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(A,R){const V=e(this,p).get(A);return V===void 0?R:Object.assign(R,V)}getRawValue(A){return e(this,p).get(A)}remove(A){if(e(this,p).delete(A),e(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const R of e(this,p).values())if(R instanceof n.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(A,R){const V=e(this,p).get(A);let $=!1;if(V!==void 0)for(const[L,D]of Object.entries(R))V[L]!==D&&($=!0,V[L]=D);else $=!0,e(this,p).set(A,R);$&&O(this,w,ra).call(this),R instanceof n.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(R.constructor._type)}has(A){return e(this,p).has(A)}getAll(){return e(this,p).size>0?(0,s.objectFromMap)(e(this,p)):null}setAll(A){for(const[R,V]of Object.entries(A))this.setValue(R,V)}get size(){return e(this,p).size}resetModified(){e(this,h)&&(z(this,h,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new l(this)}get serializable(){if(e(this,p).size===0)return a;const A=new Map,R=new r.MurmurHash3_64,V=[],$=Object.create(null);let L=!1;for(const[D,C]of e(this,p)){const G=C instanceof n.AnnotationEditor?C.serialize(!1,$):C;G&&(A.set(D,G),R.update(`${D}:${JSON.stringify(G)}`),L||(L=!!G.bitmap))}if(L)for(const D of A.values())D.bitmap&&V.push(D.bitmap);return A.size>0?{map:A,hash:R.hexdigest(),transfer:V}:a}get editorStats(){let A=null;const R=new Map;for(const V of e(this,p).values()){if(!(V instanceof n.AnnotationEditor))continue;const $=V.telemetryFinalData;if(!$)continue;const{type:L}=$;R.has(L)||R.set(L,Object.getPrototypeOf(V).constructor),A||(A=Object.create(null));const D=A[L]||(A[L]=new Map);for(const[C,G]of Object.entries($)){if(C==="type")continue;let q=D.get(C);q||(q=new Map,D.set(C,q));const J=q.get(G)??0;q.set(G,J+1)}}for(const[V,$]of R)A[V]=$.computeTelemetryFinalData(A[V]);return A}}h=new WeakMap,p=new WeakMap,w=new WeakSet,ra=function(){e(this,h)||(z(this,h,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class l extends m{constructor(R){super();x(this,g,void 0);const{map:V,hash:$,transfer:L}=R.serializable,D=structuredClone(V,L?{transfer:L}:null);z(this,g,{map:D,hash:$,transfer:L})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,g)}}g=new WeakMap},3831:(i,o,t)=>{t.a(i,async(s,n)=>{var Bt,It,St,qt,ti,jt,Qi,Xt,it,c,u,E,Zi,y,M,I,F,S,Ei,_,j,Nn,K,rt;try{let ct=function(B){if(typeof B=="string"||B instanceof URL?B={url:B}:(B instanceof ArrayBuffer||ArrayBuffer.isView(B))&&(B={data:B}),typeof B!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!B.url&&!B.data&&!B.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const T=new zt,{docId:N}=T,W=B.url?At(B.url):null,lt=B.data?Et(B.data):null,bt=B.httpHeaders||null,wt=B.withCredentials===!0,Ht=B.password??null,Mt=B.range instanceof Kt?B.range:null,Ct=Number.isInteger(B.rangeChunkSize)&&B.rangeChunkSize>0?B.rangeChunkSize:yt;let Nt=B.worker instanceof be?B.worker:null;const Yt=B.verbosity,re=typeof B.docBaseUrl=="string"&&!(0,mt.isDataScheme)(B.docBaseUrl)?B.docBaseUrl:null,ne=typeof B.cMapUrl=="string"?B.cMapUrl:null,we=B.cMapPacked!==!1,de=B.CMapReaderFactory||ht,ze=typeof B.standardFontDataUrl=="string"?B.standardFontDataUrl:null,Ge=B.StandardFontDataFactory||Lt,He=B.stopAtErrors!==!0,ss=Number.isInteger(B.maxImageSize)&&B.maxImageSize>-1?B.maxImageSize:-1,Ve=B.isEvalSupported!==!1,X=typeof B.isOffscreenCanvasSupported=="boolean"?B.isOffscreenCanvasSupported:!Q.isNodeJS,dt=Number.isInteger(B.canvasMaxAreaInBytes)?B.canvasMaxAreaInBytes:-1,$t=typeof B.disableFontFace=="boolean"?B.disableFontFace:Q.isNodeJS,Gt=B.fontExtraProperties===!0,ee=B.enableXfa===!0,se=B.ownerDocument||globalThis.document,oe=B.disableRange===!0,_e=B.disableStream===!0,xe=B.disableAutoFetch===!0,Re=B.pdfBug===!0,We=Mt?Mt.length:B.length??NaN,Xe=typeof B.useSystemFonts=="boolean"?B.useSystemFonts:!Q.isNodeJS&&!$t,hi=typeof B.useWorkerFetch=="boolean"?B.useWorkerFetch:de===mt.DOMCMapReaderFactory&&Ge===mt.DOMStandardFontDataFactory&&ne&&ze&&(0,mt.isValidFetchUrl)(ne,document.baseURI)&&(0,mt.isValidFetchUrl)(ze,document.baseURI),ps=B.canvasFactory||new et({ownerDocument:se}),ji=B.filterFactory||new vt({docId:N,ownerDocument:se}),Us=null;(0,Q.setVerbosityLevel)(Yt);const Ln={canvasFactory:ps,filterFactory:ji};if(hi||(Ln.cMapReaderFactory=new de({baseUrl:ne,isCompressed:we}),Ln.standardFontDataFactory=new Ge({baseUrl:ze})),!Nt){const Qe={verbosity:Yt,port:gt.GlobalWorkerOptions.workerPort};Nt=Qe.port?be.fromPort(Qe):new be(Qe),T._worker=Nt}const qs={docId:N,apiVersion:"4.1.392",data:lt,password:Ht,disableAutoFetch:xe,rangeChunkSize:Ct,length:We,docBaseUrl:re,enableXfa:ee,evaluatorOptions:{maxImageSize:ss,disableFontFace:$t,ignoreErrors:He,isEvalSupported:Ve,isOffscreenCanvasSupported:X,canvasMaxAreaInBytes:dt,fontExtraProperties:Gt,useSystemFonts:Xe,cMapUrl:hi?ne:null,standardFontDataUrl:hi?ze:null}},gh={ignoreErrors:He,isEvalSupported:Ve,disableFontFace:$t,fontExtraProperties:Gt,enableXfa:ee,ownerDocument:se,disableAutoFetch:xe,pdfBug:Re,styleElement:Us};return Nt.promise.then(function(){if(T.destroyed)throw new Error("Loading aborted");const Qe=Ut(Nt,qs),mh=new Promise(function(fs){let li;Mt?li=new Ft.PDFDataTransportStream(Mt,{disableRange:oe,disableStream:_e}):lt||(li=(Ze=>Q.isNodeJS?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&(0,mt.isValidFetchUrl)(Ze.url)?new Vt.PDFFetchStream(Ze):new ae.PDFNodeStream(Ze):(0,mt.isValidFetchUrl)(Ze.url)?new Vt.PDFFetchStream(Ze):new Qt.PDFNetworkStream(Ze))({url:W,length:We,httpHeaders:bt,withCredentials:wt,rangeChunkSize:Ct,disableRange:oe,disableStream:_e})),fs(li)});return Promise.all([Qe,mh]).then(function(fs){let[li,Ze]=fs;if(T.destroyed)throw new Error("Loading aborted");const Zr=new Z.MessageHandler(N,li,Nt.port),ws=new Te(Zr,T,Ze,gh,Ln);T._transport=ws,Zr.send("Ready",null)})}).catch(T._capability.reject),T},At=function(B){if(B instanceof URL)return B.href;try{return new URL(B,window.location).href}catch{if(Q.isNodeJS&&typeof B=="string")return B}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},Et=function(B){if(Q.isNodeJS&&typeof Buffer<"u"&&B instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(B instanceof Uint8Array&&B.byteLength===B.buffer.byteLength)return B;if(typeof B=="string")return(0,Q.stringToBytes)(B);if(B instanceof ArrayBuffer||ArrayBuffer.isView(B)||typeof B=="object"&&!isNaN(B==null?void 0:B.length))return new Uint8Array(B);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};t.d(o,{PDFDataRangeTransport:()=>Kt,PDFWorker:()=>be,build:()=>ue,getDocument:()=>ct,version:()=>Ie});var r=t(4114),a=t(6573),m=t(8100),l=t(7936),h=t(4628),p=t(7467),w=t(4732),f=t(9577),g=t(1454),v=t(3375),A=t(9225),R=t(3972),V=t(9209),$=t(5714),L=t(7561),D=t(6197),C=t(4979),G=t(4603),q=t(7566),J=t(8721),Q=t(4292),Tt=t(9792),mt=t(5419),Dt=t(10),pt=t(1573),ot=t(4923),ft=t(6814),gt=t(6164),Z=t(5178),at=t(6062),Rt=t(5626),Ft=t(585),Vt=t(4094),Qt=t(7457),ae=t(4786),Ae=t(2050),me=s([pt,ae]);[pt,ae]=me.then?(await me)():me;const yt=65536,kt=100,U=5e3,et=Q.isNodeJS?pt.NodeCanvasFactory:mt.DOMCanvasFactory,ht=Q.isNodeJS?pt.NodeCMapReaderFactory:mt.DOMCMapReaderFactory,vt=Q.isNodeJS?pt.NodeFilterFactory:mt.DOMFilterFactory,Lt=Q.isNodeJS?pt.NodeStandardFontDataFactory:mt.DOMStandardFontDataFactory;async function Ut(B,T){if(B.destroyed)throw new Error("Worker was destroyed");const N=await B.messageHandler.sendWithPromise("GetDocRequest",T,T.data?[T.data.buffer]:null);if(B.destroyed)throw new Error("Worker was destroyed");return N}const Y=class Y{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${bs(Y,Bt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var T,N,W;this.destroyed=!0;try{(T=this._worker)!=null&&T.port&&(this._worker._pendingDestroy=!0),await((N=this._transport)==null?void 0:N.destroy())}catch(lt){throw(W=this._worker)!=null&&W.port&&delete this._worker._pendingDestroy,lt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Bt=new WeakMap,x(Y,Bt,0);let zt=Y;class Kt{constructor(T,N){let W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=T,this.initialData=N,this.progressiveDone=W,this.contentDispositionFilename=lt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(T){this._rangeListeners.push(T)}addProgressListener(T){this._progressListeners.push(T)}addProgressiveReadListener(T){this._progressiveReadListeners.push(T)}addProgressiveDoneListener(T){this._progressiveDoneListeners.push(T)}onDataRange(T,N){for(const W of this._rangeListeners)W(T,N)}onDataProgress(T,N){this._readyCapability.promise.then(()=>{for(const W of this._progressListeners)W(T,N)})}onDataProgressiveRead(T){this._readyCapability.promise.then(()=>{for(const N of this._progressiveReadListeners)N(T)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const T of this._progressiveDoneListeners)T()})}transportReady(){this._readyCapability.resolve()}requestDataRange(T,N){(0,Q.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class te{constructor(T,N){this._pdfInfo=T,this._transport=N}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,Q.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(T){return this._transport.getPage(T)}getPageIndex(T){return this._transport.getPageIndex(T)}getDestinations(){return this._transport.getDestinations()}getDestination(T){return this._transport.getDestination(T)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:T="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{renderingIntent:N}=this._transport.getRenderingIntent(T);return this._transport.getOptionalContentConfig(N)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(T||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ie{constructor(T,N,W){x(this,qt);x(this,jt);x(this,It,null);x(this,St,!1);let lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this._pageIndex=T,this._pageInfo=N,this._transport=W,this._stats=lt?new mt.StatTimer:null,this._pdfBug=lt,this.commonObjs=W.commonObjs,this.objs=new Fe,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:T,rotation:N=this.rotate,offsetX:W=0,offsetY:lt=0,dontFlip:bt=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new mt.PageViewport({viewBox:this.view,scale:T,rotation:N,offsetX:W,offsetY:lt,dontFlip:bt})}getAnnotations(){let{intent:T="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{renderingIntent:N}=this._transport.getRenderingIntent(T);return this._transport.getAnnotations(this._pageIndex,N)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,Q.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var T;return((T=this._transport._htmlForXfa)==null?void 0:T.children[this._pageIndex])||null}render(T){var Ve,X;let{canvasContext:N,viewport:W,intent:lt="display",annotationMode:bt=Q.AnnotationMode.ENABLE,transform:wt=null,background:Ht=null,optionalContentConfigPromise:Mt=null,annotationCanvasMap:Ct=null,pageColors:Nt=null,printAnnotationStorage:Yt=null}=T;(Ve=this._stats)==null||Ve.time("Overall");const re=this._transport.getRenderingIntent(lt,bt,Yt),{renderingIntent:ne,cacheKey:we}=re;z(this,St,!1),O(this,jt,Qi).call(this),Mt||(Mt=this._transport.getOptionalContentConfig(ne));let de=this._intentStates.get(we);de||(de=Object.create(null),this._intentStates.set(we,de)),de.streamReaderCancelTimeout&&(clearTimeout(de.streamReaderCancelTimeout),de.streamReaderCancelTimeout=null);const ze=!!(ne&Q.RenderingIntentFlag.PRINT);de.displayReadyCapability||(de.displayReadyCapability=Promise.withResolvers(),de.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(X=this._stats)==null||X.time("Page Request"),this._pumpOperatorList(re));const Ge=dt=>{var $t,Gt;de.renderTasks.delete(He),(this._maybeCleanupAfterRender||ze)&&z(this,St,!0),O(this,qt,ti).call(this,!ze),dt?(He.capability.reject(dt),this._abortOperatorList({intentState:de,reason:dt instanceof Error?dt:new Error(dt)})):He.capability.resolve(),($t=this._stats)==null||$t.timeEnd("Rendering"),(Gt=this._stats)==null||Gt.timeEnd("Overall")},He=new Le({callback:Ge,params:{canvasContext:N,viewport:W,transform:wt,background:Ht},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ct,operatorList:de.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ze,pdfBug:this._pdfBug,pageColors:Nt});(de.renderTasks||(de.renderTasks=new Set)).add(He);const ss=He.task;return Promise.all([de.displayReadyCapability.promise,Mt]).then(dt=>{var ee;let[$t,Gt]=dt;if(this.destroyed){Ge();return}if((ee=this._stats)==null||ee.time("Rendering"),!(Gt.renderingIntent&ne))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");He.initializeGraphics({transparency:$t,optionalContentConfig:Gt}),He.operatorListChanged()}).catch(Ge),ss}getOperatorList(){var Mt;let{intent:T="display",annotationMode:N=Q.AnnotationMode.ENABLE,printAnnotationStorage:W=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function lt(){wt.operatorList.lastChunk&&(wt.opListReadCapability.resolve(wt.operatorList),wt.renderTasks.delete(Ht))}const bt=this._transport.getRenderingIntent(T,N,W,!0);let wt=this._intentStates.get(bt.cacheKey);wt||(wt=Object.create(null),this._intentStates.set(bt.cacheKey,wt));let Ht;return wt.opListReadCapability||(Ht=Object.create(null),Ht.operatorListChanged=lt,wt.opListReadCapability=Promise.withResolvers(),(wt.renderTasks||(wt.renderTasks=new Set)).add(Ht),wt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Mt=this._stats)==null||Mt.time("Page Request"),this._pumpOperatorList(bt)),wt.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:T=!1,disableNormalization:N=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:T===!0,disableNormalization:N===!0},{highWaterMark:100,size(W){return W.items.length}})}getTextContent(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(W=>Ae.XfaText.textContent(W));const N=this.streamTextContent(T);return new Promise(function(W,lt){function bt(){wt.read().then(function(Mt){let{value:Ct,done:Nt}=Mt;if(Nt){W(Ht);return}Object.assign(Ht.styles,Ct.styles),Ht.items.push(...Ct.items),bt()},lt)}const wt=N.getReader(),Ht={items:[],styles:Object.create(null)};bt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const T=[];for(const N of this._intentStates.values())if(this._abortOperatorList({intentState:N,reason:new Error("Page was destroyed."),force:!0}),!N.opListReadCapability)for(const W of N.renderTasks)T.push(W.completed),W.cancel();return this.objs.clear(),z(this,St,!1),O(this,jt,Qi).call(this),Promise.all(T)}cleanup(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;z(this,St,!0);const N=O(this,qt,ti).call(this,!1);return T&&N&&this._stats&&(this._stats=new mt.StatTimer),N}_startRenderPage(T,N){var lt,bt;const W=this._intentStates.get(N);W&&((lt=this._stats)==null||lt.timeEnd("Page Request"),(bt=W.displayReadyCapability)==null||bt.resolve(T))}_renderPageChunk(T,N){for(let W=0,lt=T.length;W<lt;W++)N.operatorList.fnArray.push(T.fnArray[W]),N.operatorList.argsArray.push(T.argsArray[W]);N.operatorList.lastChunk=T.lastChunk,N.operatorList.separateAnnots=T.separateAnnots;for(const W of N.renderTasks)W.operatorListChanged();T.lastChunk&&O(this,qt,ti).call(this,!0)}_pumpOperatorList(T){let{renderingIntent:N,cacheKey:W,annotationStorageSerializable:lt}=T;const{map:bt,transfer:wt}=lt,Ht=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:N,cacheKey:W,annotationStorage:bt},wt).getReader(),Mt=this._intentStates.get(W);Mt.streamReader=Ht;const Ct=()=>{Ht.read().then(Nt=>{let{value:Yt,done:re}=Nt;if(re){Mt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Yt,Mt),Ct())},Nt=>{if(Mt.streamReader=null,!this._transport.destroyed){if(Mt.operatorList){Mt.operatorList.lastChunk=!0;for(const Yt of Mt.renderTasks)Yt.operatorListChanged();O(this,qt,ti).call(this,!0)}if(Mt.displayReadyCapability)Mt.displayReadyCapability.reject(Nt);else if(Mt.opListReadCapability)Mt.opListReadCapability.reject(Nt);else throw Nt}})};Ct()}_abortOperatorList(T){let{intentState:N,reason:W,force:lt=!1}=T;if(N.streamReader){if(N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null),!lt){if(N.renderTasks.size>0)return;if(W instanceof mt.RenderingCancelledException){let bt=kt;W.extraDelay>0&&W.extraDelay<1e3&&(bt+=W.extraDelay),N.streamReaderCancelTimeout=setTimeout(()=>{N.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:N,reason:W,force:!0})},bt);return}}if(N.streamReader.cancel(new Q.AbortException(W.message)).catch(()=>{}),N.streamReader=null,!this._transport.destroyed){for(const[bt,wt]of this._intentStates)if(wt===N){this._intentStates.delete(bt);break}this.cleanup()}}}get stats(){return this._stats}}It=new WeakMap,St=new WeakMap,qt=new WeakSet,ti=function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(O(this,jt,Qi).call(this),!e(this,St)||this.destroyed)return!1;if(T)return z(this,It,setTimeout(()=>{z(this,It,null),O(this,qt,ti).call(this,!1)},U)),!1;for(const{renderTasks:N,operatorList:W}of this._intentStates.values())if(N.size>0||!W.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),z(this,St,!1),!0},jt=new WeakSet,Qi=function(){e(this,It)&&(clearTimeout(e(this,It)),z(this,It,null))};class ce{constructor(){x(this,Xt,new Set);x(this,it,Promise.resolve())}postMessage(T,N){const W={data:structuredClone(T,N?{transfer:N}:null)};e(this,it).then(()=>{for(const lt of e(this,Xt))lt.call(this,W)})}addEventListener(T,N){e(this,Xt).add(N)}removeEventListener(T,N){e(this,Xt).delete(N)}terminate(){e(this,Xt).clear()}}Xt=new WeakMap,it=new WeakMap;const ge={isWorkerDisabled:!1,fakeWorkerId:0};Q.isNodeJS&&(ge.isWorkerDisabled=!0,(c=gt.GlobalWorkerOptions).workerSrc||(c.workerSrc="./pdf.worker.mjs")),ge.isSameOrigin=function(B,T){let N;try{if(N=new URL(B),!N.origin||N.origin==="null")return!1}catch{return!1}const W=new URL(T,N);return N.origin===W.origin},ge.createCDNWrapper=function(B){const T=`await import("${B}");`;return URL.createObjectURL(new Blob([T],{type:"text/javascript"}))};const P=class P{constructor(){var lt;let{name:T=null,port:N=null,verbosity:W=(0,Q.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.name=T,this.destroyed=!1,this.verbosity=W,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,N){if((lt=e(P,u))!=null&&lt.has(N))throw new Error("Cannot use more than one PDFWorker per port.");(e(P,u)||z(P,u,new WeakMap)).set(N,this),this._initializeFromPort(N);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(T){this._port=T,this._messageHandler=new Z.MessageHandler("main","worker",T),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!ge.isWorkerDisabled&&!e(P,E,Zi)){let{workerSrc:T}=P;try{ge.isSameOrigin(window.location.href,T)||(T=ge.createCDNWrapper(new URL(T,window.location).href));const N=new Worker(T,{type:"module"}),W=new Z.MessageHandler("main","worker",N),lt=()=>{N.removeEventListener("error",bt),W.destroy(),N.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},bt=()=>{this._webWorker||lt()};N.addEventListener("error",bt),W.on("test",Ht=>{if(N.removeEventListener("error",bt),this.destroyed){lt();return}Ht?(this._messageHandler=W,this._port=N,this._webWorker=N,this._readyCapability.resolve(),W.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),W.destroy(),N.terminate())}),W.on("ready",Ht=>{if(N.removeEventListener("error",bt),this.destroyed){lt();return}try{wt()}catch{this._setupFakeWorker()}});const wt=()=>{const Ht=new Uint8Array;W.send("test",Ht,[Ht.buffer])};wt();return}catch{(0,Q.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){ge.isWorkerDisabled||((0,Q.warn)("Setting up fake worker."),ge.isWorkerDisabled=!0),P._setupFakeWorkerGlobal.then(T=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const N=new ce;this._port=N;const W=`fake${ge.fakeWorkerId++}`,lt=new Z.MessageHandler(W+"_worker",W,N);T.setup(lt,N);const bt=new Z.MessageHandler(W,W+"_worker",N);this._messageHandler=bt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})}).catch(T=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${T.message}".`))})}destroy(){var T;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(T=e(P,u))==null||T.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(T){var W;if(!(T!=null&&T.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const N=(W=e(this,u))==null?void 0:W.get(T.port);if(N){if(N._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return N}return new P(T)}static get workerSrc(){if(gt.GlobalWorkerOptions.workerSrc)return gt.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){const T=async()=>e(this,E,Zi)?e(this,E,Zi):(await As(()=>import(this.workerSrc).then(async N=>(await N.__tla,N)),[])).WorkerMessageHandler;return(0,Q.shadow)(this,"_setupFakeWorkerGlobal",T())}};u=new WeakMap,E=new WeakSet,Zi=function(){var T;try{return((T=globalThis.pdfjsWorker)==null?void 0:T.WorkerMessageHandler)||null}catch{return null}},x(P,E),x(P,u,void 0);let be=P;class Te{constructor(T,N,W,lt,bt){x(this,S);x(this,y,new Map);x(this,M,new Map);x(this,I,new Map);x(this,F,null);this.messageHandler=T,this.loadingTask=N,this.commonObjs=new Fe,this.fontLoader=new Dt.FontLoader({ownerDocument:lt.ownerDocument,styleElement:lt.styleElement}),this._params=lt,this.canvasFactory=bt.canvasFactory,this.filterFactory=bt.filterFactory,this.cMapReaderFactory=bt.cMapReaderFactory,this.standardFontDataFactory=bt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=W,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return(0,Q.shadow)(this,"annotationStorage",new Tt.AnnotationStorage)}getRenderingIntent(T){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.AnnotationMode.ENABLE,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,bt=Q.RenderingIntentFlag.DISPLAY,wt=Tt.SerializableEmpty;switch(T){case"any":bt=Q.RenderingIntentFlag.ANY;break;case"display":break;case"print":bt=Q.RenderingIntentFlag.PRINT;break;default:(0,Q.warn)(`getRenderingIntent - invalid intent: ${T}`)}switch(N){case Q.AnnotationMode.DISABLE:bt+=Q.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case Q.AnnotationMode.ENABLE:break;case Q.AnnotationMode.ENABLE_FORMS:bt+=Q.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case Q.AnnotationMode.ENABLE_STORAGE:bt+=Q.RenderingIntentFlag.ANNOTATIONS_STORAGE,wt=(bt&Q.RenderingIntentFlag.PRINT&&W instanceof Tt.PrintAnnotationStorage?W:this.annotationStorage).serializable;break;default:(0,Q.warn)(`getRenderingIntent - invalid annotationMode: ${N}`)}return lt&&(bt+=Q.RenderingIntentFlag.OPLIST),{renderingIntent:bt,cacheKey:`${bt}_${wt.hash}`,annotationStorageSerializable:wt}}destroy(){var W;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(W=e(this,F))==null||W.reject(new Error("Worker was destroyed during onPassword callback"));const T=[];for(const lt of e(this,M).values())T.push(lt._destroy());e(this,M).clear(),e(this,I).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const N=this.messageHandler.sendWithPromise("Terminate",null);return T.push(N),Promise.all(T).then(()=>{var lt;this.commonObjs.clear(),this.fontLoader.clear(),e(this,y).clear(),this.filterFactory.destroy(),(0,ft.cleanupTextLayer)(),(lt=this._networkStream)==null||lt.cancelAllRequests(new Q.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:T,loadingTask:N}=this;T.on("GetReader",(W,lt)=>{(0,Q.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=bt=>{this._lastProgress={loaded:bt.loaded,total:bt.total}},lt.onPull=()=>{this._fullReader.read().then(function(bt){let{value:wt,done:Ht}=bt;if(Ht){lt.close();return}(0,Q.assert)(wt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),lt.enqueue(new Uint8Array(wt),1,[wt])}).catch(bt=>{lt.error(bt)})},lt.onCancel=bt=>{this._fullReader.cancel(bt),lt.ready.catch(wt=>{if(!this.destroyed)throw wt})}}),T.on("ReaderHeadersReady",W=>{const lt=Promise.withResolvers(),bt=this._fullReader;return bt.headersReady.then(()=>{var wt;(!bt.isStreamingSupported||!bt.isRangeSupported)&&(this._lastProgress&&((wt=N.onProgress)==null||wt.call(N,this._lastProgress)),bt.onProgress=Ht=>{var Mt;(Mt=N.onProgress)==null||Mt.call(N,{loaded:Ht.loaded,total:Ht.total})}),lt.resolve({isStreamingSupported:bt.isStreamingSupported,isRangeSupported:bt.isRangeSupported,contentLength:bt.contentLength})},lt.reject),lt.promise}),T.on("GetRangeReader",(W,lt)=>{(0,Q.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const bt=this._networkStream.getRangeReader(W.begin,W.end);if(!bt){lt.close();return}lt.onPull=()=>{bt.read().then(function(wt){let{value:Ht,done:Mt}=wt;if(Mt){lt.close();return}(0,Q.assert)(Ht instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),lt.enqueue(new Uint8Array(Ht),1,[Ht])}).catch(wt=>{lt.error(wt)})},lt.onCancel=wt=>{bt.cancel(wt),lt.ready.catch(Ht=>{if(!this.destroyed)throw Ht})}}),T.on("GetDoc",W=>{let{pdfInfo:lt}=W;this._numPages=lt.numPages,this._htmlForXfa=lt.htmlForXfa,delete lt.htmlForXfa,N._capability.resolve(new te(lt,this))}),T.on("DocException",function(W){let lt;switch(W.name){case"PasswordException":lt=new Q.PasswordException(W.message,W.code);break;case"InvalidPDFException":lt=new Q.InvalidPDFException(W.message);break;case"MissingPDFException":lt=new Q.MissingPDFException(W.message);break;case"UnexpectedResponseException":lt=new Q.UnexpectedResponseException(W.message,W.status);break;case"UnknownErrorException":lt=new Q.UnknownErrorException(W.message,W.details);break;default:(0,Q.unreachable)("DocException - expected a valid Error.")}N._capability.reject(lt)}),T.on("PasswordRequest",W=>{if(z(this,F,Promise.withResolvers()),N.onPassword){const lt=bt=>{bt instanceof Error?e(this,F).reject(bt):e(this,F).resolve({password:bt})};try{N.onPassword(lt,W.code)}catch(bt){e(this,F).reject(bt)}}else e(this,F).reject(new Q.PasswordException(W.message,W.code));return e(this,F).promise}),T.on("DataLoaded",W=>{var lt;(lt=N.onProgress)==null||lt.call(N,{loaded:W.length,total:W.length}),this.downloadInfoCapability.resolve(W)}),T.on("StartRenderPage",W=>{this.destroyed||e(this,M).get(W.pageIndex)._startRenderPage(W.transparency,W.cacheKey)}),T.on("commonobj",W=>{var Ht;let[lt,bt,wt]=W;if(this.destroyed||this.commonObjs.has(lt))return null;switch(bt){case"Font":const Mt=this._params;if("error"in wt){const re=wt.error;(0,Q.warn)(`Error during font loading: ${re}`),this.commonObjs.resolve(lt,re);break}const Ct=Mt.pdfBug&&((Ht=globalThis.FontInspector)!=null&&Ht.enabled)?(re,ne)=>globalThis.FontInspector.fontAdded(re,ne):null,Nt=new Dt.FontFaceObject(wt,{isEvalSupported:Mt.isEvalSupported,disableFontFace:Mt.disableFontFace,ignoreErrors:Mt.ignoreErrors,inspectFont:Ct});this.fontLoader.bind(Nt).catch(()=>T.sendWithPromise("FontFallback",{id:lt})).finally(()=>{!Mt.fontExtraProperties&&Nt.data&&(Nt.data=null),this.commonObjs.resolve(lt,Nt)});break;case"CopyLocalImage":const{imageRef:Yt}=wt;(0,Q.assert)(Yt,"The imageRef must be defined.");for(const re of e(this,M).values())for(const[,ne]of re.objs)if(ne.ref===Yt)return ne.dataLen?(this.commonObjs.resolve(lt,structuredClone(ne)),ne.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(lt,wt);break;default:throw new Error(`Got unknown common object type ${bt}`)}return null}),T.on("obj",W=>{var Ct;let[lt,bt,wt,Ht]=W;if(this.destroyed)return;const Mt=e(this,M).get(bt);if(!Mt.objs.has(lt)){if(Mt._intentStates.size===0){(Ct=Ht==null?void 0:Ht.bitmap)==null||Ct.close();return}switch(wt){case"Image":Mt.objs.resolve(lt,Ht),(Ht==null?void 0:Ht.dataLen)>Q.MAX_IMAGE_SIZE_TO_CACHE&&(Mt._maybeCleanupAfterRender=!0);break;case"Pattern":Mt.objs.resolve(lt,Ht);break;default:throw new Error(`Got unknown object type ${wt}`)}}}),T.on("DocProgress",W=>{var lt;this.destroyed||((lt=N.onProgress)==null||lt.call(N,{loaded:W.loaded,total:W.total}))}),T.on("FetchBuiltInCMap",W=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(W):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),T.on("FetchStandardFontData",W=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(W):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var W;this.annotationStorage.size<=0&&(0,Q.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:T,transfer:N}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:T,filename:((W=this._fullReader)==null?void 0:W.filename)??null},N).finally(()=>{this.annotationStorage.resetModified()})}getPage(T){if(!Number.isInteger(T)||T<=0||T>this._numPages)return Promise.reject(new Error("Invalid page request."));const N=T-1,W=e(this,I).get(N);if(W)return W;const lt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:N}).then(bt=>{if(this.destroyed)throw new Error("Transport destroyed");const wt=new ie(N,bt,this,this._params.pdfBug);return e(this,M).set(N,wt),wt});return e(this,I).set(N,lt),lt}getPageIndex(T){return typeof T!="object"||T===null||!Number.isInteger(T.num)||T.num<0||!Number.isInteger(T.gen)||T.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:T.num,gen:T.gen})}getAnnotations(T,N){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:T,intent:N})}getFieldObjects(){return O(this,S,Ei).call(this,"GetFieldObjects")}hasJSActions(){return O(this,S,Ei).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(T){return typeof T!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:T})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return O(this,S,Ei).call(this,"GetDocJSActions")}getPageJSActions(T){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:T})}getStructTree(T){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:T})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(T){return O(this,S,Ei).call(this,"GetOptionalContentConfig").then(N=>new Rt.OptionalContentConfig(N,T))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const T="GetMetadata",N=e(this,y).get(T);if(N)return N;const W=this.messageHandler.sendWithPromise(T,null).then(lt=>{var bt,wt;return{info:lt[0],metadata:lt[1]?new at.Metadata(lt[1]):null,contentDispositionFilename:((bt=this._fullReader)==null?void 0:bt.filename)??null,contentLength:((wt=this._fullReader)==null?void 0:wt.contentLength)??null}});return e(this,y).set(T,W),W}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const N of e(this,M).values())if(!N.cleanup())throw new Error(`startCleanup: Page ${N.pageNumber} is currently rendering.`);this.commonObjs.clear(),T||this.fontLoader.clear(),e(this,y).clear(),this.filterFactory.destroy(!0),(0,ft.cleanupTextLayer)()}}get loadingParams(){const{disableAutoFetch:T,enableXfa:N}=this._params;return(0,Q.shadow)(this,"loadingParams",{disableAutoFetch:T,enableXfa:N})}}y=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,S=new WeakSet,Ei=function(T){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const W=e(this,y).get(T);if(W)return W;const lt=this.messageHandler.sendWithPromise(T,N);return e(this,y).set(T,lt),lt};const Oe=Symbol("INITIAL_DATA");class Fe{constructor(){x(this,j);x(this,_,Object.create(null))}get(T){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(N){const lt=O(this,j,Nn).call(this,T);return lt.promise.then(()=>N(lt.data)),null}const W=e(this,_)[T];if(!W||W.data===Oe)throw new Error(`Requesting object that isn't resolved yet ${T}.`);return W.data}has(T){const N=e(this,_)[T];return!!N&&N.data!==Oe}resolve(T){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const W=O(this,j,Nn).call(this,T);W.data=N,W.resolve()}clear(){var T;for(const N in e(this,_)){const{data:W}=e(this,_)[N];(T=W==null?void 0:W.bitmap)==null||T.close()}z(this,_,Object.create(null))}*[Symbol.iterator](){for(const T in e(this,_)){const{data:N}=e(this,_)[T];N!==Oe&&(yield[T,N])}}}_=new WeakMap,j=new WeakSet,Nn=function(T){var N;return(N=e(this,_))[T]||(N[T]={...Promise.withResolvers(),data:Oe})};class Be{constructor(T){x(this,K,null);z(this,K,T),this.onContinue=null}get promise(){return e(this,K).capability.promise}cancel(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e(this,K).cancel(null,T)}get separateAnnots(){const{separateAnnots:T}=e(this,K).operatorList;if(!T)return!1;const{annotationCanvasMap:N}=e(this,K);return T.form||T.canvas&&(N==null?void 0:N.size)>0}}K=new WeakMap;const st=class st{constructor(T){let{callback:N,params:W,objs:lt,commonObjs:bt,annotationCanvasMap:wt,operatorList:Ht,pageIndex:Mt,canvasFactory:Ct,filterFactory:Nt,useRequestAnimationFrame:Yt=!1,pdfBug:re=!1,pageColors:ne=null}=T;this.callback=N,this.params=W,this.objs=lt,this.commonObjs=bt,this.annotationCanvasMap=wt,this.operatorListIdx=null,this.operatorList=Ht,this._pageIndex=Mt,this.canvasFactory=Ct,this.filterFactory=Nt,this._pdfBug=re,this.pageColors=ne,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Yt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Be(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=W.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(T){var Mt,Ct;let{transparency:N=!1,optionalContentConfig:W}=T;if(this.cancelled)return;if(this._canvas){if(e(st,rt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(st,rt).add(this._canvas)}this._pdfBug&&((Mt=globalThis.StepperManager)!=null&&Mt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:lt,viewport:bt,transform:wt,background:Ht}=this.params;this.gfx=new ot.CanvasGraphics(lt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:W},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:wt,viewport:bt,transparency:N,background:Ht}),this.operatorListIdx=0,this.graphicsReady=!0,(Ct=this.graphicsReadyCallback)==null||Ct.call(this)}cancel(){var W;let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(W=this.gfx)==null||W.endDrawing(),e(st,rt).delete(this._canvas),this.callback(T||new mt.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,N))}operatorListChanged(){var T;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(T=this.stepper)==null||T.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(st,rt).delete(this._canvas),this.callback())))}};rt=new WeakMap,x(st,rt,new WeakSet);let Le=st;const Ie="4.1.392",ue="fcb76a78d";n()}catch(ct){n(ct)}})},2583:(i,o,t)=>{t.d(o,{BaseCMapReaderFactory:()=>a,BaseCanvasFactory:()=>r,BaseFilterFactory:()=>n,BaseSVGFactory:()=>l,BaseStandardFontDataFactory:()=>m});var s=t(4292);class n{constructor(){this.constructor===n&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,w){return"none"}addHighlightHCMFilter(p,w,f,g,v){return"none"}destroy(){}}class r{constructor(){this.constructor===r&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,w){if(p<=0||w<=0)throw new Error("Invalid canvas size");const f=this._createCanvas(p,w);return{canvas:f,context:f.getContext("2d")}}reset(p,w,f){if(!p.canvas)throw new Error("Canvas is not specified");if(w<=0||f<=0)throw new Error("Invalid canvas size");p.canvas.width=w,p.canvas.height=f}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,w){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}class a{constructor(p){let{baseUrl:w=null,isCompressed:f=!0}=p;this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=f}async fetch(p){let{name:w}=p;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!w)throw new Error("CMap name must be specified.");const f=this.baseUrl+w+(this.isCompressed?".bcmap":""),g=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(f,g).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${f}`)})}_fetchData(p,w){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class m{constructor(p){let{baseUrl:w=null}=p;this.constructor===m&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w}async fetch(p){let{filename:w}=p;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!w)throw new Error("Font filename must be specified.");const f=`${this.baseUrl}${w}`;return this._fetchData(f).catch(g=>{throw new Error(`Unable to load font data at: ${f}`)})}_fetchData(p){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class l{constructor(){this.constructor===l&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,w){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(p<=0||w<=0)throw new Error("Invalid SVG dimensions");const g=this._createSVG("svg:svg");return g.setAttribute("version","1.1"),f||(g.setAttribute("width",`${p}px`),g.setAttribute("height",`${w}px`)),g.setAttribute("preserveAspectRatio","none"),g.setAttribute("viewBox",`0 0 ${p} ${w}`),g}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,s.unreachable)("Abstract method `_createSVG` called.")}}},4923:(i,o,t)=>{var qt,On,jt,Hn;t.d(o,{CanvasGraphics:()=>It}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(8992),t(4520),t(1454);var s=t(4292),n=t(5419);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function a(it,c){if(!c)return;const u=c[2]-c[0],E=c[3]-c[1],k=new Path2D;k.rect(c[0],c[1],u,E),it.clip(k)}class m{constructor(){this.constructor===m&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class l extends m{constructor(c){super(),this._type=c[1],this._bbox=c[2],this._colorStops=c[3],this._p0=c[4],this._p1=c[5],this._r0=c[6],this._r1=c[7],this.matrix=null}_createGradient(c){let u;this._type==="axial"?u=c.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(u=c.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const E of this._colorStops)u.addColorStop(E[0],E[1]);return u}getPattern(c,u,E,k){let y;if(k===r.STROKE||k===r.FILL){const M=u.current.getClippedPathBoundingBox(k,(0,n.getCurrentTransform)(c))||[0,0,0,0],I=Math.ceil(M[2]-M[0])||1,F=Math.ceil(M[3]-M[1])||1,S=u.cachedCanvases.getCanvas("pattern",I,F,!0),b=S.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-M[0],-M[1]),E=s.Util.transform(E,[1,0,0,1,M[0],M[1]]),b.transform(...u.baseTransform),this.matrix&&b.transform(...this.matrix),a(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),y=c.createPattern(S.canvas,"no-repeat");const _=new DOMMatrix(E);y.setTransform(_)}else a(c,this._bbox),y=this._createGradient(c);return y}}function h(it,c,u,E,k,y,M,I){const F=c.coords,S=c.colors,b=it.data,_=it.width*4;let j;F[u+1]>F[E+1]&&(j=u,u=E,E=j,j=y,y=M,M=j),F[E+1]>F[k+1]&&(j=E,E=k,k=j,j=M,M=I,I=j),F[u+1]>F[E+1]&&(j=u,u=E,E=j,j=y,y=M,M=j);const tt=(F[u]+c.offsetX)*c.scaleX,K=(F[u+1]+c.offsetY)*c.scaleY,rt=(F[E]+c.offsetX)*c.scaleX,ct=(F[E+1]+c.offsetY)*c.scaleY,At=(F[k]+c.offsetX)*c.scaleX,Et=(F[k+1]+c.offsetY)*c.scaleY;if(K>=Et)return;const yt=S[y],kt=S[y+1],U=S[y+2],et=S[M],ht=S[M+1],vt=S[M+2],Lt=S[I],Ut=S[I+1],zt=S[I+2],Kt=Math.round(K),te=Math.round(Et);let ie,ce,ge,be,Te,Oe,Fe,Be;for(let Le=Kt;Le<=te;Le++){if(Le<ct){const st=Le<K?0:(K-Le)/(K-ct);ie=tt-(tt-rt)*st,ce=yt-(yt-et)*st,ge=kt-(kt-ht)*st,be=U-(U-vt)*st}else{let st;Le>Et?st=1:ct===Et?st=0:st=(ct-Le)/(ct-Et),ie=rt-(rt-At)*st,ce=et-(et-Lt)*st,ge=ht-(ht-Ut)*st,be=vt-(vt-zt)*st}let Ie;Le<K?Ie=0:Le>Et?Ie=1:Ie=(K-Le)/(K-Et),Te=tt-(tt-At)*Ie,Oe=yt-(yt-Lt)*Ie,Fe=kt-(kt-Ut)*Ie,Be=U-(U-zt)*Ie;const ue=Math.round(Math.min(ie,Te)),Y=Math.round(Math.max(ie,Te));let P=_*Le+ue*4;for(let st=ue;st<=Y;st++)Ie=(ie-st)/(ie-Te),Ie<0?Ie=0:Ie>1&&(Ie=1),b[P++]=ce-(ce-Oe)*Ie|0,b[P++]=ge-(ge-Fe)*Ie|0,b[P++]=be-(be-Be)*Ie|0,b[P++]=255}}function p(it,c,u){const E=c.coords,k=c.colors;let y,M;switch(c.type){case"lattice":const I=c.verticesPerRow,F=Math.floor(E.length/I)-1,S=I-1;for(y=0;y<F;y++){let b=y*I;for(let _=0;_<S;_++,b++)h(it,u,E[b],E[b+1],E[b+I],k[b],k[b+1],k[b+I]),h(it,u,E[b+I+1],E[b+1],E[b+I],k[b+I+1],k[b+1],k[b+I])}break;case"triangles":for(y=0,M=E.length;y<M;y+=3)h(it,u,E[y],E[y+1],E[y+2],k[y],k[y+1],k[y+2]);break;default:throw new Error("illegal figure")}}class w extends m{constructor(c){super(),this._coords=c[2],this._colors=c[3],this._figures=c[4],this._bounds=c[5],this._bbox=c[7],this._background=c[8],this.matrix=null}_createMeshCanvas(c,u,E){const k=Math.floor(this._bounds[0]),y=Math.floor(this._bounds[1]),M=Math.ceil(this._bounds[2])-k,I=Math.ceil(this._bounds[3])-y,F=Math.min(Math.ceil(Math.abs(M*c[0]*1.1)),3e3),S=Math.min(Math.ceil(Math.abs(I*c[1]*1.1)),3e3),b=M/F,_=I/S,j={coords:this._coords,colors:this._colors,offsetX:-k,offsetY:-y,scaleX:1/b,scaleY:1/_},tt=F+2*2,K=S+2*2,rt=E.getCanvas("mesh",tt,K,!1),ct=rt.context,At=ct.createImageData(F,S);if(u){const Et=At.data;for(let yt=0,kt=Et.length;yt<kt;yt+=4)Et[yt]=u[0],Et[yt+1]=u[1],Et[yt+2]=u[2],Et[yt+3]=255}for(const Et of this._figures)p(At,Et,j);return ct.putImageData(At,2,2),{canvas:rt.canvas,offsetX:k-2*b,offsetY:y-2*_,scaleX:b,scaleY:_}}getPattern(c,u,E,k){a(c,this._bbox);let y;if(k===r.SHADING)y=s.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(c));else if(y=s.Util.singularValueDecompose2dScale(u.baseTransform),this.matrix){const I=s.Util.singularValueDecompose2dScale(this.matrix);y=[y[0]*I[0],y[1]*I[1]]}const M=this._createMeshCanvas(y,k===r.SHADING?null:this._background,u.cachedCanvases);return k!==r.SHADING&&(c.setTransform(...u.baseTransform),this.matrix&&c.transform(...this.matrix)),c.translate(M.offsetX,M.offsetY),c.scale(M.scaleX,M.scaleY),c.createPattern(M.canvas,"no-repeat")}}class f extends m{getPattern(){return"hotpink"}}function g(it){switch(it[0]){case"RadialAxial":return new l(it);case"Mesh":return new w(it);case"Dummy":return new f}throw new Error(`Unknown IR type: ${it[0]}`)}const v={COLORED:1,UNCOLORED:2},St=class St{constructor(c,u,E,k,y){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=u,this.ctx=E,this.canvasGraphicsFactory=k,this.baseTransform=y}createPatternCanvas(c){const u=this.operatorList,E=this.bbox,k=this.xstep,y=this.ystep,M=this.paintType,I=this.tilingType,F=this.color,S=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+I);const b=E[0],_=E[1],j=E[2],tt=E[3],K=s.Util.singularValueDecompose2dScale(this.matrix),rt=s.Util.singularValueDecompose2dScale(this.baseTransform),ct=[K[0]*rt[0],K[1]*rt[1]],At=this.getSizeAndScale(k,this.ctx.canvas.width,ct[0]),Et=this.getSizeAndScale(y,this.ctx.canvas.height,ct[1]),yt=c.cachedCanvases.getCanvas("pattern",At.size,Et.size,!0),kt=yt.context,U=S.createCanvasGraphics(kt);U.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(U,M,F);let et=b,ht=_,vt=j,Lt=tt;return b<0&&(et=0,vt+=Math.abs(b)),_<0&&(ht=0,Lt+=Math.abs(_)),kt.translate(-(At.scale*et),-(Et.scale*ht)),U.transform(At.scale,0,0,Et.scale,0,0),kt.save(),this.clipBbox(U,et,ht,vt,Lt),U.baseTransform=(0,n.getCurrentTransform)(U.ctx),U.executeOperatorList(u),U.endDrawing(),{canvas:yt.canvas,scaleX:At.scale,scaleY:Et.scale,offsetX:et,offsetY:ht}}getSizeAndScale(c,u,E){c=Math.abs(c);const k=Math.max(St.MAX_PATTERN_SIZE,u);let y=Math.ceil(c*E);return y>=k?y=k:E=y/c,{scale:E,size:y}}clipBbox(c,u,E,k,y){const M=k-u,I=y-E;c.ctx.rect(u,E,M,I),c.current.updateRectMinMax((0,n.getCurrentTransform)(c.ctx),[u,E,k,y]),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,u,E){const k=c.ctx,y=c.current;switch(u){case v.COLORED:const M=this.ctx;k.fillStyle=M.fillStyle,k.strokeStyle=M.strokeStyle,y.fillColor=M.fillStyle,y.strokeColor=M.strokeStyle;break;case v.UNCOLORED:const I=s.Util.makeHexColor(E[0],E[1],E[2]);k.fillStyle=I,k.strokeStyle=I,y.fillColor=I,y.strokeColor=I;break;default:throw new s.FormatError(`Unsupported paint type: ${u}`)}}getPattern(c,u,E,k){let y=E;k!==r.SHADING&&(y=s.Util.transform(y,u.baseTransform),this.matrix&&(y=s.Util.transform(y,this.matrix)));const M=this.createPatternCanvas(u);let I=new DOMMatrix(y);I=I.translate(M.offsetX,M.offsetY),I=I.scale(1/M.scaleX,1/M.scaleY);const F=c.createPattern(M.canvas,"repeat");return F.setTransform(I),F}};ye(St,"MAX_PATTERN_SIZE",3e3);let A=St;function R(it){let{src:c,srcPos:u=0,dest:E,width:k,height:y,nonBlackColor:M=4294967295,inverseDecode:I=!1}=it;const F=s.FeatureTest.isLittleEndian?4278190080:255,[S,b]=I?[M,F]:[F,M],_=k>>3,j=k&7,tt=c.length;E=new Uint32Array(E.buffer);let K=0;for(let rt=0;rt<y;rt++){for(const At=u+_;u<At;u++){const Et=u<tt?c[u]:255;E[K++]=Et&128?b:S,E[K++]=Et&64?b:S,E[K++]=Et&32?b:S,E[K++]=Et&16?b:S,E[K++]=Et&8?b:S,E[K++]=Et&4?b:S,E[K++]=Et&2?b:S,E[K++]=Et&1?b:S}if(j===0)continue;const ct=u<tt?c[u++]:255;for(let At=0;At<j;At++)E[K++]=ct&1<<7-At?b:S}return{srcPos:u,destPos:K}}const V=16,$=100,L=4096,D=15,C=10,G=1e3,q=16;function J(it,c){if(it._removeMirroring)throw new Error("Context is already forwarding operations.");it.__originalSave=it.save,it.__originalRestore=it.restore,it.__originalRotate=it.rotate,it.__originalScale=it.scale,it.__originalTranslate=it.translate,it.__originalTransform=it.transform,it.__originalSetTransform=it.setTransform,it.__originalResetTransform=it.resetTransform,it.__originalClip=it.clip,it.__originalMoveTo=it.moveTo,it.__originalLineTo=it.lineTo,it.__originalBezierCurveTo=it.bezierCurveTo,it.__originalRect=it.rect,it.__originalClosePath=it.closePath,it.__originalBeginPath=it.beginPath,it._removeMirroring=()=>{it.save=it.__originalSave,it.restore=it.__originalRestore,it.rotate=it.__originalRotate,it.scale=it.__originalScale,it.translate=it.__originalTranslate,it.transform=it.__originalTransform,it.setTransform=it.__originalSetTransform,it.resetTransform=it.__originalResetTransform,it.clip=it.__originalClip,it.moveTo=it.__originalMoveTo,it.lineTo=it.__originalLineTo,it.bezierCurveTo=it.__originalBezierCurveTo,it.rect=it.__originalRect,it.closePath=it.__originalClosePath,it.beginPath=it.__originalBeginPath,delete it._removeMirroring},it.save=function(){c.save(),this.__originalSave()},it.restore=function(){c.restore(),this.__originalRestore()},it.translate=function(u,E){c.translate(u,E),this.__originalTranslate(u,E)},it.scale=function(u,E){c.scale(u,E),this.__originalScale(u,E)},it.transform=function(u,E,k,y,M,I){c.transform(u,E,k,y,M,I),this.__originalTransform(u,E,k,y,M,I)},it.setTransform=function(u,E,k,y,M,I){c.setTransform(u,E,k,y,M,I),this.__originalSetTransform(u,E,k,y,M,I)},it.resetTransform=function(){c.resetTransform(),this.__originalResetTransform()},it.rotate=function(u){c.rotate(u),this.__originalRotate(u)},it.clip=function(u){c.clip(u),this.__originalClip(u)},it.moveTo=function(u,E){c.moveTo(u,E),this.__originalMoveTo(u,E)},it.lineTo=function(u,E){c.lineTo(u,E),this.__originalLineTo(u,E)},it.bezierCurveTo=function(u,E,k,y,M,I){c.bezierCurveTo(u,E,k,y,M,I),this.__originalBezierCurveTo(u,E,k,y,M,I)},it.rect=function(u,E,k,y){c.rect(u,E,k,y),this.__originalRect(u,E,k,y)},it.closePath=function(){c.closePath(),this.__originalClosePath()},it.beginPath=function(){c.beginPath(),this.__originalBeginPath()}}class Q{constructor(c){this.canvasFactory=c,this.cache=Object.create(null)}getCanvas(c,u,E){let k;return this.cache[c]!==void 0?(k=this.cache[c],this.canvasFactory.reset(k,u,E)):(k=this.canvasFactory.create(u,E),this.cache[c]=k),k}delete(c){delete this.cache[c]}clear(){for(const c in this.cache){const u=this.cache[c];this.canvasFactory.destroy(u),delete this.cache[c]}}}function Tt(it,c,u,E,k,y,M,I,F,S){const[b,_,j,tt,K,rt]=(0,n.getCurrentTransform)(it);if(_===0&&j===0){const Et=M*b+K,yt=Math.round(Et),kt=I*tt+rt,U=Math.round(kt),et=(M+F)*b+K,ht=Math.abs(Math.round(et)-yt)||1,vt=(I+S)*tt+rt,Lt=Math.abs(Math.round(vt)-U)||1;return it.setTransform(Math.sign(b),0,0,Math.sign(tt),yt,U),it.drawImage(c,u,E,k,y,0,0,ht,Lt),it.setTransform(b,_,j,tt,K,rt),[ht,Lt]}if(b===0&&tt===0){const Et=I*j+K,yt=Math.round(Et),kt=M*_+rt,U=Math.round(kt),et=(I+S)*j+K,ht=Math.abs(Math.round(et)-yt)||1,vt=(M+F)*_+rt,Lt=Math.abs(Math.round(vt)-U)||1;return it.setTransform(0,Math.sign(_),Math.sign(j),0,yt,U),it.drawImage(c,u,E,k,y,0,0,Lt,ht),it.setTransform(b,_,j,tt,K,rt),[Lt,ht]}it.drawImage(c,u,E,k,y,M,I,F,S);const ct=Math.hypot(b,_),At=Math.hypot(j,tt);return[ct*F,At*S]}function mt(it){const{width:c,height:u}=it;if(c>G||u>G)return null;const E=1e3,k=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),y=c+1;let M=new Uint8Array(y*(u+1)),I,F,S;const b=c+7&-8;let _=new Uint8Array(b*u),j=0;for(const ct of it.data){let At=128;for(;At>0;)_[j++]=ct&At?0:255,At>>=1}let tt=0;for(j=0,_[j]!==0&&(M[0]=1,++tt),F=1;F<c;F++)_[j]!==_[j+1]&&(M[F]=_[j]?2:1,++tt),j++;for(_[j]!==0&&(M[F]=2,++tt),I=1;I<u;I++){j=I*b,S=I*y,_[j-b]!==_[j]&&(M[S]=_[j]?1:8,++tt);let ct=(_[j]?4:0)+(_[j-b]?8:0);for(F=1;F<c;F++)ct=(ct>>2)+(_[j+1]?4:0)+(_[j-b+1]?8:0),k[ct]&&(M[S+F]=k[ct],++tt),j++;if(_[j-b]!==_[j]&&(M[S+F]=_[j]?2:4,++tt),tt>E)return null}for(j=b*(u-1),S=I*y,_[j]!==0&&(M[S]=8,++tt),F=1;F<c;F++)_[j]!==_[j+1]&&(M[S+F]=_[j]?4:8,++tt),j++;if(_[j]!==0&&(M[S+F]=4,++tt),tt>E)return null;const K=new Int32Array([0,y,-1,0,-y,0,0,0,1]),rt=new Path2D;for(I=0;tt&&I<=u;I++){let ct=I*y;const At=ct+c;for(;ct<At&&!M[ct];)ct++;if(ct===At)continue;rt.moveTo(ct%y,I);const Et=ct;let yt=M[ct];do{const kt=K[yt];do ct+=kt;while(!M[ct]);const U=M[ct];U!==5&&U!==10?(yt=U,M[ct]=0):(yt=U&51*yt>>4,M[ct]&=yt>>2|yt<<2),rt.lineTo(ct%y,ct/y|0),M[ct]||--tt}while(Et!==ct);--I}return _=null,M=null,function(ct){ct.save(),ct.scale(1/c,-1/u),ct.translate(0,-u),ct.fill(rt),ct.beginPath(),ct.restore()}}class Dt{constructor(c,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,c,u])}clone(){const c=Object.create(this);return c.clipBox=this.clipBox.slice(),c}setCurrentPoint(c,u){this.x=c,this.y=u}updatePathMinMax(c,u,E){[u,E]=s.Util.applyTransform([u,E],c),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(c,u){const E=s.Util.applyTransform(u,c),k=s.Util.applyTransform(u.slice(2),c),y=s.Util.applyTransform([u[0],u[3]],c),M=s.Util.applyTransform([u[2],u[1]],c);this.minX=Math.min(this.minX,E[0],k[0],y[0],M[0]),this.minY=Math.min(this.minY,E[1],k[1],y[1],M[1]),this.maxX=Math.max(this.maxX,E[0],k[0],y[0],M[0]),this.maxY=Math.max(this.maxY,E[1],k[1],y[1],M[1])}updateScalingPathMinMax(c,u){s.Util.scaleMinMax(c,u),this.minX=Math.min(this.minX,u[0]),this.minY=Math.min(this.minY,u[1]),this.maxX=Math.max(this.maxX,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(c,u,E,k,y,M,I,F,S,b){const _=s.Util.bezierBoundingBox(u,E,k,y,M,I,F,S,b);b||this.updateRectMinMax(c,_)}getPathBoundingBox(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.FILL,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const E=[this.minX,this.minY,this.maxX,this.maxY];if(c===r.STROKE){u||(0,s.unreachable)("Stroke bounding box must include transform.");const k=s.Util.singularValueDecompose2dScale(u),y=k[0]*this.lineWidth/2,M=k[1]*this.lineWidth/2;E[0]-=y,E[1]-=M,E[2]+=y,E[3]+=M}return E}updateClipFromPath(){const c=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(c||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(c){this.clipBox=c,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.FILL,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.Util.intersect(this.clipBox,this.getPathBoundingBox(c,u))}}function pt(it,c){if(typeof ImageData<"u"&&c instanceof ImageData){it.putImageData(c,0,0);return}const u=c.height,E=c.width,k=u%q,y=(u-k)/q,M=k===0?y:y+1,I=it.createImageData(E,q);let F=0,S;const b=c.data,_=I.data;let j,tt,K,rt;if(c.kind===s.ImageKind.GRAYSCALE_1BPP){const ct=b.byteLength,At=new Uint32Array(_.buffer,0,_.byteLength>>2),Et=At.length,yt=E+7>>3,kt=4294967295,U=s.FeatureTest.isLittleEndian?4278190080:255;for(j=0;j<M;j++){for(K=j<y?q:k,S=0,tt=0;tt<K;tt++){const et=ct-F;let ht=0;const vt=et>yt?E:et*8-7,Lt=vt&-8;let Ut=0,zt=0;for(;ht<Lt;ht+=8)zt=b[F++],At[S++]=zt&128?kt:U,At[S++]=zt&64?kt:U,At[S++]=zt&32?kt:U,At[S++]=zt&16?kt:U,At[S++]=zt&8?kt:U,At[S++]=zt&4?kt:U,At[S++]=zt&2?kt:U,At[S++]=zt&1?kt:U;for(;ht<vt;ht++)Ut===0&&(zt=b[F++],Ut=128),At[S++]=zt&Ut?kt:U,Ut>>=1}for(;S<Et;)At[S++]=0;it.putImageData(I,0,j*q)}}else if(c.kind===s.ImageKind.RGBA_32BPP){for(tt=0,rt=E*q*4,j=0;j<y;j++)_.set(b.subarray(F,F+rt)),F+=rt,it.putImageData(I,0,tt),tt+=q;j<M&&(rt=E*k*4,_.set(b.subarray(F,F+rt)),it.putImageData(I,0,tt))}else if(c.kind===s.ImageKind.RGB_24BPP)for(K=q,rt=E*K,j=0;j<M;j++){for(j>=y&&(K=k,rt=E*K),S=0,tt=rt;tt--;)_[S++]=b[F++],_[S++]=b[F++],_[S++]=b[F++],_[S++]=255;it.putImageData(I,0,j*q)}else throw new Error(`bad image kind: ${c.kind}`)}function ot(it,c){if(c.bitmap){it.drawImage(c.bitmap,0,0);return}const u=c.height,E=c.width,k=u%q,y=(u-k)/q,M=k===0?y:y+1,I=it.createImageData(E,q);let F=0;const S=c.data,b=I.data;for(let _=0;_<M;_++){const j=_<y?q:k;({srcPos:F}=R({src:S,srcPos:F,dest:b,width:E,height:j,nonBlackColor:0})),it.putImageData(I,0,_*q)}}function ft(it,c){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of u)it[E]!==void 0&&(c[E]=it[E]);it.setLineDash!==void 0&&(c.setLineDash(it.getLineDash()),c.lineDashOffset=it.lineDashOffset)}function gt(it){if(it.strokeStyle=it.fillStyle="#000000",it.fillRule="nonzero",it.globalAlpha=1,it.lineWidth=1,it.lineCap="butt",it.lineJoin="miter",it.miterLimit=10,it.globalCompositeOperation="source-over",it.font="10px sans-serif",it.setLineDash!==void 0&&(it.setLineDash([]),it.lineDashOffset=0),!s.isNodeJS){const{filter:c}=it;c!=="none"&&c!==""&&(it.filter="none")}}function Z(it,c,u,E){const k=it.length;for(let y=3;y<k;y+=4){const M=it[y];if(M===0)it[y-3]=c,it[y-2]=u,it[y-1]=E;else if(M<255){const I=255-M;it[y-3]=it[y-3]*M+c*I>>8,it[y-2]=it[y-2]*M+u*I>>8,it[y-1]=it[y-1]*M+E*I>>8}}}function at(it,c,u){const E=it.length,k=1/255;for(let y=3;y<E;y+=4){const M=u?u[it[y]]:it[y];c[y]=c[y]*M*k|0}}function Rt(it,c,u){const E=it.length;for(let k=3;k<E;k+=4){const y=it[k-3]*77+it[k-2]*152+it[k-1]*28;c[k]=u?c[k]*u[y>>8]>>8:c[k]*y>>16}}function Ft(it,c,u,E,k,y,M,I,F,S,b){const _=!!y,j=_?y[0]:0,tt=_?y[1]:0,K=_?y[2]:0,rt=k==="Luminosity"?Rt:at,ct=Math.min(E,Math.ceil(1048576/u));for(let At=0;At<E;At+=ct){const Et=Math.min(ct,E-At),yt=it.getImageData(I-S,At+(F-b),u,Et),kt=c.getImageData(I,At+F,u,Et);_&&Z(yt.data,j,tt,K),rt(yt.data,kt.data,M),c.putImageData(kt,I,At+F)}}function Vt(it,c,u,E){const k=E[0],y=E[1],M=E[2]-k,I=E[3]-y;M===0||I===0||(Ft(c.context,u,M,I,c.subtype,c.backdrop,c.transferMap,k,y,c.offsetX,c.offsetY),it.save(),it.globalAlpha=1,it.globalCompositeOperation="source-over",it.setTransform(1,0,0,1,0,0),it.drawImage(u.canvas,0,0),it.restore())}function Qt(it,c){const u=s.Util.singularValueDecompose2dScale(it);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return c!==void 0?c:u[0]<=E||u[1]<=E}const ae=["butt","round","square"],Ae=["miter","round","bevel"],me={},Bt={},Xt=class Xt{constructor(c,u,E,k,y,M,I,F){x(this,qt);x(this,jt);let{optionalContentConfig:S,markedContentStack:b=null}=M;this.ctx=c,this.current=new Dt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=E,this.canvasFactory=k,this.filterFactory=y,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=b||[],this.optionalContentConfig=S,this.cachedCanvases=new Q(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=I,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=F,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):u}beginDrawing(c){let{transform:u,viewport:E,transparency:k=!1,background:y=null}=c;const M=this.ctx.canvas.width,I=this.ctx.canvas.height,F=this.ctx.fillStyle;if(this.ctx.fillStyle=y||"#ffffff",this.ctx.fillRect(0,0,M,I),this.ctx.fillStyle=F,k){const S=this.cachedCanvases.getCanvas("transparent",M,I);this.compositeCtx=this.ctx,this.transparentCanvas=S.canvas,this.ctx=S.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),gt(this.ctx),u&&(this.ctx.transform(...u),this.outputScaleX=u[0],this.outputScaleY=u[0]),this.ctx.transform(...E.transform),this.viewportScale=E.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx)}executeOperatorList(c,u,E,k){const y=c.argsArray,M=c.fnArray;let I=u||0;const F=y.length;if(F===I)return I;const S=F-I>C&&typeof E=="function",b=S?Date.now()+D:0;let _=0;const j=this.commonObjs,tt=this.objs;let K;for(;;){if(k!==void 0&&I===k.nextBreakPoint)return k.breakIt(I,E),I;if(K=M[I],K!==s.OPS.dependency)this[K].apply(this,y[I]);else for(const rt of y[I]){const ct=rt.startsWith("g_")?j:tt;if(!ct.has(rt))return ct.get(rt,E),I}if(I++,I===F)return I;if(S&&++_>C){if(Date.now()>b)return E(),I;_=0}}}endDrawing(){O(this,qt,On).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const c of this._cachedBitmapsMap.values()){for(const u of c.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);c.clear()}this._cachedBitmapsMap.clear(),O(this,jt,Hn).call(this)}_scaleImage(c,u){const E=c.width,k=c.height;let y=Math.max(Math.hypot(u[0],u[1]),1),M=Math.max(Math.hypot(u[2],u[3]),1),I=E,F=k,S="prescale1",b,_;for(;y>2&&I>1||M>2&&F>1;){let j=I,tt=F;y>2&&I>1&&(j=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),y/=I/j),M>2&&F>1&&(tt=F>=16384?Math.floor(F/2)-1||1:Math.ceil(F)/2,M/=F/tt),b=this.cachedCanvases.getCanvas(S,j,tt),_=b.context,_.clearRect(0,0,j,tt),_.drawImage(c,0,0,I,F,0,0,j,tt),c=b.canvas,I=j,F=tt,S=S==="prescale1"?"prescale2":"prescale1"}return{img:c,paintWidth:I,paintHeight:F}}_createMaskCanvas(c){const u=this.ctx,{width:E,height:k}=c,y=this.current.fillColor,M=this.current.patternFill,I=(0,n.getCurrentTransform)(u);let F,S,b,_;if((c.bitmap||c.data)&&c.count>1){const vt=c.bitmap||c.data.buffer;S=JSON.stringify(M?I:[I.slice(0,4),y]),F=this._cachedBitmapsMap.get(vt),F||(F=new Map,this._cachedBitmapsMap.set(vt,F));const Lt=F.get(S);if(Lt&&!M){const Ut=Math.round(Math.min(I[0],I[2])+I[4]),zt=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:Lt,offsetX:Ut,offsetY:zt}}b=Lt}b||(_=this.cachedCanvases.getCanvas("maskCanvas",E,k),ot(_.context,c));let j=s.Util.transform(I,[1/E,0,0,-1/k,0,0]);j=s.Util.transform(j,[1,0,0,1,0,-k]);const[tt,K,rt,ct]=s.Util.getAxialAlignedBoundingBox([0,0,E,k],j),At=Math.round(rt-tt)||1,Et=Math.round(ct-K)||1,yt=this.cachedCanvases.getCanvas("fillCanvas",At,Et),kt=yt.context,U=tt,et=K;kt.translate(-U,-et),kt.transform(...j),b||(b=this._scaleImage(_.canvas,(0,n.getCurrentTransformInverse)(kt)),b=b.img,F&&M&&F.set(S,b)),kt.imageSmoothingEnabled=Qt((0,n.getCurrentTransform)(kt),c.interpolate),Tt(kt,b,0,0,b.width,b.height,0,0,E,k),kt.globalCompositeOperation="source-in";const ht=s.Util.transform((0,n.getCurrentTransformInverse)(kt),[1,0,0,1,-U,-et]);return kt.fillStyle=M?y.getPattern(u,this,ht,r.FILL):y,kt.fillRect(0,0,E,k),F&&!M&&(this.cachedCanvases.delete("fillCanvas"),F.set(S,yt.canvas)),{canvas:yt.canvas,offsetX:Math.round(U),offsetY:Math.round(et)}}setLineWidth(c){c!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=c,this.ctx.lineWidth=c}setLineCap(c){this.ctx.lineCap=ae[c]}setLineJoin(c){this.ctx.lineJoin=Ae[c]}setMiterLimit(c){this.ctx.miterLimit=c}setDash(c,u){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(c),E.lineDashOffset=u)}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[u,E]of c)switch(u){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const c=this.inSMaskMode;this.current.activeSMask&&!c?this.beginSMaskMode():!this.current.activeSMask&&c&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const c=this.ctx.canvas.width,u=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,k=this.cachedCanvases.getCanvas(E,c,u);this.suspendedCtx=this.ctx,this.ctx=k.context;const y=this.ctx;y.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),ft(this.suspendedCtx,y),J(y,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(c){if(!this.current.activeSMask)return;c?(c[0]=Math.floor(c[0]),c[1]=Math.floor(c[1]),c[2]=Math.ceil(c[2]),c[3]=Math.ceil(c[3])):c=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,E=this.suspendedCtx;Vt(E,u,this.ctx,c),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const c=this.current;this.stateStack.push(c),this.current=c.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(c,u,E,k,y,M){this.ctx.transform(c,u,E,k,y,M),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(c,u,E){const k=this.ctx,y=this.current;let M=y.x,I=y.y,F,S;const b=(0,n.getCurrentTransform)(k),_=b[0]===0&&b[3]===0||b[1]===0&&b[2]===0,j=_?E.slice(0):null;for(let tt=0,K=0,rt=c.length;tt<rt;tt++)switch(c[tt]|0){case s.OPS.rectangle:M=u[K++],I=u[K++];const ct=u[K++],At=u[K++],Et=M+ct,yt=I+At;k.moveTo(M,I),ct===0||At===0?k.lineTo(Et,yt):(k.lineTo(Et,I),k.lineTo(Et,yt),k.lineTo(M,yt)),_||y.updateRectMinMax(b,[M,I,Et,yt]),k.closePath();break;case s.OPS.moveTo:M=u[K++],I=u[K++],k.moveTo(M,I),_||y.updatePathMinMax(b,M,I);break;case s.OPS.lineTo:M=u[K++],I=u[K++],k.lineTo(M,I),_||y.updatePathMinMax(b,M,I);break;case s.OPS.curveTo:F=M,S=I,M=u[K+4],I=u[K+5],k.bezierCurveTo(u[K],u[K+1],u[K+2],u[K+3],M,I),y.updateCurvePathMinMax(b,F,S,u[K],u[K+1],u[K+2],u[K+3],M,I,j),K+=6;break;case s.OPS.curveTo2:F=M,S=I,k.bezierCurveTo(M,I,u[K],u[K+1],u[K+2],u[K+3]),y.updateCurvePathMinMax(b,F,S,M,I,u[K],u[K+1],u[K+2],u[K+3],j),M=u[K+2],I=u[K+3],K+=4;break;case s.OPS.curveTo3:F=M,S=I,M=u[K+2],I=u[K+3],k.bezierCurveTo(u[K],u[K+1],M,I,M,I),y.updateCurvePathMinMax(b,F,S,u[K],u[K+1],M,I,M,I,j),K+=4;break;case s.OPS.closePath:k.closePath();break}_&&y.updateScalingPathMinMax(b,j),y.setCurrentPoint(M,I)}closePath(){this.ctx.closePath()}stroke(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const u=this.ctx,E=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E!=null&&E.getPattern)?(u.save(),u.strokeStyle=E.getPattern(u,this,(0,n.getCurrentTransformInverse)(u),r.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),c&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const u=this.ctx,E=this.current.fillColor,k=this.current.patternFill;let y=!1;k&&(u.save(),u.fillStyle=E.getPattern(u,this,(0,n.getCurrentTransformInverse)(u),r.FILL),y=!0);const M=this.current.getClippedPathBoundingBox();this.contentVisible&&M!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),y&&u.restore(),c&&this.consumePath(M)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=me}eoClip(){this.pendingClip=Bt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const c=this.pendingTextPaths,u=this.ctx;if(c===void 0){u.beginPath();return}u.save(),u.beginPath();for(const E of c)u.setTransform(...E.transform),u.translate(E.x,E.y),E.addToPath(u,E.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(c){this.current.charSpacing=c}setWordSpacing(c){this.current.wordSpacing=c}setHScale(c){this.current.textHScale=c/100}setLeading(c){this.current.leading=-c}setFont(c,u){var b;const E=this.commonObjs.get(c),k=this.current;if(!E)throw new Error(`Can't find font for ${c}`);if(k.fontMatrix=E.fontMatrix||s.FONT_IDENTITY_MATRIX,(k.fontMatrix[0]===0||k.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+c),u<0?(u=-u,k.fontDirection=-1):k.fontDirection=1,this.current.font=E,this.current.fontSize=u,E.isType3Font)return;const y=E.loadedName||"sans-serif",M=((b=E.systemFontInfo)==null?void 0:b.css)||`"${y}", ${E.fallbackName}`;let I="normal";E.black?I="900":E.bold&&(I="bold");const F=E.italic?"italic":"normal";let S=u;u<V?S=V:u>$&&(S=$),this.current.fontSizeScale=u/S,this.ctx.font=`${F} ${I} ${S}px ${M}`}setTextRenderingMode(c){this.current.textRenderingMode=c}setTextRise(c){this.current.textRise=c}moveText(c,u){this.current.x=this.current.lineX+=c,this.current.y=this.current.lineY+=u}setLeadingMoveText(c,u){this.setLeading(-u),this.moveText(c,u)}setTextMatrix(c,u,E,k,y,M){this.current.textMatrix=[c,u,E,k,y,M],this.current.textMatrixScale=Math.hypot(c,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(c,u,E,k){const y=this.ctx,M=this.current,I=M.font,F=M.textRenderingMode,S=M.fontSize/M.fontSizeScale,b=F&s.TextRenderingMode.FILL_STROKE_MASK,_=!!(F&s.TextRenderingMode.ADD_TO_PATH_FLAG),j=M.patternFill&&!I.missingFile;let tt;(I.disableFontFace||_||j)&&(tt=I.getPathGenerator(this.commonObjs,c)),I.disableFontFace||j?(y.save(),y.translate(u,E),y.beginPath(),tt(y,S),k&&y.setTransform(...k),(b===s.TextRenderingMode.FILL||b===s.TextRenderingMode.FILL_STROKE)&&y.fill(),(b===s.TextRenderingMode.STROKE||b===s.TextRenderingMode.FILL_STROKE)&&y.stroke(),y.restore()):((b===s.TextRenderingMode.FILL||b===s.TextRenderingMode.FILL_STROKE)&&y.fillText(c,u,E),(b===s.TextRenderingMode.STROKE||b===s.TextRenderingMode.FILL_STROKE)&&y.strokeText(c,u,E)),_&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(y),x:u,y:E,fontSize:S,addToPath:tt})}get isFontSubpixelAAEnabled(){const{context:c}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);c.scale(1.5,1),c.fillText("I",0,10);const u=c.getImageData(0,0,10,10).data;let E=!1;for(let k=3;k<u.length;k+=4)if(u[k]>0&&u[k]<255){E=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(c){const u=this.current,E=u.font;if(E.isType3Font)return this.showType3Text(c);const k=u.fontSize;if(k===0)return;const y=this.ctx,M=u.fontSizeScale,I=u.charSpacing,F=u.wordSpacing,S=u.fontDirection,b=u.textHScale*S,_=c.length,j=E.vertical,tt=j?1:-1,K=E.defaultVMetrics,rt=k*u.fontMatrix[0],ct=u.textRenderingMode===s.TextRenderingMode.FILL&&!E.disableFontFace&&!u.patternFill;y.save(),y.transform(...u.textMatrix),y.translate(u.x,u.y+u.textRise),S>0?y.scale(b,-1):y.scale(b,1);let At;if(u.patternFill){y.save();const et=u.fillColor.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),r.FILL);At=(0,n.getCurrentTransform)(y),y.restore(),y.fillStyle=et}let Et=u.lineWidth;const yt=u.textMatrixScale;if(yt===0||Et===0){const et=u.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(et===s.TextRenderingMode.STROKE||et===s.TextRenderingMode.FILL_STROKE)&&(Et=this.getSinglePixelWidth())}else Et/=yt;if(M!==1&&(y.scale(M,M),Et/=M),y.lineWidth=Et,E.isInvalidPDFjsFont){const et=[];let ht=0;for(const vt of c)et.push(vt.unicode),ht+=vt.width;y.fillText(et.join(""),0,0),u.x+=ht*rt*b,y.restore(),this.compose();return}let kt=0,U;for(U=0;U<_;++U){const et=c[U];if(typeof et=="number"){kt+=tt*et*k/1e3;continue}let ht=!1;const vt=(et.isSpace?F:0)+I,Lt=et.fontChar,Ut=et.accent;let zt,Kt,te=et.width;if(j){const ce=et.vmetric||K,ge=-(et.vmetric?ce[1]:te*.5)*rt,be=ce[2]*rt;te=ce?-ce[0]:te,zt=ge/M,Kt=(kt+be)/M}else zt=kt/M,Kt=0;if(E.remeasure&&te>0){const ce=y.measureText(Lt).width*1e3/k*M;if(te<ce&&this.isFontSubpixelAAEnabled){const ge=te/ce;ht=!0,y.save(),y.scale(ge,1),zt/=ge}else te!==ce&&(zt+=(te-ce)/2e3*k/M)}if(this.contentVisible&&(et.isInFont||E.missingFile)){if(ct&&!Ut)y.fillText(Lt,zt,Kt);else if(this.paintChar(Lt,zt,Kt,At),Ut){const ce=zt+k*Ut.offset.x/M,ge=Kt-k*Ut.offset.y/M;this.paintChar(Ut.fontChar,ce,ge,At)}}const ie=j?te*rt-vt*S:te*rt+vt*S;kt+=ie,ht&&y.restore()}j?u.y-=kt:u.x+=kt*b,y.restore(),this.compose()}showType3Text(c){const u=this.ctx,E=this.current,k=E.font,y=E.fontSize,M=E.fontDirection,I=k.vertical?1:-1,F=E.charSpacing,S=E.wordSpacing,b=E.textHScale*M,_=E.fontMatrix||s.FONT_IDENTITY_MATRIX,j=c.length,tt=E.textRenderingMode===s.TextRenderingMode.INVISIBLE;let K,rt,ct,At;if(!(tt||y===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...E.textMatrix),u.translate(E.x,E.y),u.scale(b,M),K=0;K<j;++K){if(rt=c[K],typeof rt=="number"){At=I*rt*y/1e3,this.ctx.translate(At,0),E.x+=At*b;continue}const Et=(rt.isSpace?S:0)+F,yt=k.charProcOperatorList[rt.operatorListId];if(!yt){(0,s.warn)(`Type3 character "${rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=rt,this.save(),u.scale(y,y),u.transform(..._),this.executeOperatorList(yt),this.restore()),ct=s.Util.applyTransform([rt.width,0],_)[0]*y+Et,u.translate(ct,0),E.x+=ct*b}u.restore(),this.processingType3=null}}setCharWidth(c,u){}setCharWidthAndBounds(c,u,E,k,y,M){this.ctx.rect(E,k,y-E,M-k),this.ctx.clip(),this.endPath()}getColorN_Pattern(c){let u;if(c[0]==="TilingPattern"){const E=c[1],k=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),y={createCanvasGraphics:M=>new Xt(M,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};u=new A(c,E,this.ctx,y,k)}else u=this._getPattern(c[1],c[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(c,u,E){const k=s.Util.makeHexColor(c,u,E);this.ctx.strokeStyle=k,this.current.strokeColor=k}setFillRGBColor(c,u,E){const k=s.Util.makeHexColor(c,u,E);this.ctx.fillStyle=k,this.current.fillColor=k,this.current.patternFill=!1}_getPattern(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,E;return this.cachedPatterns.has(c)?E=this.cachedPatterns.get(c):(E=g(this.getObject(c)),this.cachedPatterns.set(c,E)),u&&(E.matrix=u),E}shadingFill(c){if(!this.contentVisible)return;const u=this.ctx;this.save();const E=this._getPattern(c);u.fillStyle=E.getPattern(u,this,(0,n.getCurrentTransformInverse)(u),r.SHADING);const k=(0,n.getCurrentTransformInverse)(u);if(k){const{width:y,height:M}=u.canvas,[I,F,S,b]=s.Util.getAxialAlignedBoundingBox([0,0,y,M],k);this.ctx.fillRect(I,F,S-I,b-F)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(c,u){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(c)&&c.length===6&&this.transform(...c),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),u)){const E=u[2]-u[0],k=u[3]-u[1];this.ctx.rect(u[0],u[1],E,k),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(c){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;c.isolated||(0,s.info)("TODO: Support non-isolated groups."),c.knockout&&(0,s.warn)("Knockout groups not supported.");const E=(0,n.getCurrentTransform)(u);if(c.matrix&&u.transform(...c.matrix),!c.bbox)throw new Error("Bounding box is required.");let k=s.Util.getAxialAlignedBoundingBox(c.bbox,(0,n.getCurrentTransform)(u));const y=[0,0,u.canvas.width,u.canvas.height];k=s.Util.intersect(k,y)||[0,0,0,0];const M=Math.floor(k[0]),I=Math.floor(k[1]);let F=Math.max(Math.ceil(k[2])-M,1),S=Math.max(Math.ceil(k[3])-I,1),b=1,_=1;F>L&&(b=F/L,F=L),S>L&&(_=S/L,S=L),this.current.startNewPathAndClipBox([0,0,F,S]);let j="groupAt"+this.groupLevel;c.smask&&(j+="_smask_"+this.smaskCounter++%2);const tt=this.cachedCanvases.getCanvas(j,F,S),K=tt.context;K.scale(1/b,1/_),K.translate(-M,-I),K.transform(...E),c.smask?this.smaskStack.push({canvas:tt.canvas,context:K,offsetX:M,offsetY:I,scaleX:b,scaleY:_,subtype:c.smask.subtype,backdrop:c.smask.backdrop,transferMap:c.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(M,I),u.scale(b,_),u.save()),ft(u,K),this.ctx=K,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(c){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,c.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const k=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...k);const y=s.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],k);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(y)}}beginAnnotation(c,u,E,k,y){if(O(this,qt,On).call(this),gt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const M=u[2]-u[0],I=u[3]-u[1];if(y&&this.annotationCanvasMap){E=E.slice(),E[4]-=u[0],E[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=M,u[3]=I;const[F,S]=s.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:b}=this,_=Math.ceil(M*this.outputScaleX*b),j=Math.ceil(I*this.outputScaleY*b);this.annotationCanvas=this.canvasFactory.create(_,j);const{canvas:tt,context:K}=this.annotationCanvas;this.annotationCanvasMap.set(c,tt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=K,this.ctx.save(),this.ctx.setTransform(F,0,0,-S,0,I*S),gt(this.ctx)}else gt(this.ctx),this.ctx.rect(u[0],u[1],M,I),this.ctx.clip(),this.endPath()}this.current=new Dt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...k)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),O(this,jt,Hn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(c){if(!this.contentVisible)return;const u=c.count;c=this.getObject(c.data,c),c.count=u;const E=this.ctx,k=this.processingType3;if(k&&(k.compiled===void 0&&(k.compiled=mt(c)),k.compiled)){k.compiled(E);return}const y=this._createMaskCanvas(c),M=y.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(M,y.offsetX,y.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(c,u){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4?arguments[4]:void 0,M=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;c=this.getObject(c.data,c);const I=this.ctx;I.save();const F=(0,n.getCurrentTransform)(I);I.transform(u,E,k,y,0,0);const S=this._createMaskCanvas(c);I.setTransform(1,0,0,1,S.offsetX-F[4],S.offsetY-F[5]);for(let b=0,_=M.length;b<_;b+=2){const j=s.Util.transform(F,[u,E,k,y,M[b],M[b+1]]),[tt,K]=s.Util.applyTransform([0,0],j);I.drawImage(S.canvas,tt,K)}I.restore(),this.compose()}paintImageMaskXObjectGroup(c){if(!this.contentVisible)return;const u=this.ctx,E=this.current.fillColor,k=this.current.patternFill;for(const y of c){const{data:M,width:I,height:F,transform:S}=y,b=this.cachedCanvases.getCanvas("maskCanvas",I,F),_=b.context;_.save();const j=this.getObject(M,y);ot(_,j),_.globalCompositeOperation="source-in",_.fillStyle=k?E.getPattern(_,this,(0,n.getCurrentTransformInverse)(u),r.FILL):E,_.fillRect(0,0,I,F),_.restore(),u.save(),u.transform(...S),u.scale(1,-1),Tt(u,b.canvas,0,0,I,F,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(c){if(!this.contentVisible)return;const u=this.getObject(c);if(!u){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(c,u,E,k){if(!this.contentVisible)return;const y=this.getObject(c);if(!y){(0,s.warn)("Dependent image isn't ready yet");return}const M=y.width,I=y.height,F=[];for(let S=0,b=k.length;S<b;S+=2)F.push({transform:[u,0,0,E,k[S],k[S+1]],x:0,y:0,w:M,h:I});this.paintInlineImageXObjectGroup(y,F)}applyTransferMapsToCanvas(c){return this.current.transferMaps!=="none"&&(c.filter=this.current.transferMaps,c.drawImage(c.canvas,0,0),c.filter="none"),c.canvas}applyTransferMapsToBitmap(c){if(this.current.transferMaps==="none")return c.bitmap;const{bitmap:u,width:E,height:k}=c,y=this.cachedCanvases.getCanvas("inlineImage",E,k),M=y.context;return M.filter=this.current.transferMaps,M.drawImage(u,0,0),M.filter="none",y.canvas}paintInlineImageXObject(c){if(!this.contentVisible)return;const u=c.width,E=c.height,k=this.ctx;if(this.save(),!s.isNodeJS){const{filter:I}=k;I!=="none"&&I!==""&&(k.filter="none")}k.scale(1/u,-1/E);let y;if(c.bitmap)y=this.applyTransferMapsToBitmap(c);else if(typeof HTMLElement=="function"&&c instanceof HTMLElement||!c.data)y=c;else{const I=this.cachedCanvases.getCanvas("inlineImage",u,E).context;pt(I,c),y=this.applyTransferMapsToCanvas(I)}const M=this._scaleImage(y,(0,n.getCurrentTransformInverse)(k));k.imageSmoothingEnabled=Qt((0,n.getCurrentTransform)(k),c.interpolate),Tt(k,M.img,0,0,M.paintWidth,M.paintHeight,0,-E,u,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(c,u){if(!this.contentVisible)return;const E=this.ctx;let k;if(c.bitmap)k=c.bitmap;else{const y=c.width,M=c.height,I=this.cachedCanvases.getCanvas("inlineImage",y,M).context;pt(I,c),k=this.applyTransferMapsToCanvas(I)}for(const y of u)E.save(),E.transform(...y.transform),E.scale(1,-1),Tt(E,k,y.x,y.y,y.w,y.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(c){}markPointProps(c,u){}beginMarkedContent(c){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(c,u){c==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(c){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(c);const E=this.ctx;this.pendingClip&&(u||(this.pendingClip===Bt?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const c=(0,n.getCurrentTransform)(this.ctx);if(c[1]===0&&c[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(c[0]),Math.abs(c[3]));else{const u=Math.abs(c[0]*c[3]-c[2]*c[1]),E=Math.hypot(c[0],c[2]),k=Math.hypot(c[1],c[3]);this._cachedGetSinglePixelWidth=Math.max(E,k)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:c}=this.current,{a:u,b:E,c:k,d:y}=this.ctx.getTransform();let M,I;if(E===0&&k===0){const F=Math.abs(u),S=Math.abs(y);if(F===S)if(c===0)M=I=1/F;else{const b=F*c;M=I=b<1?1/b:1}else if(c===0)M=1/F,I=1/S;else{const b=F*c,_=S*c;M=b<1?1/b:1,I=_<1?1/_:1}}else{const F=Math.abs(u*y-E*k),S=Math.hypot(u,E),b=Math.hypot(k,y);if(c===0)M=b/F,I=S/F;else{const _=c*F;M=b>_?b/_:1,I=S>_?S/_:1}}this._cachedScaleForStroking[0]=M,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(c){const{ctx:u}=this,{lineWidth:E}=this.current,[k,y]=this.getScaleForStroking();if(u.lineWidth=E||1,k===1&&y===1){u.stroke();return}const M=u.getLineDash();if(c&&u.save(),u.scale(k,y),M.length>0){const I=Math.max(k,y);u.setLineDash(M.map(F=>F/I)),u.lineDashOffset/=I}u.stroke(),c&&u.restore()}isContentVisible(){for(let c=this.markedContentStack.length-1;c>=0;c--)if(!this.markedContentStack[c].visible)return!1;return!0}};qt=new WeakSet,On=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},jt=new WeakSet,Hn=function(){if(this.pageColors){const c=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(c!=="none"){const u=this.ctx.filter;this.ctx.filter=c,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=u}}};let It=Xt;for(const it in s.OPS)It.prototype[it]!==void 0&&(It.prototype[s.OPS[it]]=It.prototype[it])},5419:(i,o,t)=>{var ft,gt,Z,at,Rt,Ft,Vt,ei,ae,si,me,ii,It,jn,qt,tn,jt,en,Xt,xi,c,Si;t.d(o,{DOMCMapReaderFactory:()=>p,DOMCanvasFactory:()=>l,DOMFilterFactory:()=>m,DOMSVGFactory:()=>f,DOMStandardFontDataFactory:()=>w,PDFDateString:()=>q,PageViewport:()=>g,PixelsPerInch:()=>a,RenderingCancelledException:()=>v,StatTimer:()=>L,fetchData:()=>h,getColorValues:()=>Tt,getCurrentTransform:()=>mt,getCurrentTransformInverse:()=>Dt,getFilenameFromUrl:()=>V,getPdfFilenameFromUrl:()=>$,getRGB:()=>Q,getXfaPageViewport:()=>J,isDataScheme:()=>A,isPdfFile:()=>R,isValidFetchUrl:()=>D,noContextMenu:()=>C,setLayerDimensions:()=>pt}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(8992),t(4520),t(1454),t(4603),t(7566),t(8721);var s=t(2583),n=t(4292);const r="http://www.w3.org/2000/svg",ot=class ot{};ye(ot,"CSS",96),ye(ot,"PDF",72),ye(ot,"PDF_TO_CSS_UNITS",ot.CSS/ot.PDF);let a=ot;class m extends s.BaseFilterFactory{constructor(){let{docId:y,ownerDocument:M=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();x(this,Vt);x(this,ae);x(this,me);x(this,It);x(this,qt);x(this,jt);x(this,Xt);x(this,c);x(this,ft,void 0);x(this,gt,void 0);x(this,Z,void 0);x(this,at,void 0);x(this,Rt,void 0);x(this,Ft,0);z(this,Z,y),z(this,at,M)}addFilter(y){if(!y)return"none";let M=e(this,Vt,ei).get(y);if(M)return M;let I,F,S,b;if(y.length===1){const K=y[0],rt=new Array(256);for(let ct=0;ct<256;ct++)rt[ct]=K[ct]/255;b=I=F=S=rt.join(",")}else{const[K,rt,ct]=y,At=new Array(256),Et=new Array(256),yt=new Array(256);for(let kt=0;kt<256;kt++)At[kt]=K[kt]/255,Et[kt]=rt[kt]/255,yt[kt]=ct[kt]/255;I=At.join(","),F=Et.join(","),S=yt.join(","),b=`${I}${F}${S}`}if(M=e(this,Vt,ei).get(b),M)return e(this,Vt,ei).set(y,M),M;const _=`g_${e(this,Z)}_transfer_map_${bs(this,Ft)._++}`,j=`url(#${_})`;e(this,Vt,ei).set(y,j),e(this,Vt,ei).set(b,j);const tt=O(this,qt,tn).call(this,_);return O(this,Xt,xi).call(this,I,F,S,tt),j}addHCMFilter(y,M){var At;const I=`${y}-${M}`,F="base";let S=e(this,ae,si).get(F);if((S==null?void 0:S.key)===I||(S?((At=S.filter)==null||At.remove(),S.key=I,S.url="none",S.filter=null):(S={key:I,url:"none",filter:null},e(this,ae,si).set(F,S)),!y||!M))return S.url;const b=O(this,c,Si).call(this,y);y=n.Util.makeHexColor(...b);const _=O(this,c,Si).call(this,M);if(M=n.Util.makeHexColor(..._),e(this,me,ii).style.color="",y==="#000000"&&M==="#ffffff"||y===M)return S.url;const j=new Array(256);for(let Et=0;Et<=255;Et++){const yt=Et/255;j[Et]=yt<=.03928?yt/12.92:((yt+.055)/1.055)**2.4}const tt=j.join(","),K=`g_${e(this,Z)}_hcm_filter`,rt=S.filter=O(this,qt,tn).call(this,K);O(this,Xt,xi).call(this,tt,tt,tt,rt),O(this,It,jn).call(this,rt);const ct=(Et,yt)=>{const kt=b[Et]/255,U=_[Et]/255,et=new Array(yt+1);for(let ht=0;ht<=yt;ht++)et[ht]=kt+ht/yt*(U-kt);return et.join(",")};return O(this,Xt,xi).call(this,ct(0,5),ct(1,5),ct(2,5),rt),S.url=`url(#${K})`,S.url}addHighlightHCMFilter(y,M,I,F,S){var U;const b=`${M}-${I}-${F}-${S}`;let _=e(this,ae,si).get(y);if((_==null?void 0:_.key)===b||(_?((U=_.filter)==null||U.remove(),_.key=b,_.url="none",_.filter=null):(_={key:b,url:"none",filter:null},e(this,ae,si).set(y,_)),!M||!I))return _.url;const[j,tt]=[M,I].map(O(this,c,Si).bind(this));let K=Math.round(.2126*j[0]+.7152*j[1]+.0722*j[2]),rt=Math.round(.2126*tt[0]+.7152*tt[1]+.0722*tt[2]),[ct,At]=[F,S].map(O(this,c,Si).bind(this));rt<K&&([K,rt,ct,At]=[rt,K,At,ct]),e(this,me,ii).style.color="";const Et=(et,ht,vt)=>{const Lt=new Array(256),Ut=(rt-K)/vt,zt=et/255,Kt=(ht-et)/(255*vt);let te=0;for(let ie=0;ie<=vt;ie++){const ce=Math.round(K+ie*Ut),ge=zt+ie*Kt;for(let be=te;be<=ce;be++)Lt[be]=ge;te=ce+1}for(let ie=te;ie<256;ie++)Lt[ie]=Lt[te-1];return Lt.join(",")},yt=`g_${e(this,Z)}_hcm_${y}_filter`,kt=_.filter=O(this,qt,tn).call(this,yt);return O(this,It,jn).call(this,kt),O(this,Xt,xi).call(this,Et(ct[0],At[0],5),Et(ct[1],At[1],5),Et(ct[2],At[2],5),kt),_.url=`url(#${yt})`,_.url}destroy(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&e(this,ae,si).size!==0||(e(this,gt)&&(e(this,gt).parentNode.parentNode.remove(),z(this,gt,null)),e(this,ft)&&(e(this,ft).clear(),z(this,ft,null)),z(this,Ft,0))}}ft=new WeakMap,gt=new WeakMap,Z=new WeakMap,at=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,Vt=new WeakSet,ei=function(){return e(this,ft)||z(this,ft,new Map)},ae=new WeakSet,si=function(){return e(this,Rt)||z(this,Rt,new Map)},me=new WeakSet,ii=function(){if(!e(this,gt)){const y=e(this,at).createElement("div"),{style:M}=y;M.visibility="hidden",M.contain="strict",M.width=M.height=0,M.position="absolute",M.top=M.left=0,M.zIndex=-1;const I=e(this,at).createElementNS(r,"svg");I.setAttribute("width",0),I.setAttribute("height",0),z(this,gt,e(this,at).createElementNS(r,"defs")),y.append(I),I.append(e(this,gt)),e(this,at).body.append(y)}return e(this,gt)},It=new WeakSet,jn=function(y){const M=e(this,at).createElementNS(r,"feColorMatrix");M.setAttribute("type","matrix"),M.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),y.append(M)},qt=new WeakSet,tn=function(y){const M=e(this,at).createElementNS(r,"filter");return M.setAttribute("color-interpolation-filters","sRGB"),M.setAttribute("id",y),e(this,me,ii).append(M),M},jt=new WeakSet,en=function(y,M,I){const F=e(this,at).createElementNS(r,M);F.setAttribute("type","discrete"),F.setAttribute("tableValues",I),y.append(F)},Xt=new WeakSet,xi=function(y,M,I,F){const S=e(this,at).createElementNS(r,"feComponentTransfer");F.append(S),O(this,jt,en).call(this,S,"feFuncR",y),O(this,jt,en).call(this,S,"feFuncG",M),O(this,jt,en).call(this,S,"feFuncB",I)},c=new WeakSet,Si=function(y){return e(this,me,ii).style.color=y,Q(getComputedStyle(e(this,me,ii)).getPropertyValue("color"))};class l extends s.BaseCanvasFactory{constructor(){let{ownerDocument:k=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=k}_createCanvas(k,y){const M=this._document.createElement("canvas");return M.width=k,M.height=y,M}}async function h(E){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"text";if(D(E,document.baseURI)){const y=await fetch(E);if(!y.ok)throw new Error(y.statusText);switch(k){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"json":return y.json()}return y.text()}return new Promise((y,M)=>{const I=new XMLHttpRequest;I.open("GET",E,!0),I.responseType=k,I.onreadystatechange=()=>{if(I.readyState===XMLHttpRequest.DONE){if(I.status===200||I.status===0){switch(k){case"arraybuffer":case"blob":case"json":y(I.response);return}y(I.responseText);return}M(new Error(I.statusText))}},I.send(null)})}class p extends s.BaseCMapReaderFactory{_fetchData(k,y){return h(k,this.isCompressed?"arraybuffer":"text").then(M=>({cMapData:M instanceof ArrayBuffer?new Uint8Array(M):(0,n.stringToBytes)(M),compressionType:y}))}}class w extends s.BaseStandardFontDataFactory{_fetchData(k){return h(k,"arraybuffer").then(y=>new Uint8Array(y))}}class f extends s.BaseSVGFactory{_createSVG(k){return document.createElementNS(r,k)}}class g{constructor(k){let{viewBox:y,scale:M,rotation:I,offsetX:F=0,offsetY:S=0,dontFlip:b=!1}=k;this.viewBox=y,this.scale=M,this.rotation=I,this.offsetX=F,this.offsetY=S;const _=(y[2]+y[0])/2,j=(y[3]+y[1])/2;let tt,K,rt,ct;switch(I%=360,I<0&&(I+=360),I){case 180:tt=-1,K=0,rt=0,ct=1;break;case 90:tt=0,K=1,rt=1,ct=0;break;case 270:tt=0,K=-1,rt=-1,ct=0;break;case 0:tt=1,K=0,rt=0,ct=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}b&&(rt=-rt,ct=-ct);let At,Et,yt,kt;tt===0?(At=Math.abs(j-y[1])*M+F,Et=Math.abs(_-y[0])*M+S,yt=(y[3]-y[1])*M,kt=(y[2]-y[0])*M):(At=Math.abs(_-y[0])*M+F,Et=Math.abs(j-y[1])*M+S,yt=(y[2]-y[0])*M,kt=(y[3]-y[1])*M),this.transform=[tt*M,K*M,rt*M,ct*M,At-tt*M*_-rt*M*j,Et-K*M*_-ct*M*j],this.width=yt,this.height=kt}get rawDims(){const{viewBox:k}=this;return(0,n.shadow)(this,"rawDims",{pageWidth:k[2]-k[0],pageHeight:k[3]-k[1],pageX:k[0],pageY:k[1]})}clone(){let{scale:k=this.scale,rotation:y=this.rotation,offsetX:M=this.offsetX,offsetY:I=this.offsetY,dontFlip:F=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new g({viewBox:this.viewBox.slice(),scale:k,rotation:y,offsetX:M,offsetY:I,dontFlip:F})}convertToViewportPoint(k,y){return n.Util.applyTransform([k,y],this.transform)}convertToViewportRectangle(k){const y=n.Util.applyTransform([k[0],k[1]],this.transform),M=n.Util.applyTransform([k[2],k[3]],this.transform);return[y[0],y[1],M[0],M[1]]}convertToPdfPoint(k,y){return n.Util.applyInverseTransform([k,y],this.transform)}}class v extends n.BaseException{constructor(k){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;super(k,"RenderingCancelledException"),this.extraDelay=y}}function A(E){const k=E.length;let y=0;for(;y<k&&E[y].trim()==="";)y++;return E.substring(y,y+5).toLowerCase()==="data:"}function R(E){return typeof E=="string"&&/\.pdf$/i.test(E)}function V(E){return arguments.length>1&&arguments[1]!==void 0&&arguments[1]||([E]=E.split(/[#?]/,1)),E.substring(E.lastIndexOf("/")+1)}function $(E){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof E!="string")return k;if(A(E))return(0,n.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),k;const y=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,M=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,I=y.exec(E);let F=M.exec(I[1])||M.exec(I[2])||M.exec(I[3]);if(F&&(F=F[0],F.includes("%")))try{F=M.exec(decodeURIComponent(F))[0]}catch{}return F||k}class L{constructor(){ye(this,"started",Object.create(null));ye(this,"times",[])}time(k){k in this.started&&(0,n.warn)(`Timer is already running for ${k}`),this.started[k]=Date.now()}timeEnd(k){k in this.started||(0,n.warn)(`Timer has not been started for ${k}`),this.times.push({name:k,start:this.started[k],end:Date.now()}),delete this.started[k]}toString(){const k=[];let y=0;for(const{name:M}of this.times)y=Math.max(M.length,y);for(const{name:M,start:I,end:F}of this.times)k.push(`${M.padEnd(y)} ${F-I}ms
`);return k.join("")}}function D(E,k){try{const{protocol:y}=k?new URL(E,k):new URL(E);return y==="http:"||y==="https:"}catch{return!1}}function C(E){E.preventDefault()}let G;class q{static toDateObject(k){if(!k||typeof k!="string")return null;G||(G=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const y=G.exec(k);if(!y)return null;const M=parseInt(y[1],10);let I=parseInt(y[2],10);I=I>=1&&I<=12?I-1:0;let F=parseInt(y[3],10);F=F>=1&&F<=31?F:1;let S=parseInt(y[4],10);S=S>=0&&S<=23?S:0;let b=parseInt(y[5],10);b=b>=0&&b<=59?b:0;let _=parseInt(y[6],10);_=_>=0&&_<=59?_:0;const j=y[7]||"Z";let tt=parseInt(y[8],10);tt=tt>=0&&tt<=23?tt:0;let K=parseInt(y[9],10)||0;return K=K>=0&&K<=59?K:0,j==="-"?(S+=tt,b+=K):j==="+"&&(S-=tt,b-=K),new Date(Date.UTC(M,I,F,S,b,_))}}function J(E,k){let{scale:y=1,rotation:M=0}=k;const{width:I,height:F}=E.attributes.style,S=[0,0,parseInt(I),parseInt(F)];return new g({viewBox:S,scale:y,rotation:M})}function Q(E){if(E.startsWith("#")){const k=parseInt(E.slice(1),16);return[(k&16711680)>>16,(k&65280)>>8,k&255]}return E.startsWith("rgb(")?E.slice(4,-1).split(",").map(k=>parseInt(k)):E.startsWith("rgba(")?E.slice(5,-1).split(",").map(k=>parseInt(k)).slice(0,3):((0,n.warn)(`Not a valid color format: "${E}"`),[0,0,0])}function Tt(E){const k=document.createElement("span");k.style.visibility="hidden",document.body.append(k);for(const y of E.keys()){k.style.color=y;const M=window.getComputedStyle(k).color;E.set(y,Q(M))}k.remove()}function mt(E){const{a:k,b:y,c:M,d:I,e:F,f:S}=E.getTransform();return[k,y,M,I,F,S]}function Dt(E){const{a:k,b:y,c:M,d:I,e:F,f:S}=E.getTransform().invertSelf();return[k,y,M,I,F,S]}function pt(E,k){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(k instanceof g){const{pageWidth:I,pageHeight:F}=k.rawDims,{style:S}=E,b=n.FeatureTest.isCSSRoundSupported,_=`var(--scale-factor) * ${I}px`,j=`var(--scale-factor) * ${F}px`,tt=b?`round(${_}, 1px)`:`calc(${_})`,K=b?`round(${j}, 1px)`:`calc(${j})`;!y||k.rotation%180===0?(S.width=tt,S.height=K):(S.width=K,S.height=tt)}M&&E.setAttribute("data-main-rotation",k.rotation)}},4047:(i,o,t)=>{var a,m,l,h,p,Bn,f,$n,v,aa;t.d(o,{DrawLayer:()=>r});var s=t(5419),n=t(4292);const R=class R{constructor($){x(this,f);x(this,v);x(this,a,null);x(this,m,0);x(this,l,new Map);x(this,h,new Map);let{pageIndex:L}=$;this.pageIndex=L}setParent($){if(!e(this,a)){z(this,a,$);return}if(e(this,a)!==$){if(e(this,l).size>0)for(const L of e(this,l).values())L.remove(),$.append(L);z(this,a,$)}}static get _svgFactory(){return(0,n.shadow)(this,"_svgFactory",new s.DOMSVGFactory)}highlight($,L,D){let C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const G=bs(this,m)._++,q=O(this,f,$n).call(this,$.box);q.classList.add("highlight"),$.free&&q.classList.add("free");const J=R._svgFactory.createElement("defs");q.append(J);const Q=R._svgFactory.createElement("path");J.append(Q);const Tt=`path_p${this.pageIndex}_${G}`;Q.setAttribute("id",Tt),Q.setAttribute("d",$.toSVGPath()),C&&e(this,h).set(G,Q);const mt=O(this,v,aa).call(this,J,Tt),Dt=R._svgFactory.createElement("use");return q.append(Dt),q.setAttribute("fill",L),q.setAttribute("fill-opacity",D),Dt.setAttribute("href",`#${Tt}`),e(this,l).set(G,q),{id:G,clipPathId:`url(#${mt})`}}highlightOutline($){const L=bs(this,m)._++,D=O(this,f,$n).call(this,$.box);D.classList.add("highlightOutline");const C=R._svgFactory.createElement("defs");D.append(C);const G=R._svgFactory.createElement("path");C.append(G);const q=`path_p${this.pageIndex}_${L}`;G.setAttribute("id",q),G.setAttribute("d",$.toSVGPath()),G.setAttribute("vector-effect","non-scaling-stroke");let J;if($.free){D.classList.add("free");const mt=R._svgFactory.createElement("mask");C.append(mt),J=`mask_p${this.pageIndex}_${L}`,mt.setAttribute("id",J),mt.setAttribute("maskUnits","objectBoundingBox");const Dt=R._svgFactory.createElement("rect");mt.append(Dt),Dt.setAttribute("width","1"),Dt.setAttribute("height","1"),Dt.setAttribute("fill","white");const pt=R._svgFactory.createElement("use");mt.append(pt),pt.setAttribute("href",`#${q}`),pt.setAttribute("stroke","none"),pt.setAttribute("fill","black"),pt.setAttribute("fill-rule","nonzero"),pt.classList.add("mask")}const Q=R._svgFactory.createElement("use");D.append(Q),Q.setAttribute("href",`#${q}`),J&&Q.setAttribute("mask",`url(#${J})`);const Tt=Q.cloneNode();return D.append(Tt),Q.classList.add("mainOutline"),Tt.classList.add("secondaryOutline"),e(this,l).set(L,D),L}finalizeLine($,L){const D=e(this,h).get($);e(this,h).delete($),this.updateBox($,L.box),D.setAttribute("d",L.toSVGPath())}updateLine($,L){e(this,l).get($).firstChild.firstChild.setAttribute("d",L.toSVGPath())}removeFreeHighlight($){this.remove($),e(this,h).delete($)}updatePath($,L){e(this,h).get($).setAttribute("d",L.toSVGPath())}updateBox($,L){var D;O(D=R,p,Bn).call(D,e(this,l).get($),L)}show($,L){e(this,l).get($).classList.toggle("hidden",!L)}rotate($,L){e(this,l).get($).setAttribute("data-main-rotation",L)}changeColor($,L){e(this,l).get($).setAttribute("fill",L)}changeOpacity($,L){e(this,l).get($).setAttribute("fill-opacity",L)}addClass($,L){e(this,l).get($).classList.add(L)}removeClass($,L){e(this,l).get($).classList.remove(L)}remove($){e(this,a)!==null&&(e(this,l).get($).remove(),e(this,l).delete($))}destroy(){z(this,a,null);for(const $ of e(this,l).values())$.remove();e(this,l).clear()}};a=new WeakMap,m=new WeakMap,l=new WeakMap,h=new WeakMap,p=new WeakSet,Bn=function($){let{x:L=0,y:D=0,width:C=1,height:G=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{style:q}=$;q.top=`${100*D}%`,q.left=`${100*L}%`,q.width=`${100*C}%`,q.height=`${100*G}%`},f=new WeakSet,$n=function($){var D;const L=R._svgFactory.create(1,1,!0);return e(this,a).append(L),L.setAttribute("aria-hidden",!0),O(D=R,p,Bn).call(D,L,$),L},v=new WeakSet,aa=function($,L){const D=R._svgFactory.createElement("clipPath");$.append(D);const C=`clip_${L}`;D.setAttribute("id",C),D.setAttribute("clipPathUnits","objectBoundingBox");const G=R._svgFactory.createElement("use");return D.append(G),G.setAttribute("href",`#${L}`),G.classList.add("clip"),C},x(R,p);let r=R},9731:(i,o,t)=>{var R,V,$,L,D,C,G,q,J,Q,Tt,oa,Dt,ha,ot,la,gt,sn,at,nn,Ft,rn,Qt,ca,Ae,zn,Bt,da,qt,le,jt,he,Xt,it,c,u,E,k,y,M,I,F,S,b,_,j,tt,K,Un,ct,qn,Et,ua,kt,pa,et,fa,vt,Gn,Ut,Ti,Kt,ni,ie,ga,ge,an,Te,Ci,Fe,ma,Le,va,ue,ya,P,ba,T,N,W,lt,bt,wt,Ht,Mt,Ct,Nt,Yt,re,ne,we,de,ze,Aa,He,wa,Ve,_a,dt,Ea,Gt,Vn,se,xa,_e,Wn,Re,Sa,Xe,Ta,ps,Ca,Us,La,qs,Ra,Qe,Hs,fs,Xn,Ze,on,ws,hn,_s,ri,ci,Kn,Gs,ln,Bi,ka,di,Yn,$i,Ma,zi,Ia,ui,Jn,Vs,cn,Ms,Li,Ke,Ye,Es,gs,xs,Ws,ls,Is,cs,as,pi,Ps,Ri,Ds,ki,Xs,dn,fi,Qn,Ui,Pa,qi,Da,gi,Zn,Ks,un,Gi,Fa,Fs,Ys,ds,Ns,ms,vs,ys,is,Ss,Js,Qs,ts,pe,Ts,Vi,Na,vi,tr,yi,er,bi,sr,Zs,pn;t.d(o,{AnnotationEditorLayer:()=>A}),t(1454),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292),n=t(310);t(4114),t(8992),t(7550);var r=t(7830),a=t(6976);const m=/\r\n?|\n/g,St=class St extends n.AnnotationEditor{constructor(d){super({...d,name:"freeTextEditor"});x(this,Tt);x(this,Dt);x(this,ot);x(this,gt);x(this,Ft);x(this,Qt);x(this,Bt);x(this,R,this.editorDivBlur.bind(this));x(this,V,this.editorDivFocus.bind(this));x(this,$,this.editorDivInput.bind(this));x(this,L,this.editorDivKeydown.bind(this));x(this,D,this.editorDivPaste.bind(this));x(this,C,void 0);x(this,G,"");x(this,q,`${this.id}-editor`);x(this,J,void 0);x(this,Q,null);z(this,C,d.color||St._defaultColor||n.AnnotationEditor._defaultLineColor),z(this,J,d.fontSize||St._defaultFontSize)}static get _keyboardManager(){const d=St.prototype,H=xt=>xt.isEmpty(),nt=r.AnnotationEditorUIManager.TRANSLATE_SMALL,ut=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],d.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],d.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],d._translateEmpty,{args:[-nt,0],checker:H}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d._translateEmpty,{args:[-ut,0],checker:H}],[["ArrowRight","mac+ArrowRight"],d._translateEmpty,{args:[nt,0],checker:H}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d._translateEmpty,{args:[ut,0],checker:H}],[["ArrowUp","mac+ArrowUp"],d._translateEmpty,{args:[0,-nt],checker:H}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d._translateEmpty,{args:[0,-ut],checker:H}],[["ArrowDown","mac+ArrowDown"],d._translateEmpty,{args:[0,nt],checker:H}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d._translateEmpty,{args:[0,ut],checker:H}]]))}static initialize(d,H){n.AnnotationEditor.initialize(d,H,{strings:["pdfjs-free-text-default-content"]});const nt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(nt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(d,H){switch(d){case s.AnnotationEditorParamsType.FREETEXT_SIZE:St._defaultFontSize=H;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:St._defaultColor=H;break}}updateParams(d,H){switch(d){case s.AnnotationEditorParamsType.FREETEXT_SIZE:O(this,Tt,oa).call(this,H);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:O(this,Dt,ha).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,St._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,St._defaultColor||n.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,J)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,C)]]}_translateEmpty(d,H){this._uiManager.translateSelectedEditors(d,H,!0)}getInitialTranslation(){const d=this.parentScale;return[-St._internalPadding*d,-(St._internalPadding+e(this,J))*d]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,L)),this.editorDiv.addEventListener("focus",e(this,V)),this.editorDiv.addEventListener("blur",e(this,R)),this.editorDiv.addEventListener("input",e(this,$)),this.editorDiv.addEventListener("paste",e(this,D)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,q)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,L)),this.editorDiv.removeEventListener("focus",e(this,V)),this.editorDiv.removeEventListener("blur",e(this,R)),this.editorDiv.removeEventListener("input",e(this,$)),this.editorDiv.removeEventListener("paste",e(this,D)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),d.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var d;this.width||(this.enableEditMode(),this.editorDiv.focus(),(d=this._initialOptions)!=null&&d.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const d=e(this,G),H=z(this,G,O(this,ot,la).call(this).trimEnd());if(d===H)return;const nt=ut=>{if(z(this,G,ut),!ut){this.remove();return}O(this,Ft,rn).call(this),this._uiManager.rebuild(this),O(this,gt,sn).call(this)};this.addCommands({cmd:()=>{nt(H)},undo:()=>{nt(d)},mustExec:!1}),O(this,gt,sn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(d){this.enterInEditMode()}keydown(d){d.target===this.div&&d.key==="Enter"&&(this.enterInEditMode(),d.preventDefault())}editorDivKeydown(d){St._keyboardManager.exec(this,d)}editorDivFocus(d){this.isEditing=!0}editorDivBlur(d){this.isEditing=!1}editorDivInput(d){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let d,H;this.width&&(d=this.x,H=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,q)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),n.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(ut=>{var xt;return(xt=this.editorDiv)==null?void 0:xt.setAttribute("default-content",ut)}),this.editorDiv.contentEditable=!0;const{style:nt}=this.editorDiv;if(nt.fontSize=`calc(${e(this,J)}px * var(--scale-factor))`,nt.color=e(this,C),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ut,xt]=this.parentDimensions;if(this.annotationElementId){const{position:Ot}=e(this,Q);let[Wt,Pt]=this.getInitialTranslation();[Wt,Pt]=this.pageTranslationToScreen(Wt,Pt);const[Jt,Zt]=this.pageDimensions,[ve,Ce]=this.pageTranslation;let Se,Ee;switch(this.rotation){case 0:Se=d+(Ot[0]-ve)/Jt,Ee=H+this.height-(Ot[1]-Ce)/Zt;break;case 90:Se=d+(Ot[0]-ve)/Jt,Ee=H-(Ot[1]-Ce)/Zt,[Wt,Pt]=[Pt,-Wt];break;case 180:Se=d-this.width+(Ot[0]-ve)/Jt,Ee=H-(Ot[1]-Ce)/Zt,[Wt,Pt]=[-Wt,-Pt];break;case 270:Se=d+(Ot[0]-ve-this.height*Zt)/Jt,Ee=H+(Ot[1]-Ce-this.width*Jt)/Zt,[Wt,Pt]=[-Pt,Wt];break}this.setAt(Se*ut,Ee*xt,Wt,Pt)}else this.setAt(d*ut,H*xt,this.width*ut,this.height*xt);O(this,Ft,rn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(d){var Se,Ee,De;const H=d.clipboardData||window.clipboardData,{types:nt}=H;if(nt.length===1&&nt[0]==="text/plain")return;d.preventDefault();const ut=O(Se=St,Ae,zn).call(Se,H.getData("text")||"").replaceAll(m,`
`);if(!ut)return;const xt=window.getSelection();if(!xt.rangeCount)return;this.editorDiv.normalize(),xt.deleteFromDocument();const Ot=xt.getRangeAt(0);if(!ut.includes(`
`)){Ot.insertNode(document.createTextNode(ut)),this.editorDiv.normalize(),xt.collapseToStart();return}const{startContainer:Wt,startOffset:Pt}=Ot,Jt=[],Zt=[];if(Wt.nodeType===Node.TEXT_NODE){const Pe=Wt.parentElement;if(Zt.push(Wt.nodeValue.slice(Pt).replaceAll(m,"")),Pe!==this.editorDiv){let Ue=Jt;for(const $e of this.editorDiv.childNodes){if($e===Pe){Ue=Zt;continue}Ue.push(O(Ee=St,at,nn).call(Ee,$e))}}Jt.push(Wt.nodeValue.slice(0,Pt).replaceAll(m,""))}else if(Wt===this.editorDiv){let Pe=Jt,Ue=0;for(const $e of this.editorDiv.childNodes)Ue++===Pt&&(Pe=Zt),Pe.push(O(De=St,at,nn).call(De,$e))}z(this,G,`${Jt.join(`
`)}${ut}${Zt.join(`
`)}`),O(this,Ft,rn).call(this);const ve=new Range;let Ce=Jt.reduce((Pe,Ue)=>Pe+Ue.length,0);for(const{firstChild:Pe}of this.editorDiv.childNodes)if(Pe.nodeType===Node.TEXT_NODE){const Ue=Pe.nodeValue.length;if(Ce<=Ue){ve.setStart(Pe,Ce),ve.setEnd(Pe,Ce);break}Ce-=Ue}xt.removeAllRanges(),xt.addRange(ve)}get contentDiv(){return this.editorDiv}static deserialize(d,H,nt){var Ot;let ut=null;if(d instanceof a.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Wt,fontColor:Pt},rect:Jt,rotation:Zt,id:ve},textContent:Ce,textPosition:Se,parent:{page:{pageNumber:Ee}}}=d;if(!Ce||Ce.length===0)return null;ut=d={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(Pt),fontSize:Wt,value:Ce.join(`
`),position:Se,pageIndex:Ee-1,rect:Jt,rotation:Zt,id:ve,deleted:!1}}const xt=super.deserialize(d,H,nt);return z(xt,J,d.fontSize),z(xt,C,s.Util.makeHexColor(...d.color)),z(xt,G,O(Ot=St,Ae,zn).call(Ot,d.value)),xt.annotationElementId=d.id||null,z(xt,Q,ut),xt}serialize(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const H=St._internalPadding*this.parentScale,nt=this.getRect(H,H),ut=n.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,C)),xt={annotationType:s.AnnotationEditorType.FREETEXT,color:ut,fontSize:e(this,J),value:O(this,Qt,ca).call(this),pageIndex:this.pageIndex,rect:nt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return d?xt:this.annotationElementId&&!O(this,Bt,da).call(this,xt)?null:(xt.id=this.annotationElementId,xt)}};R=new WeakMap,V=new WeakMap,$=new WeakMap,L=new WeakMap,D=new WeakMap,C=new WeakMap,G=new WeakMap,q=new WeakMap,J=new WeakMap,Q=new WeakMap,Tt=new WeakSet,oa=function(d){const H=ut=>{this.editorDiv.style.fontSize=`calc(${ut}px * var(--scale-factor))`,this.translate(0,-(ut-e(this,J))*this.parentScale),z(this,J,ut),O(this,gt,sn).call(this)},nt=e(this,J);this.addCommands({cmd:H.bind(this,d),undo:H.bind(this,nt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Dt=new WeakSet,ha=function(d){const H=ut=>{z(this,C,this.editorDiv.style.color=ut)},nt=e(this,C);this.addCommands({cmd:H.bind(this,d),undo:H.bind(this,nt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ot=new WeakSet,la=function(){var H;const d=[];this.editorDiv.normalize();for(const nt of this.editorDiv.childNodes)d.push(O(H=St,at,nn).call(H,nt));return d.join(`
`)},gt=new WeakSet,sn=function(){const[d,H]=this.parentDimensions;let nt;if(this.isAttachedToDOM)nt=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:xt}=this,Ot=xt.style.display;xt.style.display="hidden",ut.div.append(this.div),nt=xt.getBoundingClientRect(),xt.remove(),xt.style.display=Ot}this.rotation%180===this.parentRotation%180?(this.width=nt.width/d,this.height=nt.height/H):(this.width=nt.height/d,this.height=nt.width/H),this.fixAndSetPosition()},at=new WeakSet,nn=function(d){return(d.nodeType===Node.TEXT_NODE?d.nodeValue:d.innerText).replaceAll(m,"")},Ft=new WeakSet,rn=function(){if(this.editorDiv.replaceChildren(),!!e(this,G))for(const d of e(this,G).split(`
`)){const H=document.createElement("div");H.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(H)}},Qt=new WeakSet,ca=function(){return e(this,G).replaceAll("\xA0"," ")},Ae=new WeakSet,zn=function(d){return d.replaceAll(" ","\xA0")},Bt=new WeakSet,da=function(d){const{value:H,fontSize:nt,color:ut,pageIndex:xt}=e(this,Q);return this._hasBeenMoved||d.value!==H||d.fontSize!==nt||d.color.some((Ot,Wt)=>Ot!==ut[Wt])||d.pageIndex!==xt},x(St,at),x(St,Ae),ye(St,"_freeTextDefaultContent",""),ye(St,"_internalPadding",0),ye(St,"_defaultColor",null),ye(St,"_defaultFontSize",10),ye(St,"_type","freetext"),ye(St,"_editorType",s.AnnotationEditorType.FREETEXT);let l=St;var h=t(4061),p=t(2259),w=t(5419);const B=class B extends n.AnnotationEditor{constructor(d){super({...d,name:"highlightEditor"});x(this,K);x(this,ct);x(this,Et);x(this,kt);x(this,et);x(this,vt);x(this,Ut);x(this,ie);x(this,ge);x(this,Te);x(this,Fe);x(this,Le);x(this,qt,null);x(this,le,0);x(this,jt,void 0);x(this,he,null);x(this,Xt,null);x(this,it,null);x(this,c,null);x(this,u,0);x(this,E,null);x(this,k,null);x(this,y,null);x(this,M,!1);x(this,I,O(this,ie,ga).bind(this));x(this,F,null);x(this,S,void 0);x(this,b,null);x(this,_,"");x(this,j,void 0);x(this,tt,"");this.color=d.color||B._defaultColor,z(this,j,d.thickness||B._defaultThickness),z(this,S,d.opacity||B._defaultOpacity),z(this,jt,d.boxes||null),z(this,tt,d.methodOfCreation||""),z(this,_,d.text||""),this._isDraggable=!1,d.highlightId>-1?(z(this,M,!0),O(this,ct,qn).call(this,d),O(this,Ut,Ti).call(this)):(z(this,qt,d.anchorNode),z(this,le,d.anchorOffset),z(this,c,d.focusNode),z(this,u,d.focusOffset),O(this,K,Un).call(this),O(this,Ut,Ti).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const d=B.prototype;return(0,s.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],d._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],d._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],d._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],d._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:e(this,M)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:e(this,j),methodOfCreation:e(this,tt)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(d){return{numberOfColors:d.get("color").size}}static initialize(d,H){var nt;n.AnnotationEditor.initialize(d,H),B._defaultColor||(B._defaultColor=((nt=H.highlightColors)==null?void 0:nt.values().next().value)||"#fff066")}static updateDefaultParams(d,H){switch(d){case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:B._defaultColor=H;break;case s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:B._defaultThickness=H;break}}translateInPage(d,H){}get toolbarPosition(){return e(this,F)}updateParams(d,H){switch(d){case s.AnnotationEditorParamsType.HIGHLIGHT_COLOR:O(this,Et,ua).call(this,H);break;case s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:O(this,kt,pa).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,B._defaultColor],[s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,B._defaultThickness]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||B._defaultColor],[s.AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,e(this,j)||B._defaultThickness],[s.AnnotationEditorParamsType.HIGHLIGHT_FREE,e(this,M)]]}async addEditToolbar(){const d=await super.addEditToolbar();return d?(this._uiManager.highlightColors&&(z(this,Xt,new p.ColorPicker({editor:this})),d.addColorPicker(e(this,Xt))),d):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(O(this,Te,Ci).call(this))}getBaseTranslation(){return[0,0]}getRect(d,H){return super.getRect(d,H,O(this,Te,Ci).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){O(this,vt,Gn).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(O(this,Ut,Ti).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(d){var nt;let H=!1;this.parent&&!d?O(this,vt,Gn).call(this):d&&(O(this,Ut,Ti).call(this,d),H=!this.parent&&((nt=this.div)==null?void 0:nt.classList.contains("selectedEditor"))),super.setParent(d),this.show(this._isVisible),H&&this.select()}rotate(d){var ut,xt,Ot;const{drawLayer:H}=this.parent;let nt;e(this,M)?(d=(d-this.rotation+360)%360,nt=O(ut=B,Kt,ni).call(ut,e(this,k).box,d)):nt=O(xt=B,Kt,ni).call(xt,this,d),H.rotate(e(this,y),d),H.rotate(e(this,b),d),H.updateBox(e(this,y),nt),H.updateBox(e(this,b),O(Ot=B,Kt,ni).call(Ot,e(this,it).box,d))}render(){if(this.div)return this.div;const d=super.render();e(this,_)&&(d.setAttribute("aria-label",e(this,_)),d.setAttribute("role","mark")),e(this,M)?d.classList.add("free"):this.div.addEventListener("keydown",e(this,I));const H=z(this,E,document.createElement("div"));d.append(H),H.setAttribute("aria-hidden","true"),H.className="internal",H.style.clipPath=e(this,he);const[nt,ut]=this.parentDimensions;return this.setDims(this.width*nt,this.height*ut),(0,r.bindEvents)(this,e(this,E),["pointerover","pointerleave"]),this.enableEditing(),d}pointerover(){this.parent.drawLayer.addClass(e(this,b),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(e(this,b),"hovered")}_moveCaret(d){switch(this.parent.unselect(this),d){case 0:case 2:O(this,ge,an).call(this,!0);break;case 1:case 3:O(this,ge,an).call(this,!1);break}}select(){var d,H;super.select(),e(this,b)&&((d=this.parent)==null||d.drawLayer.removeClass(e(this,b),"hovered"),(H=this.parent)==null||H.drawLayer.addClass(e(this,b),"selected"))}unselect(){var d;super.unselect(),e(this,b)&&((d=this.parent)==null||d.drawLayer.removeClass(e(this,b),"selected"),e(this,M)||O(this,ge,an).call(this,!1))}get _mustFixPosition(){return!e(this,M)}show(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible;super.show(d),this.parent&&(this.parent.drawLayer.show(e(this,y),d),this.parent.drawLayer.show(e(this,b),d))}static startHighlighting(d,H,nt){let{target:ut,x:xt,y:Ot}=nt;const{x:Wt,y:Pt,width:Jt,height:Zt}=ut.getBoundingClientRect(),ve=De=>{O(this,ue,ya).call(this,d,De)},Ce={capture:!0,passive:!1},Se=De=>{De.preventDefault(),De.stopPropagation()},Ee=De=>{ut.removeEventListener("pointermove",ve),window.removeEventListener("blur",Ee),window.removeEventListener("pointerup",Ee),window.removeEventListener("pointerdown",Se,Ce),window.removeEventListener("contextmenu",w.noContextMenu),O(this,P,ba).call(this,d,De)};window.addEventListener("blur",Ee),window.addEventListener("pointerup",Ee),window.addEventListener("pointerdown",Se,Ce),window.addEventListener("contextmenu",w.noContextMenu),ut.addEventListener("pointermove",ve),this._freeHighlight=new h.FreeOutliner({x:xt,y:Ot},[Wt,Pt,Jt,Zt],d.scale,this._defaultThickness/2,H,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=d.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(d,H,nt){var Ee;const ut=super.deserialize(d,H,nt),{rect:[xt,Ot,Wt,Pt],color:Jt,quadPoints:Zt}=d;ut.color=s.Util.makeHexColor(...Jt),z(ut,S,d.opacity);const[ve,Ce]=ut.pageDimensions;ut.width=(Wt-xt)/ve,ut.height=(Pt-Ot)/Ce;const Se=z(ut,jt,[]);for(let De=0;De<Zt.length;De+=8)Se.push({x:(Zt[4]-Wt)/ve,y:(Pt-(1-Zt[De+5]))/Ce,width:(Zt[De+2]-Zt[De])/ve,height:(Zt[De+5]-Zt[De+1])/Ce});return O(Ee=ut,K,Un).call(Ee),ut}serialize(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty()||d)return null;const H=this.getRect(0,0),nt=n.AnnotationEditor._colorManager.convert(this.color);return{annotationType:s.AnnotationEditorType.HIGHLIGHT,color:nt,opacity:e(this,S),thickness:e(this,j),quadPoints:O(this,Fe,ma).call(this),outlines:O(this,Le,va).call(this,H),pageIndex:this.pageIndex,rect:H,rotation:O(this,Te,Ci).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};qt=new WeakMap,le=new WeakMap,jt=new WeakMap,he=new WeakMap,Xt=new WeakMap,it=new WeakMap,c=new WeakMap,u=new WeakMap,E=new WeakMap,k=new WeakMap,y=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,S=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,tt=new WeakMap,K=new WeakSet,Un=function(){const d=new h.Outliner(e(this,jt),.001);z(this,k,d.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=e(this,k).box;const H=new h.Outliner(e(this,jt),.0025,.001,this._uiManager.direction==="ltr");z(this,it,H.getOutlines());const{lastPoint:nt}=e(this,it).box;z(this,F,[(nt[0]-this.x)/this.width,(nt[1]-this.y)/this.height])},ct=new WeakSet,qn=function(d){var ve,Ce;let{highlightOutlines:H,highlightId:nt,clipPathId:ut}=d;if(z(this,k,H),z(this,it,H.getNewOutline(e(this,j)/2+1.5,.0025)),nt>=0)z(this,y,nt),z(this,he,ut),this.parent.drawLayer.finalizeLine(nt,H),z(this,b,this.parent.drawLayer.highlightOutline(e(this,it)));else if(this.parent){const Se=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(e(this,y),H),this.parent.drawLayer.updateBox(e(this,y),O(ve=B,Kt,ni).call(ve,e(this,k).box,(Se-this.rotation+360)%360)),this.parent.drawLayer.updateLine(e(this,b),e(this,it)),this.parent.drawLayer.updateBox(e(this,b),O(Ce=B,Kt,ni).call(Ce,e(this,it).box,Se))}const{x:Ot,y:Wt,width:Pt,height:Jt}=H.box;switch(this.rotation){case 0:this.x=Ot,this.y=Wt,this.width=Pt,this.height=Jt;break;case 90:{const[Se,Ee]=this.parentDimensions;this.x=Wt,this.y=1-Ot,this.width=Pt*Ee/Se,this.height=Jt*Se/Ee;break}case 180:this.x=1-Ot,this.y=1-Wt,this.width=Pt,this.height=Jt;break;case 270:{const[Se,Ee]=this.parentDimensions;this.x=1-Wt,this.y=Ot,this.width=Pt*Ee/Se,this.height=Jt*Se/Ee;break}}const{lastPoint:Zt}=e(this,it).box;z(this,F,[(Zt[0]-Ot)/Pt,(Zt[1]-Wt)/Jt])},Et=new WeakSet,ua=function(d){const H=ut=>{var xt,Ot;this.color=ut,(xt=this.parent)==null||xt.drawLayer.changeColor(e(this,y),ut),(Ot=e(this,Xt))==null||Ot.updateColor(ut)},nt=this.color;this.addCommands({cmd:H.bind(this,d),undo:H.bind(this,nt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(d)},!0)},kt=new WeakSet,pa=function(d){const H=e(this,j),nt=ut=>{z(this,j,ut),O(this,et,fa).call(this,ut)};this.addCommands({cmd:nt.bind(this,d),undo:nt.bind(this,H),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:d},!0)},et=new WeakSet,fa=function(d){if(!e(this,M))return;O(this,ct,qn).call(this,{highlightOutlines:e(this,k).getNewOutline(d/2)}),this.fixAndSetPosition();const[H,nt]=this.parentDimensions;this.setDims(this.width*H,this.height*nt)},vt=new WeakSet,Gn=function(){e(this,y)===null||!this.parent||(this.parent.drawLayer.remove(e(this,y)),z(this,y,null),this.parent.drawLayer.remove(e(this,b)),z(this,b,null))},Ut=new WeakSet,Ti=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.parent;e(this,y)===null&&({id:bs(this,y)._,clipPathId:bs(this,he)._}=d.drawLayer.highlight(e(this,k),this.color,e(this,S)),z(this,b,d.drawLayer.highlightOutline(e(this,it))),e(this,E)&&(e(this,E).style.clipPath=e(this,he)))},Kt=new WeakSet,ni=function(d,H){let{x:nt,y:ut,width:xt,height:Ot}=d;switch(H){case 90:return{x:1-ut-Ot,y:nt,width:Ot,height:xt};case 180:return{x:1-nt-xt,y:1-ut-Ot,width:xt,height:Ot};case 270:return{x:ut,y:1-nt-xt,width:Ot,height:xt}}return{x:nt,y:ut,width:xt,height:Ot}},ie=new WeakSet,ga=function(d){B._keyboardManager.exec(this,d)},ge=new WeakSet,an=function(d){if(!e(this,qt))return;const H=window.getSelection();d?H.setPosition(e(this,qt),e(this,le)):H.setPosition(e(this,c),e(this,u))},Te=new WeakSet,Ci=function(){return e(this,M)?this.rotation:0},Fe=new WeakSet,ma=function(){if(e(this,M))return null;const[d,H]=this.pageDimensions,nt=e(this,jt),ut=new Array(nt.length*8);let xt=0;for(const{x:Ot,y:Wt,width:Pt,height:Jt}of nt){const Zt=Ot*d,ve=(1-Wt-Jt)*H;ut[xt]=ut[xt+4]=Zt,ut[xt+1]=ut[xt+3]=ve,ut[xt+2]=ut[xt+6]=Zt+Pt*d,ut[xt+5]=ut[xt+7]=ve+Jt*H,xt+=8}return ut},Le=new WeakSet,va=function(d){return e(this,k).serialize(d,O(this,Te,Ci).call(this))},ue=new WeakSet,ya=function(d,H){this._freeHighlight.add(H)&&d.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},P=new WeakSet,ba=function(d,H){this._freeHighlight.isEmpty()?d.drawLayer.removeFreeHighlight(this._freeHighlightId):d.createAndAddNewEditor(H,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},x(B,Kt),x(B,ue),x(B,P),ye(B,"_defaultColor",null),ye(B,"_defaultOpacity",1),ye(B,"_defaultThickness",12),ye(B,"_l10nPromise"),ye(B,"_type","highlight"),ye(B,"_editorType",s.AnnotationEditorType.HIGHLIGHT),ye(B,"_freeHighlightId",-1),ye(B,"_freeHighlight",null),ye(B,"_freeHighlightClipId","");let f=B;const Ne=class Ne extends n.AnnotationEditor{constructor(d){super({...d,name:"inkEditor"});x(this,ze);x(this,He);x(this,Ve);x(this,dt);x(this,Gt);x(this,se);x(this,_e);x(this,Re);x(this,Xe);x(this,ps);x(this,Us);x(this,qs);x(this,Qe);x(this,fs);x(this,Ze);x(this,ws);x(this,_s);x(this,ci);x(this,Gs);x(this,zi);x(this,ui);x(this,Vs);x(this,Ms);x(this,T,0);x(this,N,0);x(this,W,this.canvasPointermove.bind(this));x(this,lt,this.canvasPointerleave.bind(this));x(this,bt,this.canvasPointerup.bind(this));x(this,wt,this.canvasPointerdown.bind(this));x(this,Ht,null);x(this,Mt,new Path2D);x(this,Ct,!1);x(this,Nt,!1);x(this,Yt,!1);x(this,re,null);x(this,ne,0);x(this,we,0);x(this,de,null);this.color=d.color||null,this.thickness=d.thickness||null,this.opacity=d.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(d,H){n.AnnotationEditor.initialize(d,H)}static updateDefaultParams(d,H){switch(d){case s.AnnotationEditorParamsType.INK_THICKNESS:Ne._defaultThickness=H;break;case s.AnnotationEditorParamsType.INK_COLOR:Ne._defaultColor=H;break;case s.AnnotationEditorParamsType.INK_OPACITY:Ne._defaultOpacity=H/100;break}}updateParams(d,H){switch(d){case s.AnnotationEditorParamsType.INK_THICKNESS:O(this,ze,Aa).call(this,H);break;case s.AnnotationEditorParamsType.INK_COLOR:O(this,He,wa).call(this,H);break;case s.AnnotationEditorParamsType.INK_OPACITY:O(this,Ve,_a).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,Ne._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,Ne._defaultColor||n.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ne._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||Ne._defaultColor||n.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ne._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(O(this,Ze,on).call(this),O(this,ws,hn).call(this)),this.isAttachedToDOM||(this.parent.add(this),O(this,_s,ri).call(this)),O(this,Ms,Li).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,Ht)&&(clearTimeout(e(this,Ht)),z(this,Ht,null)),e(this,re).disconnect(),z(this,re,null),super.remove())}setParent(d){!this.parent&&d?this._uiManager.removeShouldRescale(this):this.parent&&d===null&&this._uiManager.addShouldRescale(this),super.setParent(d)}onScaleChanging(){const[d,H]=this.parentDimensions,nt=this.width*d,ut=this.height*H;this.setDimensions(nt,ut)}enableEditMode(){e(this,Ct)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,wt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,wt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,Ct)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),z(this,Ct,!0),this.div.classList.add("disabled"),O(this,Ms,Li).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),this.enableEditMode())}canvasPointerdown(d){d.button!==0||!this.isInEditMode()||e(this,Ct)||(this.setInForeground(),d.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),O(this,se,xa).call(this,d.offsetX,d.offsetY))}canvasPointermove(d){d.preventDefault(),O(this,_e,Wn).call(this,d.offsetX,d.offsetY)}canvasPointerup(d){d.preventDefault(),O(this,fs,Xn).call(this,d)}canvasPointerleave(d){O(this,fs,Xn).call(this,d)}get isResizable(){return!this.isEmpty()&&e(this,Ct)}render(){if(this.div)return this.div;let d,H;this.width&&(d=this.x,H=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[nt,ut,xt,Ot]=O(this,dt,Ea).call(this);if(this.setAt(nt,ut,0,0),this.setDims(xt,Ot),O(this,Ze,on).call(this),this.width){const[Wt,Pt]=this.parentDimensions;this.setAspectRatio(this.width*Wt,this.height*Pt),this.setAt(d*Wt,H*Pt,this.width*Wt,this.height*Pt),z(this,Yt,!0),O(this,_s,ri).call(this),this.setDims(this.width*Wt,this.height*Pt),O(this,Qe,Hs).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return O(this,ws,hn).call(this),this.div}setDimensions(d,H){const nt=Math.round(d),ut=Math.round(H);if(e(this,ne)===nt&&e(this,we)===ut)return;z(this,ne,nt),z(this,we,ut),this.canvas.style.visibility="hidden";const[xt,Ot]=this.parentDimensions;this.width=d/xt,this.height=H/Ot,this.fixAndSetPosition(),e(this,Ct)&&O(this,ci,Kn).call(this,d,H),O(this,_s,ri).call(this),O(this,Qe,Hs).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(d,H,nt){var De,Pe,Ue;if(d instanceof a.InkAnnotationElement)return null;const ut=super.deserialize(d,H,nt);ut.thickness=d.thickness,ut.color=s.Util.makeHexColor(...d.color),ut.opacity=d.opacity;const[xt,Ot]=ut.pageDimensions,Wt=ut.width*xt,Pt=ut.height*Ot,Jt=ut.parentScale,Zt=d.thickness/2;z(ut,Ct,!0),z(ut,ne,Math.round(Wt)),z(ut,we,Math.round(Pt));const{paths:ve,rect:Ce,rotation:Se}=d;for(let{bezier:$e}of ve){$e=O(De=Ne,$i,Ma).call(De,$e,Ce,Se);const us=[];ut.paths.push(us);let Ai=Jt*($e[0]-Zt),wi=Jt*($e[1]-Zt);for(let hs=2,Rn=$e.length;hs<Rn;hs+=6){const kn=Jt*($e[hs]-Zt),Xi=Jt*($e[hs+1]-Zt),Ki=Jt*($e[hs+2]-Zt),Yi=Jt*($e[hs+3]-Zt),_i=Jt*($e[hs+4]-Zt),ta=Jt*($e[hs+5]-Zt);us.push([[Ai,wi],[kn,Xi],[Ki,Yi],[_i,ta]]),Ai=_i,wi=ta}const Wi=O(this,Bi,ka).call(this,us);ut.bezierPath2D.push(Wi)}const Ee=O(Pe=ut,ui,Jn).call(Pe);return z(ut,N,Math.max(n.AnnotationEditor.MIN_SIZE,Ee[2]-Ee[0])),z(ut,T,Math.max(n.AnnotationEditor.MIN_SIZE,Ee[3]-Ee[1])),O(Ue=ut,ci,Kn).call(Ue,Wt,Pt),ut}serialize(){if(this.isEmpty())return null;const d=this.getRect(0,0),H=n.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:H,thickness:this.thickness,opacity:this.opacity,paths:O(this,zi,Ia).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,d),pageIndex:this.pageIndex,rect:d,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};T=new WeakMap,N=new WeakMap,W=new WeakMap,lt=new WeakMap,bt=new WeakMap,wt=new WeakMap,Ht=new WeakMap,Mt=new WeakMap,Ct=new WeakMap,Nt=new WeakMap,Yt=new WeakMap,re=new WeakMap,ne=new WeakMap,we=new WeakMap,de=new WeakMap,ze=new WeakSet,Aa=function(d){const H=ut=>{this.thickness=ut,O(this,Ms,Li).call(this)},nt=this.thickness;this.addCommands({cmd:H.bind(this,d),undo:H.bind(this,nt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},He=new WeakSet,wa=function(d){const H=ut=>{this.color=ut,O(this,Qe,Hs).call(this)},nt=this.color;this.addCommands({cmd:H.bind(this,d),undo:H.bind(this,nt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ve=new WeakSet,_a=function(d){const H=ut=>{this.opacity=ut,O(this,Qe,Hs).call(this)};d/=100;const nt=this.opacity;this.addCommands({cmd:H.bind(this,d),undo:H.bind(this,nt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},dt=new WeakSet,Ea=function(){const{parentRotation:d,parentDimensions:[H,nt]}=this;switch(d){case 90:return[0,nt,nt,H];case 180:return[H,nt,H,nt];case 270:return[H,0,nt,H];default:return[0,0,H,nt]}},Gt=new WeakSet,Vn=function(){const{ctx:d,color:H,opacity:nt,thickness:ut,parentScale:xt,scaleFactor:Ot}=this;d.lineWidth=ut*xt/Ot,d.lineCap="round",d.lineJoin="round",d.miterLimit=10,d.strokeStyle=`${H}${(0,r.opacityToHex)(nt)}`},se=new WeakSet,xa=function(d,H){this.canvas.addEventListener("contextmenu",w.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,lt)),this.canvas.addEventListener("pointermove",e(this,W)),this.canvas.addEventListener("pointerup",e(this,bt)),this.canvas.removeEventListener("pointerdown",e(this,wt)),this.isEditing=!0,e(this,Yt)||(z(this,Yt,!0),O(this,_s,ri).call(this),this.thickness||(this.thickness=Ne._defaultThickness),this.color||(this.color=Ne._defaultColor||n.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ne._defaultOpacity)),this.currentPath.push([d,H]),z(this,Nt,!1),O(this,Gt,Vn).call(this),z(this,de,()=>{O(this,ps,Ca).call(this),e(this,de)&&window.requestAnimationFrame(e(this,de))}),window.requestAnimationFrame(e(this,de))},_e=new WeakSet,Wn=function(d,H){const[nt,ut]=this.currentPath.at(-1);if(this.currentPath.length>1&&d===nt&&H===ut)return;const xt=this.currentPath;let Ot=e(this,Mt);if(xt.push([d,H]),z(this,Nt,!0),xt.length<=2){Ot.moveTo(...xt[0]),Ot.lineTo(d,H);return}xt.length===3&&(z(this,Mt,Ot=new Path2D),Ot.moveTo(...xt[0])),O(this,Us,La).call(this,Ot,...xt.at(-3),...xt.at(-2),d,H)},Re=new WeakSet,Sa=function(){if(this.currentPath.length===0)return;const d=this.currentPath.at(-1);e(this,Mt).lineTo(...d)},Xe=new WeakSet,Ta=function(d,H){z(this,de,null),d=Math.min(Math.max(d,0),this.canvas.width),H=Math.min(Math.max(H,0),this.canvas.height),O(this,_e,Wn).call(this,d,H),O(this,Re,Sa).call(this);let nt;if(this.currentPath.length!==1)nt=O(this,qs,Ra).call(this);else{const Pt=[d,H];nt=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const ut=e(this,Mt),xt=this.currentPath;this.currentPath=[],z(this,Mt,new Path2D);const Ot=()=>{this.allRawPaths.push(xt),this.paths.push(nt),this.bezierPath2D.push(ut),this._uiManager.rebuild(this)},Wt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(O(this,Ze,on).call(this),O(this,ws,hn).call(this)),O(this,Ms,Li).call(this))};this.addCommands({cmd:Ot,undo:Wt,mustExec:!0})},ps=new WeakSet,Ca=function(){if(!e(this,Nt))return;z(this,Nt,!1);const d=Math.ceil(this.thickness*this.parentScale),H=this.currentPath.slice(-3),nt=H.map(Ot=>Ot[0]),ut=H.map(Ot=>Ot[1]);Math.min(...nt)-d,Math.max(...nt)+d,Math.min(...ut)-d,Math.max(...ut)+d;const{ctx:xt}=this;xt.save(),xt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ot of this.bezierPath2D)xt.stroke(Ot);xt.stroke(e(this,Mt)),xt.restore()},Us=new WeakSet,La=function(d,H,nt,ut,xt,Ot,Wt){const Pt=(H+ut)/2,Jt=(nt+xt)/2,Zt=(ut+Ot)/2,ve=(xt+Wt)/2;d.bezierCurveTo(Pt+2*(ut-Pt)/3,Jt+2*(xt-Jt)/3,Zt+2*(ut-Zt)/3,ve+2*(xt-ve)/3,Zt,ve)},qs=new WeakSet,Ra=function(){const d=this.currentPath;if(d.length<=2)return[[d[0],d[0],d.at(-1),d.at(-1)]];const H=[];let nt,[ut,xt]=d[0];for(nt=1;nt<d.length-2;nt++){const[Ce,Se]=d[nt],[Ee,De]=d[nt+1],Pe=(Ce+Ee)/2,Ue=(Se+De)/2,$e=[ut+2*(Ce-ut)/3,xt+2*(Se-xt)/3],us=[Pe+2*(Ce-Pe)/3,Ue+2*(Se-Ue)/3];H.push([[ut,xt],$e,us,[Pe,Ue]]),[ut,xt]=[Pe,Ue]}const[Ot,Wt]=d[nt],[Pt,Jt]=d[nt+1],Zt=[ut+2*(Ot-ut)/3,xt+2*(Wt-xt)/3],ve=[Pt+2*(Ot-Pt)/3,Jt+2*(Wt-Jt)/3];return H.push([[ut,xt],Zt,ve,[Pt,Jt]]),H},Qe=new WeakSet,Hs=function(){if(this.isEmpty()){O(this,Gs,ln).call(this);return}O(this,Gt,Vn).call(this);const{canvas:d,ctx:H}=this;H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,d.width,d.height),O(this,Gs,ln).call(this);for(const nt of this.bezierPath2D)H.stroke(nt)},fs=new WeakSet,Xn=function(d){this.canvas.removeEventListener("pointerleave",e(this,lt)),this.canvas.removeEventListener("pointermove",e(this,W)),this.canvas.removeEventListener("pointerup",e(this,bt)),this.canvas.addEventListener("pointerdown",e(this,wt)),e(this,Ht)&&clearTimeout(e(this,Ht)),z(this,Ht,setTimeout(()=>{z(this,Ht,null),this.canvas.removeEventListener("contextmenu",w.noContextMenu)},10)),O(this,Xe,Ta).call(this,d.offsetX,d.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ze=new WeakSet,on=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ws=new WeakSet,hn=function(){z(this,re,new ResizeObserver(d=>{const H=d[0].contentRect;H.width&&H.height&&this.setDimensions(H.width,H.height)})),e(this,re).observe(this.div)},_s=new WeakSet,ri=function(){if(!e(this,Yt))return;const[d,H]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*d),this.canvas.height=Math.ceil(this.height*H),O(this,Gs,ln).call(this)},ci=new WeakSet,Kn=function(d,H){const nt=O(this,Vs,cn).call(this),ut=(d-nt)/e(this,N),xt=(H-nt)/e(this,T);this.scaleFactor=Math.min(ut,xt)},Gs=new WeakSet,ln=function(){const d=O(this,Vs,cn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+d,this.translationY*this.scaleFactor+d)},Bi=new WeakSet,ka=function(d){const H=new Path2D;for(let nt=0,ut=d.length;nt<ut;nt++){const[xt,Ot,Wt,Pt]=d[nt];nt===0&&H.moveTo(...xt),H.bezierCurveTo(Ot[0],Ot[1],Wt[0],Wt[1],Pt[0],Pt[1])}return H},di=new WeakSet,Yn=function(d,H,nt){const[ut,xt,Ot,Wt]=H;switch(nt){case 0:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2)d[Pt]+=ut,d[Pt+1]=Wt-d[Pt+1];break;case 90:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2){const Zt=d[Pt];d[Pt]=d[Pt+1]+ut,d[Pt+1]=Zt+xt}break;case 180:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2)d[Pt]=Ot-d[Pt],d[Pt+1]+=xt;break;case 270:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2){const Zt=d[Pt];d[Pt]=Ot-d[Pt+1],d[Pt+1]=Wt-Zt}break;default:throw new Error("Invalid rotation")}return d},$i=new WeakSet,Ma=function(d,H,nt){const[ut,xt,Ot,Wt]=H;switch(nt){case 0:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2)d[Pt]-=ut,d[Pt+1]=Wt-d[Pt+1];break;case 90:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2){const Zt=d[Pt];d[Pt]=d[Pt+1]-xt,d[Pt+1]=Zt-ut}break;case 180:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2)d[Pt]=Ot-d[Pt],d[Pt+1]-=xt;break;case 270:for(let Pt=0,Jt=d.length;Pt<Jt;Pt+=2){const Zt=d[Pt];d[Pt]=Wt-d[Pt+1],d[Pt+1]=Ot-Zt}break;default:throw new Error("Invalid rotation")}return d},zi=new WeakSet,Ia=function(d,H,nt,ut){var Jt,Zt;const xt=[],Ot=this.thickness/2,Wt=d*H+Ot,Pt=d*nt+Ot;for(const ve of this.paths){const Ce=[],Se=[];for(let Ee=0,De=ve.length;Ee<De;Ee++){const[Pe,Ue,$e,us]=ve[Ee];if(Pe[0]===us[0]&&Pe[1]===us[1]&&De===1){const Yi=d*Pe[0]+Wt,_i=d*Pe[1]+Pt;Ce.push(Yi,_i),Se.push(Yi,_i);break}const Ai=d*Pe[0]+Wt,wi=d*Pe[1]+Pt,Wi=d*Ue[0]+Wt,hs=d*Ue[1]+Pt,Rn=d*$e[0]+Wt,kn=d*$e[1]+Pt,Xi=d*us[0]+Wt,Ki=d*us[1]+Pt;Ee===0&&(Ce.push(Ai,wi),Se.push(Ai,wi)),Ce.push(Wi,hs,Rn,kn,Xi,Ki),Se.push(Wi,hs),Ee===De-1&&Se.push(Xi,Ki)}xt.push({bezier:O(Jt=Ne,di,Yn).call(Jt,Ce,ut,this.rotation),points:O(Zt=Ne,di,Yn).call(Zt,Se,ut,this.rotation)})}return xt},ui=new WeakSet,Jn=function(){let d=1/0,H=-1/0,nt=1/0,ut=-1/0;for(const xt of this.paths)for(const[Ot,Wt,Pt,Jt]of xt){const Zt=s.Util.bezierBoundingBox(...Ot,...Wt,...Pt,...Jt);d=Math.min(d,Zt[0]),nt=Math.min(nt,Zt[1]),H=Math.max(H,Zt[2]),ut=Math.max(ut,Zt[3])}return[d,nt,H,ut]},Vs=new WeakSet,cn=function(){return e(this,Ct)?Math.ceil(this.thickness*this.parentScale):0},Ms=new WeakSet,Li=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!e(this,Ct)){O(this,Qe,Hs).call(this);return}const H=O(this,ui,Jn).call(this),nt=O(this,Vs,cn).call(this);z(this,N,Math.max(n.AnnotationEditor.MIN_SIZE,H[2]-H[0])),z(this,T,Math.max(n.AnnotationEditor.MIN_SIZE,H[3]-H[1]));const ut=Math.ceil(nt+e(this,N)*this.scaleFactor),xt=Math.ceil(nt+e(this,T)*this.scaleFactor),[Ot,Wt]=this.parentDimensions;this.width=ut/Ot,this.height=xt/Wt,this.setAspectRatio(ut,xt);const Pt=this.translationX,Jt=this.translationY;this.translationX=-H[0],this.translationY=-H[1],O(this,_s,ri).call(this),O(this,Qe,Hs).call(this),z(this,ne,ut),z(this,we,xt),this.setDims(ut,xt);const Zt=d?nt/this.scaleFactor/2:0;this.translate(Pt-this.translationX-Zt,Jt-this.translationY-Zt)},x(Ne,Bi),x(Ne,di),x(Ne,$i),ye(Ne,"_defaultColor",null),ye(Ne,"_defaultOpacity",1),ye(Ne,"_defaultThickness",1),ye(Ne,"_type","ink"),ye(Ne,"_editorType",s.AnnotationEditorType.INK);let g=Ne;t(4520),t(4979);const mi=class mi extends n.AnnotationEditor{constructor(d){super({...d,name:"stampEditor"});x(this,Ps);x(this,Ds);x(this,Xs);x(this,fi);x(this,Ui);x(this,qi);x(this,gi);x(this,Ks);x(this,Gi);x(this,Ke,null);x(this,Ye,null);x(this,Es,null);x(this,gs,null);x(this,xs,null);x(this,Ws,"");x(this,ls,null);x(this,Is,null);x(this,cs,null);x(this,as,!1);x(this,pi,!1);z(this,gs,d.bitmapUrl),z(this,xs,d.bitmapFile)}static initialize(d,H){n.AnnotationEditor.initialize(d,H)}static get supportedTypes(){const d=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",d.map(H=>`image/${H}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(d){return this.supportedTypes.includes(d)}static paste(d,H){H.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:d.getAsFile()})}remove(){var d,H;e(this,Ye)&&(z(this,Ke,null),this._uiManager.imageManager.deleteId(e(this,Ye)),(d=e(this,ls))==null||d.remove(),z(this,ls,null),(H=e(this,Is))==null||H.disconnect(),z(this,Is,null),e(this,cs)&&(clearTimeout(e(this,cs)),z(this,cs,null))),super.remove()}rebuild(){if(!this.parent){e(this,Ye)&&O(this,Xs,dn).call(this);return}super.rebuild(),this.div!==null&&(e(this,Ye)&&e(this,ls)===null&&O(this,Xs,dn).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,Es)||e(this,Ke)||e(this,gs)||e(this,xs)||e(this,Ye))}get isResizable(){return!0}render(){if(this.div)return this.div;let d,H;if(this.width&&(d=this.x,H=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),e(this,Ke)?O(this,fi,Qn).call(this):O(this,Xs,dn).call(this),this.width){const[nt,ut]=this.parentDimensions;this.setAt(d*nt,H*ut,this.width*nt,this.height*ut)}return this.div}getImageForAltText(){return e(this,ls)}static deserialize(d,H,nt){if(d instanceof a.StampAnnotationElement)return null;const ut=super.deserialize(d,H,nt),{rect:xt,bitmapUrl:Ot,bitmapId:Wt,isSvg:Pt,accessibilityData:Jt}=d;Wt&&nt.imageManager.isValidId(Wt)?z(ut,Ye,Wt):z(ut,gs,Ot),z(ut,as,Pt);const[Zt,ve]=ut.pageDimensions;return ut.width=(xt[2]-xt[0])/Zt,ut.height=(xt[3]-xt[1])/ve,Jt&&(ut.altTextData=Jt),ut}serialize(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.isEmpty())return null;const nt={annotationType:s.AnnotationEditorType.STAMP,bitmapId:e(this,Ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,as),structTreeParentId:this._structTreeParentId};if(d)return nt.bitmapUrl=O(this,Ks,un).call(this,!0),nt.accessibilityData=this.altTextData,nt;const{decorative:ut,altText:xt}=this.altTextData;if(!ut&&xt&&(nt.accessibilityData={type:"Figure",alt:xt}),H===null)return nt;H.stamps||(H.stamps=new Map);const Ot=e(this,as)?(nt.rect[2]-nt.rect[0])*(nt.rect[3]-nt.rect[1]):null;if(!H.stamps.has(e(this,Ye)))H.stamps.set(e(this,Ye),{area:Ot,serialized:nt}),nt.bitmap=O(this,Ks,un).call(this,!1);else if(e(this,as)){const Wt=H.stamps.get(e(this,Ye));Ot>Wt.area&&(Wt.area=Ot,Wt.serialized.bitmap.close(),Wt.serialized.bitmap=O(this,Ks,un).call(this,!1))}return nt}};Ke=new WeakMap,Ye=new WeakMap,Es=new WeakMap,gs=new WeakMap,xs=new WeakMap,Ws=new WeakMap,ls=new WeakMap,Is=new WeakMap,cs=new WeakMap,as=new WeakMap,pi=new WeakMap,Ps=new WeakSet,Ri=function(d){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!d){this.remove();return}z(this,Ke,d.bitmap),H||(z(this,Ye,d.id),z(this,as,d.isSvg)),d.file&&z(this,Ws,d.file.name),O(this,fi,Qn).call(this)},Ds=new WeakSet,ki=function(){z(this,Es,null),this._uiManager.enableWaiting(!1),e(this,ls)&&this.div.focus()},Xs=new WeakSet,dn=function(){if(e(this,Ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,Ye)).then(H=>O(this,Ps,Ri).call(this,H,!0)).finally(()=>O(this,Ds,ki).call(this));return}if(e(this,gs)){const H=e(this,gs);z(this,gs,null),this._uiManager.enableWaiting(!0),z(this,Es,this._uiManager.imageManager.getFromUrl(H).then(nt=>O(this,Ps,Ri).call(this,nt)).finally(()=>O(this,Ds,ki).call(this)));return}if(e(this,xs)){const H=e(this,xs);z(this,xs,null),this._uiManager.enableWaiting(!0),z(this,Es,this._uiManager.imageManager.getFromFile(H).then(nt=>O(this,Ps,Ri).call(this,nt)).finally(()=>O(this,Ds,ki).call(this)));return}const d=document.createElement("input");d.type="file",d.accept=mi.supportedTypesStr,z(this,Es,new Promise(H=>{d.addEventListener("change",async()=>{if(!d.files||d.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const nt=await this._uiManager.imageManager.getFromFile(d.files[0]);O(this,Ps,Ri).call(this,nt)}H()}),d.addEventListener("cancel",()=>{this.remove(),H()})}).finally(()=>O(this,Ds,ki).call(this))),d.click()},fi=new WeakSet,Qn=function(){const{div:d}=this;let{width:H,height:nt}=e(this,Ke);const[ut,xt]=this.pageDimensions,Ot=.75;if(this.width)H=this.width*ut,nt=this.height*xt;else if(H>Ot*ut||nt>Ot*xt){const Zt=Math.min(Ot*ut/H,Ot*xt/nt);H*=Zt,nt*=Zt}const[Wt,Pt]=this.parentDimensions;this.setDims(H*Wt/ut,nt*Pt/xt),this._uiManager.enableWaiting(!1);const Jt=z(this,ls,document.createElement("canvas"));d.append(Jt),d.hidden=!1,O(this,gi,Zn).call(this,H,nt),O(this,Gi,Fa).call(this),e(this,pi)||(this.parent.addUndoableEditor(this),z(this,pi,!0)),this._reportTelemetry({action:"inserted_image"}),e(this,Ws)&&Jt.setAttribute("aria-label",e(this,Ws))},Ui=new WeakSet,Pa=function(d,H){var Ot;const[nt,ut]=this.parentDimensions;this.width=d/nt,this.height=H/ut,this.setDims(d,H),(Ot=this._initialOptions)!=null&&Ot.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,cs)!==null&&clearTimeout(e(this,cs)),z(this,cs,setTimeout(()=>{z(this,cs,null),O(this,gi,Zn).call(this,d,H)},200))},qi=new WeakSet,Da=function(d,H){const{width:nt,height:ut}=e(this,Ke);let xt=nt,Ot=ut,Wt=e(this,Ke);for(;xt>2*d||Ot>2*H;){const Pt=xt,Jt=Ot;xt>2*d&&(xt=xt>=16384?Math.floor(xt/2)-1:Math.ceil(xt/2)),Ot>2*H&&(Ot=Ot>=16384?Math.floor(Ot/2)-1:Math.ceil(Ot/2));const Zt=new OffscreenCanvas(xt,Ot);Zt.getContext("2d").drawImage(Wt,0,0,Pt,Jt,0,0,xt,Ot),Wt=Zt.transferToImageBitmap()}return Wt},gi=new WeakSet,Zn=function(d,H){d=Math.ceil(d),H=Math.ceil(H);const nt=e(this,ls);if(!nt||nt.width===d&&nt.height===H)return;nt.width=d,nt.height=H;const ut=e(this,as)?e(this,Ke):O(this,qi,Da).call(this,d,H);if(this._uiManager.hasMLManager&&!this.hasAltText()){const Ot=new OffscreenCanvas(d,H);Ot.getContext("2d").drawImage(ut,0,0,ut.width,ut.height,0,0,d,H),Ot.convertToBlob().then(Wt=>{const Pt=new FileReader;Pt.onload=()=>{const Jt=Pt.result;this._uiManager.mlGuess({service:"image-to-text",request:{imageData:Jt}}).then(Zt=>{const ve=(Zt==null?void 0:Zt.output)||"";this.parent&&ve&&!this.hasAltText()&&(this.altTextData={altText:ve,decorative:!1})})},Pt.readAsDataURL(Wt)})}const xt=nt.getContext("2d");xt.filter=this._uiManager.hcmFilter,xt.drawImage(ut,0,0,ut.width,ut.height,0,0,d,H)},Ks=new WeakSet,un=function(d){if(d){if(e(this,as)){const nt=this._uiManager.imageManager.getSvgUrl(e(this,Ye));if(nt)return nt}const H=document.createElement("canvas");return{width:H.width,height:H.height}=e(this,Ke),H.getContext("2d").drawImage(e(this,Ke),0,0),H.toDataURL()}if(e(this,as)){const[H,nt]=this.pageDimensions,ut=Math.round(this.width*H*w.PixelsPerInch.PDF_TO_CSS_UNITS),xt=Math.round(this.height*nt*w.PixelsPerInch.PDF_TO_CSS_UNITS),Ot=new OffscreenCanvas(ut,xt);return Ot.getContext("2d").drawImage(e(this,Ke),0,0,e(this,Ke).width,e(this,Ke).height,0,0,ut,xt),Ot.transferToImageBitmap()}return structuredClone(e(this,Ke))},Gi=new WeakSet,Fa=function(){z(this,Is,new ResizeObserver(d=>{const H=d[0].contentRect;H.width&&H.height&&O(this,Ui,Pa).call(this,H.width,H.height)})),e(this,Is).observe(this.div)},ye(mi,"_type","stamp"),ye(mi,"_editorType",s.AnnotationEditorType.STAMP);let v=mi;const os=class os{constructor(_t){x(this,Vi);x(this,vi);x(this,yi);x(this,bi);x(this,Zs);x(this,Fs,void 0);x(this,Ys,!1);x(this,ds,null);x(this,Ns,null);x(this,ms,null);x(this,vs,null);x(this,ys,null);x(this,is,new Map);x(this,Ss,!1);x(this,Js,!1);x(this,Qs,!1);x(this,ts,null);x(this,pe,void 0);let{uiManager:d,pageIndex:H,div:nt,accessibilityManager:ut,annotationLayer:xt,drawLayer:Ot,textLayer:Wt,viewport:Pt,l10n:Jt}=_t;const Zt=[...e(os,Ts).values()];if(!os._initialized){os._initialized=!0;for(const ve of Zt)ve.initialize(Jt,d)}d.registerEditorTypes(Zt),z(this,pe,d),this.pageIndex=H,this.div=nt,z(this,Fs,ut),z(this,ds,xt),this.viewport=Pt,z(this,ts,Wt),this.drawLayer=Ot,e(this,pe).addLayer(this)}get isEmpty(){return e(this,is).size===0}get isInvisible(){return this.isEmpty&&e(this,pe).getMode()===s.AnnotationEditorType.NONE}updateToolbar(_t){e(this,pe).updateToolbar(_t)}updateMode(){let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e(this,pe).getMode();switch(O(this,Zs,pn).call(this),_t){case s.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case s.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case s.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:d}=this.div;for(const H of e(os,Ts).values())d.toggle(`${H._type}Editing`,_t===H._editorType);this.div.hidden=!1}hasTextLayer(_t){var d;return _t===((d=e(this,ts))==null?void 0:d.div)}addInkEditorIfNeeded(_t){if(e(this,pe).getMode()===s.AnnotationEditorType.INK){if(!_t){for(const d of e(this,is).values())if(d.isEmpty()){d.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(_t){e(this,pe).setEditingState(_t)}addCommands(_t){e(this,pe).addCommands(_t)}togglePointerEvents(){let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.div.classList.toggle("disabled",!_t)}toggleAnnotationLayerPointerEvents(){var d;let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;(d=e(this,ds))==null||d.div.classList.toggle("disabled",!_t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const _t=new Set;for(const H of e(this,is).values())H.enableEditing(),H.annotationElementId&&_t.add(H.annotationElementId);if(!e(this,ds))return;const d=e(this,ds).getEditableAnnotations();for(const H of d){if(H.hide(),e(this,pe).isDeletedAnnotationElement(H.data.id)||_t.has(H.data.id))continue;const nt=this.deserialize(H);nt&&(this.addOrRebuild(nt),nt.enableEditing())}}disable(){var H;z(this,Qs,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const _t=new Set;for(const nt of e(this,is).values()){if(nt.disableEditing(),!nt.annotationElementId||nt.serialize()!==null){_t.add(nt.annotationElementId);continue}(H=this.getEditableAnnotation(nt.annotationElementId))==null||H.show(),nt.remove()}if(e(this,ds)){const nt=e(this,ds).getEditableAnnotations();for(const ut of nt){const{id:xt}=ut.data;_t.has(xt)||e(this,pe).isDeletedAnnotationElement(xt)||ut.show()}}O(this,Zs,pn).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:d}=this.div;for(const nt of e(os,Ts).values())d.remove(`${nt._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),z(this,Qs,!1)}getEditableAnnotation(_t){var d;return((d=e(this,ds))==null?void 0:d.getEditableAnnotation(_t))||null}setActiveEditor(_t){e(this,pe).getActive()!==_t&&e(this,pe).setActiveEditor(_t)}enableTextSelection(){var _t;this.div.tabIndex=-1,(_t=e(this,ts))!=null&&_t.div&&!e(this,vs)&&(z(this,vs,O(this,Vi,Na).bind(this)),e(this,ts).div.addEventListener("pointerdown",e(this,vs)),e(this,ts).div.classList.add("highlighting"))}disableTextSelection(){var _t;this.div.tabIndex=0,(_t=e(this,ts))!=null&&_t.div&&e(this,vs)&&(e(this,ts).div.removeEventListener("pointerdown",e(this,vs)),z(this,vs,null),e(this,ts).div.classList.remove("highlighting"))}enableClick(){e(this,ms)||(z(this,ms,this.pointerdown.bind(this)),z(this,Ns,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",e(this,ms)),this.div.addEventListener("pointerup",e(this,Ns)))}disableClick(){e(this,ms)&&(this.div.removeEventListener("pointerdown",e(this,ms)),this.div.removeEventListener("pointerup",e(this,Ns)),z(this,ms,null),z(this,Ns,null))}attach(_t){e(this,is).set(_t.id,_t);const{annotationElementId:d}=_t;d&&e(this,pe).isDeletedAnnotationElement(d)&&e(this,pe).removeDeletedAnnotationElement(_t)}detach(_t){var d;e(this,is).delete(_t.id),(d=e(this,Fs))==null||d.removePointerInTextLayer(_t.contentDiv),!e(this,Qs)&&_t.annotationElementId&&e(this,pe).addDeletedAnnotationElement(_t)}remove(_t){this.detach(_t),e(this,pe).removeEditor(_t),_t.div.remove(),_t.isAttachedToDOM=!1,e(this,Js)||this.addInkEditorIfNeeded(!1)}changeParent(_t){var d;_t.parent!==this&&(_t.annotationElementId&&(e(this,pe).addDeletedAnnotationElement(_t.annotationElementId),n.AnnotationEditor.deleteAnnotationElement(_t),_t.annotationElementId=null),this.attach(_t),(d=_t.parent)==null||d.detach(_t),_t.setParent(this),_t.div&&_t.isAttachedToDOM&&(_t.div.remove(),this.div.append(_t.div)))}add(_t){if(!(_t.parent===this&&_t.isAttachedToDOM)){if(this.changeParent(_t),e(this,pe).addEditor(_t),this.attach(_t),!_t.isAttachedToDOM){const d=_t.render();this.div.append(d),_t.isAttachedToDOM=!0}_t.fixAndSetPosition(),_t.onceAdded(),e(this,pe).addToAnnotationStorage(_t),_t._reportTelemetry(_t.telemetryInitialData)}}moveEditorInDOM(_t){var H;if(!_t.isAttachedToDOM)return;const{activeElement:d}=document;_t.div.contains(d)&&!e(this,ys)&&(_t._focusEventsAllowed=!1,z(this,ys,setTimeout(()=>{z(this,ys,null),_t.div.contains(document.activeElement)?_t._focusEventsAllowed=!0:(_t.div.addEventListener("focusin",()=>{_t._focusEventsAllowed=!0},{once:!0}),d.focus())},0))),_t._structTreeParentId=(H=e(this,Fs))==null?void 0:H.moveElementInDOM(this.div,_t.div,_t.contentDiv,!0)}addOrRebuild(_t){_t.needsToBeRebuilt()?(_t.parent||(_t.parent=this),_t.rebuild(),_t.show()):this.add(_t)}addUndoableEditor(_t){const d=()=>_t._uiManager.rebuild(_t),H=()=>{_t.remove()};this.addCommands({cmd:d,undo:H,mustExec:!1})}getNextId(){return e(this,pe).getId()}canCreateNewEmptyEditor(){var _t;return(_t=e(this,vi,tr))==null?void 0:_t.canCreateNewEmptyEditor()}pasteEditor(_t,d){e(this,pe).updateToolbar(_t),e(this,pe).updateMode(_t);const{offsetX:H,offsetY:nt}=O(this,bi,sr).call(this),ut=this.getNextId(),xt=O(this,yi,er).call(this,{parent:this,id:ut,x:H,y:nt,uiManager:e(this,pe),isCentered:!0,...d});xt&&this.add(xt)}deserialize(_t){var d;return((d=e(os,Ts).get(_t.annotationType??_t.annotationEditorType))==null?void 0:d.deserialize(_t,this,e(this,pe)))||null}createAndAddNewEditor(_t,d){let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const nt=this.getNextId(),ut=O(this,yi,er).call(this,{parent:this,id:nt,x:_t.offsetX,y:_t.offsetY,uiManager:e(this,pe),isCentered:d,...H});return ut&&this.add(ut),ut}addNewEditor(){this.createAndAddNewEditor(O(this,bi,sr).call(this),!0)}setSelected(_t){e(this,pe).setSelected(_t)}toggleSelected(_t){e(this,pe).toggleSelected(_t)}isSelected(_t){return e(this,pe).isSelected(_t)}unselect(_t){e(this,pe).unselect(_t)}pointerup(_t){const{isMac:d}=s.FeatureTest.platform;if(!(_t.button!==0||_t.ctrlKey&&d)&&_t.target===this.div&&e(this,Ss)){if(z(this,Ss,!1),!e(this,Ys)){z(this,Ys,!0);return}if(e(this,pe).getMode()===s.AnnotationEditorType.STAMP){e(this,pe).unselectAll();return}this.createAndAddNewEditor(_t,!1)}}pointerdown(_t){if(e(this,pe).getMode()===s.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),e(this,Ss)){z(this,Ss,!1);return}const{isMac:d}=s.FeatureTest.platform;if(_t.button!==0||_t.ctrlKey&&d||_t.target!==this.div)return;z(this,Ss,!0);const H=e(this,pe).getActive();z(this,Ys,!H||H.isEmpty())}findNewParent(_t,d,H){const nt=e(this,pe).findParent(d,H);return nt===null||nt===this?!1:(nt.changeParent(_t),!0)}destroy(){var _t,d;((_t=e(this,pe).getActive())==null?void 0:_t.parent)===this&&(e(this,pe).commitOrRemove(),e(this,pe).setActiveEditor(null)),e(this,ys)&&(clearTimeout(e(this,ys)),z(this,ys,null));for(const H of e(this,is).values())(d=e(this,Fs))==null||d.removePointerInTextLayer(H.contentDiv),H.setParent(null),H.isAttachedToDOM=!1,H.div.remove();this.div=null,e(this,is).clear(),e(this,pe).removeLayer(this)}render(_t){let{viewport:d}=_t;this.viewport=d,(0,w.setLayerDimensions)(this.div,d);for(const H of e(this,pe).getEditors(this.pageIndex))this.add(H),H.rebuild();this.updateMode()}update(_t){let{viewport:d}=_t;e(this,pe).commitOrRemove(),O(this,Zs,pn).call(this);const H=this.viewport.rotation,nt=d.rotation;if(this.viewport=d,(0,w.setLayerDimensions)(this.div,{rotation:nt}),H!==nt)for(const ut of e(this,is).values())ut.rotate(nt);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:_t,pageHeight:d}=this.viewport.rawDims;return[_t,d]}get scale(){return e(this,pe).viewParameters.realScale}};Fs=new WeakMap,Ys=new WeakMap,ds=new WeakMap,Ns=new WeakMap,ms=new WeakMap,vs=new WeakMap,ys=new WeakMap,is=new WeakMap,Ss=new WeakMap,Js=new WeakMap,Qs=new WeakMap,ts=new WeakMap,pe=new WeakMap,Ts=new WeakMap,Vi=new WeakSet,Na=function(_t){if(e(this,pe).unselectAll(),_t.target===e(this,ts).div){const{isMac:d}=s.FeatureTest.platform;if(_t.button!==0||_t.ctrlKey&&d)return;e(this,pe).showAllEditors("highlight",!0,!0),e(this,ts).div.classList.add("free"),f.startHighlighting(this,e(this,pe).direction==="ltr",_t),e(this,ts).div.addEventListener("pointerup",()=>{e(this,ts).div.classList.remove("free")},{once:!0}),_t.preventDefault()}},vi=new WeakSet,tr=function(){return e(os,Ts).get(e(this,pe).getMode())},yi=new WeakSet,er=function(_t){const d=e(this,vi,tr);return d?new d.prototype.constructor(_t):null},bi=new WeakSet,sr=function(){const{x:_t,y:d,width:H,height:nt}=this.div.getBoundingClientRect(),ut=Math.max(0,_t),xt=Math.max(0,d),Ot=Math.min(window.innerWidth,_t+H),Wt=Math.min(window.innerHeight,d+nt),Pt=(ut+Ot)/2-_t,Jt=(xt+Wt)/2-d,[Zt,ve]=this.viewport.rotation%180===0?[Pt,Jt]:[Jt,Pt];return{offsetX:Zt,offsetY:ve}},Zs=new WeakSet,pn=function(){z(this,Js,!0);for(const _t of e(this,is).values())_t.isEmpty()&&_t.remove();z(this,Js,!1)},ye(os,"_initialized",!1),x(os,Ts,new Map([l,g,v,f].map(_t=>[_t._editorType,_t])));let A=os},2259:(i,o,t)=>{var m,l,h,p,w,f,g,v,A,R,V,$,L,ir,C,nr,q,Oa,Q,js,mt,Ha,pt,Cs;t.d(o,{ColorPicker:()=>a});var s=t(4292),n=t(7830),r=t(5419);const ft=class ft{constructor(Z){x(this,L);x(this,C);x(this,q);x(this,Q);x(this,mt);x(this,pt);x(this,m,O(this,q,Oa).bind(this));x(this,l,O(this,mt,Ha).bind(this));x(this,h,null);x(this,p,null);x(this,w,void 0);x(this,f,null);x(this,g,!1);x(this,v,!1);x(this,A,null);x(this,R,void 0);x(this,V,null);x(this,$,void 0);var Ft;let{editor:at=null,uiManager:Rt=null}=Z;at?(z(this,v,!1),z(this,$,s.AnnotationEditorParamsType.HIGHLIGHT_COLOR),z(this,A,at)):(z(this,v,!0),z(this,$,s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),z(this,V,(at==null?void 0:at._uiManager)||Rt),z(this,R,e(this,V)._eventBus),z(this,w,(at==null?void 0:at.color)||((Ft=e(this,V))==null?void 0:Ft.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return(0,s.shadow)(this,"_keyboardManager",new n.KeyboardManager([[["Escape","mac+Escape"],ft.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ft.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ft.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ft.prototype._moveToPrevious],[["Home","mac+Home"],ft.prototype._moveToBeginning],[["End","mac+End"],ft.prototype._moveToEnd]]))}renderButton(){const Z=z(this,h,document.createElement("button"));Z.className="colorPicker",Z.tabIndex="0",Z.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),Z.setAttribute("aria-haspopup",!0),Z.addEventListener("click",O(this,Q,js).bind(this)),Z.addEventListener("keydown",e(this,m));const at=z(this,p,document.createElement("span"));return at.className="swatch",at.setAttribute("aria-hidden",!0),at.style.backgroundColor=e(this,w),Z.append(at),Z}renderMainDropdown(){const Z=z(this,f,O(this,L,ir).call(this));return Z.setAttribute("aria-orientation","horizontal"),Z.setAttribute("aria-labelledby","highlightColorPickerLabel"),Z}_colorSelectFromKeyboard(Z){if(Z.target===e(this,h)){O(this,Q,js).call(this,Z);return}const at=Z.target.getAttribute("data-color");at&&O(this,C,nr).call(this,at,Z)}_moveToNext(Z){var at,Rt;if(!e(this,pt,Cs)){O(this,Q,js).call(this,Z);return}if(Z.target===e(this,h)){(at=e(this,f).firstChild)==null||at.focus();return}(Rt=Z.target.nextSibling)==null||Rt.focus()}_moveToPrevious(Z){var at,Rt;if(Z.target===((at=e(this,f))==null?void 0:at.firstChild)||Z.target===e(this,h)){e(this,pt,Cs)&&this._hideDropdownFromKeyboard();return}e(this,pt,Cs)||O(this,Q,js).call(this,Z),(Rt=Z.target.previousSibling)==null||Rt.focus()}_moveToBeginning(Z){var at;if(!e(this,pt,Cs)){O(this,Q,js).call(this,Z);return}(at=e(this,f).firstChild)==null||at.focus()}_moveToEnd(Z){var at;if(!e(this,pt,Cs)){O(this,Q,js).call(this,Z);return}(at=e(this,f).lastChild)==null||at.focus()}hideDropdown(){var Z;(Z=e(this,f))==null||Z.classList.add("hidden"),window.removeEventListener("pointerdown",e(this,l))}_hideDropdownFromKeyboard(){var Z;if(!e(this,v)){if(!e(this,pt,Cs)){(Z=e(this,A))==null||Z.unselect();return}this.hideDropdown(),e(this,h).focus({preventScroll:!0,focusVisible:e(this,g)})}}updateColor(Z){if(e(this,p)&&(e(this,p).style.backgroundColor=Z),!e(this,f))return;const at=e(this,V).highlightColors.values();for(const Rt of e(this,f).children)Rt.setAttribute("aria-selected",at.next().value===Z)}destroy(){var Z,at;(Z=e(this,h))==null||Z.remove(),z(this,h,null),z(this,p,null),(at=e(this,f))==null||at.remove(),z(this,f,null)}};m=new WeakMap,l=new WeakMap,h=new WeakMap,p=new WeakMap,w=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,A=new WeakMap,R=new WeakMap,V=new WeakMap,$=new WeakMap,L=new WeakSet,ir=function(){const Z=document.createElement("div");Z.addEventListener("contextmenu",r.noContextMenu),Z.className="dropdown",Z.role="listbox",Z.setAttribute("aria-multiselectable",!1),Z.setAttribute("aria-orientation","vertical"),Z.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[at,Rt]of e(this,V).highlightColors){const Ft=document.createElement("button");Ft.tabIndex="0",Ft.role="option",Ft.setAttribute("data-color",Rt),Ft.title=at,Ft.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${at}`);const Vt=document.createElement("span");Ft.append(Vt),Vt.className="swatch",Vt.style.backgroundColor=Rt,Ft.setAttribute("aria-selected",Rt===e(this,w)),Ft.addEventListener("click",O(this,C,nr).bind(this,Rt)),Z.append(Ft)}return Z.addEventListener("keydown",e(this,m)),Z},C=new WeakSet,nr=function(Z,at){at.stopPropagation(),e(this,R).dispatch("switchannotationeditorparams",{source:this,type:e(this,$),value:Z})},q=new WeakSet,Oa=function(Z){ft._keyboardManager.exec(this,Z)},Q=new WeakSet,js=function(Z){if(e(this,pt,Cs)){this.hideDropdown();return}if(z(this,g,Z.detail===0),window.addEventListener("pointerdown",e(this,l)),e(this,f)){e(this,f).classList.remove("hidden");return}const at=z(this,f,O(this,L,ir).call(this));e(this,h).append(at)},mt=new WeakSet,Ha=function(Z){var at;(at=e(this,f))!=null&&at.contains(Z.target)||this.hideDropdown()},pt=new WeakSet,Cs=function(){return e(this,f)&&!e(this,f).classList.contains("hidden")};let a=ft},310:(i,o,t)=>{var p,w,f,g,v,A,R,V,rr,D,C,G,q,J,Q,Tt,mt,Dt,pt,ot,ft,gt,Z,at,Rt,Ft,Vt,Qt,ae,Ae,me,ar,It,or,qt,hr,jt,ja,Xt,Ba,c,lr,E,cr,y,dr,I,$a,S,za,_,Ua,tt,qa,rt,ur,At,Mi;t.d(o,{AnnotationEditor:()=>l});var s=t(7830),n=t(4292),r=t(5419);const L=class L{constructor(U){x(this,V);x(this,p,"");x(this,w,!1);x(this,f,null);x(this,g,null);x(this,v,null);x(this,A,!1);x(this,R,null);z(this,R,U)}static initialize(U){L._l10nPromise||(L._l10nPromise=U)}async render(){const U=z(this,f,document.createElement("button"));U.className="altText";const et=await L._l10nPromise.get("pdfjs-editor-alt-text-button-label");U.textContent=et,U.setAttribute("aria-label",et),U.tabIndex="0",U.addEventListener("contextmenu",r.noContextMenu),U.addEventListener("pointerdown",vt=>vt.stopPropagation());const ht=vt=>{vt.preventDefault(),e(this,R)._uiManager.editAltText(e(this,R))};return U.addEventListener("click",ht,{capture:!0}),U.addEventListener("keydown",vt=>{vt.target===U&&vt.key==="Enter"&&(z(this,A,!0),ht(vt))}),await O(this,V,rr).call(this),U}finish(){e(this,f)&&(e(this,f).focus({focusVisible:e(this,A)}),z(this,A,!1))}isEmpty(){return!e(this,p)&&!e(this,w)}get data(){return{altText:e(this,p),decorative:e(this,w)}}set data(U){let{altText:et,decorative:ht}=U;e(this,p)===et&&e(this,w)===ht||(z(this,p,et),z(this,w,ht),O(this,V,rr).call(this))}toggle(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;e(this,f)&&(!U&&e(this,v)&&(clearTimeout(e(this,v)),z(this,v,null)),e(this,f).disabled=!U)}destroy(){var U;(U=e(this,f))==null||U.remove(),z(this,f,null),z(this,g,null)}};p=new WeakMap,w=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,A=new WeakMap,R=new WeakMap,V=new WeakSet,rr=async function(){var ht,vt;const U=e(this,f);if(!U)return;if(!e(this,p)&&!e(this,w)){U.classList.remove("done"),(ht=e(this,g))==null||ht.remove();return}U.classList.add("done"),L._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(Lt=>{U.setAttribute("aria-label",Lt)});let et=e(this,g);if(!et){z(this,g,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip");const Lt=et.id=`alt-text-tooltip-${e(this,R).id}`;U.setAttribute("aria-describedby",Lt);const Ut=100;U.addEventListener("mouseenter",()=>{z(this,v,setTimeout(()=>{z(this,v,null),e(this,g).classList.add("show"),e(this,R)._reportTelemetry({action:"alt_text_tooltip"})},Ut))}),U.addEventListener("mouseleave",()=>{var zt;e(this,v)&&(clearTimeout(e(this,v)),z(this,v,null)),(zt=e(this,g))==null||zt.classList.remove("show")})}et.innerText=e(this,w)?await L._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):e(this,p),et.parentNode||U.append(et),(vt=e(this,R).getImageForAltText())==null||vt.setAttribute("aria-describedby",et.id)},ye(L,"_l10nPromise",null);let a=L;var m=t(4362);const yt=class yt{constructor(U){x(this,me);x(this,qt);x(this,jt);x(this,Xt);x(this,c);x(this,E);x(this,y);x(this,I);x(this,S);x(this,_);x(this,tt);x(this,rt);x(this,At);x(this,D,null);x(this,C,null);x(this,G,!1);x(this,q,!1);x(this,J,null);x(this,Q,null);x(this,Tt,this.focusin.bind(this));x(this,mt,this.focusout.bind(this));x(this,Dt,null);x(this,pt,"");x(this,ot,!1);x(this,ft,null);x(this,gt,!1);x(this,Z,!1);x(this,at,!1);x(this,Rt,null);x(this,Ft,0);x(this,Vt,0);x(this,Qt,null);ye(this,"_initialOptions",Object.create(null));ye(this,"_isVisible",!0);ye(this,"_uiManager",null);ye(this,"_focusEventsAllowed",!0);ye(this,"_l10nPromise",null);x(this,ae,!1);x(this,Ae,yt._zIndex++);this.constructor===yt&&(0,n.unreachable)("Cannot initialize AnnotationEditor."),this.parent=U.parent,this.id=U.id,this.width=this.height=null,this.pageIndex=U.parent.pageIndex,this.name=U.name,this.div=null,this._uiManager=U.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=U.isCentered,this._structTreeParentId=null;const{rotation:et,rawDims:{pageWidth:ht,pageHeight:vt,pageX:Lt,pageY:Ut}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ht,vt],this.pageTranslation=[Lt,Ut];const[zt,Kt]=this.parentDimensions;this.x=U.x/zt,this.y=U.y/Kt,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const U=yt.prototype._resizeWithKeyboard,et=s.AnnotationEditorUIManager.TRANSLATE_SMALL,ht=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_resizerKeyboardManager",new s.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],U,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],U,{args:[-ht,0]}],[["ArrowRight","mac+ArrowRight"],U,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],U,{args:[ht,0]}],[["ArrowUp","mac+ArrowUp"],U,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],U,{args:[0,-ht]}],[["ArrowDown","mac+ArrowDown"],U,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],U,{args:[0,ht]}],[["Escape","mac+Escape"],yt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,n.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(U){const et=new h({id:U.parent.getNextId(),parent:U.parent,uiManager:U._uiManager});et.annotationElementId=U.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(U,et,ht){if(yt._l10nPromise||(yt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(Lt=>[Lt,U.get(Lt.replaceAll(/([A-Z])/g,Ut=>`-${Ut.toLowerCase()}`))]))),ht==null?void 0:ht.strings)for(const Lt of ht.strings)yt._l10nPromise.set(Lt,U.get(Lt));if(yt._borderLineWidth!==-1)return;const vt=getComputedStyle(document.documentElement);yt._borderLineWidth=parseFloat(vt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(U,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(U){return!1}static paste(U,et){(0,n.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,ae)}set _isDraggable(U){var et;z(this,ae,U),(et=this.div)==null||et.classList.toggle("draggable",U)}get isEnterHandled(){return!0}center(){const[U,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(U*2),this.y+=this.width*U/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(U*2),this.y-=this.width*U/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(U){this._uiManager.addCommands(U)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,Ae)}setParent(U){U!==null?(this.pageIndex=U.pageIndex,this.pageDimensions=U.pageDimensions):O(this,At,Mi).call(this),this.parent=U}focusin(U){this._focusEventsAllowed&&(e(this,ot)?z(this,ot,!1):this.parent.setSelected(this))}focusout(U){var et,ht;!this._focusEventsAllowed||!this.isAttachedToDOM||(et=U.relatedTarget)!=null&&et.closest(`#${this.id}`)||(U.preventDefault(),(ht=this.parent)!=null&&ht.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(U,et,ht,vt){const[Lt,Ut]=this.parentDimensions;[ht,vt]=this.screenToPageTranslation(ht,vt),this.x=(U+ht)/Lt,this.y=(et+vt)/Ut,this.fixAndSetPosition()}translate(U,et){O(this,me,ar).call(this,this.parentDimensions,U,et)}translateInPage(U,et){e(this,ft)||z(this,ft,[this.x,this.y]),O(this,me,ar).call(this,this.pageDimensions,U,et),this.div.scrollIntoView({block:"nearest"})}drag(U,et){e(this,ft)||z(this,ft,[this.x,this.y]);const[ht,vt]=this.parentDimensions;if(this.x+=U/ht,this.y+=et/vt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:te,y:ie}=this.div.getBoundingClientRect();this.parent.findNewParent(this,te,ie)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Lt,y:Ut}=this;const[zt,Kt]=this.getBaseTranslation();Lt+=zt,Ut+=Kt,this.div.style.left=`${(100*Lt).toFixed(2)}%`,this.div.style.top=`${(100*Ut).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!e(this,ft)&&(e(this,ft)[0]!==this.x||e(this,ft)[1]!==this.y)}getBaseTranslation(){const[U,et]=this.parentDimensions,{_borderLineWidth:ht}=yt,vt=ht/U,Lt=ht/et;switch(this.rotation){case 90:return[-vt,Lt];case 180:return[vt,Lt];case 270:return[vt,-Lt];default:return[-vt,-Lt]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.rotation;const[et,ht]=this.pageDimensions;let{x:vt,y:Lt,width:Ut,height:zt}=this;if(Ut*=et,zt*=ht,vt*=et,Lt*=ht,this._mustFixPosition)switch(U){case 0:vt=Math.max(0,Math.min(et-Ut,vt)),Lt=Math.max(0,Math.min(ht-zt,Lt));break;case 90:vt=Math.max(0,Math.min(et-zt,vt)),Lt=Math.min(ht,Math.max(Ut,Lt));break;case 180:vt=Math.min(et,Math.max(Ut,vt)),Lt=Math.min(ht,Math.max(zt,Lt));break;case 270:vt=Math.min(et,Math.max(zt,vt)),Lt=Math.max(0,Math.min(ht-Ut,Lt));break}this.x=vt/=et,this.y=Lt/=ht;const[Kt,te]=this.getBaseTranslation();vt+=Kt,Lt+=te;const{style:ie}=this.div;ie.left=`${(100*vt).toFixed(2)}%`,ie.top=`${(100*Lt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(U,et){var ht;return O(ht=yt,It,or).call(ht,U,et,this.parentRotation)}pageTranslationToScreen(U,et){var ht;return O(ht=yt,It,or).call(ht,U,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:U,pageDimensions:[et,ht]}=this,vt=et*U,Lt=ht*U;return n.FeatureTest.isCSSRoundSupported?[Math.round(vt),Math.round(Lt)]:[vt,Lt]}setDims(U,et){const[ht,vt]=this.parentDimensions;this.div.style.width=`${(100*U/ht).toFixed(2)}%`,e(this,q)||(this.div.style.height=`${(100*et/vt).toFixed(2)}%`)}fixDims(){const{style:U}=this.div,{height:et,width:ht}=U,vt=ht.endsWith("%"),Lt=!e(this,q)&&et.endsWith("%");if(vt&&Lt)return;const[Ut,zt]=this.parentDimensions;vt||(U.width=`${(100*parseFloat(ht)/Ut).toFixed(2)}%`),!e(this,q)&&!Lt&&(U.height=`${(100*parseFloat(et)/zt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var U;(U=e(this,C))==null||U.finish()}async addEditToolbar(){return e(this,Dt)||e(this,Z)?e(this,Dt):(z(this,Dt,new m.EditorToolbar(this)),this.div.append(e(this,Dt).render()),e(this,C)&&e(this,Dt).addAltTextButton(await e(this,C).render()),e(this,Dt))}removeEditToolbar(){var U;e(this,Dt)&&(e(this,Dt).remove(),z(this,Dt,null),(U=e(this,C))==null||U.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){e(this,C)||(a.initialize(yt._l10nPromise),z(this,C,new a(this)),await this.addEditToolbar())}get altTextData(){var U;return(U=e(this,C))==null?void 0:U.data}set altTextData(U){e(this,C)&&(e(this,C).data=U)}hasAltText(){var U;return!((U=e(this,C))!=null&&U.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=e(this,G)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",e(this,Tt)),this.div.addEventListener("focusout",e(this,mt));const[U,et]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*et/U).toFixed(2)}%`,this.div.style.maxHeight=`${(100*U/et).toFixed(2)}%`);const[ht,vt]=this.getInitialTranslation();return this.translate(ht,vt),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(U){const{isMac:et}=n.FeatureTest.platform;if(U.button!==0||U.ctrlKey&&et){U.preventDefault();return}if(z(this,ot,!0),this._isDraggable){O(this,I,$a).call(this,U);return}O(this,y,dr).call(this,U)}moveInDOM(){e(this,Rt)&&clearTimeout(e(this,Rt)),z(this,Rt,setTimeout(()=>{var U;z(this,Rt,null),(U=this.parent)==null||U.moveEditorInDOM(this)},0))}_setParentAndPosition(U,et,ht){U.changeParent(this),this.x=et,this.y=ht,this.fixAndSetPosition()}getRect(U,et){let ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.rotation;const vt=this.parentScale,[Lt,Ut]=this.pageDimensions,[zt,Kt]=this.pageTranslation,te=U/vt,ie=et/vt,ce=this.x*Lt,ge=this.y*Ut,be=this.width*Lt,Te=this.height*Ut;switch(ht){case 0:return[ce+te+zt,Ut-ge-ie-Te+Kt,ce+te+be+zt,Ut-ge-ie+Kt];case 90:return[ce+ie+zt,Ut-ge+te+Kt,ce+ie+Te+zt,Ut-ge+te+be+Kt];case 180:return[ce-te-be+zt,Ut-ge+ie+Kt,ce-te+zt,Ut-ge+ie+Te+Kt];case 270:return[ce-ie-Te+zt,Ut-ge-te-be+Kt,ce-ie+zt,Ut-ge-te+Kt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(U,et){const[ht,vt,Lt,Ut]=U,zt=Lt-ht,Kt=Ut-vt;switch(this.rotation){case 0:return[ht,et-Ut,zt,Kt];case 90:return[ht,et-vt,Kt,zt];case 180:return[Lt,et-vt,zt,Kt];case 270:return[Lt,et-Ut,Kt,zt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){z(this,Z,!0)}disableEditMode(){z(this,Z,!1)}isInEditMode(){return e(this,Z)}shouldGetKeyboardEvents(){return e(this,at)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var U,et;(U=this.div)==null||U.addEventListener("focusin",e(this,Tt)),(et=this.div)==null||et.addEventListener("focusout",e(this,mt))}rotate(U){}serialize(){(0,n.unreachable)("An editor must be serializable")}static deserialize(U,et,ht){const vt=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:ht});vt.rotation=U.rotation;const[Lt,Ut]=vt.pageDimensions,[zt,Kt,te,ie]=vt.getRectInCurrentCoords(U.rect,Ut);return vt.x=zt/Lt,vt.y=Kt/Ut,vt.width=te/Lt,vt.height=ie/Ut,vt}remove(){if(this.div.removeEventListener("focusin",e(this,Tt)),this.div.removeEventListener("focusout",e(this,mt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),e(this,Rt)&&(clearTimeout(e(this,Rt)),z(this,Rt,null)),O(this,At,Mi).call(this),this.removeEditToolbar(),e(this,Qt)){for(const U of e(this,Qt).values())clearTimeout(U);z(this,Qt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(O(this,jt,ja).call(this),e(this,J).classList.remove("hidden"),(0,s.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(U){if(!this.isResizable||U.target!==this.div||U.key!=="Enter")return;this._uiManager.setSelected(this),z(this,Q,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=e(this,J).children;if(!e(this,D)){z(this,D,Array.from(et));const Ut=O(this,S,za).bind(this),zt=O(this,_,Ua).bind(this);for(const Kt of e(this,D)){const te=Kt.getAttribute("data-resizer-name");Kt.setAttribute("role","spinbutton"),Kt.addEventListener("keydown",Ut),Kt.addEventListener("blur",zt),Kt.addEventListener("focus",O(this,tt,qa).bind(this,te)),yt._l10nPromise.get(`pdfjs-editor-resizer-label-${te}`).then(ie=>Kt.setAttribute("aria-label",ie))}}const ht=e(this,D)[0];let vt=0;for(const Ut of et){if(Ut===ht)break;vt++}const Lt=(360-this.rotation+this.parentRotation)%360/90*(e(this,D).length/4);if(Lt!==vt){if(Lt<vt)for(let zt=0;zt<vt-Lt;zt++)e(this,J).append(e(this,J).firstChild);else if(Lt>vt)for(let zt=0;zt<Lt-vt;zt++)e(this,J).firstChild.before(e(this,J).lastChild);let Ut=0;for(const zt of et){const Kt=e(this,D)[Ut++].getAttribute("data-resizer-name");yt._l10nPromise.get(`pdfjs-editor-resizer-label-${Kt}`).then(te=>zt.setAttribute("aria-label",te))}}O(this,rt,ur).call(this,0),z(this,at,!0),e(this,J).firstChild.focus({focusVisible:!0}),U.preventDefault(),U.stopImmediatePropagation()}_resizeWithKeyboard(U,et){e(this,at)&&O(this,E,cr).call(this,e(this,pt),{movementX:U,movementY:et})}_stopResizingWithKeyboard(){O(this,At,Mi).call(this),this.div.focus()}select(){var U,et;if(this.makeResizable(),(U=this.div)==null||U.classList.add("selectedEditor"),!e(this,Dt)){this.addEditToolbar().then(()=>{var ht,vt;(ht=this.div)!=null&&ht.classList.contains("selectedEditor")&&((vt=e(this,Dt))==null||vt.show())});return}(et=e(this,Dt))==null||et.show()}unselect(){var U,et,ht,vt;(U=e(this,J))==null||U.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(ht=this.div)!=null&&ht.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(vt=e(this,Dt))==null||vt.hide()}updateParams(U,et){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return e(this,gt)}set isEditing(U){z(this,gt,U),this.parent&&(U?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(U,et){z(this,q,!0);const ht=U/et,{style:vt}=this.div;vt.aspectRatio=ht,vt.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(U){if(arguments.length>1&&arguments[1]!==void 0&&arguments[1]){e(this,Qt)||z(this,Qt,new Map);const{action:et}=U;let ht=e(this,Qt).get(et);ht&&clearTimeout(ht),ht=setTimeout(()=>{this._reportTelemetry(U),e(this,Qt).delete(et),e(this,Qt).size===0&&z(this,Qt,null)},yt._telemetryTimeout),e(this,Qt).set(et,ht);return}U.type||(U.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:U}})}show(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!U),this._isVisible=U}enable(){this.div&&(this.div.tabIndex=0),z(this,G,!1)}disable(){this.div&&(this.div.tabIndex=-1),z(this,G,!0)}};D=new WeakMap,C=new WeakMap,G=new WeakMap,q=new WeakMap,J=new WeakMap,Q=new WeakMap,Tt=new WeakMap,mt=new WeakMap,Dt=new WeakMap,pt=new WeakMap,ot=new WeakMap,ft=new WeakMap,gt=new WeakMap,Z=new WeakMap,at=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,ae=new WeakMap,Ae=new WeakMap,me=new WeakSet,ar=function(U,et,ht){let[vt,Lt]=U;[et,ht]=this.screenToPageTranslation(et,ht),this.x+=et/vt,this.y+=ht/Lt,this.fixAndSetPosition()},It=new WeakSet,or=function(U,et,ht){switch(ht){case 90:return[et,-U];case 180:return[-U,-et];case 270:return[-et,U];default:return[U,et]}},qt=new WeakSet,hr=function(U){switch(U){case 90:{const[et,ht]=this.pageDimensions;return[0,-et/ht,ht/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,ht]=this.pageDimensions;return[0,et/ht,-ht/et,0]}default:return[1,0,0,1]}},jt=new WeakSet,ja=function(){if(e(this,J))return;z(this,J,document.createElement("div")),e(this,J).classList.add("resizers");const U=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const et of U){const ht=document.createElement("div");e(this,J).append(ht),ht.classList.add("resizer",et),ht.setAttribute("data-resizer-name",et),ht.addEventListener("pointerdown",O(this,Xt,Ba).bind(this,et)),ht.addEventListener("contextmenu",r.noContextMenu),ht.tabIndex=-1}this.div.prepend(e(this,J))},Xt=new WeakSet,Ba=function(U,et){var Te;et.preventDefault();const{isMac:ht}=n.FeatureTest.platform;if(et.button!==0||et.ctrlKey&&ht)return;(Te=e(this,C))==null||Te.toggle(!1);const vt=O(this,E,cr).bind(this,U),Lt=this._isDraggable;this._isDraggable=!1;const Ut={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",vt,Ut);const zt=this.x,Kt=this.y,te=this.width,ie=this.height,ce=this.parent.div.style.cursor,ge=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const be=()=>{var Oe;this.parent.togglePointerEvents(!0),(Oe=e(this,C))==null||Oe.toggle(!0),this._isDraggable=Lt,window.removeEventListener("pointerup",be),window.removeEventListener("blur",be),window.removeEventListener("pointermove",vt,Ut),this.parent.div.style.cursor=ce,this.div.style.cursor=ge,O(this,c,lr).call(this,zt,Kt,te,ie)};window.addEventListener("pointerup",be),window.addEventListener("blur",be)},c=new WeakSet,lr=function(U,et,ht,vt){const Lt=this.x,Ut=this.y,zt=this.width,Kt=this.height;Lt===U&&Ut===et&&zt===ht&&Kt===vt||this.addCommands({cmd:()=>{this.width=zt,this.height=Kt,this.x=Lt,this.y=Ut;const[te,ie]=this.parentDimensions;this.setDims(te*zt,ie*Kt),this.fixAndSetPosition()},undo:()=>{this.width=ht,this.height=vt,this.x=U,this.y=et;const[te,ie]=this.parentDimensions;this.setDims(te*ht,ie*vt),this.fixAndSetPosition()},mustExec:!0})},E=new WeakSet,cr=function(U,et){const[ht,vt]=this.parentDimensions,Lt=this.x,Ut=this.y,zt=this.width,Kt=this.height,te=yt.MIN_SIZE/ht,ie=yt.MIN_SIZE/vt,ce=Ct=>Math.round(Ct*1e4)/1e4,ge=O(this,qt,hr).call(this,this.rotation),be=(Ct,Nt)=>[ge[0]*Ct+ge[2]*Nt,ge[1]*Ct+ge[3]*Nt],Te=O(this,qt,hr).call(this,360-this.rotation),Oe=(Ct,Nt)=>[Te[0]*Ct+Te[2]*Nt,Te[1]*Ct+Te[3]*Nt];let Fe,Be,Le=!1,Ie=!1;switch(U){case"topLeft":Le=!0,Fe=(Ct,Nt)=>[0,0],Be=(Ct,Nt)=>[Ct,Nt];break;case"topMiddle":Fe=(Ct,Nt)=>[Ct/2,0],Be=(Ct,Nt)=>[Ct/2,Nt];break;case"topRight":Le=!0,Fe=(Ct,Nt)=>[Ct,0],Be=(Ct,Nt)=>[0,Nt];break;case"middleRight":Ie=!0,Fe=(Ct,Nt)=>[Ct,Nt/2],Be=(Ct,Nt)=>[0,Nt/2];break;case"bottomRight":Le=!0,Fe=(Ct,Nt)=>[Ct,Nt],Be=(Ct,Nt)=>[0,0];break;case"bottomMiddle":Fe=(Ct,Nt)=>[Ct/2,Nt],Be=(Ct,Nt)=>[Ct/2,0];break;case"bottomLeft":Le=!0,Fe=(Ct,Nt)=>[0,Nt],Be=(Ct,Nt)=>[Ct,0];break;case"middleLeft":Ie=!0,Fe=(Ct,Nt)=>[0,Nt/2],Be=(Ct,Nt)=>[Ct,Nt/2];break}const ue=Fe(zt,Kt),Y=Be(zt,Kt);let P=be(...Y);const st=ce(Lt+P[0]),B=ce(Ut+P[1]);let T=1,N=1,[W,lt]=this.screenToPageTranslation(et.movementX,et.movementY);if([W,lt]=Oe(W/ht,lt/vt),Le){const Ct=Math.hypot(zt,Kt);T=N=Math.max(Math.min(Math.hypot(Y[0]-ue[0]-W,Y[1]-ue[1]-lt)/Ct,1/zt,1/Kt),te/zt,ie/Kt)}else Ie?T=Math.max(te,Math.min(1,Math.abs(Y[0]-ue[0]-W)))/zt:N=Math.max(ie,Math.min(1,Math.abs(Y[1]-ue[1]-lt)))/Kt;const bt=ce(zt*T),wt=ce(Kt*N);P=be(...Be(bt,wt));const Ht=st-P[0],Mt=B-P[1];this.width=bt,this.height=wt,this.x=Ht,this.y=Mt,this.setDims(ht*bt,vt*wt),this.fixAndSetPosition()},y=new WeakSet,dr=function(U){const{isMac:et}=n.FeatureTest.platform;U.ctrlKey&&!et||U.shiftKey||U.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},I=new WeakSet,$a=function(U){const et=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ht,vt;et&&(this.div.classList.add("moving"),ht={passive:!0,capture:!0},z(this,Ft,U.clientX),z(this,Vt,U.clientY),vt=Ut=>{const{clientX:zt,clientY:Kt}=Ut,[te,ie]=this.screenToPageTranslation(zt-e(this,Ft),Kt-e(this,Vt));z(this,Ft,zt),z(this,Vt,Kt),this._uiManager.dragSelectedEditors(te,ie)},window.addEventListener("pointermove",vt,ht));const Lt=()=>{window.removeEventListener("pointerup",Lt),window.removeEventListener("blur",Lt),et&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",vt,ht)),z(this,ot,!1),this._uiManager.endDragSession()||O(this,y,dr).call(this,U)};window.addEventListener("pointerup",Lt),window.addEventListener("blur",Lt)},S=new WeakSet,za=function(U){yt._resizerKeyboardManager.exec(this,U)},_=new WeakSet,Ua=function(U){var et;e(this,at)&&((et=U.relatedTarget)==null?void 0:et.parentNode)!==e(this,J)&&O(this,At,Mi).call(this)},tt=new WeakSet,qa=function(U){z(this,pt,e(this,at)?U:"")},rt=new WeakSet,ur=function(U){if(e(this,D))for(const et of e(this,D))et.tabIndex=U},At=new WeakSet,Mi=function(){if(z(this,at,!1),O(this,rt,ur).call(this,-1),e(this,Q)){const{savedX:U,savedY:et,savedWidth:ht,savedHeight:vt}=e(this,Q);O(this,c,lr).call(this,U,et,ht,vt),z(this,Q,null)}},x(yt,It),ye(yt,"_borderLineWidth",-1),ye(yt,"_colorManager",new s.ColorManager),ye(yt,"_zIndex",1),ye(yt,"_telemetryTimeout",1e3);let l=yt;class h extends l{constructor(U){super(U),this.annotationElementId=U.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},4061:(i,o,t)=>{var h,p,w,f,Ga,v,fn,R,Va,$,Wa,D,pr,G,q,J,Q,Tt,mt,Dt,pt,ot,ft,gt,Z,at,Rt,Ft,Vt,Qt,ae,Ae,fr,It,St,qt,le,jt,he,Xt,it,Ii,u,Pi,k,Xa;t.d(o,{FreeOutliner:()=>m,Outliner:()=>n}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292);class n{constructor(I){x(this,f);x(this,v);x(this,R);x(this,$);x(this,D);x(this,h,void 0);x(this,p,[]);x(this,w,[]);let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,_=1/0,j=-1/0,tt=1/0,K=-1/0;const rt=10**-4;for(const{x:et,y:ht,width:vt,height:Lt}of I){const Ut=Math.floor((et-F)/rt)*rt,zt=Math.ceil((et+vt+F)/rt)*rt,Kt=Math.floor((ht-F)/rt)*rt,te=Math.ceil((ht+Lt+F)/rt)*rt,ie=[Ut,Kt,te,!0],ce=[zt,Kt,te,!1];e(this,p).push(ie,ce),_=Math.min(_,Ut),j=Math.max(j,zt),tt=Math.min(tt,Kt),K=Math.max(K,te)}const ct=j-_+2*S,At=K-tt+2*S,Et=_-S,yt=tt-S,kt=e(this,p).at(b?-1:-2),U=[kt[0],kt[2]];for(const et of e(this,p)){const[ht,vt,Lt]=et;et[0]=(ht-Et)/ct,et[1]=(vt-yt)/At,et[2]=(Lt-yt)/At}z(this,h,{x:Et,y:yt,width:ct,height:At,lastPoint:U})}getOutlines(){e(this,p).sort((F,S)=>F[0]-S[0]||F[1]-S[1]||F[2]-S[2]);const I=[];for(const F of e(this,p))F[3]?(I.push(...O(this,D,pr).call(this,F)),O(this,R,Va).call(this,F)):(O(this,$,Wa).call(this,F),I.push(...O(this,D,pr).call(this,F)));return O(this,f,Ga).call(this,I)}}h=new WeakMap,p=new WeakMap,w=new WeakMap,f=new WeakSet,Ga=function(I){const F=[],S=new Set;for(const j of I){const[tt,K,rt]=j;F.push([tt,K,j],[tt,rt,j])}F.sort((j,tt)=>j[1]-tt[1]||j[0]-tt[0]);for(let j=0,tt=F.length;j<tt;j+=2){const K=F[j][2],rt=F[j+1][2];K.push(rt),rt.push(K),S.add(K),S.add(rt)}const b=[];let _;for(;S.size>0;){const j=S.values().next().value;let[tt,K,rt,ct,At]=j;S.delete(j);let Et=tt,yt=K;for(_=[tt,rt],b.push(_);;){let kt;if(S.has(ct))kt=ct;else if(S.has(At))kt=At;else break;S.delete(kt),[tt,K,rt,ct,At]=kt,Et!==tt&&(_.push(Et,yt,tt,yt===K?K:rt),Et=tt),yt=yt===K?rt:K}_.push(Et,yt)}return new a(b,e(this,h))},v=new WeakSet,fn=function(I){const F=e(this,w);let S=0,b=F.length-1;for(;S<=b;){const _=S+b>>1,j=F[_][0];if(j===I)return _;j<I?S=_+1:b=_-1}return b+1},R=new WeakSet,Va=function(I){let[,F,S]=I;const b=O(this,v,fn).call(this,F);e(this,w).splice(b,0,[F,S])},$=new WeakSet,Wa=function(I){let[,F,S]=I;const b=O(this,v,fn).call(this,F);for(let _=b;_<e(this,w).length;_++){const[j,tt]=e(this,w)[_];if(j!==F)break;if(j===F&&tt===S){e(this,w).splice(_,1);return}}for(let _=b-1;_>=0;_--){const[j,tt]=e(this,w)[_];if(j!==F)break;if(j===F&&tt===S){e(this,w).splice(_,1);return}}},D=new WeakSet,pr=function(I){const[F,S,b]=I,_=[[F,S,b]],j=O(this,v,fn).call(this,b);for(let tt=0;tt<j;tt++){const[K,rt]=e(this,w)[tt];for(let ct=0,At=_.length;ct<At;ct++){const[,Et,yt]=_[ct];if(!(rt<=Et||yt<=K)){if(Et>=K){if(yt>rt)_[ct][1]=rt;else{if(At===1)return[];_.splice(ct,1),ct--,At--}continue}_[ct][2]=K,yt>rt&&_.push([F,rt,yt])}}}return _};class r{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(I,F){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof l}}class a extends r{constructor(F,S){super();x(this,G,void 0);x(this,q,void 0);z(this,q,F),z(this,G,S)}toSVGPath(){const F=[];for(const S of e(this,q)){let[b,_]=S;F.push(`M${b} ${_}`);for(let j=2;j<S.length;j+=2){const tt=S[j],K=S[j+1];tt===b?(F.push(`V${K}`),_=K):K===_&&(F.push(`H${tt}`),b=tt)}F.push("Z")}return F.join(" ")}serialize(F,S){let[b,_,j,tt]=F;const K=[],rt=j-b,ct=tt-_;for(const At of e(this,q)){const Et=new Array(At.length);for(let yt=0;yt<At.length;yt+=2)Et[yt]=b+At[yt]*rt,Et[yt+1]=tt-At[yt+1]*ct;K.push(Et)}return K}get box(){return e(this,G)}}G=new WeakMap,q=new WeakMap;const Bt=class Bt{constructor(I,F,S,b,_){x(this,Ae);x(this,J,void 0);x(this,Q,[]);x(this,Tt,void 0);x(this,mt,void 0);x(this,Dt,[]);x(this,pt,new Float64Array(18));x(this,ot,void 0);x(this,ft,void 0);x(this,gt,void 0);x(this,Z,void 0);x(this,at,void 0);x(this,Rt,void 0);x(this,Ft,[]);let{x:j,y:tt}=I,K=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;z(this,J,F),z(this,Rt,b*S),z(this,mt,_),e(this,pt).set([NaN,NaN,NaN,NaN,j,tt],6),z(this,Tt,K),z(this,Z,e(Bt,Vt)*S),z(this,gt,e(Bt,ae)*S),z(this,at,S),e(this,Ft).push(j,tt)}get free(){return!0}isEmpty(){return isNaN(e(this,pt)[8])}add(I){var ce;let{x:F,y:S}=I;z(this,ot,F),z(this,ft,S);const[b,_,j,tt]=e(this,J);let[K,rt,ct,At]=e(this,pt).subarray(8,12);const Et=F-ct,yt=S-At,kt=Math.hypot(Et,yt);if(kt<e(this,gt))return!1;const U=kt-e(this,Z),et=U/kt,ht=et*Et,vt=et*yt;let Lt=K,Ut=rt;K=ct,rt=At,ct+=ht,At+=vt,(ce=e(this,Ft))==null||ce.push(F,S);const zt=-vt/U,Kt=ht/U,te=zt*e(this,Rt),ie=Kt*e(this,Rt);return e(this,pt).set(e(this,pt).subarray(2,8),0),e(this,pt).set([ct+te,At+ie],4),e(this,pt).set(e(this,pt).subarray(14,18),12),e(this,pt).set([ct-te,At-ie],16),isNaN(e(this,pt)[6])?(e(this,Dt).length===0&&(e(this,pt).set([K+te,rt+ie],2),e(this,Dt).push(NaN,NaN,NaN,NaN,(K+te-b)/j,(rt+ie-_)/tt),e(this,pt).set([K-te,rt-ie],14),e(this,Q).push(NaN,NaN,NaN,NaN,(K-te-b)/j,(rt-ie-_)/tt)),e(this,pt).set([Lt,Ut,K,rt,ct,At],6),!this.isEmpty()):(e(this,pt).set([Lt,Ut,K,rt,ct,At],6),Math.abs(Math.atan2(Ut-rt,Lt-K)-Math.atan2(vt,ht))<Math.PI/2?([K,rt,ct,At]=e(this,pt).subarray(2,6),e(this,Dt).push(NaN,NaN,NaN,NaN,((K+ct)/2-b)/j,((rt+At)/2-_)/tt),[K,rt,Lt,Ut]=e(this,pt).subarray(14,18),e(this,Q).push(NaN,NaN,NaN,NaN,((Lt+K)/2-b)/j,((Ut+rt)/2-_)/tt),!0):([Lt,Ut,K,rt,ct,At]=e(this,pt).subarray(0,6),e(this,Dt).push(((Lt+5*K)/6-b)/j,((Ut+5*rt)/6-_)/tt,((5*K+ct)/6-b)/j,((5*rt+At)/6-_)/tt,((K+ct)/2-b)/j,((rt+At)/2-_)/tt),[ct,At,K,rt,Lt,Ut]=e(this,pt).subarray(12,18),e(this,Q).push(((Lt+5*K)/6-b)/j,((Ut+5*rt)/6-_)/tt,((5*K+ct)/6-b)/j,((5*rt+At)/6-_)/tt,((K+ct)/2-b)/j,((rt+At)/2-_)/tt),!0))}toSVGPath(){if(this.isEmpty())return"";const I=e(this,Dt),F=e(this,Q),S=e(this,pt).subarray(4,6),b=e(this,pt).subarray(16,18),[_,j,tt,K]=e(this,J),[rt,ct,At,Et]=O(this,Ae,fr).call(this);if(isNaN(e(this,pt)[6])&&!this.isEmpty())return`M${(e(this,pt)[2]-_)/tt} ${(e(this,pt)[3]-j)/K} L${(e(this,pt)[4]-_)/tt} ${(e(this,pt)[5]-j)/K} L${rt} ${ct} L${At} ${Et} L${(e(this,pt)[16]-_)/tt} ${(e(this,pt)[17]-j)/K} L${(e(this,pt)[14]-_)/tt} ${(e(this,pt)[15]-j)/K} Z`;const yt=[];yt.push(`M${I[4]} ${I[5]}`);for(let kt=6;kt<I.length;kt+=6)isNaN(I[kt])?yt.push(`L${I[kt+4]} ${I[kt+5]}`):yt.push(`C${I[kt]} ${I[kt+1]} ${I[kt+2]} ${I[kt+3]} ${I[kt+4]} ${I[kt+5]}`);yt.push(`L${(S[0]-_)/tt} ${(S[1]-j)/K} L${rt} ${ct} L${At} ${Et} L${(b[0]-_)/tt} ${(b[1]-j)/K}`);for(let kt=F.length-6;kt>=6;kt-=6)isNaN(F[kt])?yt.push(`L${F[kt+4]} ${F[kt+5]}`):yt.push(`C${F[kt]} ${F[kt+1]} ${F[kt+2]} ${F[kt+3]} ${F[kt+4]} ${F[kt+5]}`);return yt.push(`L${F[4]} ${F[5]} Z`),yt.join(" ")}getOutlines(){var ht;const I=e(this,Dt),F=e(this,Q),S=e(this,pt),b=S.subarray(4,6),_=S.subarray(16,18),[j,tt,K,rt]=e(this,J),ct=new Float64Array((((ht=e(this,Ft))==null?void 0:ht.length)??0)+2);for(let vt=0,Lt=ct.length-2;vt<Lt;vt+=2)ct[vt]=(e(this,Ft)[vt]-j)/K,ct[vt+1]=(e(this,Ft)[vt+1]-tt)/rt;ct[ct.length-2]=(e(this,ot)-j)/K,ct[ct.length-1]=(e(this,ft)-tt)/rt;const[At,Et,yt,kt]=O(this,Ae,fr).call(this);if(isNaN(S[6])&&!this.isEmpty()){const vt=new Float64Array(36);return vt.set([NaN,NaN,NaN,NaN,(S[2]-j)/K,(S[3]-tt)/rt,NaN,NaN,NaN,NaN,(S[4]-j)/K,(S[5]-tt)/rt,NaN,NaN,NaN,NaN,At,Et,NaN,NaN,NaN,NaN,yt,kt,NaN,NaN,NaN,NaN,(S[16]-j)/K,(S[17]-tt)/rt,NaN,NaN,NaN,NaN,(S[14]-j)/K,(S[15]-tt)/rt],0),new l(vt,ct,e(this,J),e(this,at),e(this,Tt),e(this,mt))}const U=new Float64Array(e(this,Dt).length+24+e(this,Q).length);let et=I.length;for(let vt=0;vt<et;vt+=2){if(isNaN(I[vt])){U[vt]=U[vt+1]=NaN;continue}U[vt]=I[vt],U[vt+1]=I[vt+1]}U.set([NaN,NaN,NaN,NaN,(b[0]-j)/K,(b[1]-tt)/rt,NaN,NaN,NaN,NaN,At,Et,NaN,NaN,NaN,NaN,yt,kt,NaN,NaN,NaN,NaN,(_[0]-j)/K,(_[1]-tt)/rt],et),et+=24;for(let vt=F.length-6;vt>=6;vt-=6)for(let Lt=0;Lt<6;Lt+=2){if(isNaN(F[vt+Lt])){U[et]=U[et+1]=NaN,et+=2;continue}U[et]=F[vt+Lt],U[et+1]=F[vt+Lt+1],et+=2}return U.set([NaN,NaN,NaN,NaN,F[4],F[5]],et),new l(U,ct,e(this,J),e(this,at),e(this,Tt),e(this,mt))}};J=new WeakMap,Q=new WeakMap,Tt=new WeakMap,mt=new WeakMap,Dt=new WeakMap,pt=new WeakMap,ot=new WeakMap,ft=new WeakMap,gt=new WeakMap,Z=new WeakMap,at=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,ae=new WeakMap,Ae=new WeakSet,fr=function(){const I=e(this,pt).subarray(4,6),F=e(this,pt).subarray(16,18),[S,b,_,j]=e(this,J);return[(e(this,ot)+(I[0]-F[0])/2-S)/_,(e(this,ft)+(I[1]-F[1])/2-b)/j,(e(this,ot)+(F[0]-I[0])/2-S)/_,(e(this,ft)+(F[1]-I[1])/2-b)/j]},x(Bt,Vt,8),x(Bt,Qt,2),x(Bt,ae,e(Bt,Vt)+e(Bt,Qt));let m=Bt;class l extends r{constructor(F,S,b,_,j,tt){super();x(this,it);x(this,u);x(this,k);x(this,It,void 0);x(this,St,null);x(this,qt,void 0);x(this,le,void 0);x(this,jt,void 0);x(this,he,void 0);x(this,Xt,void 0);z(this,Xt,F),z(this,jt,S),z(this,It,b),z(this,he,_),z(this,qt,j),z(this,le,tt),O(this,k,Xa).call(this,tt);const{x:K,y:rt,width:ct,height:At}=e(this,St);for(let Et=0,yt=F.length;Et<yt;Et+=2)F[Et]=(F[Et]-K)/ct,F[Et+1]=(F[Et+1]-rt)/At;for(let Et=0,yt=S.length;Et<yt;Et+=2)S[Et]=(S[Et]-K)/ct,S[Et+1]=(S[Et+1]-rt)/At}toSVGPath(){const F=[`M${e(this,Xt)[4]} ${e(this,Xt)[5]}`];for(let S=6,b=e(this,Xt).length;S<b;S+=6){if(isNaN(e(this,Xt)[S])){F.push(`L${e(this,Xt)[S+4]} ${e(this,Xt)[S+5]}`);continue}F.push(`C${e(this,Xt)[S]} ${e(this,Xt)[S+1]} ${e(this,Xt)[S+2]} ${e(this,Xt)[S+3]} ${e(this,Xt)[S+4]} ${e(this,Xt)[S+5]}`)}return F.push("Z"),F.join(" ")}serialize(F,S){let[b,_,j,tt]=F;const K=j-b,rt=tt-_;let ct,At;switch(S){case 0:ct=O(this,it,Ii).call(this,e(this,Xt),b,tt,K,-rt),At=O(this,it,Ii).call(this,e(this,jt),b,tt,K,-rt);break;case 90:ct=O(this,u,Pi).call(this,e(this,Xt),b,_,K,rt),At=O(this,u,Pi).call(this,e(this,jt),b,_,K,rt);break;case 180:ct=O(this,it,Ii).call(this,e(this,Xt),j,_,-K,rt),At=O(this,it,Ii).call(this,e(this,jt),j,_,-K,rt);break;case 270:ct=O(this,u,Pi).call(this,e(this,Xt),j,tt,-K,-rt),At=O(this,u,Pi).call(this,e(this,jt),j,tt,-K,-rt);break}return{outline:Array.from(ct),points:[Array.from(At)]}}get box(){return e(this,St)}getNewOutline(F,S){const{x:b,y:_,width:j,height:tt}=e(this,St),[K,rt,ct,At]=e(this,It),Et=j*ct,yt=tt*At,kt=b*ct+K,U=_*At+rt,et=new m({x:e(this,jt)[0]*Et+kt,y:e(this,jt)[1]*yt+U},e(this,It),e(this,he),F,e(this,le),S??e(this,qt));for(let ht=2;ht<e(this,jt).length;ht+=2)et.add({x:e(this,jt)[ht]*Et+kt,y:e(this,jt)[ht+1]*yt+U});return et.getOutlines()}}It=new WeakMap,St=new WeakMap,qt=new WeakMap,le=new WeakMap,jt=new WeakMap,he=new WeakMap,Xt=new WeakMap,it=new WeakSet,Ii=function(F,S,b,_,j){const tt=new Float64Array(F.length);for(let K=0,rt=F.length;K<rt;K+=2)tt[K]=S+F[K]*_,tt[K+1]=b+F[K+1]*j;return tt},u=new WeakSet,Pi=function(F,S,b,_,j){const tt=new Float64Array(F.length);for(let K=0,rt=F.length;K<rt;K+=2)tt[K]=S+F[K+1]*_,tt[K+1]=b+F[K]*j;return tt},k=new WeakSet,Xa=function(F){const S=e(this,Xt);let b=S[4],_=S[5],j=b,tt=_,K=b,rt=_,ct=b,At=_;const Et=F?Math.max:Math.min;for(let ht=6,vt=S.length;ht<vt;ht+=6){if(isNaN(S[ht]))j=Math.min(j,S[ht+4]),tt=Math.min(tt,S[ht+5]),K=Math.max(K,S[ht+4]),rt=Math.max(rt,S[ht+5]),At<S[ht+5]?(ct=S[ht+4],At=S[ht+5]):At===S[ht+5]&&(ct=Et(ct,S[ht+4]));else{const Lt=s.Util.bezierBoundingBox(b,_,...S.slice(ht,ht+6));j=Math.min(j,Lt[0]),tt=Math.min(tt,Lt[1]),K=Math.max(K,Lt[2]),rt=Math.max(rt,Lt[3]),At<Lt[3]?(ct=Lt[2],At=Lt[3]):At===Lt[3]&&(ct=Et(ct,Lt[2]))}b=S[ht+4],_=S[ht+5]}const yt=j-e(this,qt),kt=tt-e(this,qt),U=K-j+2*e(this,qt),et=rt-tt+2*e(this,qt);z(this,St,{x:yt,y:kt,width:U,height:et,lastPoint:[ct,At]})}},4362:(i,o,t)=>{var a,m,l,h,p,Ka,f,Ya,v,Ja,R,gn,$,Qa,D,gr,q,J,Q,Tt,Za,Dt,to,ot,eo;t.d(o,{EditorToolbar:()=>n,HighlightToolbar:()=>r});var s=t(5419);const G=class G{constructor(Z){x(this,f);x(this,v);x(this,R);x(this,$);x(this,D);x(this,a,null);x(this,m,null);x(this,l,void 0);x(this,h,null);z(this,l,Z)}render(){const Z=z(this,a,document.createElement("div"));Z.className="editToolbar",Z.setAttribute("role","toolbar"),Z.addEventListener("contextmenu",s.noContextMenu),Z.addEventListener("pointerdown",O(G,p,Ka));const at=z(this,h,document.createElement("div"));at.className="buttons",Z.append(at);const Rt=e(this,l).toolbarPosition;if(Rt){const{style:Ft}=Z,Vt=e(this,l)._uiManager.direction==="ltr"?1-Rt[0]:Rt[0];Ft.insetInlineEnd=`${100*Vt}%`,Ft.top=`calc(${100*Rt[1]}% + var(--editor-toolbar-vert-offset))`}return O(this,$,Qa).call(this),Z}hide(){var Z;e(this,a).classList.add("hidden"),(Z=e(this,m))==null||Z.hideDropdown()}show(){e(this,a).classList.remove("hidden")}addAltTextButton(Z){O(this,R,gn).call(this,Z),e(this,h).prepend(Z,e(this,D,gr))}addColorPicker(Z){z(this,m,Z);const at=Z.renderButton();O(this,R,gn).call(this,at),e(this,h).prepend(at,e(this,D,gr))}remove(){var Z;e(this,a).remove(),(Z=e(this,m))==null||Z.destroy(),z(this,m,null)}};a=new WeakMap,m=new WeakMap,l=new WeakMap,h=new WeakMap,p=new WeakSet,Ka=function(Z){Z.stopPropagation()},f=new WeakSet,Ya=function(Z){e(this,l)._focusEventsAllowed=!1,Z.preventDefault(),Z.stopPropagation()},v=new WeakSet,Ja=function(Z){e(this,l)._focusEventsAllowed=!0,Z.preventDefault(),Z.stopPropagation()},R=new WeakSet,gn=function(Z){Z.addEventListener("focusin",O(this,f,Ya).bind(this),{capture:!0}),Z.addEventListener("focusout",O(this,v,Ja).bind(this),{capture:!0}),Z.addEventListener("contextmenu",s.noContextMenu)},$=new WeakSet,Qa=function(){const Z=document.createElement("button");Z.className="delete",Z.tabIndex=0,Z.setAttribute("data-l10n-id",`pdfjs-editor-remove-${e(this,l).editorType}-button`),O(this,R,gn).call(this,Z),Z.addEventListener("click",at=>{e(this,l)._uiManager.delete()}),e(this,h).append(Z)},D=new WeakSet,gr=function(){const Z=document.createElement("div");return Z.className="divider",Z},x(G,p);let n=G;class r{constructor(Z){x(this,Tt);x(this,Dt);x(this,ot);x(this,q,null);x(this,J,null);x(this,Q,void 0);z(this,Q,Z)}show(Z,at,Rt){const[Ft,Vt]=O(this,Dt,to).call(this,at,Rt),{style:Qt}=e(this,J)||z(this,J,O(this,Tt,Za).call(this));Z.append(e(this,J)),Qt.insetInlineEnd=`${100*Ft}%`,Qt.top=`calc(${100*Vt}% + var(--editor-toolbar-vert-offset))`}hide(){e(this,J).remove()}}q=new WeakMap,J=new WeakMap,Q=new WeakMap,Tt=new WeakSet,Za=function(){const Z=z(this,J,document.createElement("div"));Z.className="editToolbar",Z.setAttribute("role","toolbar"),Z.addEventListener("contextmenu",s.noContextMenu);const at=z(this,q,document.createElement("div"));return at.className="buttons",Z.append(at),O(this,ot,eo).call(this),Z},Dt=new WeakSet,to=function(Z,at){let Rt=0,Ft=0;for(const Vt of Z){const Qt=Vt.y+Vt.height;if(Qt<Rt)continue;const ae=Vt.x+(at?Vt.width:0);if(Qt>Rt){Ft=ae,Rt=Qt;continue}at?ae>Ft&&(Ft=ae):ae<Ft&&(Ft=ae)}return[at?1-Ft:Ft,Rt]},ot=new WeakSet,eo=function(){const Z=document.createElement("button");Z.className="highlightButton",Z.tabIndex=0,Z.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const at=document.createElement("span");Z.append(at),at.className="visuallyHidden",at.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),Z.addEventListener("contextmenu",s.noContextMenu),Z.addEventListener("click",()=>{e(this,Q).highlightSelection("floating_button")}),e(this,q).append(Z)}},7830:(i,o,t)=>{var v,A,R,V,$,mr,C,G,q,J,Q,so,Dt,pt,ot,ft,gt,Z,at,Rt,Ft,Vt,Qt,ae,Ae,me,Bt,It,St,qt,le,jt,he,Xt,it,c,u,E,k,y,M,I,F,S,b,_,j,tt,K,rt,ct,At,Et,yt,kt,U,et,ht,mn,Lt,io,zt,no,te,vn,ce,ro,be,ao,Oe,oo,Be,vr,Ie,yr,Y,br,st,Ar,T,wr,W,es,bt,Ls,Ht,ho,Ct,lo,Yt,_r,ne,co,de,Di,Ge,Er;t.d(o,{AnnotationEditorUIManager:()=>g,ColorManager:()=>f,KeyboardManager:()=>w,bindEvents:()=>a,opacityToHex:()=>m}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(8992),t(3215),t(1454),t(7550),t(8335),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197);var s=t(4292),n=t(5419),r=t(4362);function a(Ve,X,dt){for(const $t of dt)X.addEventListener($t,Ve[$t].bind(Ve))}function m(Ve){return Math.round(Math.min(255,Math.max(1,255*Ve))).toString(16).padStart(2,"0")}class l{constructor(){x(this,v,0)}get id(){return`${s.AnnotationEditorPrefix}${bs(this,v)._++}`}}v=new WeakMap;const D=class D{constructor(){x(this,$);x(this,A,(0,s.getUuid)());x(this,R,0);x(this,V,null)}static get _isSVGFittingCanvas(){const X='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',dt=new OffscreenCanvas(1,3).getContext("2d"),$t=new Image;$t.src=X;const Gt=$t.decode().then(()=>(dt.drawImage($t,0,0,1,1,0,0,1,3),new Uint32Array(dt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",Gt)}async getFromFile(X){const{lastModified:dt,name:$t,size:Gt,type:ee}=X;return O(this,$,mr).call(this,`${dt}_${$t}_${Gt}_${ee}`,X)}async getFromUrl(X){return O(this,$,mr).call(this,X,X)}async getFromId(X){e(this,V)||z(this,V,new Map);const dt=e(this,V).get(X);return dt?dt.bitmap?(dt.refCounter+=1,dt):dt.file?this.getFromFile(dt.file):this.getFromUrl(dt.url):null}getSvgUrl(X){const dt=e(this,V).get(X);return dt!=null&&dt.isSvg?dt.svgUrl:null}deleteId(X){e(this,V)||z(this,V,new Map);const dt=e(this,V).get(X);dt&&(dt.refCounter-=1,dt.refCounter===0&&(dt.bitmap=null))}isValidId(X){return X.startsWith(`image_${e(this,A)}_`)}};A=new WeakMap,R=new WeakMap,V=new WeakMap,$=new WeakSet,mr=async function(X,dt){e(this,V)||z(this,V,new Map);let $t=e(this,V).get(X);if($t===null)return null;if($t!=null&&$t.bitmap)return $t.refCounter+=1,$t;try{$t||($t={bitmap:null,id:`image_${e(this,A)}_${bs(this,R)._++}`,refCounter:0,isSvg:!1});let Gt;if(typeof dt=="string"?($t.url=dt,Gt=await(0,n.fetchData)(dt,"blob")):Gt=$t.file=dt,Gt.type==="image/svg+xml"){const ee=D._isSVGFittingCanvas,se=new FileReader,oe=new Image,_e=new Promise((xe,Re)=>{oe.onload=()=>{$t.bitmap=oe,$t.isSvg=!0,xe()},se.onload=async()=>{const We=$t.svgUrl=se.result;oe.src=await ee?`${We}#svgView(preserveAspectRatio(none))`:We},oe.onerror=se.onerror=Re});se.readAsDataURL(Gt),await _e}else $t.bitmap=await createImageBitmap(Gt);$t.refCounter=1}catch(Gt){console.error(Gt),$t=null}return e(this,V).set(X,$t),$t&&e(this,V).set($t.id,$t),$t};let h=D;class p{constructor(){x(this,C,[]);x(this,G,!1);x(this,q,void 0);x(this,J,-1);let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;z(this,q,X)}add(X){let{cmd:dt,undo:$t,post:Gt,mustExec:ee,type:se=NaN,overwriteIfSameType:oe=!1,keepUndo:_e=!1}=X;if(ee&&dt(),e(this,G))return;const xe={cmd:dt,undo:$t,post:Gt,type:se};if(e(this,J)===-1){e(this,C).length>0&&(e(this,C).length=0),z(this,J,0),e(this,C).push(xe);return}if(oe&&e(this,C)[e(this,J)].type===se){_e&&(xe.undo=e(this,C)[e(this,J)].undo),e(this,C)[e(this,J)]=xe;return}const Re=e(this,J)+1;Re===e(this,q)?e(this,C).splice(0,1):(z(this,J,Re),Re<e(this,C).length&&e(this,C).splice(Re)),e(this,C).push(xe)}undo(){if(e(this,J)===-1)return;z(this,G,!0);const{undo:X,post:dt}=e(this,C)[e(this,J)];X(),dt==null||dt(),z(this,G,!1),z(this,J,e(this,J)-1)}redo(){if(e(this,J)<e(this,C).length-1){z(this,J,e(this,J)+1),z(this,G,!0);const{cmd:X,post:dt}=e(this,C)[e(this,J)];X(),dt==null||dt(),z(this,G,!1)}}hasSomethingToUndo(){return e(this,J)!==-1}hasSomethingToRedo(){return e(this,J)<e(this,C).length-1}destroy(){z(this,C,null)}}C=new WeakMap,G=new WeakMap,q=new WeakMap,J=new WeakMap;class w{constructor(X){x(this,Q);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:dt}=s.FeatureTest.platform;for(const[$t,Gt,ee={}]of X)for(const se of $t){const oe=se.startsWith("mac+");dt&&oe?(this.callbacks.set(se.slice(4),{callback:Gt,options:ee}),this.allKeys.add(se.split("+").at(-1))):!dt&&!oe&&(this.callbacks.set(se,{callback:Gt,options:ee}),this.allKeys.add(se.split("+").at(-1)))}}exec(X,dt){if(!this.allKeys.has(dt.key))return;const $t=this.callbacks.get(O(this,Q,so).call(this,dt));if(!$t)return;const{callback:Gt,options:{bubbles:ee=!1,args:se=[],checker:oe=null}}=$t;oe&&!oe(X,dt)||(Gt.bind(X,...se,dt)(),ee||(dt.stopPropagation(),dt.preventDefault()))}}Q=new WeakSet,so=function(X){X.altKey&&this.buffer.push("alt"),X.ctrlKey&&this.buffer.push("ctrl"),X.metaKey&&this.buffer.push("meta"),X.shiftKey&&this.buffer.push("shift"),this.buffer.push(X.key);const dt=this.buffer.join("+");return this.buffer.length=0,dt};const mt=class mt{get _colors(){const X=new Map([["CanvasText",null],["Canvas",null]]);return(0,n.getColorValues)(X),(0,s.shadow)(this,"_colors",X)}convert(X){const dt=(0,n.getRGB)(X);if(!window.matchMedia("(forced-colors: active)").matches)return dt;for(const[$t,Gt]of this._colors)if(Gt.every((ee,se)=>ee===dt[se]))return mt._colorsMapping.get($t);return dt}getHexCode(X){const dt=this._colors.get(X);return dt?s.Util.makeHexColor(...dt):X}};ye(mt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let f=mt;const ss=class ss{constructor(X,dt,$t,Gt,ee,se,oe,_e,xe){x(this,ht);x(this,Lt);x(this,zt);x(this,te);x(this,ce);x(this,be);x(this,Oe);x(this,Be);x(this,Ie);x(this,Y);x(this,st);x(this,T);x(this,W);x(this,bt);x(this,Ht);x(this,Ct);x(this,Yt);x(this,ne);x(this,de);x(this,Ge);x(this,Dt,null);x(this,pt,new Map);x(this,ot,new Map);x(this,ft,null);x(this,gt,null);x(this,Z,new p);x(this,at,0);x(this,Rt,new Set);x(this,Ft,null);x(this,Vt,null);x(this,Qt,new Set);x(this,ae,!1);x(this,Ae,null);x(this,me,null);x(this,Bt,null);x(this,It,!1);x(this,St,null);x(this,qt,new l);x(this,le,!1);x(this,jt,!1);x(this,he,null);x(this,Xt,null);x(this,it,null);x(this,c,s.AnnotationEditorType.NONE);x(this,u,new Set);x(this,E,null);x(this,k,null);x(this,y,null);x(this,M,this.blur.bind(this));x(this,I,this.focus.bind(this));x(this,F,this.copy.bind(this));x(this,S,this.cut.bind(this));x(this,b,this.paste.bind(this));x(this,_,this.keydown.bind(this));x(this,j,this.keyup.bind(this));x(this,tt,this.onEditingAction.bind(this));x(this,K,this.onPageChanging.bind(this));x(this,rt,this.onScaleChanging.bind(this));x(this,ct,O(this,zt,no).bind(this));x(this,At,this.onRotationChanging.bind(this));x(this,Et,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,yt,[0,0]);x(this,kt,null);x(this,U,null);x(this,et,null);z(this,U,X),z(this,et,dt),z(this,ft,$t),this._eventBus=Gt,this._eventBus._on("editingaction",e(this,tt)),this._eventBus._on("pagechanging",e(this,K)),this._eventBus._on("scalechanging",e(this,rt)),this._eventBus._on("rotationchanging",e(this,At)),O(this,ce,ro).call(this),O(this,Ie,yr).call(this),z(this,gt,ee.annotationStorage),z(this,Ae,ee.filterFactory),z(this,k,se),z(this,Bt,oe||null),z(this,ae,_e),z(this,it,xe||null),this.viewParameters={realScale:n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const X=ss.prototype,dt=se=>e(se,U).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&se.hasSomethingToControl(),$t=(se,oe)=>{let{target:_e}=oe;if(_e instanceof HTMLInputElement){const{type:xe}=_e;return xe!=="text"&&xe!=="number"}return!0},Gt=this.TRANSLATE_SMALL,ee=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new w([[["ctrl+a","mac+meta+a"],X.selectAll,{checker:$t}],[["ctrl+z","mac+meta+z"],X.undo,{checker:$t}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],X.redo,{checker:$t}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],X.delete,{checker:$t}],[["Enter","mac+Enter"],X.addNewEditorFromKeyboard,{checker:(se,oe)=>{let{target:_e}=oe;return!(_e instanceof HTMLButtonElement)&&e(se,U).contains(_e)&&!se.isEnterHandled}}],[[" ","mac+ "],X.addNewEditorFromKeyboard,{checker:(se,oe)=>{let{target:_e}=oe;return!(_e instanceof HTMLButtonElement)&&e(se,U).contains(document.activeElement)}}],[["Escape","mac+Escape"],X.unselectAll],[["ArrowLeft","mac+ArrowLeft"],X.translateSelectedEditors,{args:[-Gt,0],checker:dt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],X.translateSelectedEditors,{args:[-ee,0],checker:dt}],[["ArrowRight","mac+ArrowRight"],X.translateSelectedEditors,{args:[Gt,0],checker:dt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],X.translateSelectedEditors,{args:[ee,0],checker:dt}],[["ArrowUp","mac+ArrowUp"],X.translateSelectedEditors,{args:[0,-Gt],checker:dt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],X.translateSelectedEditors,{args:[0,-ee],checker:dt}],[["ArrowDown","mac+ArrowDown"],X.translateSelectedEditors,{args:[0,Gt],checker:dt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],X.translateSelectedEditors,{args:[0,ee],checker:dt}]]))}destroy(){var X,dt;O(this,Y,br).call(this),O(this,Be,vr).call(this),this._eventBus._off("editingaction",e(this,tt)),this._eventBus._off("pagechanging",e(this,K)),this._eventBus._off("scalechanging",e(this,rt)),this._eventBus._off("rotationchanging",e(this,At));for(const $t of e(this,ot).values())$t.destroy();e(this,ot).clear(),e(this,pt).clear(),e(this,Qt).clear(),z(this,Dt,null),e(this,u).clear(),e(this,Z).destroy(),(X=e(this,ft))==null||X.destroy(),(dt=e(this,St))==null||dt.hide(),z(this,St,null),e(this,me)&&(clearTimeout(e(this,me)),z(this,me,null)),e(this,kt)&&(clearTimeout(e(this,kt)),z(this,kt,null)),O(this,be,ao).call(this)}async mlGuess(X){var dt;return((dt=e(this,it))==null?void 0:dt.guess(X))||null}get hasMLManager(){return!!e(this,it)}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",e(this,k)?e(this,Ae).addHCMFilter(e(this,k).foreground,e(this,k).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(e(this,U)).direction)}get highlightColors(){return(0,s.shadow)(this,"highlightColors",e(this,Bt)?new Map(e(this,Bt).split(",").map(X=>X.split("=").map(dt=>dt.trim()))):null)}get highlightColorNames(){return(0,s.shadow)(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,X=>X.reverse())):null)}setMainHighlightColorPicker(X){z(this,Xt,X)}editAltText(X){var dt;(dt=e(this,ft))==null||dt.editAltText(this,X)}onPageChanging(X){let{pageNumber:dt}=X;z(this,at,dt-1)}focusMainContainer(){e(this,U).focus()}findParent(X,dt){for(const $t of e(this,ot).values()){const{x:Gt,y:ee,width:se,height:oe}=$t.div.getBoundingClientRect();if(X>=Gt&&X<=Gt+se&&dt>=ee&&dt<=ee+oe)return $t}return null}disableUserSelect(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;e(this,et).classList.toggle("noUserSelect",X)}addShouldRescale(X){e(this,Qt).add(X)}removeShouldRescale(X){e(this,Qt).delete(X)}onScaleChanging(X){let{scale:dt}=X;this.commitOrRemove(),this.viewParameters.realScale=dt*n.PixelsPerInch.PDF_TO_CSS_UNITS;for(const $t of e(this,Qt))$t.onScaleChanging()}onRotationChanging(X){let{pagesRotation:dt}=X;this.commitOrRemove(),this.viewParameters.rotation=dt}highlightSelection(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const dt=document.getSelection();if(!dt||dt.isCollapsed)return;const{anchorNode:$t,anchorOffset:Gt,focusNode:ee,focusOffset:se}=dt,oe=dt.toString(),_e=O(this,ht,mn).call(this,dt).closest(".textLayer"),xe=this.getSelectionBoxes(_e);if(xe){dt.empty(),e(this,c)===s.AnnotationEditorType.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:s.AnnotationEditorType.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const Re of e(this,ot).values())if(Re.hasTextLayer(_e)){Re.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:X,boxes:xe,anchorNode:$t,anchorOffset:Gt,focusNode:ee,focusOffset:se,text:oe});break}}}addToAnnotationStorage(X){!X.isEmpty()&&e(this,gt)&&!e(this,gt).has(X.id)&&e(this,gt).setValue(X.id,X)}blur(){if(this.isShiftKeyDown=!1,e(this,It)&&(z(this,It,!1),O(this,te,vn).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:X}=document;for(const dt of e(this,u))if(dt.div.contains(X)){z(this,he,[dt,X]),dt._focusEventsAllowed=!1;break}}focus(){if(!e(this,he))return;const[X,dt]=e(this,he);z(this,he,null),dt.addEventListener("focusin",()=>{X._focusEventsAllowed=!0},{once:!0}),dt.focus()}addEditListeners(){O(this,Ie,yr).call(this),O(this,st,Ar).call(this)}removeEditListeners(){O(this,Y,br).call(this),O(this,T,wr).call(this)}copy(X){var $t;if(X.preventDefault(),($t=e(this,Dt))==null||$t.commitOrRemove(),!this.hasSelection)return;const dt=[];for(const Gt of e(this,u)){const ee=Gt.serialize(!0);ee&&dt.push(ee)}dt.length!==0&&X.clipboardData.setData("application/pdfjs",JSON.stringify(dt))}cut(X){this.copy(X),this.delete()}paste(X){X.preventDefault();const{clipboardData:dt}=X;for(const ee of dt.items)for(const se of e(this,Vt))if(se.isHandlingMimeForPasting(ee.type)){se.paste(ee,this.currentLayer);return}let $t=dt.getData("application/pdfjs");if(!$t)return;try{$t=JSON.parse($t)}catch(ee){(0,s.warn)(`paste: "${ee.message}".`);return}if(!Array.isArray($t))return;this.unselectAll();const Gt=this.currentLayer;try{const ee=[];for(const _e of $t){const xe=Gt.deserialize(_e);if(!xe)return;ee.push(xe)}const se=()=>{for(const _e of ee)O(this,Yt,_r).call(this,_e);O(this,Ge,Er).call(this,ee)},oe=()=>{for(const _e of ee)_e.remove()};this.addCommands({cmd:se,undo:oe,mustExec:!0})}catch(ee){(0,s.warn)(`paste: "${ee.message}".`)}}keydown(X){!this.isShiftKeyDown&&X.key==="Shift"&&(this.isShiftKeyDown=!0),e(this,c)!==s.AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&ss._keyboardManager.exec(this,X)}keyup(X){this.isShiftKeyDown&&X.key==="Shift"&&(this.isShiftKeyDown=!1,e(this,It)&&(z(this,It,!1),O(this,te,vn).call(this,"main_toolbar")))}onEditingAction(X){let{name:dt}=X;switch(dt){case"undo":case"redo":case"delete":case"selectAll":this[dt]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(X){X?(O(this,Oe,oo).call(this),O(this,st,Ar).call(this),O(this,W,es).call(this,{isEditing:e(this,c)!==s.AnnotationEditorType.NONE,isEmpty:O(this,de,Di).call(this),hasSomethingToUndo:e(this,Z).hasSomethingToUndo(),hasSomethingToRedo:e(this,Z).hasSomethingToRedo(),hasSelectedEditor:!1})):(O(this,Be,vr).call(this),O(this,T,wr).call(this),O(this,W,es).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(X){if(!e(this,Vt)){z(this,Vt,X);for(const dt of e(this,Vt))O(this,bt,Ls).call(this,dt.defaultPropertiesToUpdate)}}getId(){return e(this,qt).id}get currentLayer(){return e(this,ot).get(e(this,at))}getLayer(X){return e(this,ot).get(X)}get currentPageIndex(){return e(this,at)}addLayer(X){e(this,ot).set(X.pageIndex,X),e(this,le)?X.enable():X.disable()}removeLayer(X){e(this,ot).delete(X.pageIndex)}updateMode(X){let dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,$t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e(this,c)!==X){if(z(this,c,X),X===s.AnnotationEditorType.NONE){this.setEditingState(!1),O(this,Ct,lo).call(this);return}this.setEditingState(!0),O(this,Ht,ho).call(this),this.unselectAll();for(const Gt of e(this,ot).values())Gt.updateMode(X);if(!dt&&$t){this.addNewEditorFromKeyboard();return}if(dt){for(const Gt of e(this,pt).values())if(Gt.annotationElementId===dt){this.setSelected(Gt),Gt.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(X){X!==e(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:X})}updateParams(X,dt){var $t;if(e(this,Vt)){switch(X){case s.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:($t=e(this,Xt))==null||$t.updateColor(dt);break;case s.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(e(this,y)||z(this,y,new Map)).set(X,dt),this.showAllEditors("highlight",dt);break}for(const Gt of e(this,u))Gt.updateParams(X,dt);for(const Gt of e(this,Vt))Gt.updateDefaultParams(X,dt)}}showAllEditors(X,dt){var $t;for(const Gt of e(this,pt).values())Gt.editorType===X&&Gt.show(dt);((($t=e(this,y))==null?void 0:$t.get(s.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==dt&&O(this,bt,Ls).call(this,[[s.AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,dt]])}enableWaiting(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(e(this,jt)!==X){z(this,jt,X);for(const dt of e(this,ot).values())X?dt.disableClick():dt.enableClick(),dt.div.classList.toggle("waiting",X)}}getEditors(X){const dt=[];for(const $t of e(this,pt).values())$t.pageIndex===X&&dt.push($t);return dt}getEditor(X){return e(this,pt).get(X)}addEditor(X){e(this,pt).set(X.id,X)}removeEditor(X){var dt;X.div.contains(document.activeElement)&&(e(this,me)&&clearTimeout(e(this,me)),z(this,me,setTimeout(()=>{this.focusMainContainer(),z(this,me,null)},0))),e(this,pt).delete(X.id),this.unselect(X),(!X.annotationElementId||!e(this,Rt).has(X.annotationElementId))&&((dt=e(this,gt))==null||dt.remove(X.id))}addDeletedAnnotationElement(X){e(this,Rt).add(X.annotationElementId),X.deleted=!0}isDeletedAnnotationElement(X){return e(this,Rt).has(X)}removeDeletedAnnotationElement(X){e(this,Rt).delete(X.annotationElementId),X.deleted=!1}setActiveEditor(X){e(this,Dt)!==X&&(z(this,Dt,X),X&&O(this,bt,Ls).call(this,X.propertiesToUpdate))}updateUI(X){e(this,ne,co)===X&&O(this,bt,Ls).call(this,X.propertiesToUpdate)}toggleSelected(X){if(e(this,u).has(X)){e(this,u).delete(X),X.unselect(),O(this,W,es).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,u).add(X),X.select(),O(this,bt,Ls).call(this,X.propertiesToUpdate),O(this,W,es).call(this,{hasSelectedEditor:!0})}setSelected(X){for(const dt of e(this,u))dt!==X&&dt.unselect();e(this,u).clear(),e(this,u).add(X),X.select(),O(this,bt,Ls).call(this,X.propertiesToUpdate),O(this,W,es).call(this,{hasSelectedEditor:!0})}isSelected(X){return e(this,u).has(X)}get firstSelectedEditor(){return e(this,u).values().next().value}unselect(X){X.unselect(),e(this,u).delete(X),O(this,W,es).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,u).size!==0}get isEnterHandled(){return e(this,u).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){e(this,Z).undo(),O(this,W,es).call(this,{hasSomethingToUndo:e(this,Z).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:O(this,de,Di).call(this)})}redo(){e(this,Z).redo(),O(this,W,es).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,Z).hasSomethingToRedo(),isEmpty:O(this,de,Di).call(this)})}addCommands(X){e(this,Z).add(X),O(this,W,es).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:O(this,de,Di).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const X=[...e(this,u)],dt=()=>{for(const Gt of X)Gt.remove()},$t=()=>{for(const Gt of X)O(this,Yt,_r).call(this,Gt)};this.addCommands({cmd:dt,undo:$t,mustExec:!0})}commitOrRemove(){var X;(X=e(this,Dt))==null||X.commitOrRemove()}hasSomethingToControl(){return e(this,Dt)||this.hasSelection}selectAll(){for(const X of e(this,u))X.commit();O(this,Ge,Er).call(this,e(this,pt).values())}unselectAll(){if(!(e(this,Dt)&&(e(this,Dt).commitOrRemove(),e(this,c)!==s.AnnotationEditorType.NONE))&&this.hasSelection){for(const X of e(this,u))X.unselect();e(this,u).clear(),O(this,W,es).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(X,dt){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;e(this,yt)[0]+=X,e(this,yt)[1]+=dt;const[$t,Gt]=e(this,yt),ee=[...e(this,u)];e(this,kt)&&clearTimeout(e(this,kt)),z(this,kt,setTimeout(()=>{z(this,kt,null),e(this,yt)[0]=e(this,yt)[1]=0,this.addCommands({cmd:()=>{for(const oe of ee)e(this,pt).has(oe.id)&&oe.translateInPage($t,Gt)},undo:()=>{for(const oe of ee)e(this,pt).has(oe.id)&&oe.translateInPage(-$t,-Gt)},mustExec:!1})},1e3));for(const oe of ee)oe.translateInPage(X,dt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),z(this,Ft,new Map);for(const X of e(this,u))e(this,Ft).set(X,{savedX:X.x,savedY:X.y,savedPageIndex:X.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,Ft))return!1;this.disableUserSelect(!1);const X=e(this,Ft);z(this,Ft,null);let dt=!1;for(const[{x:Gt,y:ee,pageIndex:se},oe]of X)oe.newX=Gt,oe.newY=ee,oe.newPageIndex=se,dt||(dt=Gt!==oe.savedX||ee!==oe.savedY||se!==oe.savedPageIndex);if(!dt)return!1;const $t=(Gt,ee,se,oe)=>{if(e(this,pt).has(Gt.id)){const _e=e(this,ot).get(oe);_e?Gt._setParentAndPosition(_e,ee,se):(Gt.pageIndex=oe,Gt.x=ee,Gt.y=se)}};return this.addCommands({cmd:()=>{for(const[Gt,{newX:ee,newY:se,newPageIndex:oe}]of X)$t(Gt,ee,se,oe)},undo:()=>{for(const[Gt,{savedX:ee,savedY:se,savedPageIndex:oe}]of X)$t(Gt,ee,se,oe)},mustExec:!0}),!0}dragSelectedEditors(X,dt){if(e(this,Ft))for(const $t of e(this,Ft).keys())$t.drag(X,dt)}rebuild(X){if(X.parent===null){const dt=this.getLayer(X.pageIndex);dt?(dt.changeParent(X),dt.addOrRebuild(X)):(this.addEditor(X),this.addToAnnotationStorage(X),X.rebuild())}else X.parent.addOrRebuild(X)}get isEditorHandlingKeyboard(){var X;return((X=this.getActive())==null?void 0:X.shouldGetKeyboardEvents())||e(this,u).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(X){return e(this,Dt)===X}getActive(){return e(this,Dt)}getMode(){return e(this,c)}get imageManager(){return(0,s.shadow)(this,"imageManager",new h)}getSelectionBoxes(X){if(!X)return null;const dt=document.getSelection();for(let xe=0,Re=dt.rangeCount;xe<Re;xe++)if(!X.contains(dt.getRangeAt(xe).commonAncestorContainer))return null;const{x:$t,y:Gt,width:ee,height:se}=X.getBoundingClientRect();let oe;switch(X.getAttribute("data-main-rotation")){case"90":oe=(xe,Re,We,Xe)=>({x:(Re-Gt)/se,y:1-(xe+We-$t)/ee,width:Xe/se,height:We/ee});break;case"180":oe=(xe,Re,We,Xe)=>({x:1-(xe+We-$t)/ee,y:1-(Re+Xe-Gt)/se,width:We/ee,height:Xe/se});break;case"270":oe=(xe,Re,We,Xe)=>({x:1-(Re+Xe-Gt)/se,y:(xe-$t)/ee,width:Xe/se,height:We/ee});break;default:oe=(xe,Re,We,Xe)=>({x:(xe-$t)/ee,y:(Re-Gt)/se,width:We/ee,height:Xe/se});break}const _e=[];for(let xe=0,Re=dt.rangeCount;xe<Re;xe++){const We=dt.getRangeAt(xe);if(!We.collapsed)for(const{x:Xe,y:hi,width:ps,height:ji}of We.getClientRects())ps===0||ji===0||_e.push(oe(Xe,hi,ps,ji))}return _e.length===0?null:_e}};Dt=new WeakMap,pt=new WeakMap,ot=new WeakMap,ft=new WeakMap,gt=new WeakMap,Z=new WeakMap,at=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,ae=new WeakMap,Ae=new WeakMap,me=new WeakMap,Bt=new WeakMap,It=new WeakMap,St=new WeakMap,qt=new WeakMap,le=new WeakMap,jt=new WeakMap,he=new WeakMap,Xt=new WeakMap,it=new WeakMap,c=new WeakMap,u=new WeakMap,E=new WeakMap,k=new WeakMap,y=new WeakMap,M=new WeakMap,I=new WeakMap,F=new WeakMap,S=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,tt=new WeakMap,K=new WeakMap,rt=new WeakMap,ct=new WeakMap,At=new WeakMap,Et=new WeakMap,yt=new WeakMap,kt=new WeakMap,U=new WeakMap,et=new WeakMap,ht=new WeakSet,mn=function(X){let{anchorNode:dt}=X;return dt.nodeType===Node.TEXT_NODE?dt.parentElement:dt},Lt=new WeakSet,io=function(){const X=document.getSelection();if(!X||X.isCollapsed)return;const dt=O(this,ht,mn).call(this,X).closest(".textLayer"),$t=this.getSelectionBoxes(dt);$t&&(e(this,St)||z(this,St,new r.HighlightToolbar(this)),e(this,St).show(dt,$t,this.direction==="ltr"))},zt=new WeakSet,no=function(){var $t,Gt,ee;const X=document.getSelection();if(!X||X.isCollapsed){e(this,E)&&(($t=e(this,St))==null||$t.hide(),z(this,E,null),O(this,W,es).call(this,{hasSelectedText:!1}));return}const{anchorNode:dt}=X;if(dt!==e(this,E)){if(!O(this,ht,mn).call(this,X).closest(".textLayer")){e(this,E)&&((Gt=e(this,St))==null||Gt.hide(),z(this,E,null),O(this,W,es).call(this,{hasSelectedText:!1}));return}if((ee=e(this,St))==null||ee.hide(),z(this,E,dt),O(this,W,es).call(this,{hasSelectedText:!0}),!(e(this,c)!==s.AnnotationEditorType.HIGHLIGHT&&e(this,c)!==s.AnnotationEditorType.NONE)&&(e(this,c)===s.AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),z(this,It,this.isShiftKeyDown),!this.isShiftKeyDown)){const se=oe=>{oe.type==="pointerup"&&oe.button!==0||(window.removeEventListener("pointerup",se),window.removeEventListener("blur",se),oe.type==="pointerup"&&O(this,te,vn).call(this,"main_toolbar"))};window.addEventListener("pointerup",se),window.addEventListener("blur",se)}}},te=new WeakSet,vn=function(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";e(this,c)===s.AnnotationEditorType.HIGHLIGHT?this.highlightSelection(X):e(this,ae)&&O(this,Lt,io).call(this)},ce=new WeakSet,ro=function(){document.addEventListener("selectionchange",e(this,ct))},be=new WeakSet,ao=function(){document.removeEventListener("selectionchange",e(this,ct))},Oe=new WeakSet,oo=function(){window.addEventListener("focus",e(this,I)),window.addEventListener("blur",e(this,M))},Be=new WeakSet,vr=function(){window.removeEventListener("focus",e(this,I)),window.removeEventListener("blur",e(this,M))},Ie=new WeakSet,yr=function(){window.addEventListener("keydown",e(this,_)),window.addEventListener("keyup",e(this,j))},Y=new WeakSet,br=function(){window.removeEventListener("keydown",e(this,_)),window.removeEventListener("keyup",e(this,j))},st=new WeakSet,Ar=function(){document.addEventListener("copy",e(this,F)),document.addEventListener("cut",e(this,S)),document.addEventListener("paste",e(this,b))},T=new WeakSet,wr=function(){document.removeEventListener("copy",e(this,F)),document.removeEventListener("cut",e(this,S)),document.removeEventListener("paste",e(this,b))},W=new WeakSet,es=function(X){Object.entries(X).some(dt=>{let[$t,Gt]=dt;return e(this,Et)[$t]!==Gt})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,Et),X)}),e(this,c)===s.AnnotationEditorType.HIGHLIGHT&&X.hasSelectedEditor===!1&&O(this,bt,Ls).call(this,[[s.AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},bt=new WeakSet,Ls=function(X){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:X})},Ht=new WeakSet,ho=function(){if(!e(this,le)){z(this,le,!0);for(const X of e(this,ot).values())X.enable();for(const X of e(this,pt).values())X.enable()}},Ct=new WeakSet,lo=function(){if(this.unselectAll(),e(this,le)){z(this,le,!1);for(const X of e(this,ot).values())X.disable();for(const X of e(this,pt).values())X.disable()}},Yt=new WeakSet,_r=function(X){const dt=e(this,ot).get(X.pageIndex);dt?dt.addOrRebuild(X):(this.addEditor(X),this.addToAnnotationStorage(X))},ne=new WeakSet,co=function(){let X=null;for(X of e(this,u));return X},de=new WeakSet,Di=function(){if(e(this,pt).size===0)return!0;if(e(this,pt).size===1)for(const X of e(this,pt).values())return X.isEmpty();return!1},Ge=new WeakSet,Er=function(X){for(const dt of e(this,u))dt.unselect();e(this,u).clear();for(const dt of X)dt.isEmpty()||(e(this,u).add(dt),dt.select());O(this,W,es).call(this,{hasSelectedEditor:this.hasSelection})},ye(ss,"TRANSLATE_SMALL",1),ye(ss,"TRANSLATE_BIG",10);let g=ss},4094:(i,o,t)=>{t.d(o,{PDFFetchStream:()=>l}),t(4114),t(6573),t(8100),t(7936),t(4628),t(7467),t(4732),t(9577);var s=t(4292),n=t(6490);function r(w,f,g){return{method:"GET",headers:w,signal:g.signal,mode:"cors",credentials:f?"include":"same-origin",redirect:"follow"}}function a(w){const f=new Headers;for(const g in w){const v=w[g];v!==void 0&&f.append(g,v)}return f}function m(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,s.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class l{constructor(f){this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(f,g){if(g<=this._progressiveDataLength)return null;const v=new p(this,f,g);return this._rangeRequestReaders.push(v),v}cancelAllRequests(f){var g;(g=this._fullRequestReader)==null||g.cancel(f);for(const v of this._rangeRequestReaders.slice(0))v.cancel(f)}}class h{constructor(f){this._stream=f,this._reader=null,this._loaded=0,this._filename=null;const g=f.source;this._withCredentials=g.withCredentials||!1,this._contentLength=g.length,this._headersCapability=Promise.withResolvers(),this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._headers=a(this._stream.httpHeaders);const v=g.url;fetch(v,r(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,n.validateResponseStatus)(A.status))throw(0,n.createResponseStatusError)(A.status,v);this._reader=A.body.getReader(),this._headersCapability.resolve();const R=L=>A.headers.get(L),{allowRangeRequests:V,suggestedLength:$}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=$||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(R),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._headersCapability.promise;const{value:f,done:g}=await this._reader.read();return g?{value:f,done:g}:(this._loaded+=f.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:m(f),done:!1})}cancel(f){var g;(g=this._reader)==null||g.cancel(f),this._abortController.abort()}}class p{constructor(f,g,v){this._stream=f,this._reader=null,this._loaded=0;const A=f.source;this._withCredentials=A.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${g}-${v-1}`);const R=A.url;fetch(R,r(this._headers,this._withCredentials,this._abortController)).then(V=>{if(!(0,n.validateResponseStatus)(V.status))throw(0,n.createResponseStatusError)(V.status,R);this._readCapability.resolve(),this._reader=V.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._readCapability.promise;const{value:f,done:g}=await this._reader.read();return g?{value:f,done:g}:(this._loaded+=f.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:m(f),done:!1})}cancel(f){var g;(g=this._reader)==null||g.cancel(f),this._abortController.abort()}}},10:(i,o,t)=>{var a;t.d(o,{FontFaceObject:()=>r,FontLoader:()=>n}),t(4114),t(3375),t(9225),t(3972),t(9209),t(5714),t(7561),t(6197),t(4979);var s=t(4292);class n{constructor(l){x(this,a,new Set);let{ownerDocument:h=globalThis.document,styleElement:p=null}=l;this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(l){this.nativeFontFaces.add(l),this._document.fonts.add(l)}removeNativeFontFace(l){this.nativeFontFaces.delete(l),this._document.fonts.delete(l)}insertRule(l){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const h=this.styleElement.sheet;h.insertRule(l,h.cssRules.length)}clear(){for(const l of this.nativeFontFaces)this._document.fonts.delete(l);this.nativeFontFaces.clear(),e(this,a).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(l){let{systemFontInfo:h,_inspectFont:p}=l;if(!(!h||e(this,a).has(h.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:w,src:f,style:g}=h,v=new FontFace(w,f,g);this.addNativeFontFace(v);try{await v.load(),e(this,a).add(w),p==null||p(h)}catch{(0,s.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(v)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(l){if(l.attached||l.missingFile&&!l.systemFontInfo)return;if(l.attached=!0,l.systemFontInfo){await this.loadSystemFont(l);return}if(this.isFontLoadingAPISupported){const p=l.createNativeFontFace();if(p){this.addNativeFontFace(p);try{await p.loaded}catch(w){throw(0,s.warn)(`Failed to load font '${p.family}': '${w}'.`),l.disableFontFace=!0,w}}return}const h=l.createFontFaceRule();if(h){if(this.insertRule(h),this.isSyncFontLoadingSupported)return;await new Promise(p=>{const w=this._queueLoadingCallback(p);this._prepareFontLoadEvent(l,w)})}}get isFontLoadingAPISupported(){var h;const l=!!((h=this._document)!=null&&h.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",l)}get isSyncFontLoadingSupported(){let l=!1;return(s.isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(l=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",l)}_queueLoadingCallback(l){function h(){for((0,s.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;p.length>0&&p[0].done;){const f=p.shift();setTimeout(f.callback,0)}}const{loadingRequests:p}=this,w={done:!1,complete:h,callback:l};return p.push(w),w}get _loadTestFont(){const l=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",l)}_prepareFontLoadEvent(l,h){function p(Tt,mt){return Tt.charCodeAt(mt)<<24|Tt.charCodeAt(mt+1)<<16|Tt.charCodeAt(mt+2)<<8|Tt.charCodeAt(mt+3)&255}function w(Tt,mt,Dt,pt){const ot=Tt.substring(0,mt),ft=Tt.substring(mt+Dt);return ot+pt+ft}let f,g;const v=this._document.createElement("canvas");v.width=1,v.height=1;const A=v.getContext("2d");let R=0;function V(Tt,mt){if(++R>30){(0,s.warn)("Load test font never loaded."),mt();return}if(A.font="30px "+Tt,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){mt();return}setTimeout(V.bind(null,Tt,mt))}const $=`lt${Date.now()}${this.loadTestFontId++}`;let L=this._loadTestFont;L=w(L,976,$.length,$);const D=16,C=1482184792;let G=p(L,D);for(f=0,g=$.length-3;f<g;f+=4)G=G-C+p($,f)|0;f<$.length&&(G=G-C+p($+"XXX",f)|0),L=w(L,D,4,(0,s.string32)(G));const q=`url(data:font/opentype;base64,${btoa(L)});`,J=`@font-face {font-family:"${$}";src:${q}}`;this.insertRule(J);const Q=this._document.createElement("div");Q.style.visibility="hidden",Q.style.width=Q.style.height="10px",Q.style.position="absolute",Q.style.top=Q.style.left="0px";for(const Tt of[l.loadedName,$]){const mt=this._document.createElement("span");mt.textContent="Hi",mt.style.fontFamily=Tt,Q.append(mt)}this._document.body.append(Q),V($,()=>{Q.remove(),h.complete()})}}a=new WeakMap;class r{constructor(l,h){let{isEvalSupported:p=!0,disableFontFace:w=!1,ignoreErrors:f=!1,inspectFont:g=null}=h;this.compiledGlyphs=Object.create(null);for(const v in l)this[v]=l[v];this.isEvalSupported=p!==!1,this.disableFontFace=w===!0,this.ignoreErrors=f===!0,this._inspectFont=g}createNativeFontFace(){var h;if(!this.data||this.disableFontFace)return null;let l;if(!this.cssFontInfo)l=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),l=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(h=this._inspectFont)==null||h.call(this,this),l}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const l=(0,s.bytesToString)(this.data),h=`url(data:${this.mimetype};base64,${btoa(l)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${h}}`;else{let f=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(f+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${f}src:${h}}`}return(w=this._inspectFont)==null||w.call(this,this,h),p}getPathGenerator(l,h){if(this.compiledGlyphs[h]!==void 0)return this.compiledGlyphs[h];let p;try{p=l.get(this.loadedName+"_path_"+h)}catch(w){if(!this.ignoreErrors)throw w;return(0,s.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[h]=function(f,g){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const w=[];for(const f of p){const g=f.args!==void 0?f.args.join(","):"";w.push("c.",f.cmd,"(",g,`);
`)}return this.compiledGlyphs[h]=new Function("c","size",w.join(""))}return this.compiledGlyphs[h]=function(w,f){for(const g of p)g.cmd==="scale"&&(g.args=[f,-f]),w[g.cmd].apply(w,g.args)}}}},6062:(i,o,t)=>{var r,a;t.d(o,{Metadata:()=>n});var s=t(4292);class n{constructor(l){x(this,r,void 0);x(this,a,void 0);let{parsedData:h,rawData:p}=l;z(this,r,h),z(this,a,p)}getRaw(){return e(this,a)}get(l){return e(this,r).get(l)??null}getAll(){return(0,s.objectFromMap)(e(this,r))}has(l){return e(this,r).has(l)}}r=new WeakMap,a=new WeakMap},7457:(i,o,t)=>{t.d(o,{PDFNetworkStream:()=>h}),t(4114),t(4628);var s=t(4292),n=t(6490);const r=200,a=206;function m(f){const g=f.response;return typeof g!="string"?g:(0,s.stringToBytes)(g).buffer}class l{constructor(g){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=g,this.isHttp=/^https?:/i.test(g),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(g,v,A){const R={begin:g,end:v};for(const V in A)R[V]=A[V];return this.request(R)}requestFull(g){return this.request(g)}request(g){const v=new XMLHttpRequest,A=this.currXhrId++,R=this.pendingRequests[A]={xhr:v};v.open("GET",this.url),v.withCredentials=this.withCredentials;for(const V in this.httpHeaders){const $=this.httpHeaders[V];$!==void 0&&v.setRequestHeader(V,$)}return this.isHttp&&"begin"in g&&"end"in g?(v.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),R.expectedStatus=a):R.expectedStatus=r,v.responseType="arraybuffer",g.onError&&(v.onerror=function(V){g.onError(v.status)}),v.onreadystatechange=this.onStateChange.bind(this,A),v.onprogress=this.onProgress.bind(this,A),R.onHeadersReceived=g.onHeadersReceived,R.onDone=g.onDone,R.onError=g.onError,R.onProgress=g.onProgress,v.send(null),A}onProgress(g,v){var R;const A=this.pendingRequests[g];A&&((R=A.onProgress)==null||R.call(A,v))}onStateChange(g,v){var L,D,C;const A=this.pendingRequests[g];if(!A)return;const R=A.xhr;if(R.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),R.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],R.status===0&&this.isHttp){(L=A.onError)==null||L.call(A,R.status);return}const V=R.status||r;if(!(V===r&&A.expectedStatus===a)&&V!==A.expectedStatus){(D=A.onError)==null||D.call(A,R.status);return}const $=m(R);if(V===a){const G=R.getResponseHeader("Content-Range"),q=/bytes (\d+)-(\d+)\/(\d+)/.exec(G);A.onDone({begin:parseInt(q[1],10),chunk:$})}else $?A.onDone({begin:0,chunk:$}):(C=A.onError)==null||C.call(A,R.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const v=this.pendingRequests[g].xhr;delete this.pendingRequests[g],v.abort()}}class h{constructor(g){this._source=g,this._manager=new l(g.url,{httpHeaders:g.httpHeaders,withCredentials:g.withCredentials}),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const v=this._rangeRequestReaders.indexOf(g);v>=0&&this._rangeRequestReaders.splice(v,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(g,v){const A=new w(this._manager,g,v);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(g){var v;(v=this._fullRequestReader)==null||v.cancel(g);for(const A of this._rangeRequestReaders.slice(0))A.cancel(g)}}class p{constructor(g,v){this._manager=g;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._fullRequestId=g.requestFull(A),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=v.disableRange||!1,this._contentLength=v.length,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,v=this._manager.getRequestXhr(g),A=$=>v.getResponseHeader($),{allowRangeRequests:R,suggestedLength:V}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});R&&(this._isRangeSupported=!0),this._contentLength=V||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(g),this._headersReceivedCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=(0,n.createResponseStatusError)(g,this._url),this._headersReceivedCapability.reject(this._storedError);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var v;(v=this.onProgress)==null||v.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersReceivedCapability.reject(g);for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(g,v,A){this._manager=g;const R={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._requestId=g.requestRange(v,A,R),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const v=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError=(0,n.createResponseStatusError)(g,this._url);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var v;this.isStreamingSupported||((v=this.onProgress)==null||v.call(this,{loaded:g.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},6490:(i,o,t)=>{t.d(o,{createResponseStatusError:()=>l,extractFilenameFromHeader:()=>m,validateRangeRequestCapabilities:()=>a,validateResponseStatus:()=>h});var s=t(4292);t(4114),t(4979);function n(p){let w=!0,f=g("filename\\*","i").exec(p);if(f){f=f[1];let D=V(f);return D=unescape(D),D=$(D),D=L(D),A(D)}if(f=R(p),f){const D=L(f);return A(D)}if(f=g("filename","i").exec(p),f){f=f[1];let D=V(f);return D=L(D),A(D)}function g(D,C){return new RegExp("(?:^|;)\\s*"+D+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',C)}function v(D,C){if(D){if(!/^[\x00-\xFF]+$/.test(C))return C;try{const G=new TextDecoder(D,{fatal:!0}),q=(0,s.stringToBytes)(C);C=G.decode(q),w=!1}catch{}}return C}function A(D){return w&&/[\x80-\xff]/.test(D)&&(D=v("utf-8",D),w&&(D=v("iso-8859-1",D))),D}function R(D){const C=[];let G;const q=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(G=q.exec(D))!==null;){let[,Q,Tt,mt]=G;if(Q=parseInt(Q,10),Q in C){if(Q===0)break;continue}C[Q]=[Tt,mt]}const J=[];for(let Q=0;Q<C.length&&Q in C;++Q){let[Tt,mt]=C[Q];mt=V(mt),Tt&&(mt=unescape(mt),Q===0&&(mt=$(mt))),J.push(mt)}return J.join("")}function V(D){if(D.startsWith('"')){const C=D.slice(1).split('\\"');for(let G=0;G<C.length;++G){const q=C[G].indexOf('"');q!==-1&&(C[G]=C[G].slice(0,q),C.length=G+1),C[G]=C[G].replaceAll(/\\(.)/g,"$1")}D=C.join('"')}return D}function $(D){const C=D.indexOf("'");if(C===-1)return D;const G=D.slice(0,C),q=D.slice(C+1).replace(/^[^']*'/,"");return v(G,q)}function L(D){return!D.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(D)?D:D.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(C,G,q,J){if(q==="q"||q==="Q")return J=J.replaceAll("_"," "),J=J.replaceAll(/=([0-9a-fA-F]{2})/g,function(Q,Tt){return String.fromCharCode(parseInt(Tt,16))}),v(G,J);try{J=atob(J)}catch{}return v(G,J)})}return""}var r=t(5419);function a(p){let{getResponseHeader:w,isHttp:f,rangeChunkSize:g,disableRange:v}=p;const A={allowRangeRequests:!1,suggestedLength:void 0},R=parseInt(w("Content-Length"),10);return!Number.isInteger(R)||(A.suggestedLength=R,R<=2*g)||v||!f||w("Accept-Ranges")!=="bytes"||(w("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function m(p){const w=p("Content-Disposition");if(w){let f=n(w);if(f.includes("%"))try{f=decodeURIComponent(f)}catch{}if((0,r.isPdfFile)(f))return f}return null}function l(p,w){return p===404||p===0&&w.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+w+'".'):new s.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${w}".`,p)}function h(p){return p===200||p===206}},4786:(i,o,t)=>{t.a(i,async(s,n)=>{try{let A=function(pt){const ot=D.parse(pt);return ot.protocol==="file:"||ot.host?ot:/^[a-z]:[/\\]/i.test(pt)?D.parse(`file:///${pt}`):(ot.host||(ot.protocol="file:"),ot)},R=function(pt,ot){return{protocol:pt.protocol,auth:pt.auth,host:pt.hostname,port:pt.port,path:pt.path,method:"GET",headers:ot}};t.d(o,{PDFNodeStream:()=>G});var r=t(4114),a=t(6573),m=t(8100),l=t(7936),h=t(4628),p=t(7467),w=t(4732),f=t(9577),g=t(4292),v=t(6490);let V,$,L,D;g.isNodeJS&&(V=await As(()=>import("./chunk.js"),[]),$=await As(()=>import("./chunk.js"),[]),L=await As(()=>import("./chunk.js"),[]),D=await As(()=>import("./chunk.js"),[]));const C=/^file:\/\/\/[a-zA-Z]:\//;class G{constructor(ot){this.source=ot,this.url=A(ot.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&ot.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ot;return((ot=this._fullRequestReader)==null?void 0:ot._loaded)??0}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new mt(this):new Q(this),this._fullRequestReader}getRangeReader(ot,ft){if(ft<=this._progressiveDataLength)return null;const gt=this.isFsUrl?new Dt(this,ot,ft):new Tt(this,ot,ft);return this._rangeRequestReaders.push(gt),gt}cancelAllRequests(ot){var ft;(ft=this._fullRequestReader)==null||ft.cancel(ot);for(const gt of this._rangeRequestReaders.slice(0))gt.cancel(ot)}}class q{constructor(ot){this._url=ot.url,this._done=!1,this._storedError=null,this.onProgress=null;const ft=ot.source;this._contentLength=ft.length,this._loaded=0,this._filename=null,this._disableRange=ft.disableRange||!1,this._rangeChunkSize=ft.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ft.disableStream,this._isRangeSupported=!ft.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ft;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ot=this._readableStream.read();return ot===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=ot.length,(ft=this.onProgress)==null||ft.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ot).buffer,done:!1})}cancel(ot){if(!this._readableStream){this._error(ot);return}this._readableStream.destroy(ot)}_error(ot){this._storedError=ot,this._readCapability.resolve()}_setReadableStream(ot){this._readableStream=ot,ot.on("readable",()=>{this._readCapability.resolve()}),ot.on("end",()=>{ot.destroy(),this._done=!0,this._readCapability.resolve()}),ot.on("error",ft=>{this._error(ft)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new g.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class J{constructor(ot){this._url=ot.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ft=ot.source;this._isStreamingSupported=!ft.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ft;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ot=this._readableStream.read();return ot===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=ot.length,(ft=this.onProgress)==null||ft.call(this,{loaded:this._loaded}),{value:new Uint8Array(ot).buffer,done:!1})}cancel(ot){if(!this._readableStream){this._error(ot);return}this._readableStream.destroy(ot)}_error(ot){this._storedError=ot,this._readCapability.resolve()}_setReadableStream(ot){this._readableStream=ot,ot.on("readable",()=>{this._readCapability.resolve()}),ot.on("end",()=>{ot.destroy(),this._done=!0,this._readCapability.resolve()}),ot.on("error",ft=>{this._error(ft)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q extends q{constructor(ot){super(ot);const ft=gt=>{if(gt.statusCode===404){const Ft=new g.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ft,this._headersCapability.reject(Ft);return}this._headersCapability.resolve(),this._setReadableStream(gt);const Z=Ft=>this._readableStream.headers[Ft.toLowerCase()],{allowRangeRequests:at,suggestedLength:Rt}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:Z,isHttp:ot.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=at,this._contentLength=Rt||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(Z)};this._request=null,this._url.protocol==="http:"?this._request=$.request(R(this._url,ot.httpHeaders),ft):this._request=L.request(R(this._url,ot.httpHeaders),ft),this._request.on("error",gt=>{this._storedError=gt,this._headersCapability.reject(gt)}),this._request.end()}}class Tt extends J{constructor(ot,ft,gt){super(ot),this._httpHeaders={};for(const at in ot.httpHeaders){const Rt=ot.httpHeaders[at];Rt!==void 0&&(this._httpHeaders[at]=Rt)}this._httpHeaders.Range=`bytes=${ft}-${gt-1}`;const Z=at=>{if(at.statusCode===404){const Rt=new g.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Rt;return}this._setReadableStream(at)};this._request=null,this._url.protocol==="http:"?this._request=$.request(R(this._url,this._httpHeaders),Z):this._request=L.request(R(this._url,this._httpHeaders),Z),this._request.on("error",at=>{this._storedError=at}),this._request.end()}}class mt extends q{constructor(ot){super(ot);let ft=decodeURIComponent(this._url.path);C.test(this._url.href)&&(ft=ft.replace(/^\//,"")),V.promises.lstat(ft).then(gt=>{this._contentLength=gt.size,this._setReadableStream(V.createReadStream(ft)),this._headersCapability.resolve()},gt=>{gt.code==="ENOENT"&&(gt=new g.MissingPDFException(`Missing PDF "${ft}".`)),this._storedError=gt,this._headersCapability.reject(gt)})}}class Dt extends J{constructor(ot,ft,gt){super(ot);let Z=decodeURIComponent(this._url.path);C.test(this._url.href)&&(Z=Z.replace(/^\//,"")),this._setReadableStream(V.createReadStream(Z,{start:ft,end:gt-1}))}}n()}catch(A){n(A)}},1)},1573:(i,o,t)=>{t.a(i,async(s,n)=>{try{t.d(o,{NodeCMapReaderFactory:()=>L,NodeCanvasFactory:()=>$,NodeFilterFactory:()=>V,NodeStandardFontDataFactory:()=>D});var r=t(6573),a=t(8100),m=t(7936),l=t(7467),h=t(4732),p=t(9577),w=t(2583),f=t(4292);let g,v,A;if(f.isNodeJS){g=await As(()=>import("./chunk.js"),[]);try{v=await As(()=>import("./chunk.js"),[])}catch{}try{A=await As(()=>import("./chunk2.js"),[])}catch{}}(function(){if(globalThis.DOMMatrix||!f.isNodeJS)return;const C=v==null?void 0:v.DOMMatrix;C?globalThis.DOMMatrix=C:(0,f.warn)("Cannot polyfill `DOMMatrix`, rendering may be broken.")})(),function(){if(globalThis.Path2D||!f.isNodeJS)return;const C=v==null?void 0:v.CanvasRenderingContext2D,G=A==null?void 0:A.applyPath2DToCanvasRenderingContext,q=A==null?void 0:A.Path2D;C&&G&&q?(G(C),globalThis.Path2D=q):(0,f.warn)("Cannot polyfill `Path2D`, rendering may be broken.")}();const R=function(C){return g.promises.readFile(C).then(G=>new Uint8Array(G))};class V extends w.BaseFilterFactory{}class $ extends w.BaseCanvasFactory{_createCanvas(G,q){return v.createCanvas(G,q)}}class L extends w.BaseCMapReaderFactory{_fetchData(G,q){return R(G).then(J=>({cMapData:J,compressionType:q}))}}class D extends w.BaseStandardFontDataFactory{_fetchData(G){return R(G)}}n()}catch(g){n(g)}},1)},5626:(i,o,t)=>{var l,h,p,w,f,g,v,A,R,xr;t.d(o,{OptionalContentConfig:()=>m});var s=t(4292),n=t(7651);const r=Symbol("INTERNAL");class a{constructor(L,D){x(this,l,!1);x(this,h,!1);x(this,p,!1);x(this,w,!0);let{name:C,intent:G,usage:q}=D;z(this,l,!!(L&s.RenderingIntentFlag.DISPLAY)),z(this,h,!!(L&s.RenderingIntentFlag.PRINT)),this.name=C,this.intent=G,this.usage=q}get visible(){if(e(this,p))return e(this,w);if(!e(this,w))return!1;const{print:L,view:D}=this.usage;return e(this,l)?(D==null?void 0:D.viewState)!=="OFF":e(this,h)?(L==null?void 0:L.printState)!=="OFF":!0}_setVisible(L,D){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;L!==r&&(0,s.unreachable)("Internal method `_setVisible` called."),z(this,p,C),z(this,w,D)}}l=new WeakMap,h=new WeakMap,p=new WeakMap,w=new WeakMap;class m{constructor(L){x(this,R);x(this,f,null);x(this,g,new Map);x(this,v,null);x(this,A,null);let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.RenderingIntentFlag.DISPLAY;if(this.renderingIntent=D,this.name=null,this.creator=null,L!==null){this.name=L.name,this.creator=L.creator,z(this,A,L.order);for(const C of L.groups)e(this,g).set(C.id,new a(D,C));if(L.baseState==="OFF")for(const C of e(this,g).values())C._setVisible(r,!1);for(const C of L.on)e(this,g).get(C)._setVisible(r,!0);for(const C of L.off)e(this,g).get(C)._setVisible(r,!1);z(this,v,this.getHash())}}isVisible(L){if(e(this,g).size===0)return!0;if(!L)return(0,s.info)("Optional content group not defined."),!0;if(L.type==="OCG")return e(this,g).has(L.id)?e(this,g).get(L.id).visible:((0,s.warn)(`Optional content group not found: ${L.id}`),!0);if(L.type==="OCMD"){if(L.expression)return O(this,R,xr).call(this,L.expression);if(!L.policy||L.policy==="AnyOn"){for(const D of L.ids){if(!e(this,g).has(D))return(0,s.warn)(`Optional content group not found: ${D}`),!0;if(e(this,g).get(D).visible)return!0}return!1}else if(L.policy==="AllOn"){for(const D of L.ids){if(!e(this,g).has(D))return(0,s.warn)(`Optional content group not found: ${D}`),!0;if(!e(this,g).get(D).visible)return!1}return!0}else if(L.policy==="AnyOff"){for(const D of L.ids){if(!e(this,g).has(D))return(0,s.warn)(`Optional content group not found: ${D}`),!0;if(!e(this,g).get(D).visible)return!0}return!1}else if(L.policy==="AllOff"){for(const D of L.ids){if(!e(this,g).has(D))return(0,s.warn)(`Optional content group not found: ${D}`),!0;if(e(this,g).get(D).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${L.policy}.`),!0}return(0,s.warn)(`Unknown group type ${L.type}.`),!0}setVisibility(L){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const C=e(this,g).get(L);if(!C){(0,s.warn)(`Optional content group not found: ${L}`);return}C._setVisible(r,!!D,!0),z(this,f,null)}setOCGState(L){let{state:D,preserveRB:C}=L,G;for(const q of D){switch(q){case"ON":case"OFF":case"Toggle":G=q;continue}const J=e(this,g).get(q);if(J)switch(G){case"ON":J._setVisible(r,!0);break;case"OFF":J._setVisible(r,!1);break;case"Toggle":J._setVisible(r,!J.visible);break}}z(this,f,null)}get hasInitialVisibility(){return e(this,v)===null||this.getHash()===e(this,v)}getOrder(){return e(this,g).size?e(this,A)?e(this,A).slice():[...e(this,g).keys()]:null}getGroups(){return e(this,g).size>0?(0,s.objectFromMap)(e(this,g)):null}getGroup(L){return e(this,g).get(L)||null}getHash(){if(e(this,f)!==null)return e(this,f);const L=new n.MurmurHash3_64;for(const[D,C]of e(this,g))L.update(`${D}:${C.visible}`);return z(this,f,L.hexdigest())}}f=new WeakMap,g=new WeakMap,v=new WeakMap,A=new WeakMap,R=new WeakSet,xr=function(L){const D=L.length;if(D<2)return!0;const C=L[0];for(let G=1;G<D;G++){const q=L[G];let J;if(Array.isArray(q))J=O(this,R,xr).call(this,q);else if(e(this,g).has(q))J=e(this,g).get(q).visible;else return(0,s.warn)(`Optional content group not found: ${q}`),!0;switch(C){case"And":if(!J)return!1;break;case"Or":if(J)return!0;break;case"Not":return!J;default:return!0}}return C==="And"}},6814:(i,o,t)=>{t.d(o,{cleanupTextLayer:()=>w,renderTextLayer:()=>V,updateTextLayer:()=>$}),t(4114),t(4628);var s=t(4292),n=t(5419);const r=1e5,a=30,m=.8,l=new Map;let h=null;function p(){if(!h){const L=document.createElement("canvas");L.className="hiddenCanvasElement",document.body.append(L),h=L.getContext("2d",{alpha:!1})}return h}function w(){h==null||h.canvas.remove(),h=null}function f(L){const D=l.get(L);if(D)return D;const C=p(),G=C.font;C.canvas.width=C.canvas.height=a,C.font=`${a}px ${L}`;const q=C.measureText("");let J=q.fontBoundingBoxAscent,Q=Math.abs(q.fontBoundingBoxDescent);if(J){const mt=J/(J+Q);return l.set(L,mt),C.canvas.width=C.canvas.height=0,C.font=G,mt}C.strokeStyle="red",C.clearRect(0,0,a,a),C.strokeText("g",0,0);let Tt=C.getImageData(0,0,a,a).data;Q=0;for(let mt=Tt.length-1-3;mt>=0;mt-=4)if(Tt[mt]>0){Q=Math.ceil(mt/4/a);break}C.clearRect(0,0,a,a),C.strokeText("A",0,a),Tt=C.getImageData(0,0,a,a).data,J=0;for(let mt=0,Dt=Tt.length;mt<Dt;mt+=4)if(Tt[mt]>0){J=a-Math.floor(mt/4/a);break}if(C.canvas.width=C.canvas.height=0,C.font=G,J){const mt=J/(J+Q);return l.set(L,mt),mt}return l.set(L,m),m}function g(L,D,C){const G=document.createElement("span"),q={angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL,fontSize:0};L._textDivs.push(G);const J=s.Util.transform(L._transform,D.transform);let Q=Math.atan2(J[1],J[0]);const Tt=C[D.fontName];Tt.vertical&&(Q+=Math.PI/2);const mt=L._fontInspectorEnabled&&Tt.fontSubstitution||Tt.fontFamily,Dt=Math.hypot(J[2],J[3]),pt=Dt*f(mt);let ot,ft;Q===0?(ot=J[4],ft=J[5]-pt):(ot=J[4]+pt*Math.sin(Q),ft=J[5]-pt*Math.cos(Q));const gt="calc(var(--scale-factor)*",Z=G.style;L._container===L._rootContainer?(Z.left=`${(100*ot/L._pageWidth).toFixed(2)}%`,Z.top=`${(100*ft/L._pageHeight).toFixed(2)}%`):(Z.left=`${gt}${ot.toFixed(2)}px)`,Z.top=`${gt}${ft.toFixed(2)}px)`),Z.fontSize=`${gt}${Dt.toFixed(2)}px)`,Z.fontFamily=mt,q.fontSize=Dt,G.setAttribute("role","presentation"),G.textContent=D.str,G.dir=D.dir,L._fontInspectorEnabled&&(G.dataset.fontName=Tt.fontSubstitutionLoadedName||D.fontName),Q!==0&&(q.angle=Q*(180/Math.PI));let at=!1;if(D.str.length>1)at=!0;else if(D.str!==" "&&D.transform[0]!==D.transform[3]){const Rt=Math.abs(D.transform[0]),Ft=Math.abs(D.transform[3]);Rt!==Ft&&Math.max(Rt,Ft)/Math.min(Rt,Ft)>1.5&&(at=!0)}at&&(q.canvasWidth=Tt.vertical?D.height:D.width),L._textDivProperties.set(G,q),L._isReadableStream&&L._layoutText(G)}function v(L){const{div:D,scale:C,properties:G,ctx:q,prevFontSize:J,prevFontFamily:Q}=L,{style:Tt}=D;let mt="";if(G.canvasWidth!==0&&G.hasText){const{fontFamily:Dt}=Tt,{canvasWidth:pt,fontSize:ot}=G;(J!==ot||Q!==Dt)&&(q.font=`${ot*C}px ${Dt}`,L.prevFontSize=ot,L.prevFontFamily=Dt);const{width:ft}=q.measureText(D.textContent);ft>0&&(mt=`scaleX(${pt*C/ft})`)}G.angle!==0&&(mt=`rotate(${G.angle}deg) ${mt}`),mt.length>0&&(Tt.transform=mt)}function A(L){if(L._canceled)return;const D=L._textDivs,C=L._capability;if(D.length>r){C.resolve();return}if(!L._isReadableStream)for(const G of D)L._layoutText(G);C.resolve()}class R{constructor(D){var ft;let{textContentSource:C,container:G,viewport:q,textDivs:J,textDivProperties:Q,textContentItemsStr:Tt}=D;this._textContentSource=C,this._isReadableStream=C instanceof ReadableStream,this._container=this._rootContainer=G,this._textDivs=J||[],this._textContentItemsStr=Tt||[],this._fontInspectorEnabled=!!((ft=globalThis.FontInspector)!=null&&ft.enabled),this._reader=null,this._textDivProperties=Q||new WeakMap,this._canceled=!1,this._capability=Promise.withResolvers(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:q.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:p()};const{pageWidth:mt,pageHeight:Dt,pageX:pt,pageY:ot}=q.rawDims;this._transform=[1,0,0,-1,-pt,ot+Dt],this._pageWidth=mt,this._pageHeight=Dt,(0,n.setLayerDimensions)(G,q),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(D,C){for(const G of D){if(G.str===void 0){if(G.type==="beginMarkedContentProps"||G.type==="beginMarkedContent"){const q=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),G.id!==null&&this._container.setAttribute("id",`${G.id}`),q.append(this._container)}else G.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(G.str),g(this,G,C)}}_layoutText(D){const C=this._layoutTextParams.properties=this._textDivProperties.get(D);if(this._layoutTextParams.div=D,v(this._layoutTextParams),C.hasText&&this._container.append(D),C.hasEOL){const G=document.createElement("br");G.setAttribute("role","presentation"),this._container.append(G)}}_render(){const{promise:D,resolve:C,reject:G}=Promise.withResolvers();let q=Object.create(null);if(this._isReadableStream){const J=()=>{this._reader.read().then(Q=>{let{value:Tt,done:mt}=Q;if(mt){C();return}Object.assign(q,Tt.styles),this._processItems(Tt.items,q),J()},G)};this._reader=this._textContentSource.getReader(),J()}else if(this._textContentSource){const{items:J,styles:Q}=this._textContentSource;this._processItems(J,Q),C()}else throw new Error('No "textContentSource" parameter specified.');D.then(()=>{q=null,A(this)},this._capability.reject)}}function V(L){const D=new R(L);return D._render(),D}function $(L){let{container:D,viewport:C,textDivs:G,textDivProperties:q,mustRotate:J=!0,mustRescale:Q=!0}=L;if(J&&(0,n.setLayerDimensions)(D,{rotation:C.rotation}),Q){const Tt=p(),mt={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Tt};for(const Dt of G)mt.properties=q.get(Dt),mt.div=Dt,v(mt)}}},585:(i,o,t)=>{t.d(o,{PDFDataTransportStream:()=>r}),t(4114),t(6573),t(8100),t(7936),t(4628),t(7467),t(4732),t(9577),t(8992),t(7550);var s=t(4292),n=t(5419);class r{constructor(h,p){let{disableRange:w=!1,disableStream:f=!1}=p;(0,s.assert)(h,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:g,initialData:v,progressiveDone:A,contentDispositionFilename:R}=h;if(this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=R,(v==null?void 0:v.length)>0){const V=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(V)}this._pdfDataRangeTransport=h,this._isStreamingSupported=!f,this._isRangeSupported=!w,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],h.addRangeListener((V,$)=>{this._onReceiveData({begin:V,chunk:$})}),h.addProgressListener((V,$)=>{this._onProgress({loaded:V,total:$})}),h.addProgressiveReadListener(V=>{this._onReceiveData({chunk:V})}),h.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),h.transportReady()}_onReceiveData(h){let{begin:p,chunk:w}=h;const f=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;if(p===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const g=this._rangeReaders.some(function(v){return v._begin!==p?!1:(v._enqueue(f),!0)});(0,s.assert)(g,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var h;return((h=this._fullRequestReader)==null?void 0:h._loaded)??0}_onProgress(h){var p,w,f,g;h.total===void 0?(w=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||w.call(p,{loaded:h.loaded}):(g=(f=this._fullRequestReader)==null?void 0:f.onProgress)==null||g.call(f,{loaded:h.loaded,total:h.total})}_onProgressiveDone(){var h;(h=this._fullRequestReader)==null||h.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const p=this._rangeReaders.indexOf(h);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new a(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,p){if(p<=this._progressiveDataLength)return null;const w=new m(this,h,p);return this._pdfDataRangeTransport.requestDataRange(h,p),this._rangeReaders.push(w),w}cancelAllRequests(h){var p;(p=this._fullRequestReader)==null||p.cancel(h);for(const w of this._rangeReaders.slice(0))w.cancel(h);this._pdfDataRangeTransport.abort()}}class a{constructor(h,p){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=h,this._done=w||!1,this._filename=(0,n.isPdfFile)(f)?f:null,this._queuedChunks=p||[],this._loaded=0;for(const g of this._queuedChunks)this._loaded+=g.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=Promise.withResolvers();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(h,p,w){this._stream=h,this._begin=p,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const h=Promise.withResolvers();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},6164:(i,o,t)=>{var n,r;t.d(o,{GlobalWorkerOptions:()=>s});class s{static get workerPort(){return e(this,n)}static set workerPort(m){if(!(typeof Worker<"u"&&m instanceof Worker)&&m!==null)throw new Error("Invalid `workerPort` type.");z(this,n,m)}static get workerSrc(){return e(this,r)}static set workerSrc(m){if(typeof m!="string")throw new Error("Invalid `workerSrc` type.");z(this,r,m)}}n=new WeakMap,r=new WeakMap,x(s,n,null),x(s,r,"")},8284:(i,o,t)=>{t.d(o,{XfaLayer:()=>n}),t(4114);var s=t(2050);class n{static setupStorage(a,m,l,h,p){const w=h.getValue(m,{value:null});switch(l.name){case"textarea":if(w.value!==null&&(a.textContent=w.value),p==="print")break;a.addEventListener("input",f=>{h.setValue(m,{value:f.target.value})});break;case"input":if(l.attributes.type==="radio"||l.attributes.type==="checkbox"){if(w.value===l.attributes.xfaOn?a.setAttribute("checked",!0):w.value===l.attributes.xfaOff&&a.removeAttribute("checked"),p==="print")break;a.addEventListener("change",f=>{h.setValue(m,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&a.setAttribute("value",w.value),p==="print")break;a.addEventListener("input",f=>{h.setValue(m,{value:f.target.value})})}break;case"select":if(w.value!==null){a.setAttribute("value",w.value);for(const f of l.children)f.attributes.value===w.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}a.addEventListener("input",f=>{const g=f.target.options,v=g.selectedIndex===-1?"":g[g.selectedIndex].value;h.setValue(m,{value:v})});break}}static setAttributes(a){let{html:m,element:l,storage:h=null,intent:p,linkService:w}=a;const{attributes:f}=l,g=m instanceof HTMLAnchorElement;f.type==="radio"&&(f.name=`${f.name}-${p}`);for(const[v,A]of Object.entries(f))if(A!=null)switch(v){case"class":A.length&&m.setAttribute(v,A.join(" "));break;case"dataId":break;case"id":m.setAttribute("data-element-id",A);break;case"style":Object.assign(m.style,A);break;case"textContent":m.textContent=A;break;default:(!g||v!=="href"&&v!=="newWindow")&&m.setAttribute(v,A)}g&&w.addLinkAttributes(m,f.href,f.newWindow),h&&f.dataId&&this.setupStorage(m,f.dataId,l,h)}static render(a){var R,V;const m=a.annotationStorage,l=a.linkService,h=a.xfaHtml,p=a.intent||"display",w=document.createElement(h.name);h.attributes&&this.setAttributes({html:w,element:h,intent:p,linkService:l});const f=p!=="richText",g=a.div;if(g.append(w),a.viewport){const $=`matrix(${a.viewport.transform.join(",")})`;g.style.transform=$}f&&g.setAttribute("class","xfaLayer xfaFont");const v=[];if(h.children.length===0){if(h.value){const $=document.createTextNode(h.value);w.append($),f&&s.XfaText.shouldBuildText(h.name)&&v.push($)}return{textDivs:v}}const A=[[h,-1,w]];for(;A.length>0;){const[$,L,D]=A.at(-1);if(L+1===$.children.length){A.pop();continue}const C=$.children[++A.at(-1)[1]];if(C===null)continue;const{name:G}=C;if(G==="#text"){const J=document.createTextNode(C.value);v.push(J),D.append(J);continue}const q=(R=C==null?void 0:C.attributes)!=null&&R.xmlns?document.createElementNS(C.attributes.xmlns,G):document.createElement(G);if(D.append(q),C.attributes&&this.setAttributes({html:q,element:C,storage:m,intent:p,linkService:l}),((V=C.children)==null?void 0:V.length)>0)A.push([C,-1,q]);else if(C.value){const J=document.createTextNode(C.value);f&&s.XfaText.shouldBuildText(G)&&v.push(J),q.append(J)}}for(const $ of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))$.setAttribute("readOnly",!0);return{textDivs:v}}static update(a){const m=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=m,a.div.hidden=!1}}},2050:(i,o,t)=>{t.d(o,{XfaText:()=>s}),t(4114);class s{static textContent(r){const a=[],m={items:a,styles:Object.create(null)};function l(h){var f;if(!h)return;let p=null;const w=h.name;if(w==="#text")p=h.value;else if(s.shouldBuildText(w))(f=h==null?void 0:h.attributes)!=null&&f.textContent?p=h.attributes.textContent:h.value&&(p=h.value);else return;if(p!==null&&a.push({str:p}),!!h.children)for(const g of h.children)l(g)}return l(r),m}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}},1228:(i,o,t)=>{t.a(i,async(s,n)=>{try{t.d(o,{AbortException:()=>r.AbortException,AnnotationEditorLayer:()=>h.AnnotationEditorLayer,AnnotationEditorParamsType:()=>r.AnnotationEditorParamsType,AnnotationEditorType:()=>r.AnnotationEditorType,AnnotationEditorUIManager:()=>p.AnnotationEditorUIManager,AnnotationLayer:()=>w.AnnotationLayer,AnnotationMode:()=>r.AnnotationMode,CMapCompressionType:()=>r.CMapCompressionType,ColorPicker:()=>f.ColorPicker,DOMSVGFactory:()=>m.DOMSVGFactory,DrawLayer:()=>g.DrawLayer,FeatureTest:()=>r.FeatureTest,GlobalWorkerOptions:()=>v.GlobalWorkerOptions,ImageKind:()=>r.ImageKind,InvalidPDFException:()=>r.InvalidPDFException,MissingPDFException:()=>r.MissingPDFException,OPS:()=>r.OPS,Outliner:()=>A.Outliner,PDFDataRangeTransport:()=>a.PDFDataRangeTransport,PDFDateString:()=>m.PDFDateString,PDFWorker:()=>a.PDFWorker,PasswordResponses:()=>r.PasswordResponses,PermissionFlag:()=>r.PermissionFlag,PixelsPerInch:()=>m.PixelsPerInch,RenderingCancelledException:()=>m.RenderingCancelledException,UnexpectedResponseException:()=>r.UnexpectedResponseException,Util:()=>r.Util,VerbosityLevel:()=>r.VerbosityLevel,XfaLayer:()=>R.XfaLayer,build:()=>a.build,createValidAbsoluteUrl:()=>r.createValidAbsoluteUrl,fetchData:()=>m.fetchData,getDocument:()=>a.getDocument,getFilenameFromUrl:()=>m.getFilenameFromUrl,getPdfFilenameFromUrl:()=>m.getPdfFilenameFromUrl,getXfaPageViewport:()=>m.getXfaPageViewport,isDataScheme:()=>m.isDataScheme,isPdfFile:()=>m.isPdfFile,noContextMenu:()=>m.noContextMenu,normalizeUnicode:()=>r.normalizeUnicode,renderTextLayer:()=>l.renderTextLayer,setLayerDimensions:()=>m.setLayerDimensions,shadow:()=>r.shadow,updateTextLayer:()=>l.updateTextLayer,version:()=>a.version});var r=t(4292),a=t(3831),m=t(5419),l=t(6814),h=t(9731),p=t(7830),w=t(6976),f=t(2259),g=t(4047),v=t(6164),A=t(4061),R=t(8284),V=s([a]);a=(V.then?(await V)():V)[0];const $="4.1.392",L="fcb76a78d";n()}catch($){n($)}})},5178:(i,o,t)=>{var l,uo,p,po,f,yn;t.d(o,{MessageHandler:()=>m}),t(4628);var s=t(4292);const n={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new s.AbortException(v.message);case"MissingPDFException":return new s.MissingPDFException(v.message);case"PasswordException":return new s.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new s.UnknownErrorException(v.message,v.details);default:return new s.UnknownErrorException(v.message,v.toString())}}class m{constructor(A,R,V){x(this,l);x(this,p);x(this,f);this.sourceName=A,this.targetName=R,this.comObj=V,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=$=>{const L=$.data;if(L.targetName!==this.sourceName)return;if(L.stream){O(this,p,po).call(this,L);return}if(L.callback){const C=L.callbackId,G=this.callbackCapabilities[C];if(!G)throw new Error(`Cannot resolve callback ${C}`);if(delete this.callbackCapabilities[C],L.callback===n.DATA)G.resolve(L.data);else if(L.callback===n.ERROR)G.reject(a(L.reason));else throw new Error("Unexpected callback case");return}const D=this.actionHandler[L.action];if(!D)throw new Error(`Unknown action from worker: ${L.action}`);if(L.callbackId){const C=this.sourceName,G=L.sourceName;new Promise(function(q){q(D(L.data))}).then(function(q){V.postMessage({sourceName:C,targetName:G,callback:n.DATA,callbackId:L.callbackId,data:q})},function(q){V.postMessage({sourceName:C,targetName:G,callback:n.ERROR,callbackId:L.callbackId,reason:a(q)})});return}if(L.streamId){O(this,l,uo).call(this,L);return}D(L.data)},V.addEventListener("message",this._onComObjOnMessage)}on(A,R){const V=this.actionHandler;if(V[A])throw new Error(`There is already an actionName called "${A}"`);V[A]=R}send(A,R,V){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:R},V)}sendWithPromise(A,R,V){const $=this.callbackId++,L=Promise.withResolvers();this.callbackCapabilities[$]=L;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:$,data:R},V)}catch(D){L.reject(D)}return L.promise}sendWithStream(A,R,V,$){const L=this.streamId++,D=this.sourceName,C=this.targetName,G=this.comObj;return new ReadableStream({start:q=>{const J=Promise.withResolvers();return this.streamControllers[L]={controller:q,startCall:J,pullCall:null,cancelCall:null,isClosed:!1},G.postMessage({sourceName:D,targetName:C,action:A,streamId:L,data:R,desiredSize:q.desiredSize},$),J.promise},pull:q=>{const J=Promise.withResolvers();return this.streamControllers[L].pullCall=J,G.postMessage({sourceName:D,targetName:C,stream:r.PULL,streamId:L,desiredSize:q.desiredSize}),J.promise},cancel:q=>{(0,s.assert)(q instanceof Error,"cancel must have a valid reason");const J=Promise.withResolvers();return this.streamControllers[L].cancelCall=J,this.streamControllers[L].isClosed=!0,G.postMessage({sourceName:D,targetName:C,stream:r.CANCEL,streamId:L,reason:a(q)}),J.promise}},V)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}l=new WeakSet,uo=function(A){const R=A.streamId,V=this.sourceName,$=A.sourceName,L=this.comObj,D=this,C=this.actionHandler[A.action],G={enqueue(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Q=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const Tt=this.desiredSize;this.desiredSize-=J,Tt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),L.postMessage({sourceName:V,targetName:$,stream:r.ENQUEUE,streamId:R,chunk:q},Q)},close(){this.isCancelled||(this.isCancelled=!0,L.postMessage({sourceName:V,targetName:$,stream:r.CLOSE,streamId:R}),delete D.streamSinks[R])},error(q){(0,s.assert)(q instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,L.postMessage({sourceName:V,targetName:$,stream:r.ERROR,streamId:R,reason:a(q)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};G.sinkCapability.resolve(),G.ready=G.sinkCapability.promise,this.streamSinks[R]=G,new Promise(function(q){q(C(A.data,G))}).then(function(){L.postMessage({sourceName:V,targetName:$,stream:r.START_COMPLETE,streamId:R,success:!0})},function(q){L.postMessage({sourceName:V,targetName:$,stream:r.START_COMPLETE,streamId:R,reason:a(q)})})},p=new WeakSet,po=function(A){const R=A.streamId,V=this.sourceName,$=A.sourceName,L=this.comObj,D=this.streamControllers[R],C=this.streamSinks[R];switch(A.stream){case r.START_COMPLETE:A.success?D.startCall.resolve():D.startCall.reject(a(A.reason));break;case r.PULL_COMPLETE:A.success?D.pullCall.resolve():D.pullCall.reject(a(A.reason));break;case r.PULL:if(!C){L.postMessage({sourceName:V,targetName:$,stream:r.PULL_COMPLETE,streamId:R,success:!0});break}C.desiredSize<=0&&A.desiredSize>0&&C.sinkCapability.resolve(),C.desiredSize=A.desiredSize,new Promise(function(G){var q;G((q=C.onPull)==null?void 0:q.call(C))}).then(function(){L.postMessage({sourceName:V,targetName:$,stream:r.PULL_COMPLETE,streamId:R,success:!0})},function(G){L.postMessage({sourceName:V,targetName:$,stream:r.PULL_COMPLETE,streamId:R,reason:a(G)})});break;case r.ENQUEUE:if((0,s.assert)(D,"enqueue should have stream controller"),D.isClosed)break;D.controller.enqueue(A.chunk);break;case r.CLOSE:if((0,s.assert)(D,"close should have stream controller"),D.isClosed)break;D.isClosed=!0,D.controller.close(),O(this,f,yn).call(this,D,R);break;case r.ERROR:(0,s.assert)(D,"error should have stream controller"),D.controller.error(a(A.reason)),O(this,f,yn).call(this,D,R);break;case r.CANCEL_COMPLETE:A.success?D.cancelCall.resolve():D.cancelCall.reject(a(A.reason)),O(this,f,yn).call(this,D,R);break;case r.CANCEL:if(!C)break;new Promise(function(G){var q;G((q=C.onCancel)==null?void 0:q.call(C,a(A.reason)))}).then(function(){L.postMessage({sourceName:V,targetName:$,stream:r.CANCEL_COMPLETE,streamId:R,success:!0})},function(G){L.postMessage({sourceName:V,targetName:$,stream:r.CANCEL_COMPLETE,streamId:R,reason:a(G)})}),C.sinkCapability.reject(a(A.reason)),C.isCancelled=!0,delete this.streamSinks[R];break;default:throw new Error("Unexpected stream case")}},f=new WeakSet,yn=async function(A,R){var V,$,L;await Promise.allSettled([(V=A.startCall)==null?void 0:V.promise,($=A.pullCall)==null?void 0:$.promise,(L=A.cancelCall)==null?void 0:L.promise]),delete this.streamControllers[R]}},7651:(i,o,t)=>{t.d(o,{MurmurHash3_64:()=>a}),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577);const s=3285377520,n=4294901760,r=65535;class a{constructor(l){this.h1=l?l&4294967295:s,this.h2=l?l&4294967295:s}update(l){let h,p;if(typeof l=="string"){h=new Uint8Array(l.length*2),p=0;for(let G=0,q=l.length;G<q;G++){const J=l.charCodeAt(G);J<=255?h[p++]=J:(h[p++]=J>>>8,h[p++]=J&255)}}else if(ArrayBuffer.isView(l))h=l.slice(),p=h.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const w=p>>2,f=p-w*4,g=new Uint32Array(h.buffer,0,w);let v=0,A=0,R=this.h1,V=this.h2;const $=3432918353,L=461845907,D=$&r,C=L&r;for(let G=0;G<w;G++)G&1?(v=g[G],v=v*$&n|v*D&r,v=v<<15|v>>>17,v=v*L&n|v*C&r,R^=v,R=R<<13|R>>>19,R=R*5+3864292196):(A=g[G],A=A*$&n|A*D&r,A=A<<15|A>>>17,A=A*L&n|A*C&r,V^=A,V=V<<13|V>>>19,V=V*5+3864292196);switch(v=0,f){case 3:v^=h[w*4+2]<<16;case 2:v^=h[w*4+1]<<8;case 1:v^=h[w*4],v=v*$&n|v*D&r,v=v<<15|v>>>17,v=v*L&n|v*C&r,w&1?R^=v:V^=v}this.h1=R,this.h2=V}hexdigest(){let l=this.h1,h=this.h2;return l^=h>>>1,l=l*3981806797&n|l*36045&r,h=h*4283543511&n|((h<<16|l>>>16)*2950163797&n)>>>16,l^=h>>>1,l=l*444984403&n|l*60499&r,h=h*3301882366&n|((h<<16|l>>>16)*3120437893&n)>>>16,l^=h>>>1,(l>>>0).toString(16).padStart(8,"0")+(h>>>0).toString(16).padStart(8,"0")}}},4292:(i,o,t)=>{var y,bn,I,Sr;t.d(o,{AbortException:()=>ae,AnnotationBorderStyleType:()=>V,AnnotationEditorParamsType:()=>f,AnnotationEditorPrefix:()=>p,AnnotationEditorType:()=>w,AnnotationMode:()=>h,AnnotationPrefix:()=>k,AnnotationType:()=>R,BaseException:()=>gt,CMapCompressionType:()=>L,FONT_IDENTITY_MATRIX:()=>r,FeatureTest:()=>le,FormatError:()=>Qt,IDENTITY_MATRIX:()=>n,ImageKind:()=>A,InvalidPDFException:()=>Rt,LINE_FACTOR:()=>m,MAX_IMAGE_SIZE_TO_CACHE:()=>a,MissingPDFException:()=>Ft,OPS:()=>D,PasswordException:()=>Z,PasswordResponses:()=>C,PermissionFlag:()=>g,RenderingIntentFlag:()=>l,TextRenderingMode:()=>v,UnexpectedResponseException:()=>Vt,UnknownErrorException:()=>at,Util:()=>he,VerbosityLevel:()=>$,assert:()=>Dt,bytesToString:()=>Ae,createValidAbsoluteUrl:()=>ot,getUuid:()=>E,getVerbosityLevel:()=>J,info:()=>Q,isNodeJS:()=>s,normalizeUnicode:()=>u,objectFromMap:()=>It,setVerbosityLevel:()=>q,shadow:()=>ft,string32:()=>Bt,stringToBytes:()=>me,unreachable:()=>mt,warn:()=>Tt}),t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(4603),t(7566),t(8721);const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),n=[1,0,0,1,0,0],r=[.001,0,0,.001,0,0],a=1e7,m=1.35,l={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},p="pdfjs_internal_editor_",w={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},f={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},A={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},R={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},V={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},$={ERRORS:0,WARNINGS:1,INFOS:5},L={NONE:0,BINARY:1},D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},C={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let G=$.WARNINGS;function q(S){Number.isInteger(S)&&(G=S)}function J(){return G}function Q(S){G>=$.INFOS&&console.log(`Info: ${S}`)}function Tt(S){G>=$.WARNINGS&&console.log(`Warning: ${S}`)}function mt(S){throw new Error(S)}function Dt(S,b){S||mt(b)}function pt(S){switch(S==null?void 0:S.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ot(S){var j;let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!S)return null;try{if(_&&typeof S=="string"&&(_.addDefaultProtocol&&S.startsWith("www.")&&((j=S.match(/\./g))==null?void 0:j.length)>=2&&(S=`http://${S}`),_.tryConvertEncoding))try{S=Xt(S)}catch{}const tt=b?new URL(S,b):new URL(S);if(pt(tt))return tt}catch{}return null}function ft(S,b,_){let j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Object.defineProperty(S,b,{value:_,enumerable:!j,configurable:!0,writable:!1}),_}const gt=function(){function S(b,_){this.constructor===S&&mt("Cannot initialize BaseException."),this.message=b,this.name=_}return S.prototype=new Error,S.constructor=S,S}();class Z extends gt{constructor(b,_){super(b,"PasswordException"),this.code=_}}class at extends gt{constructor(b,_){super(b,"UnknownErrorException"),this.details=_}}class Rt extends gt{constructor(b){super(b,"InvalidPDFException")}}class Ft extends gt{constructor(b){super(b,"MissingPDFException")}}class Vt extends gt{constructor(b,_){super(b,"UnexpectedResponseException"),this.status=_}}class Qt extends gt{constructor(b){super(b,"FormatError")}}class ae extends gt{constructor(b){super(b,"AbortException")}}function Ae(S){(typeof S!="object"||(S==null?void 0:S.length)===void 0)&&mt("Invalid argument for bytesToString");const b=S.length,_=8192;if(b<_)return String.fromCharCode.apply(null,S);const j=[];for(let tt=0;tt<b;tt+=_){const K=Math.min(tt+_,b),rt=S.subarray(tt,K);j.push(String.fromCharCode.apply(null,rt))}return j.join("")}function me(S){typeof S!="string"&&mt("Invalid argument for stringToBytes");const b=S.length,_=new Uint8Array(b);for(let j=0;j<b;++j)_[j]=S.charCodeAt(j)&255;return _}function Bt(S){return String.fromCharCode(S>>24&255,S>>16&255,S>>8&255,S&255)}function It(S){const b=Object.create(null);for(const[_,j]of S)b[_]=j;return b}function St(){const S=new Uint8Array(4);return S[0]=1,new Uint32Array(S.buffer,0,1)[0]===1}function qt(){try{return new Function(""),!0}catch{return!1}}class le{static get isLittleEndian(){return ft(this,"isLittleEndian",St())}static get isEvalSupported(){return ft(this,"isEvalSupported",qt())}static get isOffscreenCanvasSupported(){return ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ft(this,"platform",{isMac:navigator.platform.includes("Mac")}):ft(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var b,_;return ft(this,"isCSSRoundSupported",(_=(b=globalThis.CSS)==null?void 0:b.supports)==null?void 0:_.call(b,"width: round(1.5px, 1px)"))}}const jt=Array.from(Array(256).keys(),S=>S.toString(16).padStart(2,"0"));class he{static makeHexColor(b,_,j){return`#${jt[b]}${jt[_]}${jt[j]}`}static scaleMinMax(b,_){let j;b[0]?(b[0]<0&&(j=_[0],_[0]=_[2],_[2]=j),_[0]*=b[0],_[2]*=b[0],b[3]<0&&(j=_[1],_[1]=_[3],_[3]=j),_[1]*=b[3],_[3]*=b[3]):(j=_[0],_[0]=_[1],_[1]=j,j=_[2],_[2]=_[3],_[3]=j,b[1]<0&&(j=_[1],_[1]=_[3],_[3]=j),_[1]*=b[1],_[3]*=b[1],b[2]<0&&(j=_[0],_[0]=_[2],_[2]=j),_[0]*=b[2],_[2]*=b[2]),_[0]+=b[4],_[1]+=b[5],_[2]+=b[4],_[3]+=b[5]}static transform(b,_){return[b[0]*_[0]+b[2]*_[1],b[1]*_[0]+b[3]*_[1],b[0]*_[2]+b[2]*_[3],b[1]*_[2]+b[3]*_[3],b[0]*_[4]+b[2]*_[5]+b[4],b[1]*_[4]+b[3]*_[5]+b[5]]}static applyTransform(b,_){const j=b[0]*_[0]+b[1]*_[2]+_[4],tt=b[0]*_[1]+b[1]*_[3]+_[5];return[j,tt]}static applyInverseTransform(b,_){const j=_[0]*_[3]-_[1]*_[2],tt=(b[0]*_[3]-b[1]*_[2]+_[2]*_[5]-_[4]*_[3])/j,K=(-b[0]*_[1]+b[1]*_[0]+_[4]*_[1]-_[5]*_[0])/j;return[tt,K]}static getAxialAlignedBoundingBox(b,_){const j=this.applyTransform(b,_),tt=this.applyTransform(b.slice(2,4),_),K=this.applyTransform([b[0],b[3]],_),rt=this.applyTransform([b[2],b[1]],_);return[Math.min(j[0],tt[0],K[0],rt[0]),Math.min(j[1],tt[1],K[1],rt[1]),Math.max(j[0],tt[0],K[0],rt[0]),Math.max(j[1],tt[1],K[1],rt[1])]}static inverseTransform(b){const _=b[0]*b[3]-b[1]*b[2];return[b[3]/_,-b[1]/_,-b[2]/_,b[0]/_,(b[2]*b[5]-b[4]*b[3])/_,(b[4]*b[1]-b[5]*b[0])/_]}static singularValueDecompose2dScale(b){const _=[b[0],b[2],b[1],b[3]],j=b[0]*_[0]+b[1]*_[2],tt=b[0]*_[1]+b[1]*_[3],K=b[2]*_[0]+b[3]*_[2],rt=b[2]*_[1]+b[3]*_[3],ct=(j+rt)/2,At=Math.sqrt((j+rt)**2-4*(j*rt-K*tt))/2,Et=ct+At||1,yt=ct-At||1;return[Math.sqrt(Et),Math.sqrt(yt)]}static normalizeRect(b){const _=b.slice(0);return b[0]>b[2]&&(_[0]=b[2],_[2]=b[0]),b[1]>b[3]&&(_[1]=b[3],_[3]=b[1]),_}static intersect(b,_){const j=Math.max(Math.min(b[0],b[2]),Math.min(_[0],_[2])),tt=Math.min(Math.max(b[0],b[2]),Math.max(_[0],_[2]));if(j>tt)return null;const K=Math.max(Math.min(b[1],b[3]),Math.min(_[1],_[3])),rt=Math.min(Math.max(b[1],b[3]),Math.max(_[1],_[3]));return K>rt?null:[j,K,tt,rt]}static bezierBoundingBox(b,_,j,tt,K,rt,ct,At,Et){return Et?(Et[0]=Math.min(Et[0],b,ct),Et[1]=Math.min(Et[1],_,At),Et[2]=Math.max(Et[2],b,ct),Et[3]=Math.max(Et[3],_,At)):Et=[Math.min(b,ct),Math.min(_,At),Math.max(b,ct),Math.max(_,At)],O(this,I,Sr).call(this,b,j,K,ct,_,tt,rt,At,3*(-b+3*(j-K)+ct),6*(b-2*j+K),3*(j-b),Et),O(this,I,Sr).call(this,b,j,K,ct,_,tt,rt,At,3*(-_+3*(tt-rt)+At),6*(_-2*tt+rt),3*(tt-_),Et),Et}}y=new WeakSet,bn=function(b,_,j,tt,K,rt,ct,At,Et,yt){if(Et<=0||Et>=1)return;const kt=1-Et,U=Et*Et,et=U*Et,ht=kt*(kt*(kt*b+3*Et*_)+3*U*j)+et*tt,vt=kt*(kt*(kt*K+3*Et*rt)+3*U*ct)+et*At;yt[0]=Math.min(yt[0],ht),yt[1]=Math.min(yt[1],vt),yt[2]=Math.max(yt[2],ht),yt[3]=Math.max(yt[3],vt)},I=new WeakSet,Sr=function(b,_,j,tt,K,rt,ct,At,Et,yt,kt,U){if(Math.abs(Et)<1e-12){Math.abs(yt)>=1e-12&&O(this,y,bn).call(this,b,_,j,tt,K,rt,ct,At,-kt/yt,U);return}const et=yt**2-4*kt*Et;if(et<0)return;const ht=Math.sqrt(et),vt=2*Et;O(this,y,bn).call(this,b,_,j,tt,K,rt,ct,At,(-yt+ht)/vt,U),O(this,y,bn).call(this,b,_,j,tt,K,rt,ct,At,(-yt-ht)/vt,U)},x(he,y),x(he,I);function Xt(S){return decodeURIComponent(escape(S))}let it=null,c=null;function u(S){return it||(it=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,c=new Map([["\uFB05","\u017Ft"]])),S.replaceAll(it,(b,_,j)=>_?_.normalize("NFKC"):c.get(j))}function E(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const S=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(S);else for(let b=0;b<32;b++)S[b]=Math.floor(Math.random()*255);return Ae(S)}const k="pdfjs_internal_id_"}},Or={};function ks(i){var o=Or[i];if(o!==void 0)return o.exports;var t=Or[i]={exports:{}};return Go[i].call(t.exports,t,t.exports,ks),t.exports}(()=>{var i=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",o=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=r=>{r&&r.d<1&&(r.d=1,r.forEach(a=>a.r--),r.forEach(a=>a.r--?a.r++:a()))},n=r=>r.map(a=>{if(a!==null&&typeof a=="object"){if(a[i])return a;if(a.then){var m=[];m.d=0,a.then(p=>{l[o]=p,s(m)},p=>{l[t]=p,s(m)});var l={};return l[i]=p=>p(m),l}}var h={};return h[i]=p=>{},h[o]=a,h});ks.a=(r,a,m)=>{var l;m&&((l=[]).d=-1);var h=new Set,p=r.exports,w,f,g,v=new Promise((A,R)=>{g=R,f=A});v[o]=p,v[i]=A=>(l&&A(l),h.forEach(A),v.catch(R=>{})),r.exports=v,a(A=>{w=n(A);var R,V=()=>w.map(L=>{if(L[t])throw L[t];return L[o]}),$=new Promise(L=>{R=()=>L(V),R.r=0;var D=C=>C!==l&&!h.has(C)&&(h.add(C),C&&!C.d&&(R.r++,C.push(R)));w.map(C=>C[i](D))});return R.r?$:V()},A=>(A?g(v[t]=A):f(p),s(l))),l&&l.d<0&&(l.d=0)}})(),ks.d=(i,o)=>{for(var t in o)ks.o(o,t)&&!ks.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:o[t]})},ks.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o);var fe=ks(1228);fe=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=fe),fe.AbortException,fe.AnnotationEditorLayer,fe.AnnotationEditorParamsType,fe.AnnotationEditorType,fe.AnnotationEditorUIManager,fe.AnnotationLayer,fe.AnnotationMode,fe.CMapCompressionType,fe.ColorPicker,fe.DOMSVGFactory,fe.DrawLayer,fe.FeatureTest;var Vo=fe.GlobalWorkerOptions;fe.ImageKind,fe.InvalidPDFException,fe.MissingPDFException,fe.OPS,fe.Outliner,fe.PDFDataRangeTransport,fe.PDFDateString,fe.PDFWorker,fe.PasswordResponses,fe.PermissionFlag,fe.PixelsPerInch,fe.RenderingCancelledException,fe.UnexpectedResponseException,fe.Util,fe.VerbosityLevel,fe.XfaLayer,fe.build,fe.createValidAbsoluteUrl,fe.fetchData;var Wo=fe.getDocument;fe.getFilenameFromUrl,fe.getPdfFilenameFromUrl,fe.getXfaPageViewport,fe.isDataScheme,fe.isPdfFile,fe.noContextMenu,fe.normalizeUnicode,fe.renderTextLayer,fe.setLayerDimensions,fe.shadow,fe.updateTextLayer,fe.version;const Xo="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-cdn/cdn/cmaps/",Ko="https://cdn.jsdelivr.net/gh/DaimlarTech/blitz-ui-cdn/cdn/pdf-regacy.worker.mjs";class Hr{constructor(o,t=2,s=async(n,r)=>{}){if(!o||!o.dataset.url)throw new Error("PdfConvert: failed to instanciate");this.element=o,this.url=o.dataset.url,this.scale=t,this.data=[],this.callback=s}async init(){fetch(this.url,{headers:{"Content-Type":"application/pdf"}}).then(o=>o.blob()).then(o=>{var t=new Blob([o],{type:"application/pdf"});return Br(t)}).then(o=>this.convertFiles(o)).catch(o=>{this.loading=!1,this.error=o})}blobInit(){return new Promise((o,t)=>{var s=jr(this.url,"application/pdf");Br(s).then(n=>this.convertFiles(n)).then(()=>o()).catch(n=>{this.loading=!1,this.error=n})})}convertFiles(o){return new Promise((t,s)=>{Vo.workerSrc=Ko;const n=Wo({data:atob(o),cMapUrl:Xo,cMapPacked:!0});if(n){let r;n.onProgress=a=>{a.loaded&&(r&&clearTimeout(r),r=setTimeout(()=>{this.element.querySelector("img")},1e4))},n.promise.then(async a=>{for(let m=1;m<=a.numPages;m++)await this.pdf2png(m,a)},a=>{console.error(a)}).then(async()=>{await this.callback(this.data,this.element),t()})}else s()})}pdf2png(o,t){const s=this.scale,n=this.data;return new Promise(r=>{t.getPage(o).then(function(a){var m=a.getViewport({scale:s});let l=100/72;var h=document.createElement("canvas"),p=h.getContext("2d");h.height=m.height*l,h.width=m.width*l;var w={canvasContext:p,viewport:m,transform:[l,0,0,l,0,0]},f=a.render(w);f.promise.then(()=>{n.push(h.toDataURL("image/png")),r()})})})}}function Yo(i,o){var t="application/octet-stream";if(o=="pdf")var s=jr(i,t);else return;var n=(window.URL||window.webkitURL).createObjectURL(s);return n}function jr(i,o){const t=atob(i),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return new Blob([s.buffer],{type:o})}function Br(i){return new Promise(o=>{const t=new FileReader;t.readAsDataURL(i),t.onload=()=>{o(t.result.replace("data:application/pdf;base64,",""))}})}document.querySelectorAll('[data-role="bs64-img-display"]').forEach(i=>{const o=i.dataset.fileData,t="data:image/"+i.dataset.extension+";base64,"+o;i.src=t}),document.querySelectorAll('[data-role="bs64-img-download"]').forEach(i=>{const o=i.dataset.fileData,t=i.dataset.extension,s=Yo(o,t);i.removeAttribute("data-file-data"),i.removeAttribute("data-extension"),i.download=i.dataset.download??`test.${t}`,i.setAttribute("target","_blank"),i.href=s});const $r=document.querySelectorAll('[data-role="pdf-display"]');if($r.length>0){const i=Array.from($r),o=async(t,s)=>{const n=document.createElement("div");n.classList.add("pdf-preview__container");for(const r of t)await new Promise(a=>{const m=document.createElement("img");m.classList.add("pdf__img"),m.onload=()=>{n.appendChild(m),s.innerHTML=null,s.appendChild(n),a()},m.src=r})};for(const t of i){const s=new Hr(t,2,o);t.dataset.value==="blob"?await s.blobInit():await s.init()}}const zr=document.querySelectorAll('[data-role="download-document-dialog"]');if(zr.length>0){const i=Array.from(zr);for(const o of i){const t=document.querySelector(o.dataset.target),s=t.querySelector('[data-role="dialog-dismiss"]'),n=o.querySelector(".download-document__value"),r=o.querySelector('input[type="hidden"]'),a=o.querySelector("a"),m=t.querySelector(".scroll-check>button"),l=t.querySelector('input[type="checkbox"]'),h=t.querySelector(".dialog__body"),p=t.querySelector(".pdf-preview");l&&m&&(l.addEventListener("change",v=>{m.disabled=!v.target.checked}),m.addEventListener("click",v=>{a.click(),s.click();const A=new Date().toISOString();r.value=A,r.dispatchEvent(new Event("change")),n.textContent=`\u627F\u8AFE\u6E08\u307F ${A.slice(0,10)}`}));const w=()=>{w.read||!l||(w.read=Math.abs(h.scrollHeight-h.clientHeight-h.scrollTop)<3,w.read&&l&&(l.disabled=!1))},f=async(v,A)=>{const R=document.createElement("div");R.classList.add("pdf-preview__container");let V=0;for(const $ of v)await new Promise(L=>{const D=document.createElement("img");D.classList.add("pdf__img"),D.onload=()=>{if(R.appendChild(D),V===v.length-1){if(l){let C=new MutationObserver(function(G){A.contains(D)&&(w(),window.addEventListener("resize",w),h.addEventListener("scroll",w),C.disconnect())});C.observe(A,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}A.innerHTML=null,A.appendChild(R)}L()},D.src=$}),V+=1},g=new Hr(p,2,f);o.dataset.value==="blob"?await g.blobInit():await g.init()}}document.querySelectorAll('[data-role="sitefile-pdf-download"]').forEach(i=>{fetch(i.dataset.url,{headers:{"Content-Type":"application/pdf"}}).then(o=>o.blob()).then(o=>{var t=new Blob([o],{type:"application/octet-stream"});i.href=(window.URL||window.webkitURL).createObjectURL(t)})}),document.querySelectorAll(".schedule__status").forEach(i=>{if(i.dataset){const o=new Date,t=new Date(i.dataset.start),s=new Date(i.dataset.end);t!=="Invalid Date"&&s!=="Invalid Date"?o>s?(i.classList.remove("schedule__status_yet"),i.classList.add("schedule__status_complete")):t<=o&&o<=s&&(i.classList.remove("schedule__status_yet"),i.classList.add("schedule__status_current")):console.log("invalid date!",`
 start: ${t}`,`
end: ${s}`)}else console.log(i.dataset)});const Jo=document.querySelectorAll('[data-role="short-schedule"]'),Ur=["\u632F\u8FBC\u671F\u9650\u65E5\u6642","\u518D\u52DF\u96C6\u958B\u59CB\u65E5","\u518D\u52DF\u96C6\u7D42\u4E86\u65E5"];Jo.forEach(i=>{const o=i.dataset.value.split(","),t=i.dataset.type??"normal",s=i.dataset.type??"first-come",n=Qo(t,s);let r=[],a="";const m=new Date,l=new Date;l.setHours(0,0,0,0),o.forEach((w,f)=>{const g=new Date(w),v=isNaN(g),A=Ur.includes(n[f]);if(v?a="null":String(g.getFullYear()),!v&&a!=="yet"){const V=m.getTime()-g.getTime(),$=l.getTime()-g.getTime(),L=A?V:$;a=L<0?"yet":L>24*36e5?"complete":"current"}const R={year:v?"--":g.getFullYear(),month:v?"--":g.getMonth()+1,date:v?"--":g.getDate(),hour:v?"--":("00"+g.getHours()).slice(-2),minute:v?"--":("00"+g.getMinutes()).slice(-2),status:a,lastRaw:f===n.length-1,hasTime:Ur.includes(n[f]),label:n[f]};r.push(R)});let h="",p="";r.forEach((w,f,g)=>{const v=p!==w.year;f!==0&&v&&(h+="</div></div>"),v&&(p=w.year,h+=`                <div class="fund-shcedule-short__row">                     <div class="fund-schedule-short__year">                         ${p}                     </div>                 <div class="fund-schedule-short__items">             `),h+=w.lastRaw?'<div class="fund-schedule-short__content fund-schedule-short__content_last">':'<div class="fund-schedule-short__content">',h+=`<span class="fund-schedule-short__values">                     <span class="fund-schedule-short__value format format_unit" data-format="\u6708">${w.month}</span>                    <span class="fund-schedule-short__value format format_unit" data-format="\u65E5">${w.date}</span>                `,w.hasTime&&(h+=`<div class="fund-schedule-short__time">${w.hour}:${w.minute}</div>`),h+=`   </span>                 <div class="schedule__status schedule__status_${w.status}"></div>                 <span class="fund-schedule-short__label">${w.label}</span>                 </div>                 `,f===g.length-1&&(h+="</div></div>")}),i.innerHTML=h});function Qo(i="",o=""){const t=["\u632F\u8FBC\u671F\u9650\u65E5\u6642","\u904B\u7528\u958B\u59CB\u4E88\u5B9A\u65E5","\u904B\u7528\u7D42\u4E86\u4E88\u5B9A\u65E5","\u511F\u9084\u4E88\u5B9A\u65E5"];return o==="lottery"&&t.unshift("\u62BD\u9078\u4E88\u5B9A\u65E5","\u30AD\u30E3\u30F3\u30BB\u30EB\u5F85\u3061\u62BD\u9078\u4E88\u5B9A\u65E5"),i==="restart"&&t.unshift("\u518D\u52DF\u96C6\u958B\u59CB\u65E5","\u518D\u52DF\u96C6\u7D42\u4E86\u65E5"),t}var $s=function(){return $s=Object.assign||function(i){for(var o,t=1,s=arguments.length;t<s;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n]);return i},$s.apply(this,arguments)};function qr(i,o,t){if(t||arguments.length===2)for(var s,n=0,r=o.length;n<r;n++)!s&&n in o||(s||(s=Array.prototype.slice.call(o,0,n)),s[n]=o[n]);return i.concat(s||Array.prototype.slice.call(o))}function Gr(i){return Array.prototype.slice.call(i)}function Vr(i,o){var t=Math.floor(i);return t===o||t+1===o?i:o}function Wr(){return Date.now()}function En(i,o,t){if(o="data-keen-slider-"+o,t===null)return i.removeAttribute(o);i.setAttribute(o,t||"")}function Oi(i,o){return o=o||document,typeof i=="function"&&(i=i(o)),Array.isArray(i)?i:typeof i=="string"?Gr(o.querySelectorAll(i)):i instanceof HTMLElement?[i]:i instanceof NodeList?Gr(i):[]}function ai(i){i.raw&&(i=i.raw),i.cancelable&&!i.defaultPrevented&&i.preventDefault()}function oi(i){i.raw&&(i=i.raw),i.stopPropagation&&i.stopPropagation()}function Xr(){var i=[];return{add:function(o,t,s,n){o.addListener?o.addListener(s):o.addEventListener(t,s,n),i.push([o,t,s,n])},input:function(o,t,s,n){this.add(o,t,function(r){return function(a){a.nativeEvent&&(a=a.nativeEvent);var m=a.changedTouches||[],l=a.targetTouches||[],h=a.detail&&a.detail.x?a.detail:null;return r({id:h?h.identifier?h.identifier:"i":l[0]?l[0]?l[0].identifier:"e":"d",idChanged:h?h.identifier?h.identifier:"i":m[0]?m[0]?m[0].identifier:"e":"d",raw:a,x:h&&h.x?h.x:l[0]?l[0].screenX:h?h.x:a.pageX,y:h&&h.y?h.y:l[0]?l[0].screenY:h?h.y:a.pageY})}}(s),n)},purge:function(){i.forEach(function(o){o[0].removeListener?o[0].removeListener(o[2]):o[0].removeEventListener(o[1],o[2],o[3])}),i=[]}}}function xn(i,o,t){return Math.min(Math.max(i,o),t)}function rs(i){return(i>0?1:0)-(i<0?1:0)||+i}function Kr(i){var o=i.getBoundingClientRect();return{height:Vr(o.height,i.offsetHeight),width:Vr(o.width,i.offsetWidth)}}function Je(i,o,t,s){var n=i&&i[o];return n==null?t:s&&typeof n=="function"?n():n}function ns(i){return Math.round(1e6*i)/1e6}function Zo(i){var o,t,s,n,r,a;function m(f){a||(a=f),l(!0);var g=f-a;g>s&&(g=s);var v=n[t];if(v[3]<g)return t++,m(f);var A=v[2],R=v[4],V=v[0],$=v[1]*(0,v[5])(R===0?1:(g-A)/R);if($&&i.track.to(V+$),g<s)return p();a=null,l(!1),h(null),i.emit("animationEnded")}function l(f){o.active=f}function h(f){o.targetIdx=f}function p(){var f;f=m,r=window.requestAnimationFrame(f)}function w(){var f;f=r,window.cancelAnimationFrame(f),l(!1),h(null),a&&i.emit("animationStopped"),a=null}return o={active:!1,start:function(f){if(w(),i.track.details){var g=0,v=i.track.details.position;t=0,s=0,n=f.map(function(A){var R,V=Number(v),$=(R=A.earlyExit)!==null&&R!==void 0?R:A.duration,L=A.easing,D=A.distance*L($/A.duration)||0;v+=D;var C=s;return s+=$,g+=D,[V,A.distance,C,s,A.duration,L]}),h(i.track.distToIdx(g)),p(),i.emit("animationStarted")}},stop:w,targetIdx:null}}function th(i){var o,t,s,n,r,a,m,l,h,p,w,f,g,v,A=1/0,R=[],V=null,$=0;function L(ot){Dt($+ot)}function D(ot){var ft=C($+ot).abs;return J(ft)?ft:null}function C(ot){var ft=Math.floor(Math.abs(ns(ot/t))),gt=ns((ot%t+t)%t);gt===t&&(gt=0);var Z=rs(ot),at=m.indexOf(qr([],m,!0).reduce(function(Ft,Vt){return Math.abs(Vt-gt)<Math.abs(Ft-gt)?Vt:Ft})),Rt=at;return Z<0&&ft++,at===a&&(Rt=0,ft+=Z>0?1:-1),{abs:Rt+ft*a*Z,origin:at,rel:Rt}}function G(ot,ft,gt){var Z;if(ft||!Tt())return q(ot,gt);if(!J(ot))return null;var at=C(gt??$),Rt=at.abs,Ft=ot-at.rel,Vt=Rt+Ft;Z=q(Vt);var Qt=q(Vt-a*rs(Ft));return(Qt!==null&&Math.abs(Qt)<Math.abs(Z)||Z===null)&&(Z=Qt),ns(Z)}function q(ot,ft){if(ft==null&&(ft=ns($)),!J(ot)||ot===null)return null;ot=Math.round(ot);var gt=C(ft),Z=gt.abs,at=gt.rel,Rt=gt.origin,Ft=mt(ot),Vt=(ft%t+t)%t,Qt=m[Rt],ae=Math.floor((ot-(Z-at))/a)*t;return ns(Qt-Vt-Qt+m[Ft]+ae+(Rt===a?t:0))}function J(ot){return Q(ot)===ot}function Q(ot){return xn(ot,h,p)}function Tt(){return n.loop}function mt(ot){return(ot%a+a)%a}function Dt(ot){var ft;ft=ot-$,R.push({distance:ft,timestamp:Wr()}),R.length>6&&(R=R.slice(-6)),$=ns(ot);var gt=pt().abs;if(gt!==V){var Z=V!==null;V=gt,Z&&i.emit("slideChanged")}}function pt(ot){var ft=ot?null:function(){if(a){var gt=Tt(),Z=gt?($%t+t)%t:$,at=(gt?$%t:$)-r[0][2],Rt=0-(at<0&&gt?t-Math.abs(at):at),Ft=0,Vt=C($),Qt=Vt.abs,ae=Vt.rel,Ae=r[ae][2],me=r.map(function(Bt,It){var St=Rt+Ft;(St<0-Bt[0]||St>1)&&(St+=(Math.abs(St)>t-1&&gt?t:0)*rs(-St));var qt=It-ae,le=rs(qt),jt=qt+Qt;gt&&(le===-1&&St>Ae&&(jt+=a),le===1&&St<Ae&&(jt-=a),w!==null&&jt<w&&(St+=t),f!==null&&jt>f&&(St-=t));var he=St+Bt[0]+Bt[1],Xt=Math.max(St>=0&&he<=1?1:he<0||St>1?0:St<0?Math.min(1,(Bt[0]+St)/Bt[0]):(1-St)/Bt[0],0);return Ft+=Bt[0]+Bt[1],{abs:jt,distance:n.rtl?-1*St+1-Bt[0]:St,portion:Xt,size:Bt[0]}});return Qt=Q(Qt),ae=mt(Qt),{abs:Q(Qt),length:s,max:v,maxIdx:p,min:g,minIdx:h,position:$,progress:gt?Z/t:$/s,rel:ae,slides:me,slidesLength:t}}}();return o.details=ft,i.emit("detailsChanged"),ft}return o={absToRel:mt,add:L,details:null,distToIdx:D,idxToDist:G,init:function(ot){if(function(){if(n=i.options,r=(n.trackConfig||[]).map(function(at){return[Je(at,"size",1),Je(at,"spacing",0),Je(at,"origin",0)]}),a=r.length){t=ns(r.reduce(function(at,Rt){return at+Rt[0]+Rt[1]},0));var gt,Z=a-1;s=ns(t+r[0][2]-r[Z][0]-r[Z][2]-r[Z][1]),m=r.reduce(function(at,Rt){if(!at)return[0];var Ft=r[at.length-1],Vt=at[at.length-1]+(Ft[0]+Ft[2])+Ft[1];return Vt-=Rt[2],at[at.length-1]>Vt&&(Vt=at[at.length-1]),Vt=ns(Vt),at.push(Vt),(!gt||gt<Vt)&&(l=at.length-1),gt=Vt,at},null),s===0&&(l=0),m.push(ns(t))}}(),!a)return pt(!0);var ft;(function(){var gt=i.options.range,Z=i.options.loop;w=h=Z?Je(Z,"min",-1/0):0,f=p=Z?Je(Z,"max",A):l;var at=Je(gt,"min",null),Rt=Je(gt,"max",null);at!==null&&(h=at),Rt!==null&&(p=Rt),g=h===-1/0?h:i.track.idxToDist(h||0,!0,0),v=p===A?p:G(p,!0,0),Rt===null&&(f=p),Je(gt,"align",!1)&&p!==A&&r[mt(p)][2]===0&&(v-=1-r[mt(p)][0],p=D(v-$)),g=ns(g),v=ns(v)})(),ft=ot,Number(ft)===ft?L(q(Q(ot))):pt()},to:Dt,velocity:function(){var ot=Wr(),ft=R.reduce(function(gt,Z){var at=Z.distance,Rt=Z.timestamp;return ot-Rt>200||(rs(at)!==rs(gt.distance)&&gt.distance&&(gt={distance:0,lastTimestamp:0,time:0}),gt.time&&(gt.distance+=at),gt.lastTimestamp&&(gt.time+=Rt-gt.lastTimestamp),gt.lastTimestamp=Rt),gt},{distance:0,lastTimestamp:0,time:0});return ft.distance/ft.time||0}}}function eh(i){var o,t,s,n,r,a,m,l;function h(V){return 2*V}function p(V){return xn(V,m,l)}function w(V){return 1-Math.pow(1-V,3)}function f(){return s?i.track.velocity():0}function g(){R();var V=i.options.mode==="free-snap",$=i.track,L=f();n=rs(L);var D=i.track.details,C=[];if(L||!V){var G=v(L),q=G.dist,J=G.dur;if(J=h(J),q*=n,V){var Q=$.idxToDist($.distToIdx(q),!0);Q&&(q=Q)}C.push({distance:q,duration:J,easing:w});var Tt=D.position,mt=Tt+q;if(mt<r||mt>a){var Dt=mt<r?r-Tt:a-Tt,pt=0,ot=L;if(rs(Dt)===n){var ft=Math.min(Math.abs(Dt)/Math.abs(q),1),gt=function(Rt){return 1-Math.pow(1-Rt,1/3)}(ft)*J;C[0].earlyExit=gt,ot=L*(1-ft)}else C[0].earlyExit=0,pt+=Dt;var Z=v(ot,100),at=Z.dist*n;i.options.rubberband&&(C.push({distance:at,duration:h(Z.dur),easing:w}),C.push({distance:-at+pt,duration:500,easing:w}))}i.animator.start(C)}else i.moveToIdx(p(D.abs),!0,{duration:500,easing:function(Rt){return 1+--Rt*Rt*Rt*Rt*Rt}})}function v(V,$){$===void 0&&($=1e3);var L=147e-9+(V=Math.abs(V))/$;return{dist:Math.pow(V,2)/L,dur:V/L}}function A(){var V=i.track.details;V&&(r=V.min,a=V.max,m=V.minIdx,l=V.maxIdx)}function R(){i.animator.stop()}i.on("updated",A),i.on("optionsChanged",A),i.on("created",A),i.on("dragStarted",function(){s=!1,R(),o=t=i.track.details.abs}),i.on("dragChecked",function(){s=!0}),i.on("dragEnded",function(){var V=i.options.mode;V==="snap"&&function(){var $=i.track,L=i.track.details,D=L.position,C=rs(f());(D>a||D<r)&&(C=0);var G=o+C;L.slides[$.absToRel(G)].portion===0&&(G-=C),o!==t&&(G=t),rs($.idxToDist(G,!0))!==C&&(G+=C),G=p(G);var q=$.idxToDist(G,!0);i.animator.start([{distance:q,duration:500,easing:function(J){return 1+--J*J*J*J*J}}])}(),V!=="free"&&V!=="free-snap"||g()}),i.on("dragged",function(){t=i.track.details.abs})}function sh(i){var o,t,s,n,r,a,m,l,h,p,w,f,g,v,A,R,V,$,L=Xr();function D(pt){if(a&&l===pt.id){var ot=J(pt);if(h){if(!q(pt))return G(pt);p=ot,h=!1,i.emit("dragChecked")}if(R)return p=ot;ai(pt);var ft=function(Z){if(V===-1/0&&$===1/0)return Z;var at=i.track.details,Rt=at.length,Ft=at.position,Vt=xn(Z,V-Ft,$-Ft);if(Rt===0)return 0;if(!i.options.rubberband)return Vt;if(Ft<=$&&Ft>=V||Ft<V&&t>0||Ft>$&&t<0)return Z;var Qt=(Ft<V?Ft-V:Ft-$)/Rt,ae=n*Rt,Ae=Math.abs(Qt*ae),me=Math.max(0,1-Ae/r*2);return me*me*Z}(m(p-ot)/n*s);t=rs(ft);var gt=i.track.details.position;(gt>V&&gt<$||gt===V&&t>0||gt===$&&t<0)&&oi(pt),w+=ft,!f&&Math.abs(w*n)>5&&(f=!0),i.track.add(ft),p=ot,i.emit("dragged")}}function C(pt){!a&&i.track.details&&i.track.details.length&&(w=0,a=!0,f=!1,h=!0,l=pt.id,q(pt),p=J(pt),i.emit("dragStarted"))}function G(pt){a&&l===pt.idChanged&&(a=!1,i.emit("dragEnded"))}function q(pt){var ot=Q(),ft=ot?pt.y:pt.x,gt=ot?pt.x:pt.y,Z=g!==void 0&&v!==void 0&&Math.abs(v-gt)<=Math.abs(g-ft);return g=ft,v=gt,Z}function J(pt){return Q()?pt.y:pt.x}function Q(){return i.options.vertical}function Tt(){n=i.size,r=Q()?window.innerHeight:window.innerWidth;var pt=i.track.details;pt&&(V=pt.min,$=pt.max)}function mt(pt){f&&(oi(pt),ai(pt))}function Dt(){if(L.purge(),i.options.drag&&!i.options.disabled){var pt;pt=i.options.dragSpeed||1,m=typeof pt=="function"?pt:function(ft){return ft*pt},s=i.options.rtl?-1:1,Tt(),o=i.container,function(){var ft="data-keen-slider-clickable";Oi("[".concat(ft,"]:not([").concat(ft,"=false])"),o).map(function(gt){L.add(gt,"dragstart",oi),L.add(gt,"mousedown",oi),L.add(gt,"touchstart",oi)})}(),L.add(o,"dragstart",function(ft){ai(ft)}),L.add(o,"click",mt,{capture:!0}),L.input(o,"ksDragStart",C),L.input(o,"ksDrag",D),L.input(o,"ksDragEnd",G),L.input(o,"mousedown",C),L.input(o,"mousemove",D),L.input(o,"mouseleave",G),L.input(o,"mouseup",G),L.input(o,"touchstart",C,{passive:!0}),L.input(o,"touchmove",D,{passive:!1}),L.input(o,"touchend",G),L.input(o,"touchcancel",G),L.add(window,"wheel",function(ft){a&&ai(ft)});var ot="data-keen-slider-scrollable";Oi("[".concat(ot,"]:not([").concat(ot,"=false])"),i.container).map(function(ft){return function(gt){var Z;L.input(gt,"touchstart",function(at){Z=J(at),R=!0,A=!0},{passive:!0}),L.input(gt,"touchmove",function(at){var Rt=Q(),Ft=Rt?gt.scrollHeight-gt.clientHeight:gt.scrollWidth-gt.clientWidth,Vt=Z-J(at),Qt=Rt?gt.scrollTop:gt.scrollLeft,ae=Rt&&gt.style.overflowY==="scroll"||!Rt&&gt.style.overflowX==="scroll";if(Z=J(at),(Vt<0&&Qt>0||Vt>0&&Qt<Ft)&&A&&ae)return R=!0;A=!1,ai(at),R=!1}),L.input(gt,"touchend",function(){R=!1})}(ft)})}}i.on("updated",Tt),i.on("optionsChanged",Dt),i.on("created",Dt),i.on("destroyed",L.purge)}function ih(i){var o,t,s=null;function n(g,v,A){i.animator.active?a(g,v,A):requestAnimationFrame(function(){return a(g,v,A)})}function r(){n(!1,!1,t)}function a(g,v,A){var R=0,V=i.size,$=i.track.details;if($&&o){var L=$.slides;o.forEach(function(D,C){if(g)!s&&v&&l(D,null,A),h(D,null,A);else{if(!L[C])return;var G=L[C].size*V;!s&&v&&l(D,G,A),h(D,L[C].distance*V-R,A),R+=G}})}}function m(g){return i.options.renderMode==="performance"?Math.round(g):g}function l(g,v,A){var R=A?"height":"width";v!==null&&(v=m(v)+"px"),g.style["min-"+R]=v,g.style["max-"+R]=v}function h(g,v,A){if(v!==null){v=m(v);var R=A?v:0;v="translate3d(".concat(A?0:v,"px, ").concat(R,"px, 0)")}g.style.transform=v,g.style["-webkit-transform"]=v}function p(){o&&(a(!0,!0,t),o=null),i.on("detailsChanged",r,!0)}function w(){n(!1,!0,t)}function f(){p(),t=i.options.vertical,i.options.disabled||i.options.renderMode==="custom"||(s=Je(i.options.slides,"perView",null)==="auto",i.on("detailsChanged",r),(o=i.slides).length&&w())}i.on("created",f),i.on("optionsChanged",f),i.on("beforeOptionsChanged",function(){p()}),i.on("updated",w),i.on("destroyed",p)}function nh(i,o){return function(t){var s,n,r,a,m,l=Xr();function h(q){var J;En(t.container,"reverse",(J=t.container,window.getComputedStyle(J,null).getPropertyValue("direction")!=="rtl"||q?null:"")),En(t.container,"v",t.options.vertical&&!q?"":null),En(t.container,"disabled",t.options.disabled&&!q?"":null)}function p(){w()&&R()}function w(){var q=null;if(a.forEach(function(Q){Q.matches&&(q=Q.__media)}),q===s)return!1;s||t.emit("beforeOptionsChanged"),s=q;var J=q?r.breakpoints[q]:r;return t.options=$s($s({},r),J),h(),C(),G(),$(),!0}function f(q){var J=Kr(q);return(t.options.vertical?J.height:J.width)/t.size||1}function g(){return t.options.trackConfig.length}function v(q){for(var J in s=!1,r=$s($s({},o),q),l.purge(),n=t.size,a=[],r.breakpoints||[]){var Q=window.matchMedia(J);Q.__media=J,a.push(Q),l.add(Q,"change",p)}l.add(window,"orientationchange",D),l.add(window,"resize",L),w()}function A(q){t.animator.stop();var J=t.track.details;t.track.init(q??(J?J.abs:0))}function R(q){A(q),t.emit("optionsChanged")}function V(q,J){if(q)return v(q),void R(J);C(),G();var Q=g();$(),g()!==Q?R(J):A(J),t.emit("updated")}function $(){var q=t.options.slides;if(typeof q=="function")return t.options.trackConfig=q(t.size,t.slides);for(var J=t.slides,Q=J.length,Tt=typeof q=="number"?q:Je(q,"number",Q,!0),mt=[],Dt=Je(q,"perView",1,!0),pt=Je(q,"spacing",0,!0)/t.size||0,ot=Dt==="auto"?pt:pt/Dt,ft=Je(q,"origin","auto"),gt=0,Z=0;Z<Tt;Z++){var at=Dt==="auto"?f(J[Z]):1/Dt-pt+ot,Rt=ft==="center"?.5-at/2:ft==="auto"?0:ft;mt.push({origin:Rt,size:at,spacing:pt}),gt+=at}if(gt+=pt*(Tt-1),ft==="auto"&&!t.options.loop&&Dt!==1){var Ft=0;mt.map(function(Vt){var Qt=gt-Ft;return Ft+=Vt.size+pt,Qt>=1||(Vt.origin=1-Qt-(gt>1?0:1-gt)),Vt})}t.options.trackConfig=mt}function L(){C();var q=t.size;t.options.disabled||q===n||(n=q,V())}function D(){L(),setTimeout(L,500),setTimeout(L,2e3)}function C(){var q=Kr(t.container);t.size=(t.options.vertical?q.height:q.width)||1}function G(){t.slides=Oi(t.options.selector,t.container)}t.container=(m=Oi(i,document)).length?m[0]:null,t.destroy=function(){l.purge(),t.emit("destroyed"),h(!0)},t.prev=function(){t.moveToIdx(t.track.details.abs-1,!0)},t.next=function(){t.moveToIdx(t.track.details.abs+1,!0)},t.update=V,v(t.options)}}var Yr=function(i,o,t){try{return function(s,n){var r,a={};return r={emit:function(m){a[m]&&a[m].forEach(function(h){h(r)});var l=r.options&&r.options[m];l&&l(r)},moveToIdx:function(m,l,h){var p=r.track.idxToDist(m,l);if(p){var w=r.options.defaultAnimation;r.animator.start([{distance:p,duration:Je(h||w,"duration",500),easing:Je(h||w,"easing",function(f){return 1+--f*f*f*f*f})}])}},on:function(m,l,h){h===void 0&&(h=!1),a[m]||(a[m]=[]);var p=a[m].indexOf(l);p>-1?h&&delete a[m][p]:h||a[m].push(l)},options:s},function(){if(r.track=th(r),r.animator=Zo(r),n)for(var m=0,l=n;m<l.length;m++)(0,l[m])(r);r.track.init(r.options.initial||0),r.emit("created")}(),r}(o,qr([nh(i,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),ih,sh,eh],t||[],!0))}catch(s){console.error(s)}};function rh(i){return o=>{function t(){i.forEach(s=>{s.addEventListener("click",()=>{o.moveToIdx(Number(s.dataset.target)),i.forEach(n=>{n.dataset.target!=s.dataset.target?n.classList.remove("slider-thumbnail__img_active"):n.classList.add("slider-thumbnail__img_active")})})})}o.on("created",()=>{t()}),o.on("animationEnded",()=>{const s=o.track.details.rel;i.forEach(n=>{n.dataset.target==s?n.classList.add("slider-thumbnail__img_active"):n.classList.remove("slider-thumbnail__img_active")})})}}function ah(i){let o,t,s,n,r,a,m;function l(A){g(A),f(A),w(A)}function h(A){A.parentNode.removeChild(A)}function p(A){var R=document.createElement("div"),V=A.split(" ");return V.forEach($=>R.classList.add($)),R}function w(A){try{if(A){h(n),h(r),h(s);return}s=p("arrow-wrapper"),n=p("arrow arrow__left"),n.addEventListener("click",()=>i.prev()),r=p("arrow arrow__right"),r.addEventListener("click",()=>i.next()),a.appendChild(s),s.appendChild(n),s.appendChild(r)}catch{m++,m<5&&w(A)}}function f(A){try{if(A){h(t);return}t=p("dots"),i.track.details.slides.forEach((R,V)=>{var $=p("dot");$.addEventListener("click",()=>i.moveToIdx(V)),t.appendChild($)}),a.appendChild(t)}catch{m++,m<5&&f(A)}}function g(A){if(A){for(var R=o.parentNode;o.firstChild;)R.insertBefore(o.firstChild,o);h(o);return}o=p("navigation-wrapper"),a=i.container.parentNode.parentNode.querySelector(".card-list__bottom"),i.container.parentNode.appendChild(o),o.appendChild(i.container)}function v(){var A=i.track.details.rel;A===0?n.classList.add("arrow_disabled"):n.classList.remove("arrow_disabled"),A===i.track.details.slides.length-1?r.classList.add("arrow_disabled"):r.classList.remove("arrow_disabled"),Array.from(t.children).forEach(function(R,V){V===A?R.classList.add("dot_active"):R.classList.remove("dot_active")})}i.on("created",()=>{l(),v()}),i.on("optionsChanged",()=>{l(!0),l(),v()}),i.on("slideChanged",()=>{v()}),i.on("destroyed",()=>{l(!0)})}document.querySelectorAll('[data-role="slider"]').forEach(i=>{const o=i.querySelector(".slider"),t=i.querySelectorAll('[data-role="slider-thumbnail"]');new Yr(o,{slides:{perView:1},defaultAnimation:{duration:0}},[rh(t)])});const Hi=document.querySelector(".card-list__content .slider"),zs={bs:16,sm:16},Jr=341;Hi&&new Yr(Hi,{slides:{origin:"auto",perView:()=>(Hi.offsetWidth+zs.bs)/(Jr+zs.bs),spacing:zs.bs},breakpoints:{"(max-width: 576px)":{slides:{origin:"center",perView:()=>(Hi.offsetWidth+zs.sm)/(Jr+zs.sm),spacing:zs.sm}}}},[ah]);const Sn="toggle-section__button_is_active",Tn="toggle-section__item_is_show";document.querySelectorAll('[data-role="toggle-section"]').forEach(i=>{i.querySelectorAll("button").forEach(o=>o.addEventListener("click",()=>{document.querySelector(`button.${Sn}`).classList.remove(Sn),o.classList.add(Sn);const t=document.querySelector(o.dataset.target),s=document.querySelector(`.${Tn}`);t&&s&&(s.classList.remove(Tn),t.classList.add(Tn))}))}),document.querySelectorAll('[data-role="zengin-input"]').forEach(i=>{i.addEventListener("blur",oh)});function oh(i){let o=i.target.value;if(o){const t=hh(o);i.target.value=t}}function hh(i){const o=/[^0-9A-Zｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝﾞﾟ\(\)｢｣\/\-\.\\ ]/g,t=["\uFF70","\uFF67","\uFF68","\uFF69","\uFF6A","\uFF6B","\uFF6F","\uFF6C","\uFF6D","\uFF6E","\uFF08","\uFF09"],s=["-","\uFF71","\uFF72","\uFF73","\uFF74","\uFF75","\uFF82","\uFF94","\uFF95","\uFF96","(",")"];let n;return n=i.toUpperCase(),n=lh(n,"khsa"),t.forEach((r,a)=>{n=n.replaceAll(r,s[a])}),n=n.replace(o,""),n}function lh(i,o){var t,s,n,r,a,m;if(t=["\uFF76\uFF9E","\uFF77\uFF9E","\uFF78\uFF9E","\uFF79\uFF9E","\uFF7A\uFF9E","\uFF7B\uFF9E","\uFF7C\uFF9E","\uFF7D\uFF9E","\uFF7E\uFF9E","\uFF7F\uFF9E","\uFF80\uFF9E","\uFF81\uFF9E","\uFF82\uFF9E","\uFF83\uFF9E","\uFF84\uFF9E","\uFF8A\uFF9E","\uFF8A\uFF9F","\uFF8B\uFF9E","\uFF8B\uFF9F","\uFF8C\uFF9E","\uFF8C\uFF9F","\uFF8D\uFF9E","\uFF8D\uFF9F","\uFF8E\uFF9E","\uFF8E\uFF9F","\uFF73\uFF9E","\uFF70","\uFF67","\uFF71","\uFF68","\uFF72","\uFF69","\uFF73","\uFF6A","\uFF74","\uFF6B","\uFF75","\uFF76","\uFF77","\uFF78","\uFF79","\uFF7A","\uFF7B","\uFF7C","\uFF7D","\uFF7E","\uFF7F","\uFF80","\uFF81","\uFF6F","\uFF82","\uFF83","\uFF84","\uFF85","\uFF86","\uFF87","\uFF88","\uFF89","\uFF8A","\uFF8B","\uFF8C","\uFF8D","\uFF8E","\uFF8F","\uFF90","\uFF91","\uFF92","\uFF93","\uFF6C","\uFF94","\uFF6D","\uFF95","\uFF6E","\uFF96","\uFF97","\uFF98","\uFF99","\uFF9A","\uFF9B","\uFF9C","\uFF66","\uFF9D","\uFF76","\uFF79","\uFF9C","\uFF72","\uFF74","\uFF9E","\uFF9F"],s=["\u30AC","\u30AE","\u30B0","\u30B2","\u30B4","\u30B6","\u30B8","\u30BA","\u30BC","\u30BE","\u30C0","\u30C2","\u30C5","\u30C7","\u30C9","\u30D0","\u30D1","\u30D3","\u30D4","\u30D6","\u30D7","\u30D9","\u30DA","\u30DC","\u30DD","\u30F4","\u30FC","\u30A1","\u30A2","\u30A3","\u30A4","\u30A5","\u30A6","\u30A7","\u30A8","\u30A9","\u30AA","\u30AB","\u30AD","\u30AF","\u30B1","\u30B3","\u30B5","\u30B7","\u30B9","\u30BB","\u30BD","\u30BF","\u30C1","\u30C3","\u30C4","\u30C6","\u30C8","\u30CA","\u30CB","\u30CC","\u30CD","\u30CE","\u30CF","\u30D2","\u30D5","\u30D8","\u30DB","\u30DE","\u30DF","\u30E0","\u30E1","\u30E2","\u30E3","\u30E4","\u30E5","\u30E6","\u30E7","\u30E8","\u30E9","\u30EA","\u30EB","\u30EC","\u30ED","\u30EF","\u30F2","\u30F3","\u30F5","\u30F6","\u30EE","\u30F0","\u30F1","\u309B","\u309C"],n=["\u304C","\u304E","\u3050","\u3052","\u3054","\u3056","\u3058","\u305A","\u305C","\u305E","\u3060","\u3062","\u3065","\u3067","\u3069","\u3070","\u3071","\u3073","\u3074","\u3076","\u3077","\u3079","\u307A","\u307C","\u307D","\u30F4","\u30FC","\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304A","\u304B","\u304D","\u304F","\u3051","\u3053","\u3055","\u3057","\u3059","\u305B","\u305D","\u305F","\u3061","\u3063","\u3064","\u3066","\u3068","\u306A","\u306B","\u306C","\u306D","\u306E","\u306F","\u3072","\u3075","\u3078","\u307B","\u307E","\u307F","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308A","\u308B","\u308C","\u308D","\u308F","\u3092","\u3093","\u304B","\u3051","\u308E","\u3090","\u3091","\u309B","\u309C"],r=t.length,o.match(/[ra]/)&&(i=i.replace(/[Ａ-ｚ]/g,function(l){return String.fromCharCode(parseInt(l.charCodeAt(0))-65248)})),o.match(/[RA]/)&&(i=i.replace(/[A-z]/g,function(l){return String.fromCharCode(parseInt(l.charCodeAt(0))+65248)})),o.match(/[na]/)&&(i=i.replace(/[０-９]/g,function(l){return String.fromCharCode(parseInt(l.charCodeAt(0))-65248)})),o.match(/[NA]/)&&(i=i.replace(/[0-9]/g,function(l){return String.fromCharCode(parseInt(l.charCodeAt(0))+65248)})),o.match(/s/)&&(i=i.replace(/　/g," ")),o.match(/S/)&&(i=i.replace(/ /g,"\u3000")),o.match(/k/))for(a=0;a<r;a++)m=new RegExp(s[a],"g"),i=i.replace(m,t[a]);if(o.match(/K/))for(o.match(/V/)||(i=i.replace(/ﾞ/g,"\u309B"),i=i.replace(/ﾟ/g,"\u309C")),a=0;a<r;a++)m=new RegExp(t[a],"g"),i=i.replace(m,s[a]);if(o.match(/h/))for(a=0;a<r;a++)m=new RegExp(n[a],"g"),i=i.replace(m,t[a]);if(o.match(/H/))for(o.match(/V/)||(i=i.replace(/ﾞ/g,"\u309B"),i=i.replace(/ﾟ/g,"\u309C")),a=0;a<r;a++)m=new RegExp(t[a],"g"),i=i.replace(m,n[a]);if(o.match(/c/))for(a=0;a<r;a++)m=new RegExp(s[a],"g"),i=i.replace(m,n[a]);if(o.match(/C/))for(a=0;a<r;a++)m=new RegExp(n[a],"g"),i=i.replace(m,s[a]);return i}const Qr=["jpg","jpeg","png","webp"],ch=256,dh=document.querySelectorAll('[data-role="resize"]');window.addEventListener("load",()=>{dh.forEach(i=>{var D;const o=i.dataset.field,t=document.querySelector(`[name="fileInfoWrap${o}"]`),s=document.querySelector(`[name="fileInfoBlock${o}"]`),n=document.querySelector(`[name="uploadFilesBlock${o}"]`),r=t.querySelector('[name="dropArea"]'),a=document.querySelector(`input[name='selectFiles${o}']`),m=document.querySelector(`[name="addFile-sm${o}"]`),l=m.parentNode,h=(((D=Array.from(t.querySelectorAll(".sp-form-noted")).find(C=>/^(ファイルサイズ上限:).*(.iB)$/.test(C.textContent)))==null?void 0:D.textContent)??"600 K").replaceAll(/(ファイルサイズ上限:|iB)/g,"").trim(),p=document.querySelector(`[data-role="display-upload-image"][data-target="display-${o}"]`),w=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),v=document.createElement("p"),A=document.createElement("button"),R=document.createElement("input"),V=document.createElement("button"),$=()=>{A.textContent="\u30D5\u30A1\u30A4\u30EB\u53C2\u7167",A.classList.remove("loading"),A.disabled=!1,V.textContent="\u30D5\u30A1\u30A4\u30EB\u53C2\u7167",V.classList.remove("loading"),V.disabled=!1},L=C=>{C.length>0&&(A.textContent="",A.classList.add("loading"),A.disabled=!0,V.textContent="",V.classList.add("loading"),V.disabled=!0,uh(C[0],a,p,h,$))};if(R.setAttribute("type","file"),R.style.display="none",R.addEventListener("change",C=>L(C.target.files)),f.appendChild(w),f.classList.add("coverDiv"),f.addEventListener("dragover",Cn),f.addEventListener("dragstart",C=>{C.dataTransfer.clearData(),Cn(C)}),f.addEventListener("drop",C=>{Cn(C);const G=C.target.files||C.dataTransfer.files;L(G)}),w.appendChild(g),w.classList.add("sp-flex-align-center","sp-flex-content-center","sp-flex","sp-from-file-default-drag-drop-area"),w.addEventListener("dragover",C=>{w.classList.remove("sp-from-file-ondragleave-drag-drop-area"),w.classList.remove("sp-from-file-ondrop-drag-drop-area"),w.classList.add("sp-from-file-ondraghover-drag-drop-area")}),w.addEventListener("dragleave",C=>{w.classList.add("sp-from-file-ondragleave-drag-drop-area"),w.classList.remove("sp-from-file-ondrop-drag-drop-area"),w.classList.remove("sp-from-file-ondraghover-drag-drop-area")}),w.addEventListener("drop",C=>{w.classList.remove("sp-from-file-ondragleave-drag-drop-area"),w.classList.add("sp-from-file-ondrop-drag-drop-area"),w.classList.remove("sp-from-file-ondraghover-drag-drop-area")}),g.appendChild(v),g.appendChild(A),g.appendChild(R),v.textContent="\u3053\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",v.classList.add("small"),A.type="button",A.textContent="\u30D5\u30A1\u30A4\u30EB\u53C2\u7167",A.classList.add("sp-form-file-button"),A.addEventListener("click",()=>R.click()),V.type="button",V.textContent="\u30D5\u30A1\u30A4\u30EB\u53C2\u7167",V.classList.add("sp-form-file-button"),V.style.position="absolute",V.style.top="0px",V.addEventListener("click",()=>R.click()),R.accept=Qr.map(C=>`.${C}`).join(","),r.style.visibility="hidden",n.style.position="relative",n.appendChild(f),m.disabled=!0,m.style.visibility="hidden",l.style.position="relative",l.appendChild(V),s){const C=s.querySelector('i[name="removeFileInfo"]');C&&C.addEventListener("click",()=>p.innerHTML=null);const G=(q=[],J=void 0)=>{let Q;for(const Tt of q){if(Q)break;for(const mt of Tt.addedNodes)mt.nodeType===Node.ELEMENT_NODE&&(Q=mt.querySelector('i[name="removeFileInfo"]'))}Q&&Q.addEventListener("click",()=>p.innerHTML=null)};new MutationObserver(G).observe(s,{childList:!0,subtree:!0})}})});function Cn(i){i.stopPropagation(),i.preventDefault()}async function uh(i,o,t,s,n){if(!o)throw new Error("spiral input not found");if(!i)return;const r=ph(i),a=i.name.split(".").slice(0,-1).join(".");let m=new FileReader;const l=r&&await new Promise((w,f)=>{m.onload=async()=>{const g=m.result,v=1312,A=fh(s),R=await new Promise((q,J)=>{const Q=new Image;Q.onload=()=>q(Q),Q.onerror=()=>J(),Q.src=g});let V=R.naturalWidth,$=R.naturalHeight;const L=$/V;(V>v||$>$*v/V)&&($=v*L,V=v);let D=1;const C=.6,G=await new Promise((q,J)=>{function Q(){const Tt=document.createElement("canvas");Tt.width=V,Tt.height=$,Tt.getContext("2d").drawImage(R,0,0,V,$);function mt(){Tt.toBlob(Dt=>{if(!Dt)return J(new Error("Blob creation failed"));Dt.size>A?(D=Math.max(D-.1,C),D===C?(D=10,V-=10,$=V*L,V*$<=0&&q(Dt),Q()):mt()):q(Dt)},"image/jpeg",D)}mt()}Q()});w({file:new File([G],`${a}.jpeg`,{type:"image/jpeg"}),url:URL.createObjectURL(G)})},m.readAsDataURL(i)}),h=r?l.file:i,p=new DataTransfer;if(p.items.add(h),o.files=p.files,o.dispatchEvent(new Event("change")),t&&r){t.innerHTML=null;const w=document.createElement("img");w.addEventListener("load",()=>{t.appendChild(w)}),w.src=l.url}n()}function ph(i){const o=Qr.map(s=>`image/${s}`).join("|"),t=new RegExp(`^(${o})$`);return!(!i.type.match(t)||i.name>ch)}function fh(i){const o={K:1024,M:1048576},[t,s]=i.split(" ");if(!o[s]||isNaN(t))throw new Error(`Invalid file size: ${i}`);return Number(t)*o[s]}document.querySelectorAll('[data-role="toggle-input--btn"]').forEach(i=>{i.addEventListener("click",o=>{const t=o.target.dataset.group;document.querySelectorAll(`[data-group="${t}"][data-role="toggle-input--value"], [data-group="${t}"][data-role="toggle-input--input"]`).forEach(s=>{s.classList.toggle("toggle-input_show")})})})})();
